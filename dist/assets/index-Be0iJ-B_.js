const $l=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return er},get Circle(){return eE},get Ellipse(){return rE},get Image(){return iE},get Line(){return aE},get Marker(){return sE},get Path(){return Gf},get Polygon(){return bE},get Polyline(){return xE},get Rect(){return ME},get Text(){return CE}},Symbol.toStringTag,{value:"Module"}));(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();function ql(r){const t=Object.create(null);for(const e of r.split(","))t[e]=1;return e=>e in t}const Rt={},ai=[],cr=()=>{},kv=()=>!1,ds=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),Gl=r=>r.startsWith("onUpdate:"),be=Object.assign,Kl=(r,t)=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)},_y=Object.prototype.hasOwnProperty,Lt=(r,t)=>_y.call(r,t),Mt=Array.isArray,oi=r=>vs(r)==="[object Map]",Ov=r=>vs(r)==="[object Set]",Ct=r=>typeof r=="function",re=r=>typeof r=="string",sn=r=>typeof r=="symbol",Gt=r=>r!==null&&typeof r=="object",Iv=r=>(Gt(r)||Ct(r))&&Ct(r.then)&&Ct(r.catch),Pv=Object.prototype.toString,vs=r=>Pv.call(r),Ly=r=>vs(r).slice(8,-1),Tv=r=>vs(r)==="[object Object]",Zl=r=>re(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Ki=ql(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ps=r=>{const t=Object.create(null);return(e=>t[e]||(t[e]=r(e)))},By=/-\w/g,en=ps(r=>r.replace(By,t=>t.slice(1).toUpperCase())),Dy=/\B([A-Z])/g,Yn=ps(r=>r.replace(Dy,"-$1").toLowerCase()),Nv=ps(r=>r.charAt(0).toUpperCase()+r.slice(1)),Ws=ps(r=>r?`on${Nv(r)}`:""),Qr=(r,t)=>!Object.is(r,t),wo=(r,...t)=>{for(let e=0;e<r.length;e++)r[e](...t)},_v=(r,t,e,n=!1)=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!1,writable:n,value:e})},Ql=r=>{const t=parseFloat(r);return isNaN(t)?r:t};let oc;const gs=()=>oc||(oc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jl(r){if(Mt(r)){const t={};for(let e=0;e<r.length;e++){const n=r[e],i=re(n)?Xy(n):Jl(n);if(i)for(const a in i)t[a]=i[a]}return t}else if(re(r)||Gt(r))return r}const Fy=/;(?![^(]*\))/g,Ry=/:([^]+)/,zy=/\/\*[^]*?\*\//g;function Xy(r){const t={};return r.replace(zy,"").split(Fy).forEach(e=>{if(e){const n=e.split(Ry);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function tf(r){let t="";if(re(r))t=r;else if(Mt(r))for(let e=0;e<r.length;e++){const n=tf(r[e]);n&&(t+=n+" ")}else if(Gt(r))for(const e in r)r[e]&&(t+=e+" ");return t.trim()}const Yy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jy=ql(Yy);function Lv(r){return!!r||r===""}const Bv=r=>!!(r&&r.__v_isRef===!0),Dv=r=>re(r)?r:r==null?"":Mt(r)||Gt(r)&&(r.toString===Pv||!Ct(r.toString))?Bv(r)?Dv(r.value):JSON.stringify(r,Fv,2):String(r),Fv=(r,t)=>Bv(t)?Fv(r,t.value):oi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,i],a)=>(e[Us(n,a)+" =>"]=i,e),{})}:Ov(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Us(e))}:sn(t)?Us(t):Gt(t)&&!Mt(t)&&!Tv(t)?String(t):t,Us=(r,t="")=>{var e;return sn(r)?`Symbol(${(e=r.description)!=null?e:t})`:r};let Me;class Hy{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Me,!t&&Me&&(this.index=(Me.scopes||(Me.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Me;try{return Me=this,t()}finally{Me=e}}}on(){++this._on===1&&(this.prevScope=Me,Me=this)}off(){this._on>0&&--this._on===0&&(Me=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(this.effects.length=0,e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Vy(){return Me}let Vt;const $s=new WeakSet;class Rv{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Me&&Me.active&&Me.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$s.has(this)&&($s.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,sc(this),Yv(this);const t=Vt,e=Ke;Vt=this,Ke=!0;try{return this.fn()}finally{jv(this),Vt=t,Ke=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)nf(t);this.deps=this.depsTail=void 0,sc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$s.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vu(this)&&this.run()}get dirty(){return Vu(this)}}let zv=0,Zi,Qi;function Xv(r,t=!1){if(r.flags|=8,t){r.next=Qi,Qi=r;return}r.next=Zi,Zi=r}function ef(){zv++}function rf(){if(--zv>0)return;if(Qi){let t=Qi;for(Qi=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let r;for(;Zi;){let t=Zi;for(Zi=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){r||(r=n)}t=e}}if(r)throw r}function Yv(r){for(let t=r.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function jv(r){let t,e=r.depsTail,n=e;for(;n;){const i=n.prevDep;n.version===-1?(n===e&&(e=i),nf(n),Wy(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}r.deps=t,r.depsTail=e}function Vu(r){for(let t=r.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Hv(t.dep.computed)||t.dep.version!==t.version))return!0;return!!r._dirty}function Hv(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===ua)||(r.globalVersion=ua,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!Vu(r))))return;r.flags|=2;const t=r.dep,e=Vt,n=Ke;Vt=r,Ke=!0;try{Yv(r);const i=r.fn(r._value);(t.version===0||Qr(i,r._value))&&(r.flags|=128,r._value=i,t.version++)}catch(i){throw t.version++,i}finally{Vt=e,Ke=n,jv(r),r.flags&=-3}}function nf(r,t=!1){const{dep:e,prevSub:n,nextSub:i}=r;if(n&&(n.nextSub=i,r.prevSub=void 0),i&&(i.prevSub=n,r.nextSub=void 0),e.subs===r&&(e.subs=n,!n&&e.computed)){e.computed.flags&=-5;for(let a=e.computed.deps;a;a=a.nextDep)nf(a,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Wy(r){const{prevDep:t,nextDep:e}=r;t&&(t.nextDep=e,r.prevDep=void 0),e&&(e.prevDep=t,r.nextDep=void 0)}let Ke=!0;const Vv=[];function Or(){Vv.push(Ke),Ke=!1}function Ir(){const r=Vv.pop();Ke=r===void 0?!0:r}function sc(r){const{cleanup:t}=r;if(r.cleanup=void 0,t){const e=Vt;Vt=void 0;try{t()}finally{Vt=e}}}let ua=0;class Uy{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class af{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Vt||!Ke||Vt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Vt)e=this.activeLink=new Uy(Vt,this),Vt.deps?(e.prevDep=Vt.depsTail,Vt.depsTail.nextDep=e,Vt.depsTail=e):Vt.deps=Vt.depsTail=e,Wv(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const n=e.nextDep;n.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=n),e.prevDep=Vt.depsTail,e.nextDep=void 0,Vt.depsTail.nextDep=e,Vt.depsTail=e,Vt.deps===e&&(Vt.deps=n)}return e}trigger(t){this.version++,ua++,this.notify(t)}notify(t){ef();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{rf()}}}function Wv(r){if(r.dep.sc++,r.sub.flags&4){const t=r.dep.computed;if(t&&!r.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Wv(n)}const e=r.dep.subs;e!==r&&(r.prevSub=e,e&&(e.nextSub=r)),r.dep.subs=r}}const Wu=new WeakMap,kn=Symbol(""),Uu=Symbol(""),la=Symbol("");function ce(r,t,e){if(Ke&&Vt){let n=Wu.get(r);n||Wu.set(r,n=new Map);let i=n.get(e);i||(n.set(e,i=new af),i.map=n,i.key=e),i.track()}}function wr(r,t,e,n,i,a){const o=Wu.get(r);if(!o){ua++;return}const s=u=>{u&&u.trigger()};if(ef(),t==="clear")o.forEach(s);else{const u=Mt(r),l=u&&Zl(e);if(u&&e==="length"){const c=Number(n);o.forEach((h,d)=>{(d==="length"||d===la||!sn(d)&&d>=c)&&s(h)})}else switch((e!==void 0||o.has(void 0))&&s(o.get(e)),l&&s(o.get(la)),t){case"add":u?l&&s(o.get("length")):(s(o.get(kn)),oi(r)&&s(o.get(Uu)));break;case"delete":u||(s(o.get(kn)),oi(r)&&s(o.get(Uu)));break;case"set":oi(r)&&s(o.get(kn));break}}rf()}function Zn(r){const t=_t(r);return t===r?t:(ce(t,"iterate",la),Ze(r)?t:t.map(Pr))}function of(r){return ce(r=_t(r),"iterate",la),r}function Yr(r,t){return rn(r)?si(r)?fa(Pr(t)):fa(t):Pr(t)}const $y={__proto__:null,[Symbol.iterator](){return qs(this,Symbol.iterator,r=>Yr(this,r))},concat(...r){return Zn(this).concat(...r.map(t=>Mt(t)?Zn(t):t))},entries(){return qs(this,"entries",r=>(r[1]=Yr(this,r[1]),r))},every(r,t){return yr(this,"every",r,t,void 0,arguments)},filter(r,t){return yr(this,"filter",r,t,e=>e.map(n=>Yr(this,n)),arguments)},find(r,t){return yr(this,"find",r,t,e=>Yr(this,e),arguments)},findIndex(r,t){return yr(this,"findIndex",r,t,void 0,arguments)},findLast(r,t){return yr(this,"findLast",r,t,e=>Yr(this,e),arguments)},findLastIndex(r,t){return yr(this,"findLastIndex",r,t,void 0,arguments)},forEach(r,t){return yr(this,"forEach",r,t,void 0,arguments)},includes(...r){return Gs(this,"includes",r)},indexOf(...r){return Gs(this,"indexOf",r)},join(r){return Zn(this).join(r)},lastIndexOf(...r){return Gs(this,"lastIndexOf",r)},map(r,t){return yr(this,"map",r,t,void 0,arguments)},pop(){return Oi(this,"pop")},push(...r){return Oi(this,"push",r)},reduce(r,...t){return uc(this,"reduce",r,t)},reduceRight(r,...t){return uc(this,"reduceRight",r,t)},shift(){return Oi(this,"shift")},some(r,t){return yr(this,"some",r,t,void 0,arguments)},splice(...r){return Oi(this,"splice",r)},toReversed(){return Zn(this).toReversed()},toSorted(r){return Zn(this).toSorted(r)},toSpliced(...r){return Zn(this).toSpliced(...r)},unshift(...r){return Oi(this,"unshift",r)},values(){return qs(this,"values",r=>Yr(this,r))}};function qs(r,t,e){const n=of(r),i=n[t]();return n!==r&&!Ze(r)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.done||(a.value=e(a.value)),a}),i}const qy=Array.prototype;function yr(r,t,e,n,i,a){const o=of(r),s=o!==r&&!Ze(r),u=o[t];if(u!==qy[t]){const h=u.apply(r,a);return s?Pr(h):h}let l=e;o!==r&&(s?l=function(h,d){return e.call(this,Yr(r,h),d,r)}:e.length>2&&(l=function(h,d){return e.call(this,h,d,r)}));const c=u.call(o,l,n);return s&&i?i(c):c}function uc(r,t,e,n){const i=of(r);let a=e;return i!==r&&(Ze(r)?e.length>3&&(a=function(o,s,u){return e.call(this,o,s,u,r)}):a=function(o,s,u){return e.call(this,o,Yr(r,s),u,r)}),i[t](a,...n)}function Gs(r,t,e){const n=_t(r);ce(n,"iterate",la);const i=n[t](...e);return(i===-1||i===!1)&&ff(e[0])?(e[0]=_t(e[0]),n[t](...e)):i}function Oi(r,t,e=[]){Or(),ef();const n=_t(r)[t].apply(r,e);return rf(),Ir(),n}const Gy=ql("__proto__,__v_isRef,__isVue"),Uv=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(sn));function Ky(r){sn(r)||(r=String(r));const t=_t(this);return ce(t,"has",r),t.hasOwnProperty(r)}class $v{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return a;if(e==="__v_raw")return n===(i?a?om:Zv:a?Kv:Gv).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Mt(t);if(!i){let u;if(o&&(u=$y[e]))return u;if(e==="hasOwnProperty")return Ky}const s=Reflect.get(t,e,he(t)?t:n);if((sn(e)?Uv.has(e):Gy(e))||(i||ce(t,"get",e),a))return s;if(he(s)){const u=o&&Zl(e)?s:s.value;return i&&Gt(u)?qu(u):u}return Gt(s)?i?qu(s):uf(s):s}}class qv extends $v{constructor(t=!1){super(!1,t)}set(t,e,n,i){let a=t[e];const o=Mt(t)&&Zl(e);if(!this._isShallow){const l=rn(a);if(!Ze(n)&&!rn(n)&&(a=_t(a),n=_t(n)),!o&&he(a)&&!he(n))return l||(a.value=n),!0}const s=o?Number(e)<t.length:Lt(t,e),u=Reflect.set(t,e,n,he(t)?t:i);return t===_t(i)&&(s?Qr(n,a)&&wr(t,"set",e,n):wr(t,"add",e,n)),u}deleteProperty(t,e){const n=Lt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&wr(t,"delete",e,void 0),i}has(t,e){const n=Reflect.has(t,e);return(!sn(e)||!Uv.has(e))&&ce(t,"has",e),n}ownKeys(t){return ce(t,"iterate",Mt(t)?"length":kn),Reflect.ownKeys(t)}}class Zy extends $v{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Qy=new qv,Jy=new Zy,tm=new qv(!0);const $u=r=>r,ja=r=>Reflect.getPrototypeOf(r);function em(r,t,e){return function(...n){const i=this.__v_raw,a=_t(i),o=oi(a),s=r==="entries"||r===Symbol.iterator&&o,u=r==="keys"&&o,l=i[r](...n),c=e?$u:t?fa:Pr;return!t&&ce(a,"iterate",u?Uu:kn),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:s?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Ha(r){return function(...t){return r==="delete"?!1:r==="clear"?void 0:this}}function rm(r,t){const e={get(i){const a=this.__v_raw,o=_t(a),s=_t(i);r||(Qr(i,s)&&ce(o,"get",i),ce(o,"get",s));const{has:u}=ja(o),l=t?$u:r?fa:Pr;if(u.call(o,i))return l(a.get(i));if(u.call(o,s))return l(a.get(s));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!r&&ce(_t(i),"iterate",kn),i.size},has(i){const a=this.__v_raw,o=_t(a),s=_t(i);return r||(Qr(i,s)&&ce(o,"has",i),ce(o,"has",s)),i===s?a.has(i):a.has(i)||a.has(s)},forEach(i,a){const o=this,s=o.__v_raw,u=_t(s),l=t?$u:r?fa:Pr;return!r&&ce(u,"iterate",kn),s.forEach((c,h)=>i.call(a,l(c),l(h),o))}};return be(e,r?{add:Ha("add"),set:Ha("set"),delete:Ha("delete"),clear:Ha("clear")}:{add(i){!t&&!Ze(i)&&!rn(i)&&(i=_t(i));const a=_t(this);return ja(a).has.call(a,i)||(a.add(i),wr(a,"add",i,i)),this},set(i,a){!t&&!Ze(a)&&!rn(a)&&(a=_t(a));const o=_t(this),{has:s,get:u}=ja(o);let l=s.call(o,i);l||(i=_t(i),l=s.call(o,i));const c=u.call(o,i);return o.set(i,a),l?Qr(a,c)&&wr(o,"set",i,a):wr(o,"add",i,a),this},delete(i){const a=_t(this),{has:o,get:s}=ja(a);let u=o.call(a,i);u||(i=_t(i),u=o.call(a,i)),s&&s.call(a,i);const l=a.delete(i);return u&&wr(a,"delete",i,void 0),l},clear(){const i=_t(this),a=i.size!==0,o=i.clear();return a&&wr(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=em(i,r,t)}),e}function sf(r,t){const e=rm(r,t);return(n,i,a)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(Lt(e,i)&&i in n?e:n,i,a)}const nm={get:sf(!1,!1)},im={get:sf(!1,!0)},am={get:sf(!0,!1)};const Gv=new WeakMap,Kv=new WeakMap,Zv=new WeakMap,om=new WeakMap;function sm(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function um(r){return r.__v_skip||!Object.isExtensible(r)?0:sm(Ly(r))}function uf(r){return rn(r)?r:lf(r,!1,Qy,nm,Gv)}function lm(r){return lf(r,!1,tm,im,Kv)}function qu(r){return lf(r,!0,Jy,am,Zv)}function lf(r,t,e,n,i){if(!Gt(r)||r.__v_raw&&!(t&&r.__v_isReactive))return r;const a=um(r);if(a===0)return r;const o=i.get(r);if(o)return o;const s=new Proxy(r,a===2?n:e);return i.set(r,s),s}function si(r){return rn(r)?si(r.__v_raw):!!(r&&r.__v_isReactive)}function rn(r){return!!(r&&r.__v_isReadonly)}function Ze(r){return!!(r&&r.__v_isShallow)}function ff(r){return r?!!r.__v_raw:!1}function _t(r){const t=r&&r.__v_raw;return t?_t(t):r}function fm(r){return!Lt(r,"__v_skip")&&Object.isExtensible(r)&&_v(r,"__v_skip",!0),r}const Pr=r=>Gt(r)?uf(r):r,fa=r=>Gt(r)?qu(r):r;function he(r){return r?r.__v_isRef===!0:!1}function Ii(r){return cm(r,!1)}function cm(r,t){return he(r)?r:new hm(r,t)}class hm{constructor(t,e){this.dep=new af,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:_t(t),this._value=e?t:Pr(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,n=this.__v_isShallow||Ze(t)||rn(t);t=n?t:_t(t),Qr(t,e)&&(this._rawValue=t,this._value=n?t:Pr(t),this.dep.trigger())}}function dm(r){return he(r)?r.value:r}const vm={get:(r,t,e)=>t==="__v_raw"?r:dm(Reflect.get(r,t,e)),set:(r,t,e,n)=>{const i=r[t];return he(i)&&!he(e)?(i.value=e,!0):Reflect.set(r,t,e,n)}};function Qv(r){return si(r)?r:new Proxy(r,vm)}class pm{constructor(t,e,n){this.fn=t,this.setter=e,this._value=void 0,this.dep=new af(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ua-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Vt!==this)return Xv(this,!0),!0}get value(){const t=this.dep.track();return Hv(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gm(r,t,e=!1){let n,i;return Ct(r)?n=r:(n=r.get,i=r.set),new pm(n,i,e)}const Va={},Fo=new WeakMap;let Sn;function ym(r,t=!1,e=Sn){if(e){let n=Fo.get(e);n||Fo.set(e,n=[]),n.push(r)}}function mm(r,t,e=Rt){const{immediate:n,deep:i,once:a,scheduler:o,augmentJob:s,call:u}=e,l=x=>i?x:Ze(x)||i===!1||i===0?Mr(x,1):Mr(x);let c,h,d,f,v=!1,p=!1;if(he(r)?(h=()=>r.value,v=Ze(r)):si(r)?(h=()=>l(r),v=!0):Mt(r)?(p=!0,v=r.some(x=>si(x)||Ze(x)),h=()=>r.map(x=>{if(he(x))return x.value;if(si(x))return l(x);if(Ct(x))return u?u(x,2):x()})):Ct(r)?t?h=u?()=>u(r,2):r:h=()=>{if(d){Or();try{d()}finally{Ir()}}const x=Sn;Sn=c;try{return u?u(r,3,[f]):r(f)}finally{Sn=x}}:h=cr,t&&i){const x=h,S=i===!0?1/0:i;h=()=>Mr(x(),S)}const g=Vy(),y=()=>{c.stop(),g&&g.active&&Kl(g.effects,c)};if(a&&t){const x=t;t=(...S)=>{x(...S),y()}}let m=p?new Array(r.length).fill(Va):Va;const b=x=>{if(!(!(c.flags&1)||!c.dirty&&!x))if(t){const S=c.run();if(i||v||(p?S.some((C,w)=>Qr(C,m[w])):Qr(S,m))){d&&d();const C=Sn;Sn=c;try{const w=[S,m===Va?void 0:p&&m[0]===Va?[]:m,f];m=S,u?u(t,3,w):t(...w)}finally{Sn=C}}}else c.run()};return s&&s(b),c=new Rv(h),c.scheduler=o?()=>o(b,!1):b,f=x=>ym(x,!1,c),d=c.onStop=()=>{const x=Fo.get(c);if(x){if(u)u(x,4);else for(const S of x)S();Fo.delete(c)}},t?n?b(!0):m=c.run():o?o(b.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function Mr(r,t=1/0,e){if(t<=0||!Gt(r)||r.__v_skip||(e=e||new Map,(e.get(r)||0)>=t))return r;if(e.set(r,t),t--,he(r))Mr(r.value,t,e);else if(Mt(r))for(let n=0;n<r.length;n++)Mr(r[n],t,e);else if(Ov(r)||oi(r))r.forEach(n=>{Mr(n,t,e)});else if(Tv(r)){for(const n in r)Mr(r[n],t,e);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&Mr(r[n],t,e)}return r}function Oa(r,t,e,n){try{return n?r(...n):r()}catch(i){ys(i,t,e)}}function dr(r,t,e,n){if(Ct(r)){const i=Oa(r,t,e,n);return i&&Iv(i)&&i.catch(a=>{ys(a,t,e)}),i}if(Mt(r)){const i=[];for(let a=0;a<r.length;a++)i.push(dr(r[a],t,e,n));return i}}function ys(r,t,e,n=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Rt;if(t){let s=t.parent;const u=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${e}`;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](r,u,l)===!1)return}s=s.parent}if(a){Or(),Oa(a,null,10,[r,u,l]),Ir();return}}bm(r,e,i,n,o)}function bm(r,t,e,n=!0,i=!1){if(i)throw r;console.error(r)}const pe=[];let ar=-1;const ui=[];let jr=null,Jn=0;const Jv=Promise.resolve();let Ro=null;function xm(r){const t=Ro||Jv;return r?t.then(this?r.bind(this):r):t}function Sm(r){let t=ar+1,e=pe.length;for(;t<e;){const n=t+e>>>1,i=pe[n],a=ca(i);a<r||a===r&&i.flags&2?t=n+1:e=n}return t}function cf(r){if(!(r.flags&1)){const t=ca(r),e=pe[pe.length-1];!e||!(r.flags&2)&&t>=ca(e)?pe.push(r):pe.splice(Sm(t),0,r),r.flags|=1,tp()}}function tp(){Ro||(Ro=Jv.then(rp))}function wm(r){Mt(r)?ui.push(...r):jr&&r.id===-1?jr.splice(Jn+1,0,r):r.flags&1||(ui.push(r),r.flags|=1),tp()}function lc(r,t,e=ar+1){for(;e<pe.length;e++){const n=pe[e];if(n&&n.flags&2){if(r&&n.id!==r.uid)continue;pe.splice(e,1),e--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ep(r){if(ui.length){const t=[...new Set(ui)].sort((e,n)=>ca(e)-ca(n));if(ui.length=0,jr){jr.push(...t);return}for(jr=t,Jn=0;Jn<jr.length;Jn++){const e=jr[Jn];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}jr=null,Jn=0}}const ca=r=>r.id==null?r.flags&2?-1:1/0:r.id;function rp(r){try{for(ar=0;ar<pe.length;ar++){const t=pe[ar];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Oa(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ar<pe.length;ar++){const t=pe[ar];t&&(t.flags&=-2)}ar=-1,pe.length=0,ep(),Ro=null,(pe.length||ui.length)&&rp()}}let Xe=null,np=null;function zo(r){const t=Xe;return Xe=r,np=r&&r.type.__scopeId||null,t}function Mm(r,t=Xe,e){if(!t||r._n)return r;const n=(...i)=>{n._d&&bc(-1);const a=zo(t);let o;try{o=r(...i)}finally{zo(a),n._d&&bc(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Ks(r,t){if(Xe===null)return r;const e=Ss(Xe),n=r.dirs||(r.dirs=[]);for(let i=0;i<t.length;i++){let[a,o,s,u=Rt]=t[i];a&&(Ct(a)&&(a={mounted:a,updated:a}),a.deep&&Mr(o),n.push({dir:a,instance:e,value:o,oldValue:void 0,arg:s,modifiers:u}))}return r}function fn(r,t,e,n){const i=r.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let u=s.dir[n];u&&(Or(),dr(u,e,8,[r.el,s,r,t]),Ir())}}const Cm=Symbol("_vte"),Em=r=>r.__isTeleport,Am=Symbol("_leaveCb");function hf(r,t){r.shapeFlag&6&&r.component?(r.transition=t,hf(r.component.subTree,t)):r.shapeFlag&128?(r.ssContent.transition=t.clone(r.ssContent),r.ssFallback.transition=t.clone(r.ssFallback)):r.transition=t}function ip(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}const Xo=new WeakMap;function Ji(r,t,e,n,i=!1){if(Mt(r)){r.forEach((v,p)=>Ji(v,t&&(Mt(t)?t[p]:t),e,n,i));return}if(ta(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Ji(r,t,e,n.component.subTree);return}const a=n.shapeFlag&4?Ss(n.component):n.el,o=i?null:a,{i:s,r:u}=r,l=t&&t.r,c=s.refs===Rt?s.refs={}:s.refs,h=s.setupState,d=_t(h),f=h===Rt?kv:v=>Lt(d,v);if(l!=null&&l!==u){if(fc(t),re(l))c[l]=null,f(l)&&(h[l]=null);else if(he(l)){l.value=null;const v=t;v.k&&(c[v.k]=null)}}if(Ct(u))Oa(u,s,12,[o,c]);else{const v=re(u),p=he(u);if(v||p){const g=()=>{if(r.f){const y=v?f(u)?h[u]:c[u]:u.value;if(i)Mt(y)&&Kl(y,a);else if(Mt(y))y.includes(a)||y.push(a);else if(v)c[u]=[a],f(u)&&(h[u]=c[u]);else{const m=[a];u.value=m,r.k&&(c[r.k]=m)}}else v?(c[u]=o,f(u)&&(h[u]=o)):p&&(u.value=o,r.k&&(c[r.k]=o))};if(o){const y=()=>{g(),Xo.delete(r)};y.id=-1,Xo.set(r,y),Ne(y,e)}else fc(r),g()}}}function fc(r){const t=Xo.get(r);t&&(t.flags|=8,Xo.delete(r))}gs().requestIdleCallback;gs().cancelIdleCallback;const ta=r=>!!r.type.__asyncLoader,ap=r=>r.type.__isKeepAlive;function km(r,t){op(r,"a",t)}function Om(r,t){op(r,"da",t)}function op(r,t,e=ye){const n=r.__wdc||(r.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(ms(t,n,e),e){let i=e.parent;for(;i&&i.parent;)ap(i.parent.vnode)&&Im(n,t,e,i),i=i.parent}}function Im(r,t,e,n){const i=ms(t,r,n,!0);up(()=>{Kl(n[t],i)},e)}function ms(r,t,e=ye,n=!1){if(e){const i=e[r]||(e[r]=[]),a=t.__weh||(t.__weh=(...o)=>{Or();const s=Ia(e),u=dr(t,e,r,o);return s(),Ir(),u});return n?i.unshift(a):i.push(a),a}}const Nr=r=>(t,e=ye)=>{(!da||r==="sp")&&ms(r,(...n)=>t(...n),e)},Pm=Nr("bm"),sp=Nr("m"),Tm=Nr("bu"),Nm=Nr("u"),_m=Nr("bum"),up=Nr("um"),Lm=Nr("sp"),Bm=Nr("rtg"),Dm=Nr("rtc");function Fm(r,t=ye){ms("ec",r,t)}const Rm=Symbol.for("v-ndc"),Gu=r=>r?Pp(r)?Ss(r):Gu(r.parent):null,ea=be(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Gu(r.parent),$root:r=>Gu(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>fp(r),$forceUpdate:r=>r.f||(r.f=()=>{cf(r.update)}),$nextTick:r=>r.n||(r.n=xm.bind(r.proxy)),$watch:r=>Km.bind(r)}),Zs=(r,t)=>r!==Rt&&!r.__isScriptSetup&&Lt(r,t),zm={get({_:r},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:n,data:i,props:a,accessCache:o,type:s,appContext:u}=r;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return e[t];case 3:return a[t]}else{if(Zs(n,t))return o[t]=1,n[t];if(i!==Rt&&Lt(i,t))return o[t]=2,i[t];if(Lt(a,t))return o[t]=3,a[t];if(e!==Rt&&Lt(e,t))return o[t]=4,e[t];Ku&&(o[t]=0)}}const l=ea[t];let c,h;if(l)return t==="$attrs"&&ce(r.attrs,"get",""),l(r);if((c=s.__cssModules)&&(c=c[t]))return c;if(e!==Rt&&Lt(e,t))return o[t]=4,e[t];if(h=u.config.globalProperties,Lt(h,t))return h[t]},set({_:r},t,e){const{data:n,setupState:i,ctx:a}=r;return Zs(i,t)?(i[t]=e,!0):n!==Rt&&Lt(n,t)?(n[t]=e,!0):Lt(r.props,t)||t[0]==="$"&&t.slice(1)in r?!1:(a[t]=e,!0)},has({_:{data:r,setupState:t,accessCache:e,ctx:n,appContext:i,props:a,type:o}},s){let u;return!!(e[s]||r!==Rt&&s[0]!=="$"&&Lt(r,s)||Zs(t,s)||Lt(a,s)||Lt(n,s)||Lt(ea,s)||Lt(i.config.globalProperties,s)||(u=o.__cssModules)&&u[s])},defineProperty(r,t,e){return e.get!=null?r._.accessCache[t]=0:Lt(e,"value")&&this.set(r,t,e.value,null),Reflect.defineProperty(r,t,e)}};function cc(r){return Mt(r)?r.reduce((t,e)=>(t[e]=null,t),{}):r}let Ku=!0;function Xm(r){const t=fp(r),e=r.proxy,n=r.ctx;Ku=!1,t.beforeCreate&&hc(t.beforeCreate,r,"bc");const{data:i,computed:a,methods:o,watch:s,provide:u,inject:l,created:c,beforeMount:h,mounted:d,beforeUpdate:f,updated:v,activated:p,deactivated:g,beforeDestroy:y,beforeUnmount:m,destroyed:b,unmounted:x,render:S,renderTracked:C,renderTriggered:w,errorCaptured:I,serverPrefetch:T,expose:O,inheritAttrs:_,components:B,directives:z,filters:Y}=t;if(l&&Ym(l,n,null),o)for(const G in o){const tt=o[G];Ct(tt)&&(n[G]=tt.bind(e))}if(i){const G=i.call(e,e);Gt(G)&&(r.data=uf(G))}if(Ku=!0,a)for(const G in a){const tt=a[G],H=Ct(tt)?tt.bind(e,e):Ct(tt.get)?tt.get.bind(e,e):cr,q=!Ct(tt)&&Ct(tt.set)?tt.set.bind(e):cr,J=O1({get:H,set:q});Object.defineProperty(n,G,{enumerable:!0,configurable:!0,get:()=>J.value,set:rt=>J.value=rt})}if(s)for(const G in s)lp(s[G],n,e,G);if(u){const G=Ct(u)?u.call(e):u;Reflect.ownKeys(G).forEach(tt=>{$m(tt,G[tt])})}c&&hc(c,r,"c");function K(G,tt){Mt(tt)?tt.forEach(H=>G(H.bind(e))):tt&&G(tt.bind(e))}if(K(Pm,h),K(sp,d),K(Tm,f),K(Nm,v),K(km,p),K(Om,g),K(Fm,I),K(Dm,C),K(Bm,w),K(_m,m),K(up,x),K(Lm,T),Mt(O))if(O.length){const G=r.exposed||(r.exposed={});O.forEach(tt=>{Object.defineProperty(G,tt,{get:()=>e[tt],set:H=>e[tt]=H,enumerable:!0})})}else r.exposed||(r.exposed={});S&&r.render===cr&&(r.render=S),_!=null&&(r.inheritAttrs=_),B&&(r.components=B),z&&(r.directives=z),T&&ip(r)}function Ym(r,t,e=cr){Mt(r)&&(r=Zu(r));for(const n in r){const i=r[n];let a;Gt(i)?"default"in i?a=Mo(i.from||n,i.default,!0):a=Mo(i.from||n):a=Mo(i),he(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function hc(r,t,e){dr(Mt(r)?r.map(n=>n.bind(t.proxy)):r.bind(t.proxy),t,e)}function lp(r,t,e,n){let i=n.includes(".")?dp(e,n):()=>e[n];if(re(r)){const a=t[r];Ct(a)&&Qs(i,a)}else if(Ct(r))Qs(i,r.bind(e));else if(Gt(r))if(Mt(r))r.forEach(a=>lp(a,t,e,n));else{const a=Ct(r.handler)?r.handler.bind(e):t[r.handler];Ct(a)&&Qs(i,a,r)}}function fp(r){const t=r.type,{mixins:e,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=r.appContext,s=a.get(t);let u;return s?u=s:!i.length&&!e&&!n?u=t:(u={},i.length&&i.forEach(l=>Yo(u,l,o,!0)),Yo(u,t,o)),Gt(t)&&a.set(t,u),u}function Yo(r,t,e,n=!1){const{mixins:i,extends:a}=t;a&&Yo(r,a,e,!0),i&&i.forEach(o=>Yo(r,o,e,!0));for(const o in t)if(!(n&&o==="expose")){const s=jm[o]||e&&e[o];r[o]=s?s(r[o],t[o]):t[o]}return r}const jm={data:dc,props:vc,emits:vc,methods:Yi,computed:Yi,beforeCreate:ve,created:ve,beforeMount:ve,mounted:ve,beforeUpdate:ve,updated:ve,beforeDestroy:ve,beforeUnmount:ve,destroyed:ve,unmounted:ve,activated:ve,deactivated:ve,errorCaptured:ve,serverPrefetch:ve,components:Yi,directives:Yi,watch:Vm,provide:dc,inject:Hm};function dc(r,t){return t?r?function(){return be(Ct(r)?r.call(this,this):r,Ct(t)?t.call(this,this):t)}:t:r}function Hm(r,t){return Yi(Zu(r),Zu(t))}function Zu(r){if(Mt(r)){const t={};for(let e=0;e<r.length;e++)t[r[e]]=r[e];return t}return r}function ve(r,t){return r?[...new Set([].concat(r,t))]:t}function Yi(r,t){return r?be(Object.create(null),r,t):t}function vc(r,t){return r?Mt(r)&&Mt(t)?[...new Set([...r,...t])]:be(Object.create(null),cc(r),cc(t??{})):t}function Vm(r,t){if(!r)return t;if(!t)return r;const e=be(Object.create(null),r);for(const n in t)e[n]=ve(r[n],t[n]);return e}function cp(){return{app:null,config:{isNativeTag:kv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wm=0;function Um(r,t){return function(n,i=null){Ct(n)||(n=be({},n)),i!=null&&!Gt(i)&&(i=null);const a=cp(),o=new WeakSet,s=[];let u=!1;const l=a.app={_uid:Wm++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:I1,get config(){return a.config},set config(c){},use(c,...h){return o.has(c)||(c&&Ct(c.install)?(o.add(c),c.install(l,...h)):Ct(c)&&(o.add(c),c(l,...h))),l},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),l},component(c,h){return h?(a.components[c]=h,l):a.components[c]},directive(c,h){return h?(a.directives[c]=h,l):a.directives[c]},mount(c,h,d){if(!u){const f=l._ceVNode||Er(n,i);return f.appContext=a,d===!0?d="svg":d===!1&&(d=void 0),r(f,c,d),u=!0,l._container=c,c.__vue_app__=l,Ss(f.component)}},onUnmount(c){s.push(c)},unmount(){u&&(dr(s,l._instance,16),r(null,l._container),delete l._container.__vue_app__)},provide(c,h){return a.provides[c]=h,l},runWithContext(c){const h=li;li=l;try{return c()}finally{li=h}}};return l}}let li=null;function $m(r,t){if(ye){let e=ye.provides;const n=ye.parent&&ye.parent.provides;n===e&&(e=ye.provides=Object.create(n)),e[r]=t}}function Mo(r,t,e=!1){const n=w1();if(n||li){let i=li?li._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&r in i)return i[r];if(arguments.length>1)return e&&Ct(t)?t.call(n&&n.proxy):t}}const qm=Symbol.for("v-scx"),Gm=()=>Mo(qm);function Qs(r,t,e){return hp(r,t,e)}function hp(r,t,e=Rt){const{immediate:n,deep:i,flush:a,once:o}=e,s=be({},e),u=t&&n||!t&&a!=="post";let l;if(da){if(a==="sync"){const f=Gm();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!u){const f=()=>{};return f.stop=cr,f.resume=cr,f.pause=cr,f}}const c=ye;s.call=(f,v,p)=>dr(f,c,v,p);let h=!1;a==="post"?s.scheduler=f=>{Ne(f,c&&c.suspense)}:a!=="sync"&&(h=!0,s.scheduler=(f,v)=>{v?f():cf(f)}),s.augmentJob=f=>{t&&(f.flags|=4),h&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const d=mm(r,t,s);return da&&(l?l.push(d):u&&d()),d}function Km(r,t,e){const n=this.proxy,i=re(r)?r.includes(".")?dp(n,r):()=>n[r]:r.bind(n,n);let a;Ct(t)?a=t:(a=t.handler,e=t);const o=Ia(this),s=hp(i,a.bind(n),e);return o(),s}function dp(r,t){const e=t.split(".");return()=>{let n=r;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}const Zm=(r,t)=>t==="modelValue"||t==="model-value"?r.modelModifiers:r[`${t}Modifiers`]||r[`${en(t)}Modifiers`]||r[`${Yn(t)}Modifiers`];function Qm(r,t,...e){if(r.isUnmounted)return;const n=r.vnode.props||Rt;let i=e;const a=t.startsWith("update:"),o=a&&Zm(n,t.slice(7));o&&(o.trim&&(i=e.map(c=>re(c)?c.trim():c)),o.number&&(i=e.map(Ql)));let s,u=n[s=Ws(t)]||n[s=Ws(en(t))];!u&&a&&(u=n[s=Ws(Yn(t))]),u&&dr(u,r,6,i);const l=n[s+"Once"];if(l){if(!r.emitted)r.emitted={};else if(r.emitted[s])return;r.emitted[s]=!0,dr(l,r,6,i)}}const Jm=new WeakMap;function vp(r,t,e=!1){const n=e?Jm:t.emitsCache,i=n.get(r);if(i!==void 0)return i;const a=r.emits;let o={},s=!1;if(!Ct(r)){const u=l=>{const c=vp(l,t,!0);c&&(s=!0,be(o,c))};!e&&t.mixins.length&&t.mixins.forEach(u),r.extends&&u(r.extends),r.mixins&&r.mixins.forEach(u)}return!a&&!s?(Gt(r)&&n.set(r,null),null):(Mt(a)?a.forEach(u=>o[u]=null):be(o,a),Gt(r)&&n.set(r,o),o)}function bs(r,t){return!r||!ds(t)?!1:(t=t.slice(2).replace(/Once$/,""),Lt(r,t[0].toLowerCase()+t.slice(1))||Lt(r,Yn(t))||Lt(r,t))}function pc(r){const{type:t,vnode:e,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:u,render:l,renderCache:c,props:h,data:d,setupState:f,ctx:v,inheritAttrs:p}=r,g=zo(r);let y,m;try{if(e.shapeFlag&4){const x=i||n,S=x;y=ur(l.call(S,x,c,h,f,d,v)),m=s}else{const x=t;y=ur(x.length>1?x(h,{attrs:s,slots:o,emit:u}):x(h,null)),m=t.props?s:t1(s)}}catch(x){ra.length=0,ys(x,r,1),y=Er(nn)}let b=y;if(m&&p!==!1){const x=Object.keys(m),{shapeFlag:S}=b;x.length&&S&7&&(a&&x.some(Gl)&&(m=e1(m,a)),b=ci(b,m,!1,!0))}return e.dirs&&(b=ci(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(e.dirs):e.dirs),e.transition&&hf(b,e.transition),y=b,zo(g),y}const t1=r=>{let t;for(const e in r)(e==="class"||e==="style"||ds(e))&&((t||(t={}))[e]=r[e]);return t},e1=(r,t)=>{const e={};for(const n in r)(!Gl(n)||!(n.slice(9)in t))&&(e[n]=r[n]);return e};function r1(r,t,e){const{props:n,children:i,component:a}=r,{props:o,children:s,patchFlag:u}=t,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&u>=0){if(u&1024)return!0;if(u&16)return n?gc(n,o,l):!!o;if(u&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==n[d]&&!bs(l,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===o?!1:n?o?gc(n,o,l):!0:!!o;return!1}function gc(r,t,e){const n=Object.keys(t);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==r[a]&&!bs(e,a))return!0}return!1}function n1({vnode:r,parent:t},e){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=t.vnode).el=e,t=t.parent;else break}}const pp={},gp=()=>Object.create(pp),yp=r=>Object.getPrototypeOf(r)===pp;function i1(r,t,e,n=!1){const i={},a=gp();r.propsDefaults=Object.create(null),mp(r,t,i,a);for(const o in r.propsOptions[0])o in i||(i[o]=void 0);e?r.props=n?i:lm(i):r.type.props?r.props=i:r.props=a,r.attrs=a}function a1(r,t,e,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=r,s=_t(i),[u]=r.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=r.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(bs(r.emitsOptions,d))continue;const f=t[d];if(u)if(Lt(a,d))f!==a[d]&&(a[d]=f,l=!0);else{const v=en(d);i[v]=Qu(u,s,v,f,r,!1)}else f!==a[d]&&(a[d]=f,l=!0)}}}else{mp(r,t,i,a)&&(l=!0);let c;for(const h in s)(!t||!Lt(t,h)&&((c=Yn(h))===h||!Lt(t,c)))&&(u?e&&(e[h]!==void 0||e[c]!==void 0)&&(i[h]=Qu(u,s,h,void 0,r,!0)):delete i[h]);if(a!==s)for(const h in a)(!t||!Lt(t,h))&&(delete a[h],l=!0)}l&&wr(r.attrs,"set","")}function mp(r,t,e,n){const[i,a]=r.propsOptions;let o=!1,s;if(t)for(let u in t){if(Ki(u))continue;const l=t[u];let c;i&&Lt(i,c=en(u))?!a||!a.includes(c)?e[c]=l:(s||(s={}))[c]=l:bs(r.emitsOptions,u)||(!(u in n)||l!==n[u])&&(n[u]=l,o=!0)}if(a){const u=_t(e),l=s||Rt;for(let c=0;c<a.length;c++){const h=a[c];e[h]=Qu(i,u,h,l[h],r,!Lt(l,h))}}return o}function Qu(r,t,e,n,i,a){const o=r[e];if(o!=null){const s=Lt(o,"default");if(s&&n===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Ct(u)){const{propsDefaults:l}=i;if(e in l)n=l[e];else{const c=Ia(i);n=l[e]=u.call(null,t),c()}}else n=u;i.ce&&i.ce._setProp(e,n)}o[0]&&(a&&!s?n=!1:o[1]&&(n===""||n===Yn(e))&&(n=!0))}return n}const o1=new WeakMap;function bp(r,t,e=!1){const n=e?o1:t.propsCache,i=n.get(r);if(i)return i;const a=r.props,o={},s=[];let u=!1;if(!Ct(r)){const c=h=>{u=!0;const[d,f]=bp(h,t,!0);be(o,d),f&&s.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!a&&!u)return Gt(r)&&n.set(r,ai),ai;if(Mt(a))for(let c=0;c<a.length;c++){const h=en(a[c]);yc(h)&&(o[h]=Rt)}else if(a)for(const c in a){const h=en(c);if(yc(h)){const d=a[c],f=o[h]=Mt(d)||Ct(d)?{type:d}:be({},d),v=f.type;let p=!1,g=!0;if(Mt(v))for(let y=0;y<v.length;++y){const m=v[y],b=Ct(m)&&m.name;if(b==="Boolean"){p=!0;break}else b==="String"&&(g=!1)}else p=Ct(v)&&v.name==="Boolean";f[0]=p,f[1]=g,(p||Lt(f,"default"))&&s.push(h)}}const l=[o,s];return Gt(r)&&n.set(r,l),l}function yc(r){return r[0]!=="$"&&!Ki(r)}const df=r=>r==="_"||r==="_ctx"||r==="$stable",vf=r=>Mt(r)?r.map(ur):[ur(r)],s1=(r,t,e)=>{if(t._n)return t;const n=Mm((...i)=>vf(t(...i)),e);return n._c=!1,n},xp=(r,t,e)=>{const n=r._ctx;for(const i in r){if(df(i))continue;const a=r[i];if(Ct(a))t[i]=s1(i,a,n);else if(a!=null){const o=vf(a);t[i]=()=>o}}},Sp=(r,t)=>{const e=vf(t);r.slots.default=()=>e},wp=(r,t,e)=>{for(const n in t)(e||!df(n))&&(r[n]=t[n])},u1=(r,t,e)=>{const n=r.slots=gp();if(r.vnode.shapeFlag&32){const i=t._;i?(wp(n,t,e),e&&_v(n,"_",i,!0)):xp(t,n)}else t&&Sp(r,t)},l1=(r,t,e)=>{const{vnode:n,slots:i}=r;let a=!0,o=Rt;if(n.shapeFlag&32){const s=t._;s?e&&s===1?a=!1:wp(i,t,e):(a=!t.$stable,xp(t,i)),o=t}else t&&(Sp(r,t),o={default:1});if(a)for(const s in i)!df(s)&&o[s]==null&&delete i[s]},Ne=v1;function f1(r){return c1(r)}function c1(r,t){const e=gs();e.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:s,createComment:u,setText:l,setElementText:c,parentNode:h,nextSibling:d,setScopeId:f=cr,insertStaticContent:v}=r,p=(k,N,D,V=null,W=null,j=null,at=void 0,et=null,nt=!!N.dynamicChildren)=>{if(k===N)return;k&&!Pi(k,N)&&(V=Yt(k),rt(k,W,j,!0),k=null),N.patchFlag===-2&&(nt=!1,N.dynamicChildren=null);const{type:F,ref:st,shapeFlag:$}=N;switch(F){case xs:g(k,N,D,V);break;case nn:y(k,N,D,V);break;case tu:k==null&&m(N,D,V,at);break;case sr:B(k,N,D,V,W,j,at,et,nt);break;default:$&1?S(k,N,D,V,W,j,at,et,nt):$&6?z(k,N,D,V,W,j,at,et,nt):($&64||$&128)&&F.process(k,N,D,V,W,j,at,et,nt,Bt)}st!=null&&W?Ji(st,k&&k.ref,j,N||k,!N):st==null&&k&&k.ref!=null&&Ji(k.ref,null,j,k,!0)},g=(k,N,D,V)=>{if(k==null)n(N.el=s(N.children),D,V);else{const W=N.el=k.el;N.children!==k.children&&l(W,N.children)}},y=(k,N,D,V)=>{k==null?n(N.el=u(N.children||""),D,V):N.el=k.el},m=(k,N,D,V)=>{[k.el,k.anchor]=v(k.children,N,D,V,k.el,k.anchor)},b=({el:k,anchor:N},D,V)=>{let W;for(;k&&k!==N;)W=d(k),n(k,D,V),k=W;n(N,D,V)},x=({el:k,anchor:N})=>{let D;for(;k&&k!==N;)D=d(k),i(k),k=D;i(N)},S=(k,N,D,V,W,j,at,et,nt)=>{if(N.type==="svg"?at="svg":N.type==="math"&&(at="mathml"),k==null)C(N,D,V,W,j,at,et,nt);else{const F=k.el&&k.el._isVueCE?k.el:null;try{F&&F._beginPatch(),T(k,N,W,j,at,et,nt)}finally{F&&F._endPatch()}}},C=(k,N,D,V,W,j,at,et)=>{let nt,F;const{props:st,shapeFlag:$,transition:Q,dirs:lt}=k;if(nt=k.el=o(k.type,j,st&&st.is,st),$&8?c(nt,k.children):$&16&&I(k.children,nt,null,V,W,Js(k,j),at,et),lt&&fn(k,null,V,"created"),w(nt,k,k.scopeId,at,V),st){for(const vt in st)vt!=="value"&&!Ki(vt)&&a(nt,vt,null,st[vt],j,V);"value"in st&&a(nt,"value",null,st.value,j),(F=st.onVnodeBeforeMount)&&nr(F,V,k)}lt&&fn(k,null,V,"beforeMount");const it=h1(W,Q);it&&Q.beforeEnter(nt),n(nt,N,D),((F=st&&st.onVnodeMounted)||it||lt)&&Ne(()=>{F&&nr(F,V,k),it&&Q.enter(nt),lt&&fn(k,null,V,"mounted")},W)},w=(k,N,D,V,W)=>{if(D&&f(k,D),V)for(let j=0;j<V.length;j++)f(k,V[j]);if(W){let j=W.subTree;if(N===j||Ep(j.type)&&(j.ssContent===N||j.ssFallback===N)){const at=W.vnode;w(k,at,at.scopeId,at.slotScopeIds,W.parent)}}},I=(k,N,D,V,W,j,at,et,nt=0)=>{for(let F=nt;F<k.length;F++){const st=k[F]=et?Hr(k[F]):ur(k[F]);p(null,st,N,D,V,W,j,at,et)}},T=(k,N,D,V,W,j,at)=>{const et=N.el=k.el;let{patchFlag:nt,dynamicChildren:F,dirs:st}=N;nt|=k.patchFlag&16;const $=k.props||Rt,Q=N.props||Rt;let lt;if(D&&cn(D,!1),(lt=Q.onVnodeBeforeUpdate)&&nr(lt,D,N,k),st&&fn(N,k,D,"beforeUpdate"),D&&cn(D,!0),($.innerHTML&&Q.innerHTML==null||$.textContent&&Q.textContent==null)&&c(et,""),F?O(k.dynamicChildren,F,et,D,V,Js(N,W),j):at||tt(k,N,et,null,D,V,Js(N,W),j,!1),nt>0){if(nt&16)_(et,$,Q,D,W);else if(nt&2&&$.class!==Q.class&&a(et,"class",null,Q.class,W),nt&4&&a(et,"style",$.style,Q.style,W),nt&8){const it=N.dynamicProps;for(let vt=0;vt<it.length;vt++){const ht=it[vt],gt=$[ht],yt=Q[ht];(yt!==gt||ht==="value")&&a(et,ht,gt,yt,W,D)}}nt&1&&k.children!==N.children&&c(et,N.children)}else!at&&F==null&&_(et,$,Q,D,W);((lt=Q.onVnodeUpdated)||st)&&Ne(()=>{lt&&nr(lt,D,N,k),st&&fn(N,k,D,"updated")},V)},O=(k,N,D,V,W,j,at)=>{for(let et=0;et<N.length;et++){const nt=k[et],F=N[et],st=nt.el&&(nt.type===sr||!Pi(nt,F)||nt.shapeFlag&198)?h(nt.el):D;p(nt,F,st,null,V,W,j,at,!0)}},_=(k,N,D,V,W)=>{if(N!==D){if(N!==Rt)for(const j in N)!Ki(j)&&!(j in D)&&a(k,j,N[j],null,W,V);for(const j in D){if(Ki(j))continue;const at=D[j],et=N[j];at!==et&&j!=="value"&&a(k,j,et,at,W,V)}"value"in D&&a(k,"value",N.value,D.value,W)}},B=(k,N,D,V,W,j,at,et,nt)=>{const F=N.el=k?k.el:s(""),st=N.anchor=k?k.anchor:s("");let{patchFlag:$,dynamicChildren:Q,slotScopeIds:lt}=N;lt&&(et=et?et.concat(lt):lt),k==null?(n(F,D,V),n(st,D,V),I(N.children||[],D,st,W,j,at,et,nt)):$>0&&$&64&&Q&&k.dynamicChildren?(O(k.dynamicChildren,Q,D,W,j,at,et),(N.key!=null||W&&N===W.subTree)&&Mp(k,N,!0)):tt(k,N,D,st,W,j,at,et,nt)},z=(k,N,D,V,W,j,at,et,nt)=>{N.slotScopeIds=et,k==null?N.shapeFlag&512?W.ctx.activate(N,D,V,at,nt):Y(N,D,V,W,j,at,nt):X(k,N,nt)},Y=(k,N,D,V,W,j,at)=>{const et=k.component=S1(k,V,W);if(ap(k)&&(et.ctx.renderer=Bt),M1(et,!1,at),et.asyncDep){if(W&&W.registerDep(et,K,at),!k.el){const nt=et.subTree=Er(nn);y(null,nt,N,D),k.placeholder=nt.el}}else K(et,k,N,D,W,j,at)},X=(k,N,D)=>{const V=N.component=k.component;if(r1(k,N,D))if(V.asyncDep&&!V.asyncResolved){G(V,N,D);return}else V.next=N,V.update();else N.el=k.el,V.vnode=N},K=(k,N,D,V,W,j,at)=>{const et=()=>{if(k.isMounted){let{next:$,bu:Q,u:lt,parent:it,vnode:vt}=k;{const Tt=Cp(k);if(Tt){$&&($.el=vt.el,G(k,$,at)),Tt.asyncDep.then(()=>{k.isUnmounted||et()});return}}let ht=$,gt;cn(k,!1),$?($.el=vt.el,G(k,$,at)):$=vt,Q&&wo(Q),(gt=$.props&&$.props.onVnodeBeforeUpdate)&&nr(gt,it,$,vt),cn(k,!0);const yt=pc(k),kt=k.subTree;k.subTree=yt,p(kt,yt,h(kt.el),Yt(kt),k,W,j),$.el=yt.el,ht===null&&n1(k,yt.el),lt&&Ne(lt,W),(gt=$.props&&$.props.onVnodeUpdated)&&Ne(()=>nr(gt,it,$,vt),W)}else{let $;const{el:Q,props:lt}=N,{bm:it,m:vt,parent:ht,root:gt,type:yt}=k,kt=ta(N);cn(k,!1),it&&wo(it),!kt&&($=lt&&lt.onVnodeBeforeMount)&&nr($,ht,N),cn(k,!0);{gt.ce&&gt.ce._def.shadowRoot!==!1&&gt.ce._injectChildStyle(yt);const Tt=k.subTree=pc(k);p(null,Tt,D,V,k,W,j),N.el=Tt.el}if(vt&&Ne(vt,W),!kt&&($=lt&&lt.onVnodeMounted)){const Tt=N;Ne(()=>nr($,ht,Tt),W)}(N.shapeFlag&256||ht&&ta(ht.vnode)&&ht.vnode.shapeFlag&256)&&k.a&&Ne(k.a,W),k.isMounted=!0,N=D=V=null}};k.scope.on();const nt=k.effect=new Rv(et);k.scope.off();const F=k.update=nt.run.bind(nt),st=k.job=nt.runIfDirty.bind(nt);st.i=k,st.id=k.uid,nt.scheduler=()=>cf(st),cn(k,!0),F()},G=(k,N,D)=>{N.component=k;const V=k.vnode.props;k.vnode=N,k.next=null,a1(k,N.props,V,D),l1(k,N.children,D),Or(),lc(k),Ir()},tt=(k,N,D,V,W,j,at,et,nt=!1)=>{const F=k&&k.children,st=k?k.shapeFlag:0,$=N.children,{patchFlag:Q,shapeFlag:lt}=N;if(Q>0){if(Q&128){q(F,$,D,V,W,j,at,et,nt);return}else if(Q&256){H(F,$,D,V,W,j,at,et,nt);return}}lt&8?(st&16&&Ot(F,W,j),$!==F&&c(D,$)):st&16?lt&16?q(F,$,D,V,W,j,at,et,nt):Ot(F,W,j,!0):(st&8&&c(D,""),lt&16&&I($,D,V,W,j,at,et,nt))},H=(k,N,D,V,W,j,at,et,nt)=>{k=k||ai,N=N||ai;const F=k.length,st=N.length,$=Math.min(F,st);let Q;for(Q=0;Q<$;Q++){const lt=N[Q]=nt?Hr(N[Q]):ur(N[Q]);p(k[Q],lt,D,null,W,j,at,et,nt)}F>st?Ot(k,W,j,!0,!1,$):I(N,D,V,W,j,at,et,nt,$)},q=(k,N,D,V,W,j,at,et,nt)=>{let F=0;const st=N.length;let $=k.length-1,Q=st-1;for(;F<=$&&F<=Q;){const lt=k[F],it=N[F]=nt?Hr(N[F]):ur(N[F]);if(Pi(lt,it))p(lt,it,D,null,W,j,at,et,nt);else break;F++}for(;F<=$&&F<=Q;){const lt=k[$],it=N[Q]=nt?Hr(N[Q]):ur(N[Q]);if(Pi(lt,it))p(lt,it,D,null,W,j,at,et,nt);else break;$--,Q--}if(F>$){if(F<=Q){const lt=Q+1,it=lt<st?N[lt].el:V;for(;F<=Q;)p(null,N[F]=nt?Hr(N[F]):ur(N[F]),D,it,W,j,at,et,nt),F++}}else if(F>Q)for(;F<=$;)rt(k[F],W,j,!0),F++;else{const lt=F,it=F,vt=new Map;for(F=it;F<=Q;F++){const Ut=N[F]=nt?Hr(N[F]):ur(N[F]);Ut.key!=null&&vt.set(Ut.key,F)}let ht,gt=0;const yt=Q-it+1;let kt=!1,Tt=0;const Wt=new Array(yt);for(F=0;F<yt;F++)Wt[F]=0;for(F=lt;F<=$;F++){const Ut=k[F];if(gt>=yt){rt(Ut,W,j,!0);continue}let Ft;if(Ut.key!=null)Ft=vt.get(Ut.key);else for(ht=it;ht<=Q;ht++)if(Wt[ht-it]===0&&Pi(Ut,N[ht])){Ft=ht;break}Ft===void 0?rt(Ut,W,j,!0):(Wt[Ft-it]=F+1,Ft>=Tt?Tt=Ft:kt=!0,p(Ut,N[Ft],D,null,W,j,at,et,nt),gt++)}const Dt=kt?d1(Wt):ai;for(ht=Dt.length-1,F=yt-1;F>=0;F--){const Ut=it+F,Ft=N[Ut],fe=N[Ut+1],Kt=Ut+1<st?fe.el||fe.placeholder:V;Wt[F]===0?p(null,Ft,D,Kt,W,j,at,et,nt):kt&&(ht<0||F!==Dt[ht]?J(Ft,D,Kt,2):ht--)}}},J=(k,N,D,V,W=null)=>{const{el:j,type:at,transition:et,children:nt,shapeFlag:F}=k;if(F&6){J(k.component.subTree,N,D,V);return}if(F&128){k.suspense.move(N,D,V);return}if(F&64){at.move(k,N,D,Bt);return}if(at===sr){n(j,N,D);for(let $=0;$<nt.length;$++)J(nt[$],N,D,V);n(k.anchor,N,D);return}if(at===tu){b(k,N,D);return}if(V!==2&&F&1&&et)if(V===0)et.beforeEnter(j),n(j,N,D),Ne(()=>et.enter(j),W);else{const{leave:$,delayLeave:Q,afterLeave:lt}=et,it=()=>{k.ctx.isUnmounted?i(j):n(j,N,D)},vt=()=>{j._isLeaving&&j[Am](!0),$(j,()=>{it(),lt&&lt()})};Q?Q(j,it,vt):vt()}else n(j,N,D)},rt=(k,N,D,V=!1,W=!1)=>{const{type:j,props:at,ref:et,children:nt,dynamicChildren:F,shapeFlag:st,patchFlag:$,dirs:Q,cacheIndex:lt}=k;if($===-2&&(W=!1),et!=null&&(Or(),Ji(et,null,D,k,!0),Ir()),lt!=null&&(N.renderCache[lt]=void 0),st&256){N.ctx.deactivate(k);return}const it=st&1&&Q,vt=!ta(k);let ht;if(vt&&(ht=at&&at.onVnodeBeforeUnmount)&&nr(ht,N,k),st&6)mt(k.component,D,V);else{if(st&128){k.suspense.unmount(D,V);return}it&&fn(k,null,N,"beforeUnmount"),st&64?k.type.remove(k,N,D,Bt,V):F&&!F.hasOnce&&(j!==sr||$>0&&$&64)?Ot(F,N,D,!1,!0):(j===sr&&$&384||!W&&st&16)&&Ot(nt,N,D),V&&ft(k)}(vt&&(ht=at&&at.onVnodeUnmounted)||it)&&Ne(()=>{ht&&nr(ht,N,k),it&&fn(k,null,N,"unmounted")},D)},ft=k=>{const{type:N,el:D,anchor:V,transition:W}=k;if(N===sr){wt(D,V);return}if(N===tu){x(k);return}const j=()=>{i(D),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(k.shapeFlag&1&&W&&!W.persisted){const{leave:at,delayLeave:et}=W,nt=()=>at(D,j);et?et(k.el,j,nt):nt()}else j()},wt=(k,N)=>{let D;for(;k!==N;)D=d(k),i(k),k=D;i(N)},mt=(k,N,D)=>{const{bum:V,scope:W,job:j,subTree:at,um:et,m:nt,a:F}=k;mc(nt),mc(F),V&&wo(V),W.stop(),j&&(j.flags|=8,rt(at,k,N,D)),et&&Ne(et,N),Ne(()=>{k.isUnmounted=!0},N)},Ot=(k,N,D,V=!1,W=!1,j=0)=>{for(let at=j;at<k.length;at++)rt(k[at],N,D,V,W)},Yt=k=>{if(k.shapeFlag&6)return Yt(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const N=d(k.anchor||k.el),D=N&&N[Cm];return D?d(D):N};let jt=!1;const Qt=(k,N,D)=>{k==null?N._vnode&&rt(N._vnode,null,null,!0):p(N._vnode||null,k,N,null,null,null,D),N._vnode=k,jt||(jt=!0,lc(),ep(),jt=!1)},Bt={p,um:rt,m:J,r:ft,mt:Y,mc:I,pc:tt,pbc:O,n:Yt,o:r};return{render:Qt,hydrate:void 0,createApp:Um(Qt)}}function Js({type:r,props:t},e){return e==="svg"&&r==="foreignObject"||e==="mathml"&&r==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function cn({effect:r,job:t},e){e?(r.flags|=32,t.flags|=4):(r.flags&=-33,t.flags&=-5)}function h1(r,t){return(!r||r&&!r.pendingBranch)&&t&&!t.persisted}function Mp(r,t,e=!1){const n=r.children,i=t.children;if(Mt(n)&&Mt(i))for(let a=0;a<n.length;a++){const o=n[a];let s=i[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[a]=Hr(i[a]),s.el=o.el),!e&&s.patchFlag!==-2&&Mp(o,s)),s.type===xs&&s.patchFlag!==-1&&(s.el=o.el),s.type===nn&&!s.el&&(s.el=o.el)}}function d1(r){const t=r.slice(),e=[0];let n,i,a,o,s;const u=r.length;for(n=0;n<u;n++){const l=r[n];if(l!==0){if(i=e[e.length-1],r[i]<l){t[n]=i,e.push(n);continue}for(a=0,o=e.length-1;a<o;)s=a+o>>1,r[e[s]]<l?a=s+1:o=s;l<r[e[a]]&&(a>0&&(t[n]=e[a-1]),e[a]=n)}}for(a=e.length,o=e[a-1];a-- >0;)e[a]=o,o=t[o];return e}function Cp(r){const t=r.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Cp(t)}function mc(r){if(r)for(let t=0;t<r.length;t++)r[t].flags|=8}const Ep=r=>r.__isSuspense;function v1(r,t){t&&t.pendingBranch?Mt(r)?t.effects.push(...r):t.effects.push(r):wm(r)}const sr=Symbol.for("v-fgt"),xs=Symbol.for("v-txt"),nn=Symbol.for("v-cmt"),tu=Symbol.for("v-stc"),ra=[];let Be=null;function na(r=!1){ra.push(Be=r?null:[])}function p1(){ra.pop(),Be=ra[ra.length-1]||null}let ha=1;function bc(r,t=!1){ha+=r,r<0&&Be&&t&&(Be.hasOnce=!0)}function Ap(r){return r.dynamicChildren=ha>0?Be||ai:null,p1(),ha>0&&Be&&Be.push(r),r}function eu(r,t,e,n,i,a){return Ap(Ht(r,t,e,n,i,a,!0))}function kp(r,t,e,n,i){return Ap(Er(r,t,e,n,i,!0))}function Op(r){return r?r.__v_isVNode===!0:!1}function Pi(r,t){return r.type===t.type&&r.key===t.key}const Ip=({key:r})=>r??null,Co=({ref:r,ref_key:t,ref_for:e})=>(typeof r=="number"&&(r=""+r),r!=null?re(r)||he(r)||Ct(r)?{i:Xe,r,k:t,f:!!e}:r:null);function Ht(r,t=null,e=null,n=0,i=null,a=r===sr?0:1,o=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:r,props:t,key:t&&Ip(t),ref:t&&Co(t),scopeId:np,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Xe};return s?(pf(u,e),a&128&&r.normalize(u)):e&&(u.shapeFlag|=re(e)?8:16),ha>0&&!o&&Be&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&Be.push(u),u}const Er=g1;function g1(r,t=null,e=null,n=0,i=null,a=!1){if((!r||r===Rm)&&(r=nn),Op(r)){const s=ci(r,t,!0);return e&&pf(s,e),ha>0&&!a&&Be&&(s.shapeFlag&6?Be[Be.indexOf(r)]=s:Be.push(s)),s.patchFlag=-2,s}if(k1(r)&&(r=r.__vccOpts),t){t=y1(t);let{class:s,style:u}=t;s&&!re(s)&&(t.class=tf(s)),Gt(u)&&(ff(u)&&!Mt(u)&&(u=be({},u)),t.style=Jl(u))}const o=re(r)?1:Ep(r)?128:Em(r)?64:Gt(r)?4:Ct(r)?2:0;return Ht(r,t,e,n,i,o,a,!0)}function y1(r){return r?ff(r)||yp(r)?be({},r):r:null}function ci(r,t,e=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:s,transition:u}=r,l=t?m1(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:r.type,props:l,key:l&&Ip(l),ref:t&&t.ref?e&&a?Mt(a)?a.concat(Co(t)):[a,Co(t)]:Co(t):a,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:t&&r.type!==sr?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:u,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&ci(r.ssContent),ssFallback:r.ssFallback&&ci(r.ssFallback),placeholder:r.placeholder,el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return u&&n&&hf(c,u.clone(c)),c}function ji(r=" ",t=0){return Er(xs,null,r,t)}function xc(r="",t=!1){return t?(na(),kp(nn,null,r)):Er(nn,null,r)}function ur(r){return r==null||typeof r=="boolean"?Er(nn):Mt(r)?Er(sr,null,r.slice()):Op(r)?Hr(r):Er(xs,null,String(r))}function Hr(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:ci(r)}function pf(r,t){let e=0;const{shapeFlag:n}=r;if(t==null)t=null;else if(Mt(t))e=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),pf(r,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!yp(t)?t._ctx=Xe:i===3&&Xe&&(Xe.slots._===1?t._=1:(t._=2,r.patchFlag|=1024))}else Ct(t)?(t={default:t,_ctx:Xe},e=32):(t=String(t),n&64?(e=16,t=[ji(t)]):e=8);r.children=t,r.shapeFlag|=e}function m1(...r){const t={};for(let e=0;e<r.length;e++){const n=r[e];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=tf([t.class,n.class]));else if(i==="style")t.style=Jl([t.style,n.style]);else if(ds(i)){const a=t[i],o=n[i];o&&a!==o&&!(Mt(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=n[i])}return t}function nr(r,t,e,n=null){dr(r,t,7,[e,n])}const b1=cp();let x1=0;function S1(r,t,e){const n=r.type,i=(t?t.appContext:r.appContext)||b1,a={uid:x1++,vnode:r,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bp(n,i),emitsOptions:vp(n,i),emit:null,emitted:null,propsDefaults:Rt,inheritAttrs:n.inheritAttrs,ctx:Rt,data:Rt,props:Rt,attrs:Rt,slots:Rt,refs:Rt,setupState:Rt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Qm.bind(null,a),r.ce&&r.ce(a),a}let ye=null;const w1=()=>ye||Xe;let jo,Ju;{const r=gs(),t=(e,n)=>{let i;return(i=r[e])||(i=r[e]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};jo=t("__VUE_INSTANCE_SETTERS__",e=>ye=e),Ju=t("__VUE_SSR_SETTERS__",e=>da=e)}const Ia=r=>{const t=ye;return jo(r),r.scope.on(),()=>{r.scope.off(),jo(t)}},Sc=()=>{ye&&ye.scope.off(),jo(null)};function Pp(r){return r.vnode.shapeFlag&4}let da=!1;function M1(r,t=!1,e=!1){t&&Ju(t);const{props:n,children:i}=r.vnode,a=Pp(r);i1(r,n,a,t),u1(r,i,e||t);const o=a?C1(r,t):void 0;return t&&Ju(!1),o}function C1(r,t){const e=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,zm);const{setup:n}=e;if(n){Or();const i=r.setupContext=n.length>1?A1(r):null,a=Ia(r),o=Oa(n,r,0,[r.props,i]),s=Iv(o);if(Ir(),a(),(s||r.sp)&&!ta(r)&&ip(r),s){if(o.then(Sc,Sc),t)return o.then(u=>{wc(r,u)}).catch(u=>{ys(u,r,0)});r.asyncDep=o}else wc(r,o)}else Tp(r)}function wc(r,t,e){Ct(t)?r.type.__ssrInlineRender?r.ssrRender=t:r.render=t:Gt(t)&&(r.setupState=Qv(t)),Tp(r)}function Tp(r,t,e){const n=r.type;r.render||(r.render=n.render||cr);{const i=Ia(r);Or();try{Xm(r)}finally{Ir(),i()}}}const E1={get(r,t){return ce(r,"get",""),r[t]}};function A1(r){const t=e=>{r.exposed=e||{}};return{attrs:new Proxy(r.attrs,E1),slots:r.slots,emit:r.emit,expose:t}}function Ss(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(Qv(fm(r.exposed)),{get(t,e){if(e in t)return t[e];if(e in ea)return ea[e](r)},has(t,e){return e in t||e in ea}})):r.proxy}function k1(r){return Ct(r)&&"__vccOpts"in r}const O1=(r,t)=>gm(r,t,da),I1="3.5.25";let tl;const Mc=typeof window<"u"&&window.trustedTypes;if(Mc)try{tl=Mc.createPolicy("vue",{createHTML:r=>r})}catch{}const Np=tl?r=>tl.createHTML(r):r=>r,P1="http://www.w3.org/2000/svg",T1="http://www.w3.org/1998/Math/MathML",Sr=typeof document<"u"?document:null,Cc=Sr&&Sr.createElement("template"),N1={insert:(r,t,e)=>{t.insertBefore(r,e||null)},remove:r=>{const t=r.parentNode;t&&t.removeChild(r)},createElement:(r,t,e,n)=>{const i=t==="svg"?Sr.createElementNS(P1,r):t==="mathml"?Sr.createElementNS(T1,r):e?Sr.createElement(r,{is:e}):Sr.createElement(r);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>Sr.createTextNode(r),createComment:r=>Sr.createComment(r),setText:(r,t)=>{r.nodeValue=t},setElementText:(r,t)=>{r.textContent=t},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Sr.querySelector(r),setScopeId(r,t){r.setAttribute(t,"")},insertStaticContent(r,t,e,n,i,a){const o=e?e.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===a||!(i=i.nextSibling)););else{Cc.innerHTML=Np(n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r);const s=Cc.content;if(n==="svg"||n==="mathml"){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}t.insertBefore(s,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},_1=Symbol("_vtc");function L1(r,t,e){const n=r[_1];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?r.removeAttribute("class"):e?r.setAttribute("class",t):r.className=t}const Ec=Symbol("_vod"),B1=Symbol("_vsh"),D1=Symbol(""),F1=/(?:^|;)\s*display\s*:/;function R1(r,t,e){const n=r.style,i=re(e);let a=!1;if(e&&!i){if(t)if(re(t))for(const o of t.split(";")){const s=o.slice(0,o.indexOf(":")).trim();e[s]==null&&Eo(n,s,"")}else for(const o in t)e[o]==null&&Eo(n,o,"");for(const o in e)o==="display"&&(a=!0),Eo(n,o,e[o])}else if(i){if(t!==e){const o=n[D1];o&&(e+=";"+o),n.cssText=e,a=F1.test(e)}}else t&&r.removeAttribute("style");Ec in r&&(r[Ec]=a?n.display:"",r[B1]&&(n.display="none"))}const Ac=/\s*!important$/;function Eo(r,t,e){if(Mt(e))e.forEach(n=>Eo(r,t,n));else if(e==null&&(e=""),t.startsWith("--"))r.setProperty(t,e);else{const n=z1(r,t);Ac.test(e)?r.setProperty(Yn(n),e.replace(Ac,""),"important"):r[n]=e}}const kc=["Webkit","Moz","ms"],ru={};function z1(r,t){const e=ru[t];if(e)return e;let n=en(t);if(n!=="filter"&&n in r)return ru[t]=n;n=Nv(n);for(let i=0;i<kc.length;i++){const a=kc[i]+n;if(a in r)return ru[t]=a}return t}const Oc="http://www.w3.org/1999/xlink";function Ic(r,t,e,n,i,a=jy(t)){n&&t.startsWith("xlink:")?e==null?r.removeAttributeNS(Oc,t.slice(6,t.length)):r.setAttributeNS(Oc,t,e):e==null||a&&!Lv(e)?r.removeAttribute(t):r.setAttribute(t,a?"":sn(e)?String(e):e)}function Pc(r,t,e,n,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(r[t]=t==="innerHTML"?Np(e):e);return}const a=r.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?r.getAttribute("value")||"":r.value,u=e==null?r.type==="checkbox"?"on":"":String(e);(s!==u||!("_value"in r))&&(r.value=u),e==null&&r.removeAttribute(t),r._value=e;return}let o=!1;if(e===""||e==null){const s=typeof r[t];s==="boolean"?e=Lv(e):e==null&&s==="string"?(e="",o=!0):s==="number"&&(e=0,o=!0)}try{r[t]=e}catch{}o&&r.removeAttribute(i||t)}function ti(r,t,e,n){r.addEventListener(t,e,n)}function X1(r,t,e,n){r.removeEventListener(t,e,n)}const Tc=Symbol("_vei");function Y1(r,t,e,n,i=null){const a=r[Tc]||(r[Tc]={}),o=a[t];if(n&&o)o.value=n;else{const[s,u]=j1(t);if(n){const l=a[t]=W1(n,i);ti(r,s,l,u)}else o&&(X1(r,s,o,u),a[t]=void 0)}}const Nc=/(?:Once|Passive|Capture)$/;function j1(r){let t;if(Nc.test(r)){t={};let n;for(;n=r.match(Nc);)r=r.slice(0,r.length-n[0].length),t[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Yn(r.slice(2)),t]}let nu=0;const H1=Promise.resolve(),V1=()=>nu||(H1.then(()=>nu=0),nu=Date.now());function W1(r,t){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;dr(U1(n,e.value),t,5,[n])};return e.value=r,e.attached=V1(),e}function U1(r,t){if(Mt(t)){const e=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{e.call(r),r._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const _c=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,$1=(r,t,e,n,i,a)=>{const o=i==="svg";t==="class"?L1(r,n,o):t==="style"?R1(r,e,n):ds(t)?Gl(t)||Y1(r,t,e,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):q1(r,t,n,o))?(Pc(r,t,n),!r.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ic(r,t,n,o,a,t!=="value")):r._isVueCE&&(/[A-Z]/.test(t)||!re(n))?Pc(r,en(t),n,a,t):(t==="true-value"?r._trueValue=n:t==="false-value"&&(r._falseValue=n),Ic(r,t,n,o))};function q1(r,t,e,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in r&&_c(t)&&Ct(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&r.tagName==="IFRAME"||t==="form"||t==="list"&&r.tagName==="INPUT"||t==="type"&&r.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=r.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return _c(t)&&re(e)?!1:t in r}const Lc=r=>{const t=r.props["onUpdate:modelValue"]||!1;return Mt(t)?e=>wo(t,e):t};function G1(r){r.target.composing=!0}function Bc(r){const t=r.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const iu=Symbol("_assign");function Dc(r,t,e){return t&&(r=r.trim()),e&&(r=Ql(r)),r}const au={created(r,{modifiers:{lazy:t,trim:e,number:n}},i){r[iu]=Lc(i);const a=n||i.props&&i.props.type==="number";ti(r,t?"change":"input",o=>{o.target.composing||r[iu](Dc(r.value,e,a))}),(e||a)&&ti(r,"change",()=>{r.value=Dc(r.value,e,a)}),t||(ti(r,"compositionstart",G1),ti(r,"compositionend",Bc),ti(r,"change",Bc))},mounted(r,{value:t}){r.value=t??""},beforeUpdate(r,{value:t,oldValue:e,modifiers:{lazy:n,trim:i,number:a}},o){if(r[iu]=Lc(o),r.composing)return;const s=(a||r.type==="number")&&!/^0\d/.test(r.value)?Ql(r.value):r.value,u=t??"";s!==u&&(document.activeElement===r&&r.type!=="range"&&(n&&t===e||i&&r.value.trim()===u)||(r.value=u))}},K1=be({patchProp:$1},N1);let Fc;function Z1(){return Fc||(Fc=f1(K1))}const Q1=((...r)=>{const t=Z1().createApp(...r),{mount:e}=t;return t.mount=n=>{const i=tb(n);if(!i)return;const a=t._component;!Ct(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,J1(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t});function J1(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function tb(r){return re(r)?document.querySelector(r):r}var el=function(r,t){return el=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},el(r,t)};function Xt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");el(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var E=function(){return E=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},E.apply(this,arguments)};function ge(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}function eb(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((n=n.apply(r,t||[])).next())})}function rb(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function nb(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),i=0,t=0;t<e;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Qe(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))}var Ae=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Ho=function(r,t){return Ae(r)?r.indexOf(t)>-1:!1},_p=function(r,t){if(!Ae(r))return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];t(i,n)&&e.push(i)}return e},ib=function(r,t){return t===void 0&&(t=[]),_p(r,function(e){return!Ho(t,e)})},ab={}.toString,Je=function(r,t){return ab.call(r)==="[object "+t+"]"};const Jt=(function(r){return Je(r,"Function")});var St=function(r){return r==null};const pt=(function(r){return Array.isArray?Array.isArray(r):Je(r,"Array")}),Ye=(function(r){var t=typeof r;return r!==null&&t==="object"||t==="function"});function U(r,t){if(r){var e;if(pt(r))for(var n=0,i=r.length;n<i&&(e=t(r[n],n),e!==!1);n++);else if(Ye(r)){for(var a in r)if(r.hasOwnProperty(a)&&(e=t(r[a],a),e===!1))break}}}var Lp=Object.keys?function(r){return Object.keys(r)}:function(r){var t=[];return U(r,function(e,n){Jt(r)&&n==="prototype"||t.push(n)}),t};function Bp(r,t){var e=Lp(t),n=e.length;if(St(r))return!n;for(var i=0;i<n;i+=1){var a=e[i];if(t[a]!==r[a]||!(a in r))return!1}return!0}var Vo=function(r){return typeof r=="object"&&r!==null},ue=function(r){if(!Vo(r)||!Je(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t};function ob(r,t){if(!pt(r))return null;var e;if(Jt(t)&&(e=t),ue(t)&&(e=function(i){return Bp(i,t)}),e){for(var n=0;n<r.length;n+=1)if(e(r[n]))return r[n]}return null}function sb(r,t,e){e===void 0&&(e=0);for(var n=e;n<r.length;n++)if(t(r[n],n))return n;return-1}var ub=function(r,t){for(var e=null,n=0;n<r.length;n++){var i=r[n],a=i[t];if(!St(a)){pt(a)?e=a[0]:e=a;break}}return e},lb=function(r){if(!pt(r))return[];for(var t=[],e=0;e<r.length;e++)t=t.concat(r[e]);return t},Dp=function(r,t){if(t===void 0&&(t=[]),!pt(r))t.push(r);else for(var e=0;e<r.length;e+=1)Dp(r[e],t);return t};const hi=(function(r){if(pt(r))return r.reduce(function(t,e){return Math.max(t,e)},r[0])}),di=(function(r){if(pt(r))return r.reduce(function(t,e){return Math.min(t,e)},r[0])});var fb=function(r){var t=r.filter(function(o){return!isNaN(o)});if(!t.length)return{min:0,max:0};if(pt(r[0])){for(var e=[],n=0;n<r.length;n++)e=e.concat(r[n]);t=e}var i=hi(t),a=di(t);return{min:a,max:i}},Fp=Array.prototype,cb=Fp.splice,hb=Fp.indexOf,db=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n++)for(var i=t[n],a=-1;(a=hb.call(r,i))>-1;)cb.call(r,a,1);return r},vb=Array.prototype.splice,Rp=function(t,e){if(!Ae(t))return[];for(var n=t?e.length:0,i=n-1;n--;){var a=void 0,o=e[n];(n===i||o!==a)&&(a=o,vb.call(t,o,1))}return t},zp=function(r,t,e){if(!pt(r)&&!ue(r))return r;var n=e;return U(r,function(i,a){n=t(n,i,a)}),n},pb=function(r,t){var e=[];if(!Ae(r))return e;for(var n=-1,i=[],a=r.length;++n<a;){var o=r[n];t(o,n,r)&&(e.push(o),i.push(n))}return Rp(r,i),e};const ot=(function(r){return Je(r,"String")});function gb(r,t){var e;if(Jt(t))e=function(i,a){return t(i)-t(a)};else{var n=[];ot(t)?n.push(t):pt(t)&&(n=t),e=function(i,a){for(var o=0;o<n.length;o+=1){var s=n[o];if(i[s]>a[s])return 1;if(i[s]<a[s])return-1}return 0}}return r.sort(e),r}function va(r,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(r))for(var n=0,i=r.length;n<i;n++){var a=r[n];t.has(a)||(e.push(a),t.set(a,!0))}return e}var yb=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return va([].concat.apply([],r))};const mb=(function(r,t){for(var e=[],n={},i=0;i<r.length;i++){var a=r[i],o=a[t];if(!St(o)){pt(o)||(o=[o]);for(var s=0;s<o.length;s++){var u=o[s];n[u]||(e.push(u),n[u]=!0)}}}return e});function bb(r){if(Ae(r))return r[0]}function xb(r){if(Ae(r)){var t=r;return t[t.length-1]}}function Sb(r,t){return pt(r)||ot(r)?r[0]===t:!1}function wb(r,t){return pt(r)||ot(r)?r[r.length-1]===t:!1}var Mb=function(r,t){for(var e=0;e<r.length;e++)if(!t(r[e],e))return!1;return!0},Cb=function(r,t){for(var e=0;e<r.length;e++)if(t(r[e],e))return!0;return!1},Eb=Object.prototype.hasOwnProperty;function Wo(r,t){if(!t||!pt(r))return{};for(var e={},n=Jt(t)?t:function(s){return s[t]},i,a=0;a<r.length;a++){var o=r[a];i=n(o),Eb.call(e,i)?e[i].push(o):e[i]=[o]}return e}function Xp(r,t){if(!t)return{0:r};if(!Jt(t)){var e=pt(t)?t:t.replace(/\s+/g,"").split("*");t=function(n){for(var i="_",a=0,o=e.length;a<o;a++)i+=n[e[a]]&&n[e[a]].toString();return i}}return Wo(r,t)}const Ab=(function(r,t){if(!t)return[r];var e=Xp(r,t),n=[];for(var i in e)n.push(e[i]);return n});function kb(r,t){return r["_wrap_"+t]}function gf(r,t){if(r["_wrap_"+t])return r["_wrap_"+t];var e=function(n){r[t](n)};return r["_wrap_"+t]=e,e}var Rc={};function Ob(r){var t=Rc[r];if(!t){for(var e=r.toString(16),n=e.length;n<6;n++)e="0"+e;t="#"+e,Rc[r]=t}return t}function Ib(r){var t=0,e=0,n=0,i=0;return pt(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,{r1:t,r2:e,r3:n,r4:i}}var Pb=function(r,t,e){return r<t?t:r>e?e:r},Tb=function(r,t){var e=t.toString(),n=e.indexOf(".");if(n===-1)return Math.round(r);var i=e.substr(n+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},xt=function(r){return Je(r,"Number")},Nb=function(r){return xt(r)&&r%1!==0},_b=function(r){return xt(r)&&r%2===0},Lb=Number.isInteger?Number.isInteger:function(r){return xt(r)&&r%1===0},Bb=function(r){return xt(r)&&r<0},Db=1e-5;function Yp(r,t,e){return e===void 0&&(e=Db),Math.abs(r-t)<e}var Fb=function(r){return xt(r)&&r%2!==0},Rb=function(r){return xt(r)&&r>0};const zb=(function(r,t){if(pt(r)){for(var e,n=-1/0,i=0;i<r.length;i++){var a=r[i],o=Jt(t)?t(a):a[t];o>n&&(e=a,n=o)}return e}}),Xb=(function(r,t){if(pt(r)){for(var e,n=1/0,i=0;i<r.length;i++){var a=r[i],o=Jt(t)?t(a):a[t];o<n&&(e=a,n=o)}return e}});var yf=function(r,t){return(r%t+t)%t},Yb=180/Math.PI,jb=function(r){return Yb*r};const Hb=parseInt;var Vb=Math.PI/180,mf=function(r){return Vb*r};const zc=(function(r,t){return r.hasOwnProperty(t)});var bf=Object.values?function(r){return Object.values(r)}:function(r){var t=[];return U(r,function(e,n){Jt(r)&&n==="prototype"||t.push(e)}),t};const Wb=(function(r,t){return Ho(bf(r),t)}),xi=(function(r){return St(r)?"":r.toString()});var Ub=function(r){return xi(r).toLowerCase()},$b=function(r){var t=xi(r);return t.charAt(0).toLowerCase()+t.substring(1)};function qb(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)==="\\"?e.slice(1):t[n]===void 0?"":t[n]})}var Gb=function(r){return xi(r).toUpperCase()},vi=function(r){var t=xi(r);return t.charAt(0).toUpperCase()+t.substring(1)},Kb={}.toString,jp=function(r){return Kb.call(r).replace(/^\[object /,"").replace(/]$/,"")},Zb=function(r){return Je(r,"Arguments")},xf=function(r){return Je(r,"Boolean")},Qb=function(r){return Je(r,"Date")},Jb=function(r){return Je(r,"Error")};function tx(r){return xt(r)&&isFinite(r)}var ex=function(r){return r===null},rx=Object.prototype,Hp=function(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||rx;return r===e},nx=function(r){return Je(r,"RegExp")},ix=function(r){return r===void 0},ax=function(r){return r instanceof Element||r instanceof HTMLDocument};function ox(r){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return t(r)}function sx(r){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;t(r)}function ou(r,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(r[e]=t[e])}function dt(r,t,e,n){return t&&ou(r,t),e&&ou(r,e),n&&ou(r,n),r}var ux=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=r[0],n=1;n<r.length;n++){var i=r[n];Jt(i)&&(i=i.prototype),dt(e.prototype,i)}},Pt=function(r){if(typeof r!="object"||r===null)return r;var t;if(pt(r)){t=[];for(var e=0,n=r.length;e<n;e++)typeof r[e]=="object"&&r[e]!=null?t[e]=Pt(r[e]):t[e]=r[e]}else{t={};for(var i in r)typeof r[i]=="object"&&r[i]!=null?t[i]=Pt(r[i]):t[i]=r[i]}return t};function lx(r,t,e){var n;return function(){var i=this,a=arguments,o=function(){n=null,e||r.apply(i,a)},s=e&&!n;clearTimeout(n),n=setTimeout(o,t),s&&r.apply(i,a)}}const Vp=(function(r,t){if(!Jt(r))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=t?t.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var s=r.apply(this,n);return o.set(a,s),s};return e.cache=new Map,e});var fx=5;function Wp(r,t,e,n){e=e||0,n=n||fx;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];a!==null&&ue(a)?(ue(r[i])||(r[i]={}),e<n?Wp(r[i],a,e+1,n):r[i]=t[i]):pt(a)?(r[i]=[],r[i]=r[i].concat(a)):a!==void 0&&(r[i]=a)}}var $t=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n+=1)Wp(r,t[n]);return r},cx=function(r,t,e,n){Jt(t)||(e=t,t=r,r=function(){});var i=Object.create?function(o,s){return Object.create(o,{constructor:{value:s}})}:function(o,s){function u(){}u.prototype=o;var l=new u;return l.constructor=s,l},a=i(t.prototype,r);return r.prototype=dt(a,r.prototype),r.superclass=i(t.prototype,t),dt(a,e),dt(r,n),r},hx=function(r,t){if(!Ae(r))return-1;var e=Array.prototype.indexOf;if(e)return e.call(r,t);for(var n=-1,i=0;i<r.length;i++)if(r[i]===t){n=i;break}return n},dx=Object.prototype.hasOwnProperty;function vx(r){if(St(r))return!0;if(Ae(r))return!r.length;var t=jp(r);if(t==="Map"||t==="Set")return!r.size;if(Hp(r))return!Object.keys(r).length;for(var e in r)if(dx.call(r,e))return!1;return!0}var _n=function(r,t){if(r===t)return!0;if(!r||!t||ot(r)||ot(t))return!1;if(Ae(r)||Ae(t)){if(r.length!==t.length)return!1;for(var e=!0,n=0;n<r.length&&(e=_n(r[n],t[n]),!!e);n++);return e}if(Vo(r)||Vo(t)){var i=Object.keys(r),a=Object.keys(t);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=_n(r[i[n]],t[i[n]]),!!e);n++);return e}return!1};const px=(function(r,t,e){return Jt(e)?!!e(r,t):_n(r,t)});var gx=function(r,t){if(!Ae(r))return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];e.push(t(i,n))}return e},yx=function(r){return r};const mx=(function(r,t){t===void 0&&(t=yx);var e={};return Ye(r)&&!St(r)&&Object.keys(r).forEach(function(n){e[n]=t(r[n],n)}),e}),Up=(function(r,t,e){for(var n=0,i=ot(t)?t.split("."):t;r&&n<i.length;)r=r[i[n++]];return r===void 0||n<i.length?e:r}),bx=(function(r,t,e){var n=r,i=ot(t)?t.split("."):t;return i.forEach(function(a,o){o<i.length-1?(Ye(n[a])||(n[a]=xt(i[o+1])?[]:{}),n=n[a]):n[a]=e}),r});var xx=Object.prototype.hasOwnProperty;const Sx=(function(r,t){if(r===null||!ue(r))return{};var e={};return U(t,function(n){xx.call(r,n)&&(e[n]=r[n])}),e}),wx=(function(r,t){return zp(r,function(e,n,i){return t.includes(i)||(e[i]=n),e},{})}),Mx=(function(r,t,e){var n,i,a,o,s=0;e||(e={});var u=function(){s=e.leading===!1?0:Date.now(),n=null,o=r.apply(i,a),n||(i=a=null)},l=function(){var c=Date.now();!s&&e.leading===!1&&(s=c);var h=t-(c-s);return i=this,a=arguments,h<=0||h>t?(n&&(clearTimeout(n),n=null),s=c,o=r.apply(i,a),n||(i=a=null)):!n&&e.trailing!==!1&&(n=setTimeout(u,h)),o};return l.cancel=function(){clearTimeout(n),s=0,n=i=a=null},l}),Cx=(function(r){return Ae(r)?Array.prototype.slice.call(r):[]});var Wa={};const $p=(function(r){return r=r||"g",Wa[r]?Wa[r]+=1:Wa[r]=1,r+Wa[r]}),Hi=(function(){}),Ex=(function(r){return r});function Ax(r){return St(r)?0:Ae(r)?r.length:Object.keys(r).length}var Ua;const Vi=Vp(function(r,t){t===void 0&&(t={});var e=t.fontSize,n=t.fontFamily,i=t.fontWeight,a=t.fontStyle,o=t.fontVariant;return Ua||(Ua=document.createElement("canvas").getContext("2d")),Ua.font=[a,o,i,e+"px",n].join(" "),Ua.measureText(ot(r)?r:"").width},function(r,t){return t===void 0&&(t={}),nb([r],bf(t)).join("")}),kx=(function(r,t,e,n){n===void 0&&(n="...");var i=16,a=Vi(n,e),o=ot(r)?r:xi(r),s=t,u=[],l,c;if(Vi(r,e)<=t)return r;for(;l=o.substr(0,i),c=Vi(l,e),!(c+a>s&&c>s);)if(u.push(l),s-=c,o=o.substr(i),!o)return u.join("");for(;l=o.substr(0,1),c=Vi(l,e),!(c+a>s);)if(u.push(l),s-=c,o=o.substr(1),!o)return u.join("");return""+u.join("")+n});var Ox=(function(){function r(){this.map={}}return r.prototype.has=function(t){return this.map[t]!==void 0},r.prototype.get=function(t,e){var n=this.map[t];return n===void 0?e:n},r.prototype.set=function(t,e){this.map[t]=e},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(t){delete this.map[t]},r.prototype.size=function(){return Object.keys(this.map).length},r})();const Ix=Object.freeze(Object.defineProperty({__proto__:null,Cache:Ox,assign:dt,augment:ux,clamp:Pb,clearAnimationFrame:sx,clone:Pt,contains:Ho,debounce:lx,deepMix:$t,difference:ib,each:U,endsWith:wb,every:Mb,extend:cx,filter:_p,find:ob,findIndex:sb,firstValue:ub,fixedBase:Tb,flatten:lb,flattenDeep:Dp,forIn:U,get:Up,getEllipsisText:kx,getRange:fb,getType:jp,getWrapBehavior:kb,group:Ab,groupBy:Wo,groupToMap:Xp,has:zc,hasKey:zc,hasValue:Wb,head:bb,identity:Ex,includes:Ho,indexOf:hx,isArguments:Zb,isArray:pt,isArrayLike:Ae,isBoolean:xf,isDate:Qb,isDecimal:Nb,isElement:ax,isEmpty:vx,isEqual:_n,isEqualWith:px,isError:Jb,isEven:_b,isFinite:tx,isFunction:Jt,isInteger:Lb,isMatch:Bp,isNegative:Bb,isNil:St,isNull:ex,isNumber:xt,isNumberEqual:Yp,isObject:Ye,isObjectLike:Vo,isOdd:Fb,isPlainObject:ue,isPositive:Rb,isPrototype:Hp,isRegExp:nx,isString:ot,isType:Je,isUndefined:ix,keys:Lp,last:xb,lowerCase:Ub,lowerFirst:$b,map:gx,mapValues:mx,max:hi,maxBy:zb,measureTextWidth:Vi,memoize:Vp,min:di,minBy:Xb,mix:dt,mod:yf,noop:Hi,number2color:Ob,omit:wx,parseRadius:Ib,pick:Sx,pull:db,pullAt:Rp,reduce:zp,remove:pb,requestAnimationFrame:ox,set:bx,size:Ax,some:Cb,sortBy:gb,startsWith:Sb,substitute:qb,throttle:Mx,toArray:Cx,toDegree:jb,toInteger:Hb,toRadian:mf,toString:xi,union:yb,uniq:va,uniqueId:$p,upperCase:Gb,upperFirst:vi,values:bf,valuesOfKey:mb,wrapBehavior:gf},Symbol.toStringTag,{value:"Module"})),Px={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!0),U(n,function(i,a){t.on(a,i)}),document.addEventListener("visibilitychange",function(){e.keydown=!1})},unbind:function(t){var e=this.events;(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!1),U(e,function(n,i){t.off(i,n)})},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}};var Sf=(function(){function r(){}return r.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: "+t);var n=Pt(Px);Object.assign(n,e);var i=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var l={};u&&(U(u,function(c,h){l[h]=gf(s,c)}),this.events=l)};i.prototype=n,r.types[t]=i},r.hasBehavior=function(t){return!!r.types[t]},r.getBehavior=function(t){return r.types[t]},r.types={},r})(),Tx="*",qp=(function(){function r(){this._events={}}return r.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},r.prototype.once=function(t,e){return this.on(t,e,!0)},r.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[t]||[],o=this._events[Tx]||[],s=function(u){for(var l=u.length,c=0;c<l;c++)if(u[c]){var h=u[c],d=h.callback,f=h.once;f&&(u.splice(c,1),u.length===0&&delete e._events[t],l--,c--),d.apply(e,n)}};s(a),s(o)},r.prototype.off=function(t,e){if(!t)this._events={};else if(!e)delete this._events[t];else{for(var n=this._events[t]||[],i=n.length,a=0;a<i;a++)n[a].callback===e&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[t]}return this},r.prototype.getEvents=function(){return this._events},r})(),mr=1e-6,an=typeof Float32Array<"u"?Float32Array:Array;function Nx(){var r=new an(9);return an!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function _x(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r}function Lx(r){var t=new an(9);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function Bx(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function Dx(r,t,e,n,i,a,o,s,u){var l=new an(9);return l[0]=r,l[1]=t,l[2]=e,l[3]=n,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=u,l}function Fx(r,t,e,n,i,a,o,s,u,l){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r[4]=a,r[5]=o,r[6]=s,r[7]=u,r[8]=l,r}function Rx(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function zx(r,t){if(r===t){var e=t[1],n=t[2],i=t[5];r[1]=t[3],r[2]=t[6],r[3]=e,r[5]=t[7],r[6]=n,r[7]=i}else r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8];return r}function Gp(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=c*o-s*l,d=-c*a+s*u,f=l*a-o*u,v=e*h+n*d+i*f;return v?(v=1/v,r[0]=h*v,r[1]=(-c*n+i*l)*v,r[2]=(s*n-i*o)*v,r[3]=d*v,r[4]=(c*e-i*u)*v,r[5]=(-s*e+i*a)*v,r[6]=f*v,r[7]=(-l*e+n*u)*v,r[8]=(o*e-n*a)*v,r):null}function Xx(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8];return r[0]=o*c-s*l,r[1]=i*l-n*c,r[2]=n*s-i*o,r[3]=s*u-a*c,r[4]=e*c-i*u,r[5]=i*a-e*s,r[6]=a*l-o*u,r[7]=n*u-e*l,r[8]=e*o-n*a,r}function Yx(r){var t=r[0],e=r[1],n=r[2],i=r[3],a=r[4],o=r[5],s=r[6],u=r[7],l=r[8];return t*(l*a-o*u)+e*(-l*i+o*s)+n*(u*i-a*s)}function ke(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=e[0],f=e[1],v=e[2],p=e[3],g=e[4],y=e[5],m=e[6],b=e[7],x=e[8];return r[0]=d*n+f*o+v*l,r[1]=d*i+f*s+v*c,r[2]=d*a+f*u+v*h,r[3]=p*n+g*o+y*l,r[4]=p*i+g*s+y*c,r[5]=p*a+g*u+y*h,r[6]=m*n+b*o+x*l,r[7]=m*i+b*s+x*c,r[8]=m*a+b*u+x*h,r}function Wi(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=e[0],f=e[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=u,r[6]=d*n+f*o+l,r[7]=d*i+f*s+c,r[8]=d*a+f*u+h,r}function jx(r,t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=Math.sin(e),f=Math.cos(e);return r[0]=f*n+d*o,r[1]=f*i+d*s,r[2]=f*a+d*u,r[3]=f*o-d*n,r[4]=f*s-d*i,r[5]=f*u-d*a,r[6]=l,r[7]=c,r[8]=h,r}function Hx(r,t,e){var n=e[0],i=e[1];return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=i*t[3],r[4]=i*t[4],r[5]=i*t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function ws(r,t){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=t[0],r[7]=t[1],r[8]=1,r}function Ms(r,t){var e=Math.sin(t),n=Math.cos(t);return r[0]=n,r[1]=e,r[2]=0,r[3]=-e,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Cs(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=t[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Vx(r,t){return r[0]=t[0],r[1]=t[1],r[2]=0,r[3]=t[2],r[4]=t[3],r[5]=0,r[6]=t[4],r[7]=t[5],r[8]=1,r}function Wx(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=e+e,s=n+n,u=i+i,l=e*o,c=n*o,h=n*s,d=i*o,f=i*s,v=i*u,p=a*o,g=a*s,y=a*u;return r[0]=1-h-v,r[3]=c-y,r[6]=d+g,r[1]=c+y,r[4]=1-l-v,r[7]=f-p,r[2]=d-g,r[5]=f+p,r[8]=1-l-h,r}function Ux(r,t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],f=t[11],v=t[12],p=t[13],g=t[14],y=t[15],m=e*s-n*o,b=e*u-i*o,x=e*l-a*o,S=n*u-i*s,C=n*l-a*s,w=i*l-a*u,I=c*p-h*v,T=c*g-d*v,O=c*y-f*v,_=h*g-d*p,B=h*y-f*p,z=d*y-f*g,Y=m*z-b*B+x*_+S*O-C*T+w*I;return Y?(Y=1/Y,r[0]=(s*z-u*B+l*_)*Y,r[1]=(u*O-o*z-l*T)*Y,r[2]=(o*B-s*O+l*I)*Y,r[3]=(i*B-n*z-a*_)*Y,r[4]=(e*z-i*O+a*T)*Y,r[5]=(n*O-e*B-a*I)*Y,r[6]=(p*w-g*C+y*S)*Y,r[7]=(g*x-v*w-y*b)*Y,r[8]=(v*C-p*x+y*m)*Y,r):null}function $x(r,t,e){return r[0]=2/t,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/e,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function qx(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function Gx(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8])}function Kx(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r[3]=t[3]+e[3],r[4]=t[4]+e[4],r[5]=t[5]+e[5],r[6]=t[6]+e[6],r[7]=t[7]+e[7],r[8]=t[8]+e[8],r}function Kp(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r[3]=t[3]-e[3],r[4]=t[4]-e[4],r[5]=t[5]-e[5],r[6]=t[6]-e[6],r[7]=t[7]-e[7],r[8]=t[8]-e[8],r}function Zx(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*e,r[5]=t[5]*e,r[6]=t[6]*e,r[7]=t[7]*e,r[8]=t[8]*e,r}function Qx(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r[3]=t[3]+e[3]*n,r[4]=t[4]+e[4]*n,r[5]=t[5]+e[5]*n,r[6]=t[6]+e[6]*n,r[7]=t[7]+e[7]*n,r[8]=t[8]+e[8]*n,r}function Jx(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]}function tS(r,t){var e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],u=r[6],l=r[7],c=r[8],h=t[0],d=t[1],f=t[2],v=t[3],p=t[4],g=t[5],y=t[6],m=t[7],b=t[8];return Math.abs(e-h)<=mr*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-d)<=mr*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-f)<=mr*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-v)<=mr*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-p)<=mr*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-g)<=mr*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-y)<=mr*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-m)<=mr*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-b)<=mr*Math.max(1,Math.abs(c),Math.abs(b))}var eS=ke,rS=Kp;const nS=Object.freeze(Object.defineProperty({__proto__:null,add:Kx,adjoint:Xx,clone:Lx,copy:Bx,create:Nx,determinant:Yx,equals:tS,exactEquals:Jx,frob:Gx,fromMat2d:Vx,fromMat4:_x,fromQuat:Wx,fromRotation:Ms,fromScaling:Cs,fromTranslation:ws,fromValues:Dx,identity:Rx,invert:Gp,mul:eS,multiply:ke,multiplyScalar:Zx,multiplyScalarAndAdd:Qx,normalFromMat4:Ux,projection:$x,rotate:jx,scale:Hx,set:Fx,str:qx,sub:rS,subtract:Kp,translate:Wi,transpose:zx},Symbol.toStringTag,{value:"Module"}));function iS(){var r=new an(3);return an!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function wf(r,t,e){var n=t[0],i=t[1],a=t[2];return r[0]=n*e[0]+i*e[3]+a*e[6],r[1]=n*e[1]+i*e[4]+a*e[7],r[2]=n*e[2]+i*e[5]+a*e[8],r}(function(){var r=iS();return function(t,e,n,i,a,o){var s,u;for(e||(e=3),n||(n=0),i?u=Math.min(i*e+n,t.length):u=t.length,s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],a(r,r,o),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t}})();function aS(){var r=new an(2);return an!=Float32Array&&(r[0]=0,r[1]=0),r}function se(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function oS(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function hn(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function dn(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function me(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function Xc(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.sqrt(e*e+n*n)}function On(r,t){var e=t[0],n=t[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=t[0]*i,r[1]=t[1]*i,r}function Zp(r,t){return r[0]*t[0]+r[1]*t[1]}function Qp(r,t){return r[0]===t[0]&&r[1]===t[1]}var su=oS;(function(){var r=aS();return function(t,e,n,i,a,o){var s,u;for(e||(e=2),n||(n=0),i?u=Math.min(i*e+n,t.length):u=t.length,s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],a(r,r,o),t[s]=r[0],t[s+1]=r[1];return t}})();function sS(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return ws(n,e),ke(r,n,t)}function uS(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return Ms(n,e),ke(r,n,t)}function lS(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return Cs(n,e),ke(r,n,t)}function fS(r,t,e){return ke(r,e,t)}function Es(r,t){for(var e=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=t.length;n<i;n++){var a=t[n];switch(a[0]){case"t":sS(e,e,[a[1],a[2]]);break;case"s":lS(e,e,[a[1],a[2]]);break;case"r":uS(e,e,a[1]);break;case"m":fS(e,e,a[1]);break}}return e}var Ln=function(t,e){var n=t.nodes,i=t.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,u){o[s.id]=u;var l=[];a.push(l)}),i&&i.forEach(function(s){var u=s.source,l=s.target,c=o[u],h=o[l];!c&&c!==0||!h&&h!==0||(a[c][h]=1,e||(a[h][c]=1))}),a},cS=function(t,e){return t===e},Yc=(function(){function r(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return r.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},r})(),Jp=(function(){function r(t){t===void 0&&(t=cS),this.head=null,this.tail=null,this.compare=t}return r.prototype.prepend=function(t){var e=new Yc(t,this.head);return this.head=e,this.tail||(this.tail=e),this},r.prototype.append=function(t){var e=new Yc(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},r.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},r.prototype.find=function(t){var e=t.value,n=e===void 0?void 0:e,i=t.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},r.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},r.prototype.fromArray=function(t){var e=this;return t.forEach(function(n){return e.append(n)}),this},r.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},r.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},r.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},r})(),hS=(function(){function r(){this.linkedList=new Jp}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(t){this.linkedList.append(t)},r.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toString=function(t){return this.linkedList.toString(t)},r})(),De=function(t,e,n){e===void 0&&(e=[]);var i=e.filter(function(u){return u.source===t||u.target===t});if(n==="target"){var a=function(l){return l.source===t};return i.filter(a).map(function(u){return u.target})}if(n==="source"){var o=function(l){return l.target===t};return i.filter(o).map(function(u){return u.source})}var s=function(l){return l.source===t?l.target:l.source};return i.map(s)},dS=function(t,e){return e.filter(function(n){return n.source===t})},Ao=function(t,e){return e.filter(function(n){return n.source===t||n.target===t})},tg=function(t){t===void 0&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};function vS(r){r===void 0&&(r={});var t=r,e=function(){},n=(function(){var i={};return function(a){var o=a.next,s=o;return i[s]?!1:(i[s]=!0,!0)}})();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}var eg=function(t,e,n,i){i===void 0&&(i=!0);var a=vS(n),o=new hS,s=t.edges,u=s===void 0?[]:s;o.enqueue(e);for(var l="",c=function(){var d=o.dequeue();a.enter({current:d,previous:l}),De(d,u,i?"target":void 0).forEach(function(f){a.allowTraversal({previous:l,current:d,next:f})&&o.enqueue(f)}),a.leave({current:d,previous:l}),l=d};!o.isEmpty();)c()},pS=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},u=[],l=function f(v){u.push(v),s[v.id]=!0;for(var p=De(v.id,a),g=function(b){var x=p[b];if(!s[x]){var S=n.filter(function(C){return C.id===x});S.length>0&&f(S[0])}},y=0;y<p.length;++y)g(y)},c=0;c<n.length;c++){var h=n[c];if(!s[h.id]){l(h);for(var d=[];u.length>0;)d.push(u.pop());o.push(d)}}return o},rg=function(t){for(var e=t.nodes,n=e===void 0?[]:e,i=t.edges,a=i===void 0?[]:i,o=[],s={},u={},l={},c=[],h=0,d=function g(y){u[y.id]=h,l[y.id]=h,h+=1,o.push(y),s[y.id]=!0;for(var m=De(y.id,a,"target").filter(function(w){return n.map(function(I){return I.id}).indexOf(w)>-1}),b=function(I){var T=m[I];if(!u[T]&&u[T]!==0){var O=n.filter(function(_){return _.id===T});O.length>0&&g(O[0]),l[y.id]=Math.min(l[y.id],l[T])}else s[T]&&(l[y.id]=Math.min(l[y.id],u[T]))},x=0;x<m.length;x++)b(x);if(l[y.id]===u[y.id]){for(var S=[];o.length>0;){var C=o.pop();if(s[C.id]=!1,S.push(C),C===y)break}S.length>0&&c.push(S)}},f=0,v=n;f<v.length;f++){var p=v[f];!u[p.id]&&u[p.id]!==0&&d(p)}return c};function Mf(r,t){return t?rg(r):pS(r)}var Tr=function(t){var e={},n=t.nodes,i=n===void 0?[]:n,a=t.edges,o=a===void 0?[]:a;return i.forEach(function(s){e[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){e[s.source].degree++,e[s.source].outDegree++,e[s.target].degree++,e[s.target].inDegree++}),e},ng=function(t,e){var n=Tr(t);return n[e]?Tr(t)[e].inDegree:0},ig=function(t,e){var n=Tr(t);return n[e]?Tr(t)[e].outDegree:0};function gS(r){r===void 0&&(r={});var t=r,e=function(){},n=(function(){var i={};return function(a){var o=a.next;return i[o]?!1:(i[o]=!0,!0)}})();return t.allowTraversal=r.allowTraversal||n,t.enter=r.enter||e,t.leave=r.leave||e,t}function ag(r,t,e,n,i){i===void 0&&(i=!0),n.enter({current:t,previous:e});var a=r.edges,o=a===void 0?[]:a;De(t,o,i?"target":void 0).forEach(function(s){n.allowTraversal({previous:e,current:t,next:s})&&ag(r,s,t,n,i)}),n.leave({current:t,previous:e})}function Cf(r,t,e,n){n===void 0&&(n=!0),ag(r,t,"",gS(e),n)}var Ef=function(t){var e=null,n=t.nodes,i=n===void 0?[]:n,a={},o={},s={},u={};i.forEach(function(h){o[h.id]=h});for(var l={enter:function(d){var f=d.current,v=d.previous;if(s[f]){e={};for(var p=f,g=v;g!==f;)e[p]=g,p=g,g=a[g];e[p]=g}else s[f]=f,delete o[f],a[f]=v},leave:function(d){var f=d.current;u[f]=f,delete s[f]},allowTraversal:function(d){var f=d.next;return e?!1:!u[f]}};Object.keys(o).length;){var c=Object.keys(o)[0];Cf(t,c,l)}return e},Af=function(t,e,n){var i,a;n===void 0&&(n=!0);for(var o=[],s=Mf(t,!1),u=0,l=s;u<l.length;u++){var c=l[u];if(c.length)for(var h=c[0],d=h.id,f=[h],v=(i={},i[d]=h,i),p=(a={},a[d]=new Set,a);f.length>0;)for(var g=f.pop(),y=g.id,m=De(y,t.edges),b=function(C){var w,I=m[C],T=t.nodes.find(function(X){return X.id===I});if(I===y)o.push((w={},w[I]=g,w));else if(!(I in p))v[I]=g,f.push(T),p[I]=new Set([g]);else if(!p[y].has(T)){for(var O=!0,_=[T,g],B=v[y];p[I].size&&!p[I].has(B)&&(_.push(B),B!==v[B.id]);)B=v[B.id];if(_.push(B),e&&n?(O=!1,_.findIndex(function(X){return e.indexOf(X.id)>-1})>-1&&(O=!0)):e&&!n&&_.findIndex(function(X){return e.indexOf(X.id)>-1})>-1&&(O=!1),O){for(var z={},Y=1;Y<_.length;Y+=1)z[_[Y-1].id]=_[Y];_.length&&(z[_[_.length-1].id]=_[0]),o.push(z)}p[I].add(g)}},x=0;x<m.length;x+=1)b(x)}return o},kf=function(t,e,n){n===void 0&&(n=!0);for(var i=[],a=new Set,o=[],s=[],u={},l={},c=function(B){for(var z=[B];z.length>0;){var Y=z.pop();a.has(Y)&&(a.delete(Y),o[Y.id].forEach(function(X){z.push(X)}),o[Y.id].clear())}},h=function _(B,z,Y){var X=!1;if(e&&n===!1&&e.indexOf(B.id)>-1)return X;i.push(B),a.add(B);for(var K=Y[B.id],G=0;G<K.length;G+=1){var tt=u[K[G]];if(tt===z){for(var H={},q=1;q<i.length;q+=1)H[i[q-1].id]=i[q];i.length&&(H[i[i.length-1].id]=i[0]),s.push(H),X=!0}else a.has(tt)||_(tt,z,Y)&&(X=!0)}if(X)c(B);else for(var G=0;G<K.length;G+=1){var tt=u[K[G]];o[tt.id].has(B)||o[tt.id].add(B)}return i.pop(),X},d=t.nodes,f=d===void 0?[]:d,v=0;v<f.length;v+=1){var p=f[v],g=p.id;l[g]=v,u[v]=p}if(e&&n)for(var y=function(B){var z=e[B];l[f[B].id]=l[z],l[z]=0,u[0]=f.find(function(Y){return Y.id===z}),u[l[f[B].id]]=f[B]},v=0;v<e.length;v++)y(v);for(var m=function(B){for(var z,Y,X=1/0,K=0;K<B.length;K+=1)for(var G=B[K],tt=0;tt<G.length;tt++){var H=l[G[tt].id];H<X&&(X=H,Y=K)}for(var q=B[Y],J=[],K=0;K<q.length;K+=1){var rt=q[K];J[rt.id]=[];for(var ft=0,wt=De(rt.id,t.edges,"target").filter(function(Yt){return q.map(function(jt){return jt.id}).indexOf(Yt)>-1});ft<wt.length;ft++){var mt=wt[ft];mt===rt.id&&!(n===!1&&e.indexOf(rt.id)>-1)?s.push((z={},z[rt.id]=rt,z)):J[rt.id].push(l[mt])}}return{component:q,adjList:J,minIdx:X}},b=0;b<f.length;){var x=f.filter(function(_){return l[_.id]>=b}),S=rg({nodes:x,edges:t.edges}).filter(function(_){return _.length>1});if(S.length===0)break;var C=m(S),w=C.minIdx,I=C.adjList,T=C.component;if(T.length>1){T.forEach(function(_){o[_.id]=new Set});var O=u[w];if(e&&n&&e.indexOf(O.id)===-1)return s;h(O,O,I),b=w+1}else break}return s},og=function(t,e,n,i){return i===void 0&&(i=!0),e?kf(t,n,i):Af(t,n,i)},yS=function(t,e,n){for(var i=1/0,a,o=0;o<e.length;o++){var s=e[o].id;!n[s]&&t[s]<=i&&(i=t[s],a=e[o])}return a},pa=function(t,e,n,i){var a=t.nodes,o=a===void 0?[]:a,s=t.edges,u=s===void 0?[]:s,l={},c={},h={};o.forEach(function(m,b){var x=m.id;c[x]=1/0,x===e&&(c[x]=0)});for(var d=o.length,f=function(b){var x=yS(c,o,l),S=x.id;if(l[S]=!0,c[S]===1/0)return"continue";var C=[];n?C=dS(S,u):C=Ao(S,u),C.forEach(function(w){var I=w.target,T=w.source,O=I===S?T:I,_=i&&w[i]?w[i]:1;c[O]>c[x.id]+_?(c[O]=c[x.id]+_,h[O]=[x.id]):c[O]===c[x.id]+_&&h[O].push(x.id)})},v=0;v<d;v++)f();h[e]=[e];var p={};for(var g in c)c[g]!==1/0&&sg(e,g,h,p);var y={};for(var g in p)y[g]=p[g][0];return{length:c,path:y,allPath:p}};function sg(r,t,e,n){if(r===t)return[r];if(n[t])return n[t];for(var i=[],a=0,o=e[t];a<o.length;a++){var s=o[a],u=sg(r,s,e,n);if(!u)return;for(var l=0,c=u;l<c.length;l++){var h=c[l];pt(h)?i.push(Qe(Qe([],h,!0),[t],!1)):i.push([h,t])}}return n[t]=i,n[t]}var ug=function(t,e,n,i,a){var o=pa(t,e,i,a),s=o.length,u=o.path,l=o.allPath;return{length:s[n],path:u[n],allPath:l[n]}},lg=function(t,e,n,i){var a;if(e===n)return[[e]];var o=t.edges,s=o===void 0?[]:o,u=[e],l=(a={},a[e]=!0,a),c=[],h=[],d=i?De(e,s,"target"):De(e,s);for(c.push(d);u.length>0&&c.length>0;){var f=c[c.length-1];if(f.length){var v=f.shift();v&&(u.push(v),l[v]=!0,d=i?De(v,s,"target"):De(v,s),c.push(d.filter(function(y){return!l[y]})))}else{var p=u.pop();l[p]=!1,c.pop();continue}if(u[u.length-1]===n){var g=u.map(function(m){return m});h.push(g);var p=u.pop();l[p]=!1,c.pop()}}return h},ga=function(t,e){for(var n=Ln(t,e),i=[],a=n.length,o=0;o<a;o+=1){i[o]=[];for(var s=0;s<a;s+=1)o===s?i[o][s]=0:n[o][s]===0||!n[o][s]?i[o][s]=1/0:i[o][s]=n[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)i[o][s]>i[o][u]+i[u][s]&&(i[o][s]=i[o][u]+i[u][s]);return i},fg=function(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e3);var a=t.nodes,o=a===void 0?[]:a,s=t.edges,u=s===void 0?[]:s,l={},c={};o.forEach(function(b,x){var S=tg();b.clusterId=S,l[S]={id:S,nodes:[b]},c[b.id]={node:b,idx:x}});var h=Ln(t,e),d={};h.forEach(function(b,x){var S=o[x].id;d[S]={},b.forEach(function(C,w){if(C){var I=o[w].id;d[S][I]=C}})});for(var f=0,v=function(){var x=!1;if(o.forEach(function(S){var C={};Object.keys(d[S.id]).forEach(function(Y){var X=d[S.id][Y],K=c[Y].node,G=K.clusterId;C[G]||(C[G]=0),C[G]+=X});var w=-1/0,I=[];if(Object.keys(C).forEach(function(Y){w<C[Y]?(w=C[Y],I=[Y]):w===C[Y]&&I.push(Y)}),!(I.length===1&&I[0]===S.clusterId)){var T=I.indexOf(S.clusterId);if(T>=0&&I.splice(T,1),I&&I.length){x=!0;var O=l[S.clusterId],_=O.nodes.indexOf(S);O.nodes.splice(_,1);var B=Math.floor(Math.random()*I.length),z=l[I[B]];z.nodes.push(S),S.clusterId=z.id}}}),!x)return"break";f++};f<i;){var p=v();if(p==="break")break}Object.keys(l).forEach(function(b){var x=l[b];(!x.nodes||!x.nodes.length)&&delete l[b]});var g=[],y={};u.forEach(function(b){var x=b.source,S=b.target,C=b[n]||1,w=c[x].node.clusterId,I=c[S].node.clusterId,T="".concat(w,"---").concat(I);if(y[T])y[T].weight+=C,y[T].count++;else{var O={source:w,target:I,weight:C,count:1};y[T]=O,g.push(O)}});var m=[];return Object.keys(l).forEach(function(b){m.push(l[b])}),{clusters:m,clusterEdges:g}},ze=(function(){function r(t){this.arr=t}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return new r(n);if(!n?.length)return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]+n[a];return new r(i)}},r.prototype.subtract=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return new r(n);if(!n?.length)return new r(this.arr);if(this.arr.length===n.length){var i=[];for(var a in this.arr)i[a]=this.arr[a]-n[a];return new r(i)}},r.prototype.avg=function(t){var e=[];if(t!==0)for(var n in this.arr)e[n]=this.arr[n]/t;return new r(e)},r.prototype.negate=function(){var t=[];for(var e in this.arr)t[e]=-this.arr[e];return new r(t)},r.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!n?.length)return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-t.arr[a],2);return i}},r.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!n?.length)return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=Math.pow(this.arr[a]-t.arr[a],2);return Math.sqrt(i)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var t=[],e=Pt(this.arr);e.sort(function(o,s){return o-s});var n=e[e.length-1],i=e[0];for(var a in this.arr)t[a]=(this.arr[a]-i)/(n-i);return new r(t)},r.prototype.norm2=function(){var t;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},r.prototype.dot=function(t){var e,n=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!n?.length)return 0;if(this.arr.length===n.length){var i=0;for(var a in this.arr)i+=this.arr[a]*t.arr[a];return i}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(t){var e,n=t.arr;if(((e=this.arr)===null||e===void 0?void 0:e.length)!==n?.length)return!1;for(var i in this.arr)if(this.arr[i]!==n[i])return!1;return!0},r})(),Of=function(t,e){e===void 0&&(e=void 0);var n=[];return t.forEach(function(i){e===void 0&&n.push(i),i[e]!==void 0&&n.push(i[e])}),n},qe;(function(r){r.EuclideanDistance="euclideanDistance"})(qe||(qe={}));var mS=function(t,e,n){var i=[];e?.length?i=e:(t.forEach(function(o){i=i.concat(Object.keys(o))}),i=va(i));var a={};return i.forEach(function(o){var s=[];t.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!n?.includes(o)&&(a[o]=va(s))}),a},If=function(t,e,n){var i=mS(t,e,n),a=[];if(!Object.keys(i).length)return a;var o=Object.values(i),s=o.every(function(u){return u.every(function(l){return typeof l=="number"})});return t.forEach(function(u,l){var c=[];Object.keys(i).forEach(function(h){var d=u[h],f=i[h],v=f.findIndex(function(y){return d===y}),p=[];if(s)p.push(d);else for(var g=0;g<f.length;g++)g===v?p.push(1):p.push(0);c=c.concat(p)}),a[l]=c}),a},jc=function(t,e,n,i){n===void 0&&(n=qe.EuclideanDistance);var a=0;switch(n){case qe.EuclideanDistance:a=new ze(t).euclideanDistance(new ze(e));break}return a},Hc=function(t,e,n,i){for(var a=e.length,o=2*i,s=0,u=0;u<a;u++)for(var l=t[u].clusterId,c=0;c<a;c++){var h=t[c].clusterId;if(l===h){var d=e[u][c]||0,f=n[u]||0,v=n[c]||0;s+=d-f*v/o}}return s*=1/o,s},uu=function(t,e){t===void 0&&(t=[]);for(var n=t.length,i=new ze([]),a=0;a<n;a++)i=i.add(new ze(e[a]));var o=i.avg(n);o.normalize();for(var s=0,a=0;a<n;a++){var u=new ze(e[a]),l=u.squareEuclideanDistance(o);s+=l}var c=[];t.forEach(function(){c.push([])});for(var a=0;a<n;a++){var u=new ze(e[a]);t[a].clusterInertial=0;for(var h=0;h<n;h++){if(a===h){c[a][h]=0;continue}var d=new ze(e[h]);c[a][h]=u.squareEuclideanDistance(d),t[a].clusterInertial+=c[a][h]}}for(var f=0,v=2*n*s,a=0;a<n;a++)for(var p=t[a].clusterId,h=0;h<n;h++){var g=t[h].clusterId;if(!(a===h||p!==g)){var y=t[a].clusterInertial*t[h].clusterInertial/Math.pow(v,2)-c[a][h]/v;f+=y}}return Number(f.toFixed(4))},Pf=function(t,e,n,i,a,o,s,u,l){e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),l===void 0&&(l=1);var c=t.nodes,h=c===void 0?[]:c,d=t.edges,f=d===void 0?[]:d,v=[];if(a){h.forEach(function(H,q){H.properties=H.properties||{},H.originIndex=q});var p=[];h.every(function(H){return H.hasOwnProperty("nodeType")})&&(p=Array.from(new Set(h.map(function(H){return H.nodeType}))),h.forEach(function(H){H.properties.nodeType=p.findIndex(function(q){return q===H.nodeType})}));var g=Of(h,o);v=If(g,s,u)}var y=1,m={},b={};h.forEach(function(H,q){var J=String(y++);H.clusterId=J,m[J]={id:J,nodes:[H]},b[H.id]={node:H,idx:q}});var x=Ln(t,e),S=[],C={},w=0;x.forEach(function(H,q){var J=0,rt=h[q].id;C[rt]={},H.forEach(function(ft,wt){if(ft){J+=ft;var mt=h[wt].id;C[rt][mt]=ft,w+=ft}}),S.push(J)}),w/=2;for(var I=1/0,T=1/0,O=0,_=[],B={};;){a&&h.every(function(H){return H.hasOwnProperty("properties")})?I=Hc(h,x,S,w)+uu(h,v)*l:I=Hc(h,x,S,w),O===0&&(T=I,_=h,B=m);var z=I>0&&I>T&&I-T<i;if(I>T&&(_=h.map(function(H){return{node:H,clusterId:H.clusterId}}),B=Pt(m),T=I),z||O>100)break;O++,Object.keys(m).forEach(function(H){var q=0;f.forEach(function(J){var rt=J.source,ft=J.target,wt=b[rt].node.clusterId,mt=b[ft].node.clusterId;(wt===H&&mt!==H||mt===H&&wt!==H)&&(q=q+(J[n]||1))}),m[H].sumTot=q}),h.forEach(function(H,q){var J=m[H.clusterId],rt=0,ft,wt=S[q]/(2*w),mt=0,Ot=J.nodes;Ot.forEach(function(V){var W=b[V.id].idx;mt+=x[q][W]||0});var Yt=mt-J.sumTot*wt,jt=Ot.filter(function(V){return V.id!==H.id});jt.forEach(function(V,W){v[V.originIndex]});var Qt=uu(jt,v)*l,Bt=C[H.id];if(Object.keys(Bt).forEach(function(V){var W=b[V].node,j=W.clusterId;if(j!==H.clusterId){var at=m[j],et=at.nodes;if(!(!et||!et.length)){var nt=0;et.forEach(function(lt){var it=b[lt.id].idx;nt+=x[q][it]||0});var F=nt-at.sumTot*wt,st=et.concat([H]);st.forEach(function(lt,it){v[lt.originIndex]});var $=uu(st,v)*l,Q=F-Yt;a&&(Q=F+$-(Yt+Qt)),Q>rt&&(rt=Q,ft=at)}}}),rt>0){ft.nodes.push(H);var ne=H.clusterId;H.clusterId=ft.id;var k=J.nodes.indexOf(H);J.nodes.splice(k,1);var N=0,D=0;f.forEach(function(V){var W=V.source,j=V.target,at=b[W].node.clusterId,et=b[j].node.clusterId;(at===ft.id&&et!==ft.id||et===ft.id&&at!==ft.id)&&(N=N+(V[n]||1)),(at===ne&&et!==ne||et===ne&&at!==ne)&&(D=D+(V[n]||1))}),ft.sumTot=N,J.sumTot=D}})}var Y={},X=0;Object.keys(B).forEach(function(H){var q=B[H];if(!q.nodes||!q.nodes.length){delete B[H];return}var J=String(X+1);J!==H&&(q.id=J,q.nodes=q.nodes.map(function(rt){return{id:rt.id,clusterId:J}}),B[J]=q,Y[H]=J,delete B[H],X++)}),_.forEach(function(H){var q=H.node,J=H.clusterId;q&&(q.clusterId=J,q.clusterId&&Y[q.clusterId]&&(q.clusterId=Y[q.clusterId]))});var K=[],G={};f.forEach(function(H){var q=H.source,J=H.target,rt=H[n]||1,ft=b[q].node.clusterId,wt=b[J].node.clusterId;if(!(!ft||!wt)){var mt="".concat(ft,"---").concat(wt);if(G[mt])G[mt].weight+=rt,G[mt].count++;else{var Ot={source:ft,target:wt,weight:rt,count:1};G[mt]=Ot,K.push(Ot)}}});var tt=[];return Object.keys(B).forEach(function(H){tt.push(B[H])}),{clusters:tt,clusterEdges:K}},cg=function(t,e,n,i,a,o,s,u){return e===void 0&&(e=!1),n===void 0&&(n="weight"),i===void 0&&(i=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Pf(t,e,n,i,!0,a,o,s,u)},hg=function(t,e){var n;e===void 0&&(e=1);for(var i=Pt(t),a=i.nodes,o=a===void 0?[]:a,s=i.edges,u=s===void 0?[]:s,l=function(){var d=Tr({nodes:o,edges:u}),f=Object.keys(d);f.sort(function(g,y){var m,b;return((m=d[g])===null||m===void 0?void 0:m.degree)-((b=d[y])===null||b===void 0?void 0:b.degree)});var v=f[0];if(!o.length||((n=d[v])===null||n===void 0?void 0:n.degree)>=e)return"break";var p=o.findIndex(function(g){return g.id===v});o.splice(p,1),u=u.filter(function(g){return!(g.source===v||g.target===v)})};;){var c=l();if(c==="break")break}return{nodes:o,edges:u}},Vc=function(t,e,n){var i=[];switch(t){case qe.EuclideanDistance:i=e[n];break;default:i=[];break}return i},dg=function(t,e,n,i,a,o){e===void 0&&(e=3),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=["id"]),o===void 0&&(o=qe.EuclideanDistance);var s=t.nodes,u=s===void 0?[]:s,l=t.edges,c=l===void 0?[]:l,h={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===qe.EuclideanDistance&&!u.every(function(J){return J.hasOwnProperty(n)}))return h;var d=[],f=[];if(o===qe.EuclideanDistance&&(d=Of(u,n),f=If(d,i,a)),!f.length)return h;for(var v=va(f.map(function(J){return J.join("")})),p=Math.min(e,u.length,v.length),g=0;g<u.length;g++)u[g].originIndex=g;for(var y=[],m=[],b=[],g=0;g<p;g++)if(g===0){var x=Math.floor(Math.random()*u.length);switch(o){case qe.EuclideanDistance:y[g]=f[x];break;default:y[g]=[];break}m.push(x),b[g]=[u[x]],u[x].clusterId=String(g)}else{for(var S=-1/0,C=0,w=function(ft){if(!m.includes(ft)){for(var wt=0,mt=0;mt<y.length;mt++){var Ot=0;switch(o){case qe.EuclideanDistance:Ot=jc(f[u[ft].originIndex],y[mt],o);break}wt+=Ot}var Yt=wt/y.length;Yt>S&&!y.find(function(jt){return _n(jt,Vc(o,f,u[ft].originIndex))})&&(S=Yt,C=ft)}},I=0;I<u.length;I++)w(I);y[g]=Vc(o,f,C),m.push(C),b[g]=[u[C]],u[C].clusterId=String(g)}for(var T=0;;){for(var g=0;g<u.length;g++){var O=0,_=1/0;if(!(T===0&&m.includes(g))){for(var B=0;B<y.length;B++){var z=0;switch(o){case qe.EuclideanDistance:z=jc(f[g],y[B],o);break}z<_&&(_=z,O=B)}if(u[g].clusterId!==void 0)for(var Y=b[Number(u[g].clusterId)].length-1;Y>=0;Y--)b[Number(u[g].clusterId)][Y].id===u[g].id&&b[Number(u[g].clusterId)].splice(Y,1);u[g].clusterId=String(O),b[O].push(u[g])}}for(var X=!1,g=0;g<b.length;g++){for(var K=b[g],G=new ze([]),B=0;B<K.length;B++)G=G.add(new ze(f[K[B].originIndex]));var tt=G.avg(K.length);tt.equal(new ze(y[g]))||(X=!0,y[g]=tt.getArr())}if(T++,u.every(function(J){return J.clusterId!==void 0})&&X||T>=1e3)break}var H=[],q={};return c.forEach(function(J){var rt,ft,wt=J.source,mt=J.target,Ot=(rt=u.find(function(Bt){return Bt.id===wt}))===null||rt===void 0?void 0:rt.clusterId,Yt=(ft=u.find(function(Bt){return Bt.id===mt}))===null||ft===void 0?void 0:ft.clusterId,jt="".concat(Ot,"---").concat(Yt);if(q[jt])q[jt].count++;else{var Qt={source:Ot,target:Yt,count:1};q[jt]=Qt,H.push(Qt)}}),{clusters:b,clusterEdges:H}},Tf=function(t,e){var n=new ze(e),i=n.norm2(),a=new ze(t),o=a.norm2(),s=n.dot(a),u=i*o,l=u?s/u:0;return l},vg=function(t,e,n,i,a){t===void 0&&(t=[]),n===void 0&&(n=void 0),i===void 0&&(i=[]),a===void 0&&(a=[]);var o=Pt(t.filter(function(d){return d.id!==e.id})),s=t.findIndex(function(d){return d.id===e.id}),u=Of(t,n),l=If(u,i,a),c=l[s],h=[];return o.forEach(function(d,f){if(d.id!==e.id){var v=l[f],p=Tf(v,c);h.push(p),d.cosineSimilarity=p}}),o.sort(function(d,f){return f.cosineSimilarity-d.cosineSimilarity}),{allCosineSimilarity:h,similarNodes:o}},bS=(function(){function r(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.parent[i]=i}}return r.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},r.prototype.union=function(t,e){var n=this.find(t),i=this.find(e);n!==i&&(n<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},r.prototype.connected=function(t,e){return this.find(t)===this.find(e)},r})(),xS=function(t,e){return t-e},SS=(function(){function r(t){t===void 0&&(t=xS),this.compareFn=t,this.list=[]}return r.prototype.getLeft=function(t){return 2*t+1},r.prototype.getRight=function(t){return 2*t+2},r.prototype.getParent=function(t){return t===0?null:Math.floor((t-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},r.prototype.insert=function(t){if(t!==null){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},r.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},r.prototype.moveDown=function(t){var e,n=t,i=this.getLeft(t),a=this.getRight(t),o=this.list.length;i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0&&(n=a),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},r})(),wS=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var u=a[0],l=new Set;l.add(u);var c=function(g,y){return e?g.weight-y.weight:0},h=new SS(c);for(Ao(u.id,s).forEach(function(p){h.insert(p)});!h.isEmpty();){var d=h.delMin(),f=d.source,v=d.target;l.has(f)&&l.has(v)||(n.push(d),l.has(f)||(l.add(f),Ao(f,s).forEach(function(p){h.insert(p)})),l.has(v)||(l.add(v),Ao(v,s).forEach(function(p){h.insert(p)})))}return n},Wc=function(t,e){var n=[],i=t.nodes,a=i===void 0?[]:i,o=t.edges,s=o===void 0?[]:o;if(a.length===0)return n;var u=s.map(function(f){return f});e&&u.sort(function(f,v){return f.weight-v.weight});for(var l=new bS(a.map(function(f){return f.id}));u.length>0;){var c=u.shift(),h=c.source,d=c.target;l.connected(h,d)||(n.push(c),l.union(h,d))}return n},pg=function(t,e,n){var i={prim:wS,kruskal:Wc};return n?i[n](t,e):Wc(t,e)},gg=function(t,e,n){typeof e!="number"&&(e=1e-6),typeof n!="number"&&(n=.85);for(var i=1,a=0,o=1e3,s=t.nodes,u=s===void 0?[]:s,l=t.edges,c=l===void 0?[]:l,h=u.length,d,f={},v={},p=0;p<h;++p){var g=u[p],y=g.id;f[y]=1/h,v[y]=1/h}for(var m=Tr(t);o>0&&i>e;){a=0;for(var p=0;p<h;++p){var g=u[p],y=g.id;if(d=0,m[g.id].inDegree===0)f[y]=0;else{for(var b=De(y,c,"source"),x=0;x<b.length;++x){var S=b[x],C=m[S].outDegree;C>0&&(d+=v[S]/C)}f[y]=n*d,a+=f[y]}}a=(1-a)/h,i=0;for(var p=0;p<h;++p){var g=u[p],y=g.id;d=f[y]+a,i+=Math.abs(d-v[y]),v[y]=d}o-=1}return v},MS=-1,Uo=-1,yg="-1",lr="-1",mg=-1,Uc=(function(){function r(t,e,n,i){t===void 0&&(t=MS),e===void 0&&(e=Uo),n===void 0&&(n=Uo),i===void 0&&(i=yg),this.id=t,this.from=e,this.to=n,this.label=i}return r})(),CS=(function(){function r(t,e){t===void 0&&(t=Uo),e===void 0&&(e=lr),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},r})(),bg=(function(){function r(t,e,n){t===void 0&&(t=Uo),e===void 0&&(e=!0),n===void 0&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new CS(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},r.prototype.addEdge=function(t,e,n,i){if((this.edgeIdAutoIncrease||t===void 0)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var a=new Uc(t,e,n,i);if(this.edges.push(a),this.edgeMap[t]=a,this.nodeMap[e].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var o=new Uc(t,n,e,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},r})(),wn=(function(){function r(t,e,n,i,a){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||lr,edgeLabel:i||yg,nodeLabel2:a||lr}}return r.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r})(),$c=(function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,n=t.length;if(e!==n)return!1;for(var i=0;i<e;i++)if(this.dfsEdgeList[i]!==t[i])return!1;return!0},r.prototype.notEqualTo=function(t){return!this.equalTo(t)},r.prototype.pushBack=function(t,e,n,i,a){return this.dfsEdgeList.push(new wn(t,e,n,i,a)),this.dfsEdgeList},r.prototype.toGraph=function(t,e){t===void 0&&(t=mg),e===void 0&&(e=!1);var n=new bg(t,!0,e);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,o=i.toNode,s=i.nodeEdgeNodeLabel,u=s.nodeLabel1,l=s.edgeLabel,c=s.nodeLabel2;u!==lr&&n.addNode(a,u),c!==lr&&n.addNode(o,c),u!==lr&&c!==u&&n.addEdge(void 0,a,o,l)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,n=e-1;n>=0;n--){var i=this.dfsEdgeList[n],a=i.fromNode,o=i.toNode;a<o&&(t===void 0||o===t)&&(this.rmpath.push(n),t=a)}return this.rmpath},r.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},r})(),$a=(function(){function r(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(t){return this.nodesUsed[t.id]===1},r.prototype.hasEdge=function(t){return this.edgesUsed[t.id]===1},r})(),ES=(function(){function r(t){var e=t.graphs,n=t.minSupport,i=n===void 0?2:n,a=t.minNodeNum,o=a===void 0?1:a,s=t.maxNodeNum,u=s===void 0?4:s,l=t.top,c=l===void 0?10:l,h=t.directed,d=h===void 0?!1:h,f=t.verbose,v=f===void 0?!1:f;this.graphs=e,this.dfsCode=new $c,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=v,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(t,e){var n=this,i=[],a=t.nodeMap;return e.edges.forEach(function(o){(n.directed||e.label<=a[o.to].label)&&i.push(o)}),i},r.prototype.findBackwardEdge=function(t,e,n,i){if(!this.directed&&e===n)return null;for(var a=t.nodeMap,o=a[n.to],s=o.edges,u=s.length,l=0;l<u;l++){var c=s[l];if(!(i.hasEdge(c)||c.to!==e.from)){if(this.directed){if(a[e.from].label<a[n.to].label||a[e.from].label===a[n.to].label&&e.label<=c.label)return c}else if(e.label<c.label||e.label===c.label&&a[e.to].label<=a[n.to].label)return c}}return null},r.prototype.findForwardPureEdges=function(t,e,n,i){for(var a=[],o=e.to,s=t.nodeMap[o].edges,u=s.length,l=0;l<u;l++){var c=s[l],h=t.nodeMap[c.to];n<=h.label&&!i.hasNode(h)&&a.push(c)}return a},r.prototype.findForwardRmpathEdges=function(t,e,n,i){for(var a=[],o=t.nodeMap,s=o[e.to].label,u=o[e.from],l=u.edges,c=l.length,h=0;h<c;h++){var d=l[h],f=o[d.to].label;e.to===d.to||n>f||i.hasNode(o[d.to])||(e.label<d.label||e.label===d.label&&s<=f)&&a.push(d)}return a},r.prototype.getSupport=function(t){var e={};return t.forEach(function(n){e[n.graphId]||(e[n.graphId]=!0)}),Object.keys(e).length},r.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(n){var i=t[n],a=i.nodeLabel1,o=i.edgeLabel,s=i.nodeLabel2;if(!e){e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<e.nodeLabel1||a===e.nodeLabel1&&o<e.edgeLabel||a===e.nodeLabel1&&o===e.edgeLabel&&s<e.nodeLabel2)&&(e={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),e},r.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),e.dfsEdgeList.length===1)return!0;var n=this.directed,i=e.toGraph(mg,n),a=i.nodeMap,o=new $c,s={};i.nodes.forEach(function(h){var d=t.findForwardRootEdges(i,h);d.forEach(function(f){var v=a[f.to],p="".concat(h.label,"-").concat(f.label,"-").concat(v.label);s[p]||(s[p]={projected:[],nodeLabel1:h.label,edgeLabel:f.label,nodeLabel2:v.label});var g={graphId:i.id,edge:f,preNode:null};s[p].projected.push(g)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new wn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var l=function h(d){for(var f=o.buildRmpath(),v=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=o.dfsEdgeList[f[0]].toNode,g={},y=!1,m=0,b=n?-1:0,x=function(G){if(y)return"break";d.forEach(function(tt){var H=new $a(tt),q=t.findBackwardEdge(i,H.edges[f[G]],H.edges[f[0]],H);q&&(g[q.label]||(g[q.label]={projected:[],edgeLabel:q.label}),g[q.label].projected.push({graphId:i.id,edge:g,preNode:tt}),m=o.dfsEdgeList[f[G]].fromNode,y=!0)})},S=f.length-1;S>b;S--){var C=x(S);if(C==="break")break}if(y){var w=t.findMinLabel(g);o.dfsEdgeList.push(new wn(p,m,lr,w.edgeLabel,lr));var I=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[I]!==o.dfsEdgeList[I]?!1:h(g[w.edgeLabel].projected)}var T={};y=!1;var O=0;d.forEach(function(K){var G=new $a(K),tt=t.findForwardPureEdges(i,G.edges[f[0]],v,G);tt.length>0&&(y=!0,O=p,tt.forEach(function(H){var q="".concat(H.label,"-").concat(a[H.to].label);T[q]||(T[q]={projected:[],edgeLabel:H.label,nodeLabel2:a[H.to].label}),T[q].projected.push({graphId:i.id,edge:H,preNode:K})}))});for(var _=f.length,B=function(G){if(y)return"break";var tt=f[G];d.forEach(function(H){var q=new $a(H),J=t.findForwardRmpathEdges(i,q.edges[tt],v,q);J.length>0&&(y=!0,O=o.dfsEdgeList[tt].fromNode,J.forEach(function(rt){var ft="".concat(rt.label,"-").concat(a[rt.to].label);T[ft]||(T[ft]={projected:[],edgeLabel:rt.label,nodeLabel2:a[rt.to].label}),T[ft].projected.push({graphId:i.id,edge:rt,preNode:H})}))})},S=0;S<_;S++){var z=B(S);if(z==="break")break}if(!y)return!0;var Y=t.findMinLabel(T);o.dfsEdgeList.push(new wn(O,p+1,lr,Y.edgeLabel,Y.nodeLabel2));var X=o.dfsEdgeList.length-1;return e.dfsEdgeList[X]!==o.dfsEdgeList[X]?!1:h(T["".concat(Y.edgeLabel,"-").concat(Y.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return l(s[c].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Pt(t))}},r.prototype.subGraphMining=function(t){var e=this,n=this.getSupport(t);if(!(n<this.minSupport)&&this.isMin()){this.report();var i=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},l={};t.forEach(function(c){for(var h=e.graphs[c.graphId],d=h.nodeMap,f=new $a(c),v=a.length-1;v>=0;v--){var p=e.findBackwardEdge(h,f.edges[a[v]],f.edges[a[0]],f);if(p){var g="".concat(e.dfsCode.dfsEdgeList[a[v]].fromNode,"-").concat(p.label);l[g]||(l[g]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[a[v]].fromNode,edgeLabel:p.label}),l[g].projected.push({graphId:c.graphId,edge:p,preNode:c})}}if(!(i>=e.maxNodeNum)){var y=e.findForwardPureEdges(h,f.edges[a[0]],s,f);y.forEach(function(b){var x="".concat(o,"-").concat(b.label,"-").concat(d[b.to].label);u[x]||(u[x]={projected:[],fromNodeId:o,edgeLabel:b.label,nodeLabel2:d[b.to].label}),u[x].projected.push({graphId:c.graphId,edge:b,preNode:c})});for(var m=function(x){var S=e.findForwardRmpathEdges(h,f.edges[a[x]],s,f);S.forEach(function(C){var w="".concat(e.dfsCode.dfsEdgeList[a[x]].fromNode,"-").concat(C.label,"-").concat(d[C.to].label);u[w]||(u[w]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[a[x]].fromNode,edgeLabel:C.label,nodeLabel2:d[C.to].label}),u[w].projected.push({graphId:c.graphId,edge:C,preNode:c})})},v=0;v<a.length;v++)m(v)}}),Object.keys(l).forEach(function(c){var h=l[c],d=h.toNodeId,f=h.edgeLabel;e.dfsCode.dfsEdgeList.push(new wn(o,d,"-1",f,"-1")),e.subGraphMining(l[c].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var h=u[c],d=h.fromNodeId,f=h.edgeLabel,v=h.nodeLabel2;e.dfsCode.dfsEdgeList.push(new wn(d,o+1,lr,f,v)),e.subGraphMining(u[c].projected),e.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,a={},o={},s={};return Object.keys(t).forEach(function(u){var l=t[u],c=l.nodeMap;l.nodes.forEach(function(h,d){var f=h.label,v="".concat(u,"-").concat(f);if(!s[v]){var p=a[f]||0;p++,a[f]=p}s[v]={graphKey:u,label:f},h.edges.forEach(function(g){var y=f,m=c[g.to].label;if(!e&&y>m){var b=m;m=y,y=b}var x=g.label,S="".concat(y,"-").concat(x,"-").concat(m);if(!o[S]){var C=o[S]||0;C++,o[S]=C}})})}),Object.keys(a).forEach(function(u){var l=a[u];if(!(l<n)){var c={nodes:[],edges:[]};c.nodes.push({id:"0",label:u}),i.push(c)}}),i},r.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs;this.directed;var n={};Object.keys(e).forEach(function(i){var a=e[i],o=a.nodeMap;a.nodes.forEach(function(s){var u=t.findForwardRootEdges(a,s);u.forEach(function(l){var c=o[l.to],h="".concat(s.label,"-").concat(l.label,"-").concat(c.label);n[h]||(n[h]={projected:[],nodeLabel1:s.label,edgeLabel:l.label,nodeLabel2:c.label});var d={graphId:i,edge:l,preNode:null};n[h].projected.push(d)})})}),Object.keys(n).forEach(function(i){var a=n[i],o=a.projected,s=a.nodeLabel1,u=a.edgeLabel,l=a.nodeLabel2;t.dfsCode.dfsEdgeList.push(new wn(0,1,s,u,l)),t.subGraphMining(o),t.dfsCode.dfsEdgeList.pop()})}},r})(),AS=function(t,e,n,i){var a={};return Object.keys(t).forEach(function(o,s){var u=t[o],l=new bg(s,!0,e),c={};u.nodes.forEach(function(h,d){l.addNode(d,h[n]),c[h.id]=d}),u.edges.forEach(function(h,d){var f=c[h.source],v=c[h.target];l.addEdge(-1,f,v,h[i])}),l&&l.getNodeNum()&&(a[l.id]=l)}),a},kS=function(t,e,n){var i=[];return t.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[e]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[n]=s.label,u))}),i.push(o)}),i},qc="cluster",OS=function(t){var e=t.graphs,n=t.directed,i=n===void 0?!1:n,a=t.nodeLabelProp,o=a===void 0?qc:a,s=t.edgeLabelProp,u=s===void 0?qc:s,l=AS(e,i,o,u),c=t.minSupport,h=t.maxNodeNum,d=t.minNodeNum,f=t.verbose,v=t.top,p={graphs:l,minSupport:c,maxNodeNum:h,minNodeNum:d,top:v,verbose:f,directed:i},g=new ES(p);g.run();var y=kS(g.frequentSubgraphs,o,u);return y},Gc=function(t,e,n,i){n===void 0&&(n="cluster"),i===void 0&&(i=2);var a=[],o=t.nodes;return e.forEach(function(s,u){a.push(xg(o,s,u,n,i))}),a},xg=function(t,e,n,i,a){var o=[n],s=[],u={};return e.forEach(function(l,c){if(l<=a&&n!==c){o.push(c),s.push(t[c]);var h=t[c][i];u[h]?(u[h].count++,u[h].dists.push(l)):u[h]={count:1,dists:[l]}}}),Object.keys(u).forEach(function(l){u[l].dists=u[l].dists.sort(function(c,h){return c-h})}),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},IS=function(t,e,n,i,a){var o=Math.ceil(n/e),s={},u=0;return i.forEach(function(l,c){for(var h=0,d=0,f=l.nodeIdxs,v=l.neighborNum-1;h<o;){for(var p=f[1+Math.floor(Math.random()*v)],g=0;(s["".concat(c,"-").concat(p)]||s["".concat(p,"-").concat(c)])&&(p=Math.floor(Math.random()*e),g++,!(g>2*e)););if(g<2*e&&(s["".concat(c,"-").concat(p)]={start:c,end:p,distance:a[c][p]},h++,u++,u>=n))return s;if(d++,d>2*e)break}if(h<o){var y=o-h;o=(o+y)/(e-c-1)}}),s},ko=function(t,e,n,i){var a=n.nodes;return i||(i={}),Object.keys(t).forEach(function(o){var s,u;if(!(i&&i[o])){i[o]={nodes:[],edges:[]};var l=t[o],c=(s=e[l.start])===null||s===void 0?void 0:s.nodeIdxs,h=(u=e[l.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!h)){var d=new Set(h),f=c.filter(function(m){return d.has(m)});if(!(!f||!f.length)){for(var v={},p=f.length,g=0;g<p;g++){var y=a[f[g]];i[o].nodes.push(y),v[y.id]=!0}n.edges.forEach(function(m){v[m.source]&&v[m.target]&&i[o].edges.push(m)})}}}}),i},Oo=function(t,e,n,i){var a,o,s={};t.nodes.forEach(function(l){s[l.id]=l});var u=0;return!(!((a=e?.edges)===null||a===void 0)&&a.length)||((o=e?.nodes)===null||o===void 0?void 0:o.length)<2?0:(t.edges.forEach(function(l){var c=s[l.source][n],h=s[l.target][n],d=e?.nodes[0][n],f=e?.nodes[1][n],v=e?.edges[0][i];l[i]===v&&(c===d&&h===f||c===f&&h===d)&&u++}),u)},PS=function(t,e,n){for(var i=1/0,a=0,o=function(l){var c=t[l],h=Object.keys(c).sort(function(m,b){return c[m]-c[b]}),d=10,f=[];h.forEach(function(m,b){f[b%d]||(f[b%d]={graphs:[],totalCount:0,aveCount:0}),f[b%d].graphs.push(m),f[b%d].totalCount+=c[m]});var v=0,p=[];f.forEach(function(m){var b=m.totalCount/m.graphs.length;m.aveCount=b,p.push(b);var x=0,S=m.length;m.graphs.forEach(function(C,w){var I=c[C];m.graphs.forEach(function(T,O){w!==O&&(x+=Math.abs(I-c[T]))})}),x/=S*(S-1)/2,v+=x}),v/=f.length;var g=0;p.forEach(function(m,b){p.forEach(function(x,S){b!==S&&(g+=Math.abs(m-x))}),g/=p.length*(p.length-1)/2});var y=g-v;i<y&&(i=y,a=l)},s=0;s<e;s++)o(s);return{structure:n[a],structureCountMap:t[a]}},Kc=function(t,e){var n={},i={};return t.forEach(function(a,o){n[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[e];i[s]||(i[s]=[]),i[s].push(a)}),{nodeMap:n,nodeLabelMap:i}},Zc=function(t,e,n){var i={},a={};return t.forEach(function(o,s){i["".concat(tg)]={idx:s,edge:o};var u=o[e];a[u]||(a[u]=[]),a[u].push(o);var l=n[o.source];l&&(l.degree++,l.outDegree++);var c=n[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:i,edgeLabelMap:a}},Qc=function(t,e,n){var i=e.length,a={};return e.forEach(function(o,s){for(var u=n?0:s+1,l=t[s].id,c=u;c<i;c++)if(s!==c){var h=t[c].id,d=o[c];a["".concat(l,"-").concat(h)]=d,n||(a["".concat(h,"-").concat(l)]=d)}}),a},TS=function(t,e,n,i,a,o,s,u,l,c,h){var d,f="".concat(e.id,"-").concat(n.id);if(c&&c[f])return c[f];var v=h?h[f]:void 0;if(!v){var p=(d={},d[f]={start:i[e.id].idx,end:i[n.id].idx,distance:a},d);h=ko(p,o,t,h),v=h[f]}return Oo(v,s,u,l)},Jc=function(t,e,n,i){var a,o,s,u=(a=t[e])===null||a===void 0?void 0:a.degree,l=(o=t[e])===null||o===void 0?void 0:o.inDegree,c=(s=t[e])===null||s===void 0?void 0:s.outDegree;return t[e]===void 0&&(u=1/0,l=1/0,c=1/0,i[e].forEach(function(h){var d=n[h.id].degree;u>d&&(u=d);var f=n[h.id].inDegree;l>f&&(l=f);var v=n[h.id].outDegree;c>v&&(c=v)}),t[e]={degree:u,inDegree:l,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:c}},Sg=function(t,e,n,i,a,o,s){var u;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!t||!t.nodes)){var l=t.nodes.length;if(l){var c=ga(t,n),h=ga(e,n),d=Qc(t.nodes,c,n),f=Qc(e.nodes,h,n),v=Kc(t.nodes,o),p=v.nodeMap,g=v.nodeLabelMap,y=Kc(e.nodes,o),m=y.nodeMap,b=y.nodeLabelMap;Zc(t.edges,s,p);var x=Zc(e.edges,s,m).edgeLabelMap,S=[];h?.forEach(function(F){S=S.concat(F)}),a||(a=Math.max.apply(Math,Qe(Qe([],S,!1),[2],!1))),i||(i=a);var C=Gc(t,c,o,i),w=Gc(e,h,o,i),I=Math.min(100,l*(l-1)/2),T=IS(i,l,I,C,c),O=ko(T,C,t),_=10,B=1,z=1,Y=4,X={graphs:O,nodeLabelProp:o,edgeLabelProp:s,minSupport:B,minNodeNum:z,maxNodeNum:Y,directed:n},K=OS(X).slice(0,_),G=K.length,tt=[];K.forEach(function(F,st){tt[st]={},Object.keys(O).forEach(function($){var Q=O[$],lt=Oo(Q,F,o,s);tt[st][$]=lt})});var H=PS(tt,G,K),q=H.structure,J=H.structureCountMap,rt=e.nodes[0],ft=[],wt=(u=e.nodes[0])===null||u===void 0?void 0:u[o],mt=-1/0;e.nodes.forEach(function(F){var st=F[o],$=g[st];$?.length>mt&&(mt=$.length,ft=$,wt=st,rt=F)});var Ot={},Yt={},jt={},Qt={},Bt={},ne={};Object.keys(b).forEach(function(F,st){Bt[F]=[],n&&(ne[F]=[]);var $=b[F],Q={};$.forEach(function(gt){var yt=f["".concat(rt.id,"-").concat(gt.id)];if(yt&&Bt[F].push(yt),Q["".concat(rt.id,"-").concat(gt.id)]={start:0,end:m[gt.id].idx,distance:yt},n){var kt=f["".concat(gt.id,"-").concat(rt.id)];kt&&ne[F].push(kt)}}),Bt[F]=Bt[F].sort(function(gt,yt){return gt-yt}),n&&(ne[F]=ne[F].sort(function(gt,yt){return gt-yt})),Yt=ko(Q,w,e,Yt);var lt=[];if(Object.keys(Q).forEach(function(gt){if(jt[gt]){lt.push(jt[gt]);return}var yt=Yt[gt];jt[gt]=Oo(yt,q,o,s),lt.push(jt[gt])}),lt=lt.sort(function(gt,yt){return yt-gt}),Qt["".concat(rt.id,"-").concat(F)]=lt,F!==wt)for(var it=ft?.length||0,vt=function(yt){var kt=ft[yt],Tt=C[p[kt.id].idx],Wt=Tt.nodeLabelCountMap[F],Dt=b[F].length;if(!Wt||Wt.count<Dt)return ft.splice(yt,1),"continue";for(var Ut=!1,Ft=0;Ft<Dt;Ft++)if(Wt.dists[Ft]>Bt[F][Ft]){Ut=!0;break}if(Ut)return ft.splice(yt,1),"continue";var fe={};Tt.neighbors.forEach(function(Zt){var xe=d["".concat(kt.id,"-").concat(Zt.id)];fe["".concat(kt.id,"-").concat(Zt.id)]={start:p[kt.id].idx,end:p[Zt.id].idx,distance:xe}}),O=ko(fe,C,t,O);var Kt=[];Object.keys(fe).forEach(function(Zt){if(J[Zt]){Kt.push(J[Zt]);return}var xe=O[Zt];J[Zt]=Oo(xe,q,o,s),Kt.push(J[Zt])}),Kt=Kt.sort(function(Zt,xe){return xe-Zt});for(var He=!1,Ft=0;Ft<Dt;Ft++)if(Kt[Ft]<lt[Ft]){He=!0;break}if(He)return ft.splice(yt,1),"continue"},ht=it-1;ht>=0;ht--)vt(ht)});var k=[];ft?.forEach(function(F){for(var st=p[F.id].idx,$=xg(t.nodes,c[st],st,o,a),Q=$.neighbors,lt=Q.length,it=!1,vt=lt-1;vt>=0;vt--){if(Q.length+1<e.nodes.length){it=!0;return}var ht=Q[vt],gt=ht[o];if(!b[gt]||!b[gt].length){Q.splice(vt,1);continue}if(!Bt[gt]||!Bt[gt].length){Q.splice(vt,1);continue}var yt="".concat(F.id,"-").concat(ht.id),kt=d[yt],Tt=Bt[gt].length-1,Wt=Bt[gt][Tt];if(kt>Wt){Q.splice(vt,1);continue}if(n){var Dt="".concat(ht.id,"-").concat(F.id),Ut=d[Dt];Tt=ne[gt].length-1;var Ft=ne[gt][Tt];if(Ut>Ft){Q.splice(vt,1);continue}}var fe=J[yt]?J[yt]:TS(t,F,ht,p,kt,C,q,o,s,J,O),Kt="".concat(rt.id,"-").concat(gt),He=Qt[Kt][Qt[Kt].length-1];if(fe<He){Q.splice(vt,1);continue}var Zt=Jc(Ot,gt,m,b),xe=Zt.minPatternNodeLabelDegree;if(Zt.minPatternNodeLabelInDegree,Zt.minPatternNodeLabelOutDegree,p[ht.id].degree<xe){Q.splice(vt,1);continue}}it||k.push({nodes:[F].concat(Q)})});var N=pa(e,rt.id,!1).length,D={};n?(Object.keys(N).forEach(function(F){var st=m[F].node[o];D[st]?D[st].push(N[F]):D[st]=[N[F]]}),Object.keys(D).forEach(function(F){D[F].sort(function(st,$){return st-$})})):D=Bt;for(var V=k.length,W=function(st){var $=k[st],Q=$.nodes[0],lt={},it={};$.nodes.forEach(function(Nt,oe){it[Nt.id]={idx:oe,node:Nt,degree:0,inDegree:0,outDegree:0};var qt=Nt[o];lt[qt]?lt[qt]++:lt[qt]=1});var vt=[],ht={};t.edges.forEach(function(Nt){it[Nt.source]&&it[Nt.target]&&(vt.push(Nt),ht[Nt[s]]?ht[Nt[s]]++:ht[Nt[s]]=1,it[Nt.source].degree++,it[Nt.target].degree++,it[Nt.source].outDegree++,it[Nt.target].inDegree++)});for(var gt=Object.keys(x).length,yt=!1,kt=0;kt<gt;kt++){var Tt=Object.keys(x)[kt];if(!ht[Tt]||ht[Tt]<x[Tt].length){yt=!0;break}}if(yt)return k.splice(st,1),"continue";var Wt=vt.length;if(Wt<e.edges.length)return k.splice(st,1),"break";for(var Dt=!1,Ut=function(oe){var qt=vt[oe],we=qt[s],Re=x[we];if(!Re||!Re.length)return ht[we]--,Re&&ht[we]<Re.length?(Dt=!0,"break"):(vt.splice(oe,1),it[qt.source].degree--,it[qt.target].degree--,it[qt.source].outDegree--,it[qt.target].inDegree--,"continue");var Un=it[qt.source].node[o],$n=it[qt.target].node[o],ln=!1;if(Re.forEach(function(qn){var Gn=m[qn.source].node,Fr=m[qn.target].node;Gn[o]===Un&&Fr[o]===$n&&(ln=!0),!n&&Gn[o]===$n&&Fr[o]===Un&&(ln=!0)}),!ln)return ht[we]--,Re&&ht[we]<Re.length?(Dt=!0,"break"):(vt.splice(oe,1),it[qt.source].degree--,it[qt.target].degree--,it[qt.source].outDegree--,it[qt.target].inDegree--,"continue")},kt=Wt-1;kt>=0;kt--){var Ft=Ut(kt);if(Ft==="break")break}if(Dt)return k.splice(st,1),"continue";$.edges=vt;var fe=pa($,$.nodes[0].id,!1).length;if(Object.keys(fe).reverse().forEach(function(Nt){if(!(Nt===$.nodes[0].id||Dt)){if(fe[Nt]===1/0){var oe=it[Nt].node[o];if(lt[oe]--,lt[oe]<b[oe].length){Dt=!0;return}var qt=$.nodes.indexOf(it[Nt].node);$.nodes.splice(qt,1),it[Nt]=void 0;return}var we=p[Nt].node[o];if(!D[we]||!D[we].length||fe[Nt]>D[we][D[we].length-1]){var oe=it[Nt].node[o];if(lt[oe]--,lt[oe]<b[oe].length){Dt=!0;return}var qt=$.nodes.indexOf(it[Nt].node);$.nodes.splice(qt,1),it[Nt]=void 0}}}),Dt)return k.splice(st,1),"continue";for(var Kt=!0,He=0;Kt&&!Dt;){Kt=!1;var Zt=n?it[Q.id].degree<m[rt.id].degree||it[Q.id].inDegree<m[rt.id].inDegree||it[Q.id].outDegree<m[rt.id].outDegree:it[Q.id].degree<m[rt.id].degree;if(Zt){Dt=!0;break}if(lt[Q[o]]<b[Q[o]].length){Dt=!0;break}for(var xe=$.nodes.length,Lr=xe-1;Lr>=0;Lr--){var Se=$.nodes[Lr],Hn=it[Se.id].degree,rr=it[Se.id].inDegree,Mi=it[Se.id].outDegree,Ci=Se[o],un=Jc(Ot,Ci,m,b),Vn=un.minPatternNodeLabelDegree,Ei=un.minPatternNodeLabelInDegree,Ai=un.minPatternNodeLabelOutDegree,Wn=n?Hn<Vn||rr<Ei||Mi<Ai:Hn<Vn;if(Wn){if(lt[Se[o]]--,lt[Se[o]]<b[Se[o]].length){Dt=!0;break}$.nodes.splice(Lr,1),it[Se.id]=void 0,Kt=!0}}if(Dt||!Kt&&He!==0)break;Wt=vt.length;for(var Br=Wt-1;Br>=0;Br--){var Oe=vt[Br];if(!it[Oe.source]||!it[Oe.target]){vt.splice(Br,1);var Dr=Oe[s];if(ht[Dr]--,it[Oe.source]&&(it[Oe.source].degree--,it[Oe.source].outDegree--),it[Oe.target]&&(it[Oe.target].degree--,it[Oe.target].inDegree--),x[Dr]&&ht[Dr]<x[Dr].length){Dt=!0;break}Kt=!0}}He++}if(Dt||Dt||$.nodes.length<e.nodes.length||vt.length<e.edges.length)return k.splice(st,1),"continue"},j=V-1;j>=0;j--){var at=W(j);if(at==="break")break}for(var et=k.length,nt=function(st){var $=k[st],Q={};$.edges.forEach(function(vt){var ht="".concat(vt.source,"-").concat(vt.target,"-").concat(vt.label);Q[ht]?Q[ht]++:Q[ht]=1});for(var lt=function(ht){var gt=k[ht],yt={};gt.edges.forEach(function(Tt){var Wt="".concat(Tt.source,"-").concat(Tt.target,"-").concat(Tt.label);yt[Wt]?yt[Wt]++:yt[Wt]=1});var kt=!0;Object.keys(yt).length!==Object.keys(Q).length?kt=!1:Object.keys(Q).forEach(function(Tt){yt[Tt]!==Q[Tt]&&(kt=!1)}),kt&&k.splice(ht,1)},it=et-1;it>st;it--)lt(it);et=k.length},j=0;j<=et-1;j++)nt(j);return k}}},$o=(function(){function r(t){t===void 0&&(t=10),this.linkedList=new Jp,this.maxStep=t}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r})(),wg=Ef;const NS={getAdjMatrix:Ln,breadthFirstSearch:eg,connectedComponent:Mf,getDegree:Tr,getInDegree:ng,getOutDegree:ig,detectCycle:Ef,detectDirectedCycle:wg,detectAllCycles:og,detectAllDirectedCycle:kf,detectAllUndirectedCycle:Af,depthFirstSearch:Cf,dijkstra:pa,findAllPath:lg,findShortestPath:ug,floydWarshall:ga,labelPropagation:fg,louvain:Pf,iLouvain:cg,kCore:hg,kMeans:dg,cosineSimilarity:Tf,nodesCosineSimilarity:vg,minimumSpanningTree:pg,pageRank:gg,getNeighbors:De,Stack:$o,GADDI:Sg},_S=Object.freeze(Object.defineProperty({__proto__:null,GADDI:Sg,Stack:$o,breadthFirstSearch:eg,connectedComponent:Mf,cosineSimilarity:Tf,default:NS,depthFirstSearch:Cf,detectAllCycles:og,detectAllDirectedCycle:kf,detectAllUndirectedCycle:Af,detectCycle:Ef,detectDirectedCycle:wg,dijkstra:pa,findAllPath:lg,findShortestPath:ug,floydWarshall:ga,getAdjMatrix:Ln,getDegree:Tr,getInDegree:ng,getNeighbors:De,getOutDegree:ig,iLouvain:cg,kCore:hg,kMeans:dg,labelPropagation:fg,louvain:Pf,minimumSpanningTree:pg,nodesCosineSimilarity:vg,pageRank:gg},Symbol.toStringTag,{value:"Module"}));var Nf=Es,LS=function(t){return function(e,n){return e[t]-n[t]}},th=function(t,e,n){return t>=e&&t<=n},As=function(t,e,n,i){var a=1e-4,o={x:n.x-t.x,y:n.y-t.y},s={x:e.x-t.x,y:e.y-t.y},u={x:i.x-n.x,y:i.y-n.y},l=s.x*u.y-s.y*u.x,c=l*l,h=1/l,d=s.x*s.x+s.y*s.y,f=u.x*u.x+u.y*u.y;if(c>a*d*f){var v=(o.x*u.y-o.y*u.x)*h,p=(o.x*s.y-o.y*s.x)*h;return!th(v,0,1)||!th(p,0,1)?null:{x:t.x+v*s.x,y:t.y+v*s.y}}return null},Mg=function(t,e){var n=t.x,i=t.y,a=t.width,o=t.height,s=n+a/2,u=i+o/2,l=[],c={x:s,y:u};l.push({x:n,y:i}),l.push({x:n+a,y:i}),l.push({x:n+a,y:i+o}),l.push({x:n,y:i+o}),l.push({x:n,y:i});for(var h=null,d=1;d<l.length&&(h=As(l[d-1],l[d],c,e),!h);d++);return h},Cg=function(t,e){var n=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=o-n,l=s-i,c=Math.sqrt(u*u+l*l);if(c<a)return null;var h=Math.sign(u),d=Math.sign(l),f=Math.atan(l/u);return{x:n+Math.abs(a*Math.cos(f))*h,y:i+Math.abs(a*Math.sin(f))*d}},Eg=function(t,e){var n=t.rx,i=t.ry,a=t.x,o=t.y,s=e.x-a,u=e.y-o,l=Math.atan2(u/i,s/n);return l<0&&(l+=2*Math.PI),{x:a+n*Math.cos(l),y:o+i*Math.sin(l)}},qo=function(t,e,n){n===void 0&&(n=1);var i=[t.x,t.y,n];return(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]),wf(i,i,e),{x:i[0],y:i[1]}},Ag=function(t,e,n){n===void 0&&(n=1),(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]);var i=Gp([1,0,0,0,1,0,0,0,1],e);i||(i=[1,0,0,0,1,0,0,0,1]);var a=[t.x,t.y,n];return wf(a,a,i),{x:a[0],y:a[1]}},rl=function(t,e,n){var i=t.x-e.x,a=t.y-e.y,o=t.x-n.x,s=t.y-n.y,u=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,l=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,c=a*o-i*s;return{x:-(s*u-a*l)/c,y:-(i*l-o*u)/c}},Go=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},BS=function(t,e){var n=[];return t.forEach(function(i){var a=[];i.forEach(function(o){a.push(o*e)}),n.push(a)}),n},DS=function(t){for(var e=[],n=t.length,i=0;i<n;i+=1){e[i]=[];for(var a=0;a<n;a+=1)i===a?e[i][a]=0:t[i][a]===0||!t[i][a]?e[i][a]=1/0:e[i][a]=t[i][a]}for(var o=0;o<n;o+=1)for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)e[i][a]>e[i][o]+e[o][a]&&(e[i][a]=e[i][o]+e[o][a]);return e},FS=function(t,e){var n=t.nodes,i=t.edges,a=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,u){o[s.id]=u;var l=[];a.push(l)}),i&&i.forEach(function(s){var u=s.source,l=s.target,c=o[u],h=o[l];a[c][h]=1,e||(a[h][c]=1)}),a},kg=function(t,e){t.translate(e.x,e.y)},Og=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=t.getCanvasBBox(),a=e.x-i.minX,o=e.y-i.minY,s=Nf(n,[["t",a,o]]);t.setMatrix(s)},RS=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=e;pt(e)||(i=[e,e]),pt(e)&&e.length===1&&(i=[e[0],e[0]]),n=Nf(n,[["s",i[0],i[1]]]),t.setMatrix(n)},zS=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=Nf(n,[["r",e]]),t.setMatrix(n)},XS=function(t,e,n){for(var i=[],a=0;a<t;a++)i[a]=0;return n.forEach(function(o){o.source&&(i[e[o.source]]+=1),o.target&&(i[e[o.target]]+=1)}),i};function YS(r,t,e){return(e[0]-r[0])*(t[1]-r[1])===(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}var ya=function(t,e,n){var i=!1,a=t.length,o=1e-6;function s(h){return Math.abs(h)<o?0:h<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var l=t[u],c=t[(u+1)%a];if(YS(l,c,[e,n]))return!0;s(l[1]-n)>0!=s(c[1]-n)>0&&s(e-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(i=!i)}return i},Ig=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},jS=function(t,e){var n=!1;return U(t,function(i){if(As(i.from,i.to,e.from,e.to))return n=!0,!1}),n},Pg=function(t,e){var n=function(d){var f=d.map(function(p){return p[0]}),v=d.map(function(p){return p[1]});return{minX:Math.min.apply(null,f),maxX:Math.max.apply(null,f),minY:Math.min.apply(null,v),maxY:Math.max.apply(null,v)}},i=function(d){for(var f=[],v=d.length,p=0;p<v-1;p++){var g=d[p],y=d[p+1];f.push({from:{x:g[0],y:g[1]},to:{x:y[0],y:y[1]}})}if(f.length>1){var m=d[0],b=d[v-1];f.push({from:{x:b[0],y:b[1]},to:{x:m[0],y:m[1]}})}return f};if(t.length<2||e.length<2)return!1;var a=n(t),o=n(e);if(!Ig(a,o))return!1;var s=!1;if(U(e,function(h){if(ya(t,h[0],h[1]))return s=!0,!1}),s||(U(t,function(h){if(ya(e,h[0],h[1]))return s=!0,!1}),s))return!0;var u=i(t),l=i(e),c=!1;return U(l,function(h){if(jS(u,h))return c=!0,!1}),c},Bn=(function(){function r(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i}return r.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2),a={x:t,y:e,minX:t,minY:e,maxX:n,maxY:i,width:n-t,height:i-e};return a},r})(),_f=function(t,e){var n={top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]};return n[e]},HS=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),i=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),a=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(a){var o=n/a,s=i/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},Tg=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),a=0,o=[],s=0;s<4;s++){var u=_f(i,n[s]),l=u[0],c=u[1],h=u[2],d=u[3];o[s]=As({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:l,y:c},{x:h,y:d}),o[s]&&(a+=1)}return[o,a]},Lf=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=_f(i,n[s]),l=u[0],c=u[1],h=u[2],d=u[3],f=HS(e,new Bn(l,c,h,d));f=Math.abs(f-.5),f>=0&&f<=1&&(o+=1,a=f<a?f:a)}return o===0?-1:a},Ng=function(t){var e=0,n=0;if(t.length>0){for(var i=0,a=t;i<a.length;i++){var o=a[i];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},Ko=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},_g=function(t,e){var n=e.x1,i=e.y1,a=e.x2-n,o=e.y2-i,s=t.x-n,u=t.y-i,l=s*a+u*o,c;l<=0?c=0:(s=a-s,u=o-u,l=s*a+u*o,l<=0?c=0:c=l*l/(a*a+o*o));var h=s*s+u*u-c;return h<0&&(h=0),h},nl=function(t,e,n){return n===void 0&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},Lg=function(t,e){var n=t.x<e.x,i=t.x>e.x+e.width,a=t.y>e.y+e.height,o=t.y<e.y,s=n||i||a||o;if(!s)return 0;if(a&&!n&&!i)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!i)return Math.pow(t.y-e.y,2);if(n&&!a&&!o)return Math.pow(e.x-t.x,2);if(i&&!a&&!o)return Math.pow(e.x+e.width-t.x,2);var u=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),l=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return u*u+l*l},VS=function(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=e.x,u=e.y,l=[a-n,o-i];if(Qp(l,[0,0]))return NaN;var c=[-l[1],l[0]];On(c,c);var h=[s-n,u-i];return Math.abs(Zp(h,c))};const WS=Object.freeze(Object.defineProperty({__proto__:null,Line:Bn,applyMatrix:qo,compare:LS,distance:Go,floydWarshall:DS,fractionToLine:Lf,getAdjMatrix:FS,getBBoxBoundLine:_f,getCircleCenterByPoints:rl,getCircleIntersectByPoint:Cg,getDegree:XS,getEllipseIntersectByPoint:Eg,getLineIntersect:As,getPointsCenter:Ng,getRectIntersectByPoint:Mg,intersectBBox:Ig,invertMatrix:Ag,isPointInPolygon:ya,isPointsOverlap:nl,isPolygonsIntersect:Pg,itemIntersectByLine:Tg,move:Og,pointLineDistance:VS,pointLineSquareDist:_g,pointRectSquareDist:Lg,rotate:zS,scale:RS,scaleMatrix:BS,squareDist:Ko,translate:kg},Symbol.toStringTag,{value:"Module"}));var zr="rgb(95, 149, 255)",US="rgb(255, 255, 255)",eh="rgb(0, 0, 0)",lu="rgb(247, 250, 255)",$S="rgb(239, 244, 255)",qa="rgb(253, 253, 253)",rh="rgb(250, 250, 250)",Ga="rgb(224, 224, 224)",nh="rgb(234, 234, 234)",qS="rgb(245, 245, 245)",GS="rgb(191, 213, 255)",ih="#4572d9",KS="rgb(223, 234, 255)",At={mainStroke:zr,activeStroke:zr,activeFill:lu,inactiveStroke:GS,inactiveFill:lu,selectedStroke:zr,selectedFill:US,highlightStroke:ih,highlightFill:KS,disableStroke:Ga,disableFill:rh,edgeMainStroke:Ga,edgeActiveStroke:zr,edgeInactiveStroke:nh,edgeSelectedStroke:zr,edgeHighlightStroke:zr,edgeDisableStroke:qS,comboMainStroke:Ga,comboMainFill:qa,comboActiveStroke:zr,comboActiveFill:lu,comboInactiveStroke:Ga,comboInactiveFill:qa,comboSelectedStroke:zr,comboSelectedFill:qa,comboHighlightStroke:ih,comboHighlightFill:qa,comboDisableStroke:nh,comboDisableFill:rh};const ct={version:"0.3.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:At.mainStroke,fill:$S},size:20,color:At.mainStroke,linkPoints:{size:8,lineWidth:1,fill:At.activeFill,stroke:At.activeStroke}},nodeStateStyles:{active:{fill:At.activeFill,stroke:At.activeStroke,lineWidth:2,shadowColor:At.mainStroke,shadowBlur:10},selected:{fill:At.selectedFill,stroke:At.selectedStroke,lineWidth:4,shadowColor:At.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:At.highlightFill,stroke:At.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:At.inactiveFill,stroke:At.inactiveStroke,lineWidth:1},disable:{fill:At.disableFill,stroke:At.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:eh,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:At.edgeMainStroke,lineAppendWidth:2},color:At.edgeMainStroke},edgeStateStyles:{active:{stroke:At.edgeActiveStroke,lineWidth:1},selected:{stroke:At.edgeSelectedStroke,lineWidth:2,shadowColor:At.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:At.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:At.edgeInactiveStroke,lineWidth:1},disable:{stroke:At.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:eh,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:At.comboMainFill,lineWidth:1,stroke:At.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:At.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:At.comboActiveStroke,lineWidth:1,fill:At.comboActiveFill},selected:{stroke:At.comboSelectedStroke,lineWidth:2,fill:At.comboSelectedFill,shadowColor:At.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:At.comboHighlightStroke,lineWidth:2,fill:At.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:At.comboInactiveStroke,fill:At.comboInactiveFill,lineWidth:1},disable:{stroke:At.comboDisableStroke,fill:At.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},ZS={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var or=Math.PI,il=Math.sin,al=Math.cos,ie=il(or/8),ae=al(or/8),Zo=function(t,e){var n=t.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=qo(i,o),a=qo(a,o)}var s=i.x,u=i.y,l=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:l,maxY:c,width:l-s,height:c-u}},Bg=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group"),i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=e.getKeyShape(),o=a.getBBox(),s=t.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,l=s.position||ct.defaultLoopPosition,c=[i[6],i[7]],h=[t.startPoint.x,t.startPoint.y],d=[t.endPoint.x,t.endPoint.y],f=o.height/2,v=o.height/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae;if(h[0]===d[0]&&h[1]===d[1]){switch(l){case"top":h=[c[0]-p,c[1]-g],d=[c[0]+y,c[1]-m];break;case"top-right":f=o.height/2,v=o.width/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]+p,c[1]-g],d=[c[0]+m,c[1]-y];break;case"right":f=o.width/2,v=o.width/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]+g,c[1]-p],d=[c[0]+m,c[1]+y];break;case"bottom-right":f=o.width/2,v=o.height/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]+g,c[1]+p],d=[c[0]+y,c[1]+m];break;case"bottom":f=o.height/2,v=o.height/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]+p,c[1]+g],d=[c[0]-y,c[1]+m];break;case"bottom-left":f=o.height/2,v=o.width/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]-p,c[1]+g],d=[c[0]-m,c[1]+y];break;case"left":f=o.width/2,v=o.width/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]-g,c[1]+p],d=[c[0]-m,c[1]-y];break;case"top-left":f=o.width/2,v=o.height/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]-g,c[1]-p],d=[c[0]-y,c[1]-m];break;default:f=o.width/2,v=o.width/2,p=f*ie,g=f*ae,y=v*ie,m=v*ae,h=[c[0]-p,c[1]-g],d=[c[0]+y,c[1]-m]}if(s.clockwise===!1){var b=[h[0],h[1]];h=[d[0],d[1]],d=[b[0],b[1]]}}var x=[h[0]-c[0],h[1]-c[1]],S=(f+u)/f,C=(v+u)/v;s.clockwise===!1&&(S=(v+u)/v,C=(f+u)/f);var w=me([0,0],x,S),I=[c[0]+w[0],c[1]+w[1]],T=[d[0]-c[0],d[1]-c[1]],O=me([0,0],T,C),_=[c[0]+O[0],c[1]+O[1]];return t.startPoint={x:h[0],y:h[1]},t.endPoint={x:d[0],y:d[1]},t.controlPoints=[{x:I[0],y:I[1]},{x:_[0],y:_[1]}],t},Io=function(t,e,n,i,a){var o=1e-4,s=[],u=t.getPoint(e);if(u===null)return{x:0,y:0,angle:0};if(e<o)s=t.getStartTangent().reverse();else if(e>1-o)s=t.getEndTangent();else{var l=t.getPoint(e+o);s.push([u.x,u.y]),s.push([l.x,l.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=or*2),n&&(u.x+=al(c)*n,u.y+=il(c)*n),i){var h=c-or/2;c>1/2*or&&c<3/2*or&&(h-=or),u.x+=al(h)*i,u.y+=il(h)*i}var d={x:u.x,y:u.y,angle:c};return a?(c>1/2*or&&c<3/2*or&&(c-=or),E({rotate:c},d)):d},Dg=function r(t,e){if(e(t)===!1)return!1;if(t&&t.children){for(var n=t.children.length-1;n>=0;n--)if(!r(t.children[n],e))return!1}return!0},QS=function r(t,e){if(t&&t.children){for(var n=t.children.length-1;n>=0;n--)if(!r(t.children[n],e))return}return e(t)!==!1},Le=function(t,e){typeof e=="function"&&Dg(t,e)},Vr=function(t,e){typeof e=="function"&&QS(t,e)},Fg=function(t,e){return e*(ZS[t]||1)},Rg=function(t,e){var n=0,i=new RegExp("[-]+");return t.split("").forEach(function(a){i.test(a)?n+=e:n+=Fg(a,e)}),[n,e]},ol=function(t,e){var n=[],i={},a={};t.forEach(function(u){a[u.id]=u}),t.forEach(function(u,l){var c=Pt(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo "+c.id+" can not be the same as the combo's id"),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo "+c.id+" does not exist!"),delete c.parentId);var h=i[c.id];if(h){if(c.children=h.children,i[c.id]=c,h=c,!h.parentId){n.push(h);return}var d=i[h.parentId];if(d)d.children?d.children.push(c):d.children=[c];else{var f={id:h.parentId,children:[h]};i[h.parentId]=f,i[c.id]=c}return}if(ot(u.parentId)){var v=i[u.parentId];if(v)v.children?v.children.push(c):v.children=[c],i[c.id]=c;else{var p={id:u.parentId,children:[c]};i[p.id]=p,i[c.id]=c}}else n.push(c),i[c.id]=c});var o={};(e||[]).forEach(function(u){o[u.id]=u;var l=i[u.comboId];if(l){var c={id:u.id,comboId:u.comboId};l.children?l.children.push(c):l.children=[c],c.itemType="node",i[u.id]=c}});var s=0;return n.forEach(function(u){u.depth=s+10,Dg(u,function(l){var c,h=i[l.id].itemType;h==="node"?c=i[l.comboId]:c=i[l.parentId],c&&h==="node"?l.depth=s+1:l.depth=s+10,s<l.depth&&(s=l.depth);var d=o[l.id];return d&&(d.depth=l.depth),!0})}),n},sl=function(t,e,n){var i=t,a,o={root:{children:t}},s=!1,u="root";(t||[]).forEach(function(f){if(!s){if(f.id===e){a=f,f.itemType==="combo"?a.parentId=n:a.comboId=n,s=!0;return}Le(f,function(v){return o[v.id]={children:v.children},i=o[v.parentId||v.comboId||"root"].children,v&&(v.removed||e===v.id)&&i?(u=v.parentId||v.comboId||"root",a=v,v.itemType==="combo"?a.parentId=n:a.comboId=n,s=!0,!1):!0})}}),i=o[u].children;var l=i?i.indexOf(a):-1;if(l>-1&&i.splice(l,1),s||(a={id:e,itemType:"node",comboId:n},o[e]={children:void 0}),e){var c=!1;if(n){var h=0;(t||[]).forEach(function(f){c||Le(f,function(v){return n===v.id?(c=!0,v.children?v.children.push(a):v.children=[a],h=v.depth,a.itemType==="node"?a.depth=h+2:a.depth=h+1,!1):!0})})}else(!n||!c)&&a.itemType!=="node"&&t.push(a);var d=a.depth;Le(a,function(f){return f.itemType==="node"?d+=2:d+=1,f.depth=d,!0})}return t},Po=function(t,e){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!t||t.length===0||(t.forEach(function(i){var a=e.findById(i.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&n.minX>o.minX&&(n.minX=o.minX),o.y&&n.minY>o.minY&&(n.minY=o.minY),o.x&&n.maxX<o.maxX&&(n.maxX=o.maxX),o.y&&n.maxY<o.maxY&&(n.maxY=o.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,Object.keys(n).forEach(function(i){(n[i]===1/0||n[i]===-1/0)&&(n[i]=void 0)})),n},zg=function(t){var e=xt(t.x)||xt(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||xt(t.style.r)||xt(t.style.width)||xt(t.style.height)||xt(t.style.rx)||xt(t.style.ry)),e},ul=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];if(Ye(i)){var a={};Object.keys(i).forEach(function(o){var s=i[o];o==="img"&&!ot(s)||(a[o]=Pt(s))}),e[n]=a}else e[n]=Pt(i)}),e};const JS=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:ul,getBBox:Zo,getComboBBox:Po,getLabelPosition:Io,getLetterWidth:Fg,getLoopCfgs:Bg,getTextSize:Rg,plainCombosToTrees:ol,reconstructTree:sl,shouldRefreshEdge:zg,traverseTree:Le,traverseTreeUp:Vr},Symbol.toStringTag,{value:"Module"}));var ah=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,n=t.edges,i=t.combos,a=i===void 0?[]:i;if(!e&&!n){var o=!0;return Le(t,function(d){return ot(d.id)?!0:(o=!1,!1)}),o}var s=(e||[]).find(function(d){return!ot(d.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+s.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var u=(e||[]).map(function(d){return d.id}),l=a.map(function(d){return d.id}),c=Qe(Qe([],u),l),h=(n||[]).find(function(d){return!c.includes(d.source)||!c.includes(d.target)});return h?(console.warn("G6 Warning Tips: The source %c"+h.source+"%c or the target %c"+h.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},t2=function(t,e){if(t==="node"||t==="combo"){if(e.id&&!ot(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+e.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(t==="edge"&&(!e.source||!e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},e2=(function(){function r(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return r.prototype.formatModes=function(){var t=this.modes;U(t,function(e){U(e,function(n,i){ot(n)&&(e[i]={type:n})})})},r.prototype.setBehaviors=function(t){var e=this.graph,n=this.modes[t],i=[],a;U(n||[],function(o){var s=Sf.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(e),i.push(a)))}),this.currentBehaves=i},r.mergeBehaviors=function(t,e){return U(e,function(n){t.indexOf(n)<0&&(ot(n)&&(n={type:n}),t.push(n))}),t},r.filterBehaviors=function(t,e){var n=[];return t.forEach(function(i){var a="";ot(i)?a=i:a=i.type,e.indexOf(a)<0&&n.push(i)}),n},r.prototype.setMode=function(t){var e=this,n=e.modes,i=e.graph,a=t,o=n[a];o&&(i.emit("beforemodechange",{mode:t}),U(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(i)}),this.setBehaviors(a),i.emit("aftermodechange",{mode:t}),this.mode=t)},r.prototype.getMode=function(){return this.mode},r.prototype.manipulateBehaviors=function(t,e,n){var i=this,a;if(pt(t)?a=t:a=[t],pt(e))return U(e,function(s){i.modes[s]?n?i.modes[s]=r.mergeBehaviors(i.modes[s]||[],a):i.modes[s]=r.filterBehaviors(i.modes[s]||[],a):n&&(i.modes[s]=a)}),this;var o=e;return e||(o=this.mode),this.modes[o]||n&&(this.modes[o]=a),n?this.modes[o]=r.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=r.filterBehaviors(this.modes[o]||[],a),this.setMode(this.mode),this},r.prototype.updateBehavior=function(t,e,n){ot(t)&&(t={type:t});var i=[];if(!n||n===this.mode||n==="default"){if(i=this.currentBehaves,!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=i.length,o=0;o<a;o++){var s=i[o];if(s.type===t.type)return s.updateCfg(e),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(i=this.modes[n],!i||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=i.length,o=0;o<u;o++){var s=i[o];if(s.type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),i[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},r.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},r})(),Ui,fu,Xg,ll;function r2(){Ui=document.createElement("table"),fu=document.createElement("tr"),Xg=/^\s*<(\w+|!)[^>]*>/,ll={tr:document.createElement("tbody"),tbody:Ui,thead:Ui,tfoot:Ui,td:fu,th:fu,"*":document.createElement("div")}}function oh(r){Ui||r2();var t=Xg.test(r)&&RegExp.$1;(!t||!(t in ll))&&(t="*");var e=ll[t];r=typeof r=="string"?r.replace(/(^\s*)|(\s*$)/g,""):r,e.innerHTML=""+r;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function sh(r,t){if(r)for(var e in t)t.hasOwnProperty(e)&&(r.style[e]=t[e]);return r}var ia=`	
\v\f\r \u2028\u2029`,n2=new RegExp("([a-z])["+ia+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ia+"]*,?["+ia+"]*)+)","ig"),i2=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ia+"]*,?["+ia+"]*","ig"),ri=function(r){if(!r)return null;if(pt(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(n2,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(i2,function(u,l){l&&o.push(+l)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return r}),e},fl=function(r,t){for(var e=[],n=0,i=r.length;i-2*!t>n;n+=2){var a=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];t?n?i-4===n?a[3]={x:+r[0],y:+r[1]}:i-2===n&&(a[2]={x:+r[0],y:+r[1]},a[3]={x:+r[2],y:+r[3]}):a[0]={x:+r[i-2],y:+r[i-1]}:i-4===n?a[3]=a[2]:n||(a[0]={x:+r[n],y:+r[n+1]}),e.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return e},Ka=function(r,t,e,n,i){var a=[];if(i===null&&n===null&&(n=e),r=+r,t=+t,e=+e,n=+n,i!==null){var o=Math.PI/180,s=r+e*Math.cos(-n*o),u=r+e*Math.cos(-i*o),l=t+e*Math.sin(-n*o),c=t+e*Math.sin(-i*o);a=[["M",s,l],["A",e,e,0,+(i-n>180),0,u,c]]}else a=[["M",r,t],["m",0,-n],["a",e,n,0,1,1,0,2*n],["a",e,n,0,1,1,0,-2*n],["z"]];return a},cl=function(r){if(r=ri(r),!r||!r.length)return[["M",0,0]];var t=[],e=0,n=0,i=0,a=0,o=0,s,u;r[0][0]==="M"&&(e=+r[0][1],n=+r[0][2],i=e,a=n,o++,t[0]=["M",e,n]);for(var l=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",c=void 0,h=void 0,d=o,f=r.length;d<f;d++){if(t.push(c=[]),h=r[d],s=h[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+e,c[7]=+h[7]+n;break;case"V":c[1]=+h[1]+n;break;case"H":c[1]=+h[1]+e;break;case"R":u=[e,n].concat(h.slice(1));for(var v=2,p=u.length;v<p;v++)u[v]=+u[v]+e,u[++v]=+u[v]+n;t.pop(),t=t.concat(fl(u,l));break;case"O":t.pop(),u=Ka(e,n,h[1],h[2]),u.push(u[0]),t=t.concat(u);break;case"U":t.pop(),t=t.concat(Ka(e,n,h[1],h[2],h[3])),c=["U"].concat(t[t.length-1].slice(-2));break;case"M":i=+h[1]+e,a=+h[2]+n;break;default:for(var v=1,p=h.length;v<p;v++)c[v]=+h[v]+(v%2?e:n)}else if(s==="R")u=[e,n].concat(h.slice(1)),t.pop(),t=t.concat(fl(u,l)),c=["R"].concat(h.slice(-2));else if(s==="O")t.pop(),u=Ka(e,n,h[1],h[2]),u.push(u[0]),t=t.concat(u);else if(s==="U")t.pop(),t=t.concat(Ka(e,n,h[1],h[2],h[3])),c=["U"].concat(t[t.length-1].slice(-2));else for(var g=0,y=h.length;g<y;g++)c[g]=h[g];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":e=+i,n=+a;break;case"H":e=c[1];break;case"V":n=c[1];break;case"M":i=c[c.length-2],a=c[c.length-1];break;default:e=c[c.length-2],n=c[c.length-1]}}return t},Za=function(r,t,e,n){return[r,t,e,n,e,n]},uh=function(r,t,e,n,i,a){var o=.3333333333333333,s=2/3;return[o*r+s*e,o*t+s*n,o*i+s*e,o*a+s*n,i,a]},Yg=function(r,t,e,n,i,a,o,s,u,l){e===n&&(e+=1);var c=Math.PI*120/180,h=Math.PI/180*(+i||0),d=[],f,v,p,g,y,m=function(Yt,jt,Qt){var Bt=Yt*Math.cos(Qt)-jt*Math.sin(Qt),ne=Yt*Math.sin(Qt)+jt*Math.cos(Qt);return{x:Bt,y:ne}};if(l)v=l[0],p=l[1],g=l[2],y=l[3];else{f=m(r,t,-h),r=f.x,t=f.y,f=m(s,u,-h),s=f.x,u=f.y,r===s&&t===u&&(s+=1,u+=1);var b=(r-s)/2,x=(t-u)/2,S=b*b/(e*e)+x*x/(n*n);S>1&&(S=Math.sqrt(S),e=S*e,n=S*n);var C=e*e,w=n*n,I=(a===o?-1:1)*Math.sqrt(Math.abs((C*w-C*x*x-w*b*b)/(C*x*x+w*b*b)));g=I*e*x/n+(r+s)/2,y=I*-n*b/e+(t+u)/2,v=Math.asin(((t-y)/n).toFixed(9)),p=Math.asin(((u-y)/n).toFixed(9)),v=r<g?Math.PI-v:v,p=s<g?Math.PI-p:p,v<0&&(v=Math.PI*2+v),p<0&&(p=Math.PI*2+p),o&&v>p&&(v=v-Math.PI*2),!o&&p>v&&(p=p-Math.PI*2)}var T=p-v;if(Math.abs(T)>c){var O=p,_=s,B=u;p=v+c*(o&&p>v?1:-1),s=g+e*Math.cos(p),u=y+n*Math.sin(p),d=Yg(s,u,e,n,i,0,o,_,B,[p,O,g,y])}T=p-v;var z=Math.cos(v),Y=Math.sin(v),X=Math.cos(p),K=Math.sin(p),G=Math.tan(T/4),tt=4/3*e*G,H=4/3*n*G,q=[r,t],J=[r+tt*Y,t-H*z],rt=[s+tt*K,u-H*X],ft=[s,u];if(J[0]=2*q[0]-J[0],J[1]=2*q[1]-J[1],l)return[J,rt,ft].concat(d);d=[J,rt,ft].concat(d).join().split(",");for(var wt=[],mt=0,Ot=d.length;mt<Ot;mt++)wt[mt]=mt%2?m(d[mt-1],d[mt],h).y:m(d[mt],d[mt+1],h).x;return wt},hl=function(r,t){var e=cl(r),n=t&&cl(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",l="",c,h=function(b,x,S){var C,w;if(!b)return["C",x.x,x.y,x.x,x.y,x.x,x.y];switch(!(b[0]in{T:1,Q:1})&&(x.qx=x.qy=null),b[0]){case"M":x.X=b[1],x.Y=b[2];break;case"A":b=["C"].concat(Yg.apply(0,[x.x,x.y].concat(b.slice(1))));break;case"S":S==="C"||S==="S"?(C=x.x*2-x.bx,w=x.y*2-x.by):(C=x.x,w=x.y),b=["C",C,w].concat(b.slice(1));break;case"T":S==="Q"||S==="T"?(x.qx=x.x*2-x.qx,x.qy=x.y*2-x.qy):(x.qx=x.x,x.qy=x.y),b=["C"].concat(uh(x.x,x.y,x.qx,x.qy,b[1],b[2]));break;case"Q":x.qx=b[1],x.qy=b[2],b=["C"].concat(uh(x.x,x.y,b[1],b[2],b[3],b[4]));break;case"L":b=["C"].concat(Za(x.x,x.y,b[1],b[2]));break;case"H":b=["C"].concat(Za(x.x,x.y,b[1],x.y));break;case"V":b=["C"].concat(Za(x.x,x.y,x.x,b[1]));break;case"Z":b=["C"].concat(Za(x.x,x.y,x.X,x.Y));break}return b},d=function(b,x){if(b[x].length>7){b[x].shift();for(var S=b[x];S.length;)o[x]="A",n&&(s[x]="A"),b.splice(x++,0,["C"].concat(S.splice(0,6)));b.splice(x,1),c=Math.max(e.length,n&&n.length||0)}},f=function(b,x,S,C,w){b&&x&&b[w][0]==="M"&&x[w][0]!=="M"&&(x.splice(w,0,["M",C.x,C.y]),S.bx=0,S.by=0,S.x=b[w][1],S.y=b[w][2],c=Math.max(e.length,n&&n.length||0))};c=Math.max(e.length,n&&n.length||0);for(var v=0;v<c;v++){e[v]&&(u=e[v][0]),u!=="C"&&(o[v]=u,v&&(l=o[v-1])),e[v]=h(e[v],i,l),o[v]!=="A"&&u==="C"&&(o[v]="C"),d(e,v),n&&(n[v]&&(u=n[v][0]),u!=="C"&&(s[v]=u,v&&(l=s[v-1])),n[v]=h(n[v],a,l),s[v]!=="A"&&u==="C"&&(s[v]="C"),d(n,v)),f(e,n,i,a,v),f(n,e,a,i,v);var p=e[v],g=n&&n[v],y=p.length,m=n&&g.length;i.x=p[y-2],i.y=p[y-1],i.bx=parseFloat(p[y-4])||i.x,i.by=parseFloat(p[y-3])||i.y,a.bx=n&&(parseFloat(g[m-4])||a.x),a.by=n&&(parseFloat(g[m-3])||a.y),a.x=n&&g[m-2],a.y=n&&g[m-1]}return n?[e,n]:e},a2=/,?([a-z]),?/gi,jg=function(r){return r.join(",").replace(a2,"$1")},lh=function(r,t,e,n,i){var a=-3*t+9*e-9*n+3*i,o=r*a+6*t-12*e+6*n;return r*o-3*t+3*e},fh=function(r,t,e,n,i,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var l=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,v=0;v<c;v++){var p=l*h[v]+l,g=lh(p,r,e,i,o),y=lh(p,t,n,a,s),m=g*g+y*y;f+=d[v]*Math.sqrt(m)}return l*f},o2=function(r,t,e,n,i,a,o,s){for(var u=[],l=[[],[]],c,h,d,f,v=0;v<2;++v){if(v===0?(h=6*r-12*e+6*i,c=-3*r+9*e-9*i+3*o,d=3*e-3*r):(h=6*t-12*n+6*a,c=-3*t+9*n-9*a+3*s,d=3*n-3*t),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;f=-d/h,f>0&&f<1&&u.push(f);continue}var p=h*h-4*d*c,g=Math.sqrt(p);if(!(p<0)){var y=(-h+g)/(2*c);y>0&&y<1&&u.push(y);var m=(-h-g)/(2*c);m>0&&m<1&&u.push(m)}}for(var b=u.length,x=b,S;b--;)f=u[b],S=1-f,l[0][b]=S*S*S*r+3*S*S*f*e+3*S*f*f*i+f*f*f*o,l[1][b]=S*S*S*t+3*S*S*f*n+3*S*f*f*a+f*f*f*s;return l[0][x]=r,l[1][x]=t,l[0][x+1]=o,l[1][x+1]=s,l[0].length=l[1].length=x+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}},s2=function(r,t,e,n,i,a,o,s){if(!(Math.max(r,e)<Math.min(i,o)||Math.min(r,e)>Math.max(i,o)||Math.max(t,n)<Math.min(a,s)||Math.min(t,n)>Math.max(a,s))){var u=(r*n-t*e)*(i-o)-(r-e)*(i*s-a*o),l=(r*n-t*e)*(a-s)-(t-n)*(i*s-a*o),c=(r-e)*(a-s)-(t-n)*(i-o);if(c){var h=u/c,d=l/c,f=+h.toFixed(2),v=+d.toFixed(2);if(!(f<+Math.min(r,e).toFixed(2)||f>+Math.max(r,e).toFixed(2)||f<+Math.min(i,o).toFixed(2)||f>+Math.max(i,o).toFixed(2)||v<+Math.min(t,n).toFixed(2)||v>+Math.max(t,n).toFixed(2)||v<+Math.min(a,s).toFixed(2)||v>+Math.max(a,s).toFixed(2)))return{x:h,y:d}}}},Xr=function(r,t,e){return t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},Hg=function(r,t,e,n,i){if(i)return[["M",+r+ +i,t],["l",e-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-e,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",r,t],["l",e,0],["l",0,n],["l",-e,0],["z"]];return a.parsePathArray=jg,a},dl=function(r,t,e,n){return r===null&&(r=t=e=n=0),t===null&&(t=r.y,e=r.width,n=r.height,r=r.x),{x:r,y:t,width:e,w:e,height:n,h:n,x2:r+e,y2:t+n,cx:r+e/2,cy:t+n/2,r1:Math.min(e,n)/2,r2:Math.max(e,n)/2,r0:Math.sqrt(e*e+n*n)/2,path:Hg(r,t,e,n),vb:[r,t,e,n].join(" ")}},u2=function(r,t){return r=dl(r),t=dl(t),Xr(t,r.x,r.y)||Xr(t,r.x2,r.y)||Xr(t,r.x,r.y2)||Xr(t,r.x2,r.y2)||Xr(r,t.x,t.y)||Xr(r,t.x2,t.y)||Xr(r,t.x,t.y2)||Xr(r,t.x2,t.y2)||(r.x<t.x2&&r.x>t.x||t.x<r.x2&&t.x>r.x)&&(r.y<t.y2&&r.y>t.y||t.y<r.y2&&t.y>r.y)},ch=function(r,t,e,n,i,a,o,s){pt(r)||(r=[r,t,e,n,i,a,o,s]);var u=o2.apply(null,r);return dl(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},hh=function(r,t,e,n,i,a,o,s,u){var l=1-u,c=Math.pow(l,3),h=Math.pow(l,2),d=u*u,f=d*u,v=c*r+h*3*u*e+l*3*u*u*i+f*o,p=c*t+h*3*u*n+l*3*u*u*a+f*s,g=r+2*u*(e-r)+d*(i-2*e+r),y=t+2*u*(n-t)+d*(a-2*n+t),m=e+2*u*(i-e)+d*(o-2*i+e),b=n+2*u*(a-n)+d*(s-2*a+n),x=l*r+u*e,S=l*t+u*n,C=l*i+u*o,w=l*a+u*s,I=90-Math.atan2(g-m,y-b)*180/Math.PI;return{x:v,y:p,m:{x:g,y},n:{x:m,y:b},start:{x,y:S},end:{x:C,y:w},alpha:I}},l2=function(r,t,e){var n=ch(r),i=ch(t);if(!u2(n,i))return[];for(var a=fh.apply(0,r),o=fh.apply(0,t),s=~~(a/8),u=~~(o/8),l=[],c=[],h={},d=[],f=0;f<s+1;f++){var v=hh.apply(0,r.concat(f/s));l.push({x:v.x,y:v.y,t:f/s})}for(var f=0;f<u+1;f++){var v=hh.apply(0,t.concat(f/u));c.push({x:v.x,y:v.y,t:f/u})}for(var f=0;f<s;f++)for(var p=0;p<u;p++){var g=l[f],y=l[f+1],m=c[p],b=c[p+1],x=Math.abs(y.x-g.x)<.001?"y":"x",S=Math.abs(b.x-m.x)<.001?"y":"x",C=s2(g.x,g.y,y.x,y.y,m.x,m.y,b.x,b.y);if(C){if(h[C.x.toFixed(4)]===C.y.toFixed(4))continue;h[C.x.toFixed(4)]=C.y.toFixed(4);var w=g.t+Math.abs((C[x]-g[x])/(y[x]-g[x]))*(y.t-g.t),I=m.t+Math.abs((C[S]-m[S])/(b[S]-m[S]))*(b.t-m.t);w>=0&&w<=1&&I>=0&&I<=1&&d.push({x:C.x,y:C.y,t1:w,t2:I})}}return d},f2=function(r,t,e){r=hl(r),t=hl(t);for(var n,i,a,o,s,u,l,c,h,d,f=e?0:[],v=0,p=r.length;v<p;v++){var g=r[v];if(g[0]==="M")n=s=g[1],i=u=g[2];else{g[0]==="C"?(h=[n,i].concat(g.slice(1)),n=h[6],i=h[7]):(h=[n,i,n,i,s,u,s,u],n=s,i=u);for(var y=0,m=t.length;y<m;y++){var b=t[y];if(b[0]==="M")a=l=b[1],o=c=b[2];else{b[0]==="C"?(d=[a,o].concat(b.slice(1)),a=d[6],o=d[7]):(d=[a,o,a,o,l,c,l,c],a=l,o=c);var x=l2(h,d);{for(var S=0,C=x.length;S<C;S++)x[S].segment1=v,x[S].segment2=y,x[S].bez1=h,x[S].bez2=d;f=f.concat(x)}}}}}return f},c2=function(r,t){return f2(r,t)};function h2(r,t){var e=[],n=[];function i(a,o){if(a.length===1)e.push(a[0]),n.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&e.push(a[0]),u===a.length-2&&n.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];i(s,o)}}return r.length&&i(r,t),{left:e,right:n.reverse()}}function d2(r,t,e){var n=[[r[1],r[2]]];e=e||2;var i=[];t[0]==="A"?(n.push(t[6]),n.push(t[7])):t[0]==="C"?(n.push([t[1],t[2]]),n.push([t[3],t[4]]),n.push([t[5],t[6]])):t[0]==="S"||t[0]==="Q"?(n.push([t[1],t[2]]),n.push([t[3],t[4]])):n.push([t[1],t[2]]);for(var a=n,o=1/e,s=0;s<e-1;s++){var u=o/(1-o*s),l=h2(a,u);i.push(l.left),a=l.right}i.push(a);var c=i.map(function(h){var d=[];return h.length===4&&(d.push("C"),d=d.concat(h[2])),h.length>=3&&(h.length===3&&d.push("Q"),d=d.concat(h[1])),h.length===2&&d.push("L"),d=d.concat(h[h.length-1]),d});return c}var v2=function(r,t,e){if(e===1)return[[].concat(r)];var n=[];if(t[0]==="L"||t[0]==="C"||t[0]==="Q")n=n.concat(d2(r,t,e));else{var i=[].concat(r);i[0]==="M"&&(i[0]="L");for(var a=0;a<=e-1;a++)n.push(i)}return n},p2=function(r,t){if(r.length===1)return r;var e=r.length-1,n=t.length-1,i=e/n,a=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<n-e;o++)r.push(r[0]);return r}for(var o=0;o<n;o++){var s=Math.floor(i*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(l,c,h){return h===e?l.concat(r[e]):l.concat(v2(r[h],r[h+1],c))},[]);return u.unshift(r[0]),(t[n]==="Z"||t[n]==="z")&&u.push("Z"),u},g2=function(r,t){if(r.length!==t.length)return!1;var e=!0;return U(r,function(n,i){if(n!==t[i])return e=!1,!1}),e};function y2(r,t,e){var n=null,i=e;return t<i&&(i=t,n="add"),r<i&&(i=r,n="del"),{type:n,min:i}}var m2=function(r,t){var e=r.length,n=t.length,i,a,o=0;if(e===0||n===0)return null;for(var s=[],u=0;u<=e;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=n;l++)s[0][l]={min:l};for(var u=1;u<=e;u++){i=r[u-1];for(var l=1;l<=n;l++){a=t[l-1],g2(i,a)?o=0:o=1;var c=s[u-1][l].min+1,h=s[u][l-1].min+1,d=s[u-1][l-1].min+o;s[u][l]=y2(c,h,d)}}return s},Vg=function(r,t){var e=m2(r,t),n=r.length,i=t.length,a=[],o=1,s=1;if(e[n][i].min!==n){for(var u=1;u<=n;u++){var l=e[u][u].min;s=u;for(var c=o;c<=i;c++)e[u][c].min<l&&(l=e[u][c].min,s=c);o=s,e[u][o].type&&a.push({index:u-1,type:e[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var h=i-n;if(n<i)for(var u=0;u<h;u++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function cu(r,t,e){for(var n=[].concat(r),i,a=1/(e+1),o=Wg(t)[0],s=1;s<=e;s++)a*=s,i=Math.floor(r.length*a),i===0?n.unshift([o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]):n.splice(i,0,[o[0]*a+r[i][0]*(1-a),o[1]*a+r[i][1]*(1-a)]);return n}function Wg(r){var t=[];switch(r[0]){case"M":t.push([r[1],r[2]]);break;case"L":t.push([r[1],r[2]]);break;case"A":t.push([r[6],r[7]]);break;case"Q":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"T":t.push([r[1],r[2]]);break;case"C":t.push([r[5],r[6]]),t.push([r[1],r[2]]),t.push([r[3],r[4]]);break;case"S":t.push([r[3],r[4]]),t.push([r[1],r[2]]);break;case"H":t.push([r[1],r[1]]);break;case"V":t.push([r[1],r[1]]);break}return t}var vl=function(r,t){if(r.length<=1)return r;for(var e,n=0;n<t.length;n++)if(r[n][0]!==t[n][0])switch(e=Wg(r[n]),t[n][0]){case"M":r[n]=["M"].concat(e[0]);break;case"L":r[n]=["L"].concat(e[0]);break;case"A":r[n]=[].concat(t[n]),r[n][6]=e[0][0],r[n][7]=e[0][1];break;case"Q":if(e.length<2)if(n>0)e=cu(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["Q"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"T":r[n]=["T"].concat(e[0]);break;case"C":if(e.length<3)if(n>0)e=cu(e,r[n-1],2);else{r[n]=t[n];break}r[n]=["C"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;case"S":if(e.length<2)if(n>0)e=cu(e,r[n-1],1);else{r[n]=t[n];break}r[n]=["S"].concat(e.reduce(function(i,a){return i.concat(a)},[]));break;default:r[n]=t[n]}return r};const b2=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:fl,fillPath:p2,fillPathByDiff:Vg,formatPath:vl,intersection:c2,parsePathArray:jg,parsePathString:ri,pathToAbsolute:cl,pathToCurve:hl,rectPath:Hg},Symbol.toStringTag,{value:"Module"}));var Bf=(function(){function r(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var t=this.type;return"[Event (type="+t+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r})();function Ug(r,t){var e=r.indexOf(t);e!==-1&&r.splice(e,1)}var dh=typeof window<"u"&&typeof window.document<"u";function $g(r,t){if(r.isCanvas())return!0;for(var e=t.getParent(),n=!1;e;){if(e===r){n=!0;break}e=e.getParent()}return n}function pl(r){return r.cfg.visible&&r.cfg.capture}var x2=(function(r){Xt(t,r);function t(e){var n=r.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=dt(i,e),n}return t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,n){this.cfg[e]=n},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t})(qp),vh=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))},S2=(function(){function r(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"}return r})(),w2=(function(){function r(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return r})(),M2=(function(){function r(t,e,n,i){this.name=t,this.version=e,this.os=n,this.bot=i,this.type="bot-device"}return r})(),C2=(function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r})(),E2=(function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r})(),A2=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,k2=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ph=3,O2=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",A2]],gh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function I2(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new E2:typeof navigator<"u"?T2(navigator.userAgent):_2()}function P2(r){return r!==""&&O2.reduce(function(t,e){var n=e[0],i=e[1];if(t)return t;var a=i.exec(r);return!!a&&[n,a]},!1)}function T2(r){var t=P2(r);if(!t)return null;var e=t[0],n=t[1];if(e==="searchbot")return new C2;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<ph&&(i=vh(vh([],i,!0),L2(ph-i.length),!0)):i=[];var a=i.join("."),o=N2(r),s=k2.exec(r);return s&&s[1]?new M2(e,a,o,s[1]):new S2(e,a,o)}function N2(r){for(var t=0,e=gh.length;t<e;t++){var n=gh[t],i=n[0],a=n[1],o=a.exec(r);if(o)return i}return null}function _2(){var r=typeof process<"u"&&process.version;return r?new w2(process.version.slice(1)):null}function L2(r){for(var t=[],e=0;e<r;e++)t.push("0");return t}function B2(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return ws(n,e),ke(r,n,t)}function D2(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return Ms(n,e),ke(r,n,t)}function F2(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return Cs(n,e),ke(r,n,t)}function R2(r,t,e){return ke(r,e,t)}function z2(r,t){for(var e=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=t.length;n<i;n++){var a=t[n];switch(a[0]){case"t":B2(e,e,[a[1],a[2]]);break;case"s":F2(e,e,[a[1],a[2]]);break;case"r":D2(e,e,a[1]);break;case"m":R2(e,e,a[1]);break}}return e}function yh(r,t){var e=[],n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],l=r[6],c=r[7],h=r[8],d=t[0],f=t[1],v=t[2],p=t[3],g=t[4],y=t[5],m=t[6],b=t[7],x=t[8];return e[0]=d*n+f*o+v*l,e[1]=d*i+f*s+v*c,e[2]=d*a+f*u+v*h,e[3]=p*n+g*o+y*l,e[4]=p*i+g*s+y*c,e[5]=p*a+g*u+y*h,e[6]=m*n+b*o+x*l,e[7]=m*i+b*s+x*c,e[8]=m*a+b*u+x*h,e}function Mn(r,t){var e=[],n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function qg(r){var t=[],e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],u=r[6],l=r[7],c=r[8],h=c*o-s*l,d=-c*a+s*u,f=l*a-o*u,v=e*h+n*d+i*f;return v?(v=1/v,t[0]=h*v,t[1]=(-c*n+i*l)*v,t[2]=(s*n-i*o)*v,t[3]=d*v,t[4]=(c*e-i*u)*v,t[5]=(-s*e+i*a)*v,t[6]=f*v,t[7]=(-l*e+n*u)*v,t[8]=(o*e-n*a)*v,t):null}var Ti=z2,hu="matrix",X2=["zIndex","capture","visible","type"],Y2=["repeat"],j2=":",H2="*";function V2(r){for(var t=[],e=0;e<r.length;e++)pt(r[e])?t.push([].concat(r[e])):t.push(r[e]);return t}function W2(r,t){var e={},n=t.attrs;for(var i in r)e[i]=n[i];return e}function U2(r,t){var e={},n=t.attr();return U(r,function(i,a){Y2.indexOf(a)===-1&&!_n(n[a],i)&&(e[a]=i)}),e}function $2(r,t){if(t.onFrame)return r;var e=t.startTime,n=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return U(r,function(o){e+n<o.startTime+o.delay+o.duration&&i>o.delay&&U(t.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),r}var Gg=(function(r){Xt(t,r);function t(e){var n=r.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return dt(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0],o=n[1];if(!a)return this.attrs;if(Ye(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return n.length===2?(this.setAttr(a,o),this.afterAttrsChange((e={},e[a]=o,e)),this):this.attrs[a]},t.prototype.isClipped=function(e,n){var i=this.getClip();return i&&!i.isHit(e,n)},t.prototype.setAttr=function(e,n){var i=this.attrs[e];i!==n&&(this.attrs[e]=n,this.onAttrChange(e,n,i))},t.prototype.onAttrChange=function(e,n,i){e==="matrix"&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var n=this.getParent();return n&&n.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var n=e.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){e===void 0&&(e=!0);var n=this.getParent();n?(Ug(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(hu,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(hu)},t.prototype.setMatrix=function(e){this.attr(hu,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?e=yh(i,n):e=n||i,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var n=this.attr("matrix"),i=null;e&&n?i=yh(e,n):i=n||e,this.set("totalMatrix",i),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var n=this.attr("matrix");return n?Mn(n,e):e},t.prototype.invertFromMatrix=function(e){var n=this.attr("matrix");if(n){var i=qg(n);if(i)return Mn(i,e)}return e},t.prototype.setClip=function(e){var n=this.getCanvas(),i=null;if(e){var a=this.getShapeBase(),o=vi(e.type),s=a[o];s&&(i=new s({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,n=this.attrs,i={};U(n,function(s,u){pt(n[u])?i[u]=V2(n[u]):i[u]=n[u]});var a=this.constructor,o=new a({attrs:i});return U(X2,function(s){o.set(s,e.get(s))}),o},t.prototype.destroy=function(){var e=this.destroyed;e||(this.attrs={},r.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var a=this.get("animations")||[];i.timer||i.initTimer();var o=e[0],s=e[1],u=e[2],l=u===void 0?"easeLinear":u,c=e[3],h=c===void 0?Hi:c,d=e[4],f=d===void 0?0:d,v,p,g,y,m;Jt(o)?(v=o,o={}):Ye(o)&&o.onFrame&&(v=o.onFrame,p=o.repeat),Ye(s)?(m=s,s=m.duration,l=m.easing||"easeLinear",f=m.delay||0,p=m.repeat||p||!1,h=m.callback||Hi,g=m.pauseCallback||Hi,y=m.resumeCallback||Hi):(xt(h)&&(f=h,h=null),Jt(l)?(h=l,l="easeLinear"):l=l||"easeLinear");var b=U2(o,this),x={fromAttrs:W2(b,this),toAttrs:b,duration:s,easing:l,repeat:p,callback:h,pauseCallback:g,resumeCallback:y,delay:f,startTime:i.getTime(),id:$p(),onFrame:v,pathFormatted:!1};a.length>0?a=$2(a,x):i.addAnimator(this),a.push(x),this.set("animations",a),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var n=this;e===void 0&&(e=!0);var i=this.get("animations");U(i,function(a){e&&(a.onFrame?n.attr(a.onFrame(1)):n.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),n=this.get("animations"),i=e.getTime();return U(n,function(a){a._paused=!0,a._pauseTime=i,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline"),n=e.getTime(),i=this.get("animations"),a=this.get("_pause").pauseTime;return U(i,function(o){o.startTime=o.startTime+(n-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},t.prototype.emitDelegation=function(e,n){var i=this,a=n.propagationPath;this.getEvents();var o;e==="mouseenter"?o=n.fromShape:e==="mouseleave"&&(o=n.toShape);for(var s=function(h){var d=a[h],f=d.get("name");if(f){if((d.isGroup()||d.isCanvas&&d.isCanvas())&&o&&$g(d,o))return"break";pt(f)?U(f,function(v){i.emitDelegateEvent(d,v,n)}):u.emitDelegateEvent(d,f,n)}},u=this,l=0;l<a.length;l++){var c=s(l);if(c==="break")break}},t.prototype.emitDelegateEvent=function(e,n,i){var a=this.getEvents(),o=n+j2+i.type;(a[o]||a[H2])&&(i.name=o,i.currentTarget=e,i.delegateTarget=this,i.delegateObject=e.get("delegateObject"),this.emit(o,i))},t.prototype.translate=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.getMatrix(),a=Ti(i,[["t",e,n]]);return this.setMatrix(a),this},t.prototype.move=function(e,n){var i=this.attr("x")||0,a=this.attr("y")||0;return this.translate(e-i,n-a),this},t.prototype.moveTo=function(e,n){return this.move(e,n)},t.prototype.scale=function(e,n){var i=this.getMatrix(),a=Ti(i,[["s",e,n||e]]);return this.setMatrix(a),this},t.prototype.rotate=function(e){var n=this.getMatrix(),i=Ti(n,[["r",e]]);return this.setMatrix(i),this},t.prototype.rotateAtStart=function(e){var n=this.attr(),i=n.x,a=n.y,o=this.getMatrix(),s=Ti(o,[["t",-i,-a],["r",e],["t",i,a]]);return this.setMatrix(s),this},t.prototype.rotateAtPoint=function(e,n,i){var a=this.getMatrix(),o=Ti(a,[["t",-e,-n],["r",i],["t",e,n]]);return this.setMatrix(o),this},t})(x2),mh={},gl="_INDEX";function Kg(r,t){if(r.set("canvas",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){Kg(n,t)})}}function Zg(r,t){if(r.set("timeline",t),r.isGroup()){var e=r.get("children");e.length&&e.forEach(function(n){Zg(n,t)})}}function q2(r,t,e){t.set("parent",null),t.set("canvas",null),Ug(r.getChildren(),t)}function G2(r){return function(t,e){var n=r(t,e);return n===0?t[gl]-e[gl]:n}}var Qg=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?U(o,function(u){var l=u.getBBox(),c=l.minX,h=l.maxX,d=l.minY,f=l.maxY;c<e&&(e=c),h>n&&(n=h),d<i&&(i=d),f>a&&(a=f)}):(e=0,n=0,i=0,a=0);var s={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return s},t.prototype.getCanvasBBox=function(){var e=1/0,n=-1/0,i=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?U(o,function(u){var l=u.getCanvasBBox(),c=l.minX,h=l.maxX,d=l.minY,f=l.maxY;c<e&&(e=c),h>n&&(n=h),d<i&&(i=d),f>a&&(a=f)}):(e=0,n=0,i=0,a=0);var s={x:e,y:i,minX:e,minY:i,maxX:n,maxY:a,width:n-e,height:a-i};return s},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.children=[],e},t.prototype.onAttrChange=function(e,n,i){if(r.prototype.onAttrChange.call(this,e,n,i),e==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},t.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},t.prototype._applyChildrenMarix=function(e){var n=this.getChildren();U(n,function(i){i.applyMatrix(e)})},t.prototype.addShape=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1];Ye(i)?a=i:a.type=i;var o=mh[a.type];o||(o=vi(a.type),mh[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},t.prototype.addGroup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],a=e[1],o;if(Jt(i))a?o=new i(a):o=new i({parent:this});else{var s=i||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},t.prototype.getCanvas=function(){var e;return this.isCanvas()?e=this:e=this.get("canvas"),e},t.prototype.getShape=function(e,n,i){if(!pl(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,e,n,i);else{var s=[e,n,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],i))}return o},t.prototype._findShape=function(e,n,i,a){for(var o=null,s=e.length-1;s>=0;s--){var u=e[s];if(pl(u)&&(u.isGroup()?o=u.getShape(n,i,a):u.isHit(n,i)&&(o=u)),o)break}return o},t.prototype.add=function(e){var n=this.getCanvas(),i=this.getChildren(),a=this.get("timeline"),o=e.getParent();o&&q2(o,e),e.set("parent",this),n&&Kg(e,n),a&&Zg(e,a),i.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var n=this.getTotalMatrix();n&&e.applyMatrix(n)},t.prototype.getChildren=function(){return this.get("children")||[]},t.prototype.sort=function(){var e=this.getChildren();U(e,function(n,i){return n[gl]=i,n}),e.sort(G2(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),n=e.length-1;n>=0;n--)e[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){var n=this.getChildren();return n[e]},t.prototype.getCount=function(){var e=this.getChildren();return e.length},t.prototype.contain=function(e){var n=this.getChildren();return n.indexOf(e)>-1},t.prototype.removeChild=function(e,n){n===void 0&&(n=!0),this.contain(e)&&e.remove(n)},t.prototype.findAll=function(e){var n=[],i=this.getChildren();return U(i,function(a){e(a)&&n.push(a),a.isGroup()&&(n=n.concat(a.findAll(e)))}),n},t.prototype.find=function(e){var n=null,i=this.getChildren();return U(i,function(a){if(e(a)?n=a:a.isGroup()&&(n=a.find(e)),n)return!1}),n},t.prototype.findById=function(e){return this.find(function(n){return n.get("id")===e})},t.prototype.findByClassName=function(e){return this.find(function(n){return n.get("className")===e})},t.prototype.findAllByName=function(e){return this.findAll(function(n){return n.get("name")===e})},t})(Gg),pi=0,$i=0,Ni=0,Jg=1e3,Qo,qi,Jo=0,Dn=0,ks=0,ma=typeof performance=="object"&&performance.now?performance:Date,t0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function e0(){return Dn||(t0(K2),Dn=ma.now()+ks)}function K2(){Dn=0}function yl(){this._call=this._time=this._next=null}yl.prototype=r0.prototype={constructor:yl,restart:function(r,t,e){if(typeof r!="function")throw new TypeError("callback is not a function");e=(e==null?e0():+e)+(t==null?0:+t),!this._next&&qi!==this&&(qi?qi._next=this:Qo=this,qi=this),this._call=r,this._time=e,ml()},stop:function(){this._call&&(this._call=null,this._time=1/0,ml())}};function r0(r,t,e){var n=new yl;return n.restart(r,t,e),n}function Z2(){e0(),++pi;for(var r=Qo,t;r;)(t=Dn-r._time)>=0&&r._call.call(null,t),r=r._next;--pi}function bh(){Dn=(Jo=ma.now())+ks,pi=$i=0;try{Z2()}finally{pi=0,J2(),Dn=0}}function Q2(){var r=ma.now(),t=r-Jo;t>Jg&&(ks-=t,Jo=r)}function J2(){for(var r,t=Qo,e,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:Qo=e);qi=r,ml(n)}function ml(r){if(!pi){$i&&($i=clearTimeout($i));var t=r-Dn;t>24?(r<1/0&&($i=setTimeout(bh,r-ma.now()-ks)),Ni&&(Ni=clearInterval(Ni))):(Ni||(Jo=ma.now(),Ni=setInterval(Q2,Jg)),pi=1,t0(bh))}}function Df(r,t,e){r.prototype=t.prototype=e,e.constructor=r}function n0(r,t){var e=Object.create(r.prototype);for(var n in t)e[n]=t[n];return e}function Pa(){}var ba=.7,ts=1/ba,fi="\\s*([+-]?\\d+)\\s*",xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tw=/^#([0-9a-f]{3,8})$/,ew=new RegExp(`^rgb\\(${fi},${fi},${fi}\\)$`),rw=new RegExp(`^rgb\\(${hr},${hr},${hr}\\)$`),nw=new RegExp(`^rgba\\(${fi},${fi},${fi},${xa}\\)$`),iw=new RegExp(`^rgba\\(${hr},${hr},${hr},${xa}\\)$`),aw=new RegExp(`^hsl\\(${xa},${hr},${hr}\\)$`),ow=new RegExp(`^hsla\\(${xa},${hr},${hr},${xa}\\)$`),xh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Df(Pa,Sa,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Sh,formatHex:Sh,formatHex8:sw,formatHsl:uw,formatRgb:wh,toString:wh});function Sh(){return this.rgb().formatHex()}function sw(){return this.rgb().formatHex8()}function uw(){return i0(this).formatHsl()}function wh(){return this.rgb().formatRgb()}function Sa(r){var t,e;return r=(r+"").trim().toLowerCase(),(t=tw.exec(r))?(e=t[1].length,t=parseInt(t[1],16),e===6?Mh(t):e===3?new Ee(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Qa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Qa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ew.exec(r))?new Ee(t[1],t[2],t[3],1):(t=rw.exec(r))?new Ee(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nw.exec(r))?Qa(t[1],t[2],t[3],t[4]):(t=iw.exec(r))?Qa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=aw.exec(r))?Ah(t[1],t[2]/100,t[3]/100,1):(t=ow.exec(r))?Ah(t[1],t[2]/100,t[3]/100,t[4]):xh.hasOwnProperty(r)?Mh(xh[r]):r==="transparent"?new Ee(NaN,NaN,NaN,0):null}function Mh(r){return new Ee(r>>16&255,r>>8&255,r&255,1)}function Qa(r,t,e,n){return n<=0&&(r=t=e=NaN),new Ee(r,t,e,n)}function lw(r){return r instanceof Pa||(r=Sa(r)),r?(r=r.rgb(),new Ee(r.r,r.g,r.b,r.opacity)):new Ee}function bl(r,t,e,n){return arguments.length===1?lw(r):new Ee(r,t,e,n??1)}function Ee(r,t,e,n){this.r=+r,this.g=+t,this.b=+e,this.opacity=+n}Df(Ee,bl,n0(Pa,{brighter(r){return r=r==null?ts:Math.pow(ts,r),new Ee(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?ba:Math.pow(ba,r),new Ee(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Ee(In(this.r),In(this.g),In(this.b),es(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ch,formatHex:Ch,formatHex8:fw,formatRgb:Eh,toString:Eh}));function Ch(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}`}function fw(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}${Cn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Eh(){const r=es(this.opacity);return`${r===1?"rgb(":"rgba("}${In(this.r)}, ${In(this.g)}, ${In(this.b)}${r===1?")":`, ${r})`}`}function es(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function In(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Cn(r){return r=In(r),(r<16?"0":"")+r.toString(16)}function Ah(r,t,e,n){return n<=0?r=t=e=NaN:e<=0||e>=1?r=t=NaN:t<=0&&(r=NaN),new Ge(r,t,e,n)}function i0(r){if(r instanceof Ge)return new Ge(r.h,r.s,r.l,r.opacity);if(r instanceof Pa||(r=Sa(r)),!r)return new Ge;if(r instanceof Ge)return r;r=r.rgb();var t=r.r/255,e=r.g/255,n=r.b/255,i=Math.min(t,e,n),a=Math.max(t,e,n),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(e-n)/s+(e<n)*6:e===a?o=(n-t)/s+2:o=(t-e)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Ge(o,s,u,r.opacity)}function cw(r,t,e,n){return arguments.length===1?i0(r):new Ge(r,t,e,n??1)}function Ge(r,t,e,n){this.h=+r,this.s=+t,this.l=+e,this.opacity=+n}Df(Ge,cw,n0(Pa,{brighter(r){return r=r==null?ts:Math.pow(ts,r),new Ge(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?ba:Math.pow(ba,r),new Ge(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,t=isNaN(r)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,i=2*e-n;return new Ee(du(r>=240?r-240:r+120,i,n),du(r,i,n),du(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Ge(kh(this.h),Ja(this.s),Ja(this.l),es(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=es(this.opacity);return`${r===1?"hsl(":"hsla("}${kh(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${r===1?")":`, ${r})`}`}}));function kh(r){return r=(r||0)%360,r<0?r+360:r}function Ja(r){return Math.max(0,Math.min(1,r||0))}function du(r,t,e){return(r<60?t+(e-t)*r/60:r<180?e:r<240?t+(e-t)*(240-r)/60:t)*255}const Ff=r=>()=>r;function hw(r,t){return function(e){return r+e*t}}function dw(r,t,e){return r=Math.pow(r,e),t=Math.pow(t,e)-r,e=1/e,function(n){return Math.pow(r+n*t,e)}}function vw(r){return(r=+r)==1?a0:function(t,e){return e-t?dw(t,e,r):Ff(isNaN(t)?e:t)}}function a0(r,t){var e=t-r;return e?hw(r,e):Ff(isNaN(r)?t:r)}const Oh=(function r(t){var e=vw(t);function n(i,a){var o=e((i=bl(i)).r,(a=bl(a)).r),s=e(i.g,a.g),u=e(i.b,a.b),l=a0(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return n.gamma=r,n})(1);function o0(r,t){t||(t=[]);var e=r?Math.min(t.length,r.length):0,n=t.slice(),i;return function(a){for(i=0;i<e;++i)n[i]=r[i]*(1-a)+t[i]*a;return n}}function s0(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function pw(r,t){return(s0(t)?o0:u0)(r,t)}function u0(r,t){var e=t?t.length:0,n=r?Math.min(e,r.length):0,i=new Array(n),a=new Array(e),o;for(o=0;o<n;++o)i[o]=rs(r[o],t[o]);for(;o<e;++o)a[o]=t[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function gw(r,t){var e=new Date;return r=+r,t=+t,function(n){return e.setTime(r*(1-n)+t*n),e}}function xl(r,t){return r=+r,t=+t,function(e){return r*(1-e)+t*e}}function yw(r,t){var e={},n={},i;(r===null||typeof r!="object")&&(r={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in r?e[i]=rs(r[i],t[i]):n[i]=t[i];return function(a){for(i in e)n[i]=e[i](a);return n}}var Sl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vu=new RegExp(Sl.source,"g");function mw(r){return function(){return r}}function bw(r){return function(t){return r(t)+""}}function xw(r,t){var e=Sl.lastIndex=vu.lastIndex=0,n,i,a,o=-1,s=[],u=[];for(r=r+"",t=t+"";(n=Sl.exec(r))&&(i=vu.exec(t));)(a=i.index)>e&&(a=t.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:xl(n,i)})),e=vu.lastIndex;return e<t.length&&(a=t.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?bw(u[0].x):mw(t):(t=u.length,function(l){for(var c=0,h;c<t;++c)s[(h=u[c]).i]=h.x(l);return s.join("")})}function rs(r,t){var e=typeof t,n;return t==null||e==="boolean"?Ff(t):(e==="number"?xl:e==="string"?(n=Sa(t))?(t=n,Oh):xw:t instanceof Sa?Oh:t instanceof Date?gw:s0(t)?o0:Array.isArray(t)?u0:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?yw:xl)(r,t)}function Sw(r){return+r}function ww(r){return r*r}function Mw(r){return r*(2-r)}function Ih(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function Cw(r){return r*r*r}function Ew(r){return--r*r*r+1}function Ph(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var Rf=3,Aw=(function r(t){t=+t;function e(n){return Math.pow(n,t)}return e.exponent=r,e})(Rf),kw=(function r(t){t=+t;function e(n){return 1-Math.pow(1-n,t)}return e.exponent=r,e})(Rf),Th=(function r(t){t=+t;function e(n){return((n*=2)<=1?Math.pow(n,t):2-Math.pow(2-n,t))/2}return e.exponent=r,e})(Rf),l0=Math.PI,f0=l0/2;function Ow(r){return+r==1?1:1-Math.cos(r*f0)}function Iw(r){return Math.sin(r*f0)}function Nh(r){return(1-Math.cos(l0*r))/2}function on(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function Pw(r){return on(1-+r)}function Tw(r){return 1-on(r)}function _h(r){return((r*=2)<=1?on(1-r):2-on(r-1))/2}function Nw(r){return 1-Math.sqrt(1-r*r)}function _w(r){return Math.sqrt(1- --r*r)}function Lh(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var wl=4/11,Lw=6/11,Bw=8/11,Dw=3/4,Fw=9/11,Rw=10/11,zw=15/16,Xw=21/22,Yw=63/64,to=1/wl/wl;function jw(r){return 1-wa(1-r)}function wa(r){return(r=+r)<wl?to*r*r:r<Bw?to*(r-=Lw)*r+Dw:r<Rw?to*(r-=Fw)*r+zw:to*(r-=Xw)*r+Yw}function Hw(r){return((r*=2)<=1?1-wa(1-r):wa(r-1)+1)/2}var zf=1.70158,Vw=(function r(t){t=+t;function e(n){return(n=+n)*n*(t*(n-1)+n)}return e.overshoot=r,e})(zf),Ww=(function r(t){t=+t;function e(n){return--n*n*((n+1)*t+n)+1}return e.overshoot=r,e})(zf),Bh=(function r(t){t=+t;function e(n){return((n*=2)<1?n*n*((t+1)*n-t):(n-=2)*n*((t+1)*n+t)+2)/2}return e.overshoot=r,e})(zf),gi=2*Math.PI,Xf=1,Yf=.3,Uw=(function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=gi);function i(a){return t*on(- --a)*Math.sin((n-a)/e)}return i.amplitude=function(a){return r(a,e*gi)},i.period=function(a){return r(t,a)},i})(Xf,Yf),Dh=(function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=gi);function i(a){return 1-t*on(a=+a)*Math.sin((a+n)/e)}return i.amplitude=function(a){return r(a,e*gi)},i.period=function(a){return r(t,a)},i})(Xf,Yf),$w=(function r(t,e){var n=Math.asin(1/(t=Math.max(1,t)))*(e/=gi);function i(a){return((a=a*2-1)<0?t*on(-a)*Math.sin((n-a)/e):2-t*on(a)*Math.sin((n+a)/e))/2}return i.amplitude=function(a){return r(a,e*gi)},i.period=function(a){return r(t,a)},i})(Xf,Yf);const qw=Object.freeze(Object.defineProperty({__proto__:null,easeBack:Bh,easeBackIn:Vw,easeBackInOut:Bh,easeBackOut:Ww,easeBounce:wa,easeBounceIn:jw,easeBounceInOut:Hw,easeBounceOut:wa,easeCircle:Lh,easeCircleIn:Nw,easeCircleInOut:Lh,easeCircleOut:_w,easeCubic:Ph,easeCubicIn:Cw,easeCubicInOut:Ph,easeCubicOut:Ew,easeElastic:Dh,easeElasticIn:Uw,easeElasticInOut:$w,easeElasticOut:Dh,easeExp:_h,easeExpIn:Pw,easeExpInOut:_h,easeExpOut:Tw,easeLinear:Sw,easePoly:Th,easePolyIn:Aw,easePolyInOut:Th,easePolyOut:kw,easeQuad:Ih,easeQuadIn:ww,easeQuadInOut:Ih,easeQuadOut:Mw,easeSin:Nh,easeSinIn:Ow,easeSinInOut:Nh,easeSinOut:Iw},Symbol.toStringTag,{value:"Module"}));var Gw={};function Kw(r){return Gw[r.toLowerCase()]||qw[r]}var Zw=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},Qw=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},Fh=[1,0,0,0,1,0,0,0,1];function Jw(r,t,e){var n={},i=t.fromAttrs,a=t.toAttrs;if(!r.destroyed){var o;for(var s in a)if(!_n(i[s],a[s]))if(s==="path"){var u=a[s],l=i[s];u.length>l.length?(u=ri(a[s]),l=ri(i[s]),l=Vg(l,u),l=vl(l,u),t.fromAttrs.path=l,t.toAttrs.path=u):t.pathFormatted||(u=ri(a[s]),l=ri(i[s]),l=vl(l,u),t.fromAttrs.path=l,t.toAttrs.path=u,t.pathFormatted=!0),n[s]=[];for(var c=0;c<u.length;c++){for(var h=u[c],d=l[c],f=[],v=0;v<h.length;v++)xt(h[v])&&d&&xt(d[v])?(o=rs(d[v],h[v]),f.push(o(e))):f.push(h[v]);n[s].push(f)}}else if(s==="matrix"){var p=pw(i[s]||Fh,a[s]||Fh),g=p(e);n[s]=g}else Zw(s)&&Qw(a[s])?n[s]=a[s]:Jt(a[s])||(o=rs(i[s],a[s]),n[s]=o(e));r.attr(n)}}function tM(r,t,e){var n=t.startTime,i=t.delay;if(e<n+i||t._paused)return!1;var a,o=t.duration,s=t.easing,u=Kw(s);if(e=e-n-t.delay,t.repeat)a=e%o/o,a=u(a);else if(a=e/o,a<1)a=u(a);else return t.onFrame?r.attr(t.onFrame(1)):r.attr(t.toAttrs),!0;if(t.onFrame){var l=t.onFrame(a);r.attr(l)}else Jw(r,t,a);return!1}var eM=(function(){function r(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return r.prototype.initTimer=function(){var t=this,e=!1,n,i,a;this.timer=r0(function(o){if(t.current=o,t.animators.length>0){for(var s=t.animators.length-1;s>=0;s--){if(n=t.animators[s],n.destroyed){t.removeAnimator(s);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var u=i.length-1;u>=0;u--)a=i[u],e=tM(n,a,o),e&&(i.splice(u,1),e=!1,a.callback&&a.callback())}i.length===0&&t.removeAnimator(s)}var l=t.canvas.get("autoDraw");l||t.canvas.draw()}})},r.prototype.addAnimator=function(t){this.animators.push(t)},r.prototype.removeAnimator=function(t){this.animators.splice(t,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(t){t===void 0&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r})(),rM=40,Rh=0,zh=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Xh(r,t,e){e.name=t,e.target=r,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}function nM(r,t,e){if(e.bubbles){var n=void 0,i=!1;if(t==="mouseenter"?(n=e.fromShape,i=!0):t==="mouseleave"&&(i=!0,n=e.toShape),r.isCanvas()&&i)return;if(n&&$g(r,n)){e.bubbles=!1;return}e.name=t,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}}var iM=(function(){function r(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;e._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&(e.dragging||e.currentShape)){var o=e._getPointInfo(n);e.dragging&&e._emitEvent("drag",n,o,e.draggingShape)}},this._onDocumentMouseUp=function(n){var i=e.canvas,a=i.get("el");if(a!==n.target&&e.dragging){var o=e._getPointInfo(n);e.draggingShape&&e._emitEvent("drop",n,o,null),e._emitEvent("dragend",n,o,e.draggingShape),e._afterDrag(e.draggingShape,o,n)}},this.canvas=t.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");U(zh,function(n){e.addEventListener(n,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");U(zh,function(n){e.removeEventListener(n,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(t,e,n,i,a,o){var s=new Bf(t,e);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},r.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),i=e.getPointByEvent(t);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e),a=this["_on"+t],o=!1;if(a)a.call(this,n,i,e);else{var s=this.currentShape;t==="mouseenter"||t==="dragenter"||t==="mouseover"?(this._emitEvent(t,e,n,null,null,i),i&&this._emitEvent(t,e,n,i,null,i),t==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):t==="mouseleave"||t==="dragleave"||t==="mouseout"?(o=!0,s&&this._emitEvent(t,e,n,s,s,null),this._emitEvent(t,e,n,null,s,null),t==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var u=this.canvas,l=u.get("el");l.style.cursor=i.attr("cursor")||u.get("cursor")}},r.prototype._onmousedown=function(t,e,n){n.button===Rh&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},r.prototype._emitMouseoverEvents=function(t,e,n,i){var a=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",t,e,n,n,i),this._emitEvent("mouseleave",t,e,n,n,i),(!i||i.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",t,e,i,n,i),this._emitEvent("mouseenter",t,e,i,n,i)))},r.prototype._emitDragoverEvents=function(t,e,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,i),this._emitEvent("dragenter",t,e,i,n,i)),a||this._emitEvent("dragover",t,e,i)):n&&this._emitEvent("dragleave",t,e,n,n,i),a&&this._emitEvent("dragover",t,e,i)},r.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==t&&this._emitMouseoverEvents(n,e,t,i),this.currentShape=i},r.prototype._onmouseup=function(t,e,n){if(n.button===Rh){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,i),this._afterDrag(i,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(t,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,t,i,e,!0)},r.prototype._onmousemove=function(t,e,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,a,e,!1),this._emitEvent("drag",n,t,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,l=n.timeStamp,c=l-this.mousedownTimeStamp,h=s.clientX-t.clientX,d=s.clientY-t.clientY,f=h*h+d*d;c>120||f>rM?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,a,e),this._emitEvent("mousemove",n,t,e)}},r.prototype._emitEvent=function(t,e,n,i,a,o){var s=this._getEventObj(t,e,n,i,a,o);if(i){s.shape=i,Xh(i,t,s);for(var u=i.getParent();u;)u.emitDelegation(t,s),s.propagationStopped||nM(u,t,s),s.propagationPath.push(u),u=u.getParent()}else{var l=this.canvas;Xh(l,t,s)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r})(),Yh="px",jh=I2(),aM=jh&&jh.name==="firefox",oM=(function(r){Xt(t,r);function t(e){var n=r.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},t.prototype.initContainer=function(){var e=this.get("container");ot(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e);var n=this.get("container");n.appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new iM({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new eM(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,n){var i=this.get("el");dh&&(i.style.width=e+Yh,i.style.height=n+Yh)},t.prototype.changeSize=function(e,n){this.setDOMSize(e,n),this.set("width",e),this.set("height",n),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var n=this.get("el");dh&&n&&(n.style.cursor=e)},t.prototype.getPointByEvent=function(e){var n=this.get("supportCSSTransform");if(n){if(aM&&!St(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!St(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var i=this.getClientByEvent(e),a=i.x,o=i.y;return this.getPointByClient(a,o)},t.prototype.getClientByEvent=function(e){var n=e;return e.touches&&(e.type==="touchend"?n=e.changedTouches[0]:n=e.touches[0]),{x:n.clientX,y:n.clientY}},t.prototype.getPointByClient=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e-a.left,y:n-a.top}},t.prototype.getClientByPoint=function(e,n){var i=this.get("el"),a=i.getBoundingClientRect();return{x:e+a.left,y:n+a.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},t})(Qg),sM=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var e=r.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var a=n[i];e.add(a.clone())}return e},t})(Qg),uM=(function(r){Xt(t,r);function t(e){return r.call(this,e)||this}return t.prototype._isInBBox=function(e,n){var i=this.getBBox();return i.minX<=e&&i.maxX>=e&&i.minY<=n&&i.maxY>=n},t.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(e){r.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),n=this.getTotalMatrix(),i=e.minX,a=e.minY,o=e.maxX,s=e.maxY;if(n){var u=Mn(n,[e.minX,e.minY]),l=Mn(n,[e.maxX,e.minY]),c=Mn(n,[e.minX,e.maxY]),h=Mn(n,[e.maxX,e.maxY]);i=Math.min(u[0],l[0],c[0],h[0]),o=Math.max(u[0],l[0],c[0],h[0]),a=Math.min(u[1],l[1],c[1],h[1]),s=Math.max(u[1],l[1],c[1],h[1])}var d=this.attrs;if(d.shadowColor){var f=d.shadowBlur,v=f===void 0?0:f,p=d.shadowOffsetX,g=p===void 0?0:p,y=d.shadowOffsetY,m=y===void 0?0:y,b=i-v+g,x=o+v+g,S=a-v+m,C=s+v+m;i=Math.min(i,b),o=Math.max(o,x),a=Math.min(a,S),s=Math.max(s,C)}return{x:i,y:a,minX:i,minY:a,maxX:o,maxY:s,width:o-i,height:s-a}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,n){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,n){var i=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[e,n,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],l=this._isInBBox(s,u);return this.isOnlyHitBox()?l:!!(l&&!this.isClipped(s,u)&&(this.isInShape(s,u)||i&&i.isHit(s,u)||a&&a.isHit(s,u)))},t})(Gg),c0=new Map;function tr(r,t){c0.set(r,t)}function lM(r){return c0.get(r)}function h0(r){var t=r.attr(),e=t.x,n=t.y,i=t.width,a=t.height;return{x:e,y:n,width:i,height:a}}function d0(r){var t=r.attr(),e=t.x,n=t.y,i=t.r;return{x:e-i,y:n-i,width:i*2,height:i*2}}function de(r,t,e,n){var i=r-e,a=t-n;return Math.sqrt(i*i+a*a)}function To(r,t){return Math.abs(r-t)<.001}function Si(r,t){var e=di(r),n=di(t),i=hi(r),a=hi(t);return{x:e,y:n,width:i-e,height:a-n}}function Os(r){return(r+Math.PI*2)%(Math.PI*2)}const Ce={box:function(r,t,e,n){return Si([r,e],[t,n])},length:function(r,t,e,n){return de(r,t,e,n)},pointAt:function(r,t,e,n,i){return{x:(1-i)*r+i*e,y:(1-i)*t+i*n}},pointDistance:function(r,t,e,n,i,a){var o=(e-r)*(i-r)+(n-t)*(a-t);if(o<0)return de(r,t,i,a);var s=(e-r)*(e-r)+(n-t)*(n-t);return o>s?de(e,n,i,a):this.pointToLine(r,t,e,n,i,a)},pointToLine:function(r,t,e,n,i,a){var o=[e-r,n-t];if(Qp(o,[0,0]))return Math.sqrt((i-r)*(i-r)+(a-t)*(a-t));var s=[-o[1],o[0]];On(s,s);var u=[i-r,a-t];return Math.abs(Zp(u,s))},tangentAngle:function(r,t,e,n){return Math.atan2(n-t,e-r)}};var fM=1e-4;function v0(r,t,e,n,i,a){var o,s=1/0,u=[e,n],l=20;a&&a>200&&(l=a/10);for(var c=1/l,h=c/10,d=0;d<=l;d++){var f=d*c,v=[i.apply(null,r.concat([f])),i.apply(null,t.concat([f]))],p=de(u[0],u[1],v[0],v[1]);p<s&&(o=f,s=p)}if(o===0)return{x:r[0],y:t[0]};if(o===1){var g=r.length;return{x:r[g-1],y:t[g-1]}}s=1/0;for(var d=0;d<32&&!(h<fM);d++){var y=o-h,m=o+h,v=[i.apply(null,r.concat([y])),i.apply(null,t.concat([y]))],p=de(u[0],u[1],v[0],v[1]);if(y>=0&&p<s)o=y,s=p;else{var b=[i.apply(null,r.concat([m])),i.apply(null,t.concat([m]))],x=de(u[0],u[1],b[0],b[1]);m<=1&&x<s?(o=m,s=x):h*=.5}}return{x:i.apply(null,r.concat([o])),y:i.apply(null,t.concat([o]))}}function cM(r,t){for(var e=0,n=r.length,i=0;i<n;i++){var a=r[i],o=t[i],s=r[(i+1)%n],u=t[(i+1)%n];e+=de(a,o,s,u)}return e/2}function Wr(r,t,e,n){var i=1-n;return i*i*r+2*n*i*t+n*n*e}function Hh(r,t,e){var n=r+e-2*t;if(To(n,0))return[.5];var i=(r-t)/n;return i<=1&&i>=0?[i]:[]}function Vh(r,t,e,n){return 2*(1-n)*(t-r)+2*n*(e-t)}function p0(r,t,e,n,i,a,o){var s=Wr(r,e,i,o),u=Wr(t,n,a,o),l=Ce.pointAt(r,t,e,n,o),c=Ce.pointAt(e,n,i,a,o);return[[r,t,l.x,l.y,s,u],[s,u,c.x,c.y,i,a]]}function Ml(r,t,e,n,i,a,o){if(o===0)return(de(r,t,e,n)+de(e,n,i,a)+de(r,t,i,a))/2;var s=p0(r,t,e,n,i,a,.5),u=s[0],l=s[1];return u.push(o-1),l.push(o-1),Ml.apply(null,u)+Ml.apply(null,l)}const g0={box:function(r,t,e,n,i,a){var o=Hh(r,e,i)[0],s=Hh(t,n,a)[0],u=[r,i],l=[t,a];return o!==void 0&&u.push(Wr(r,e,i,o)),s!==void 0&&l.push(Wr(t,n,a,s)),Si(u,l)},length:function(r,t,e,n,i,a){return Ml(r,t,e,n,i,a,3)},nearestPoint:function(r,t,e,n,i,a,o,s){return v0([r,e,i],[t,n,a],o,s,Wr)},pointDistance:function(r,t,e,n,i,a,o,s){var u=this.nearestPoint(r,t,e,n,i,a,o,s);return de(u.x,u.y,o,s)},interpolationAt:Wr,pointAt:function(r,t,e,n,i,a,o){return{x:Wr(r,e,i,o),y:Wr(t,n,a,o)}},divide:function(r,t,e,n,i,a,o){return p0(r,t,e,n,i,a,o)},tangentAngle:function(r,t,e,n,i,a,o){var s=Vh(r,e,i,o),u=Vh(t,n,a,o),l=Math.atan2(u,s);return Os(l)}};function Ur(r,t,e,n,i){var a=1-i;return a*a*a*r+3*t*i*a*a+3*e*i*i*a+n*i*i*i}function Wh(r,t,e,n,i){var a=1-i;return 3*(a*a*(t-r)+2*a*i*(e-t)+i*i*(n-e))}function pu(r,t,e,n){var i=-3*r+9*t-9*e+3*n,a=6*r-12*t+6*e,o=3*t-3*r,s=[],u,l,c;if(To(i,0))To(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var h=a*a-4*i*o;To(h,0)?s.push(-a/(2*i)):h>0&&(c=Math.sqrt(h),u=(-a+c)/(2*i),l=(-a-c)/(2*i),u>=0&&u<=1&&s.push(u),l>=0&&l<=1&&s.push(l))}return s}function y0(r,t,e,n,i,a,o,s,u){var l=Ur(r,e,i,o,u),c=Ur(t,n,a,s,u),h=Ce.pointAt(r,t,e,n,u),d=Ce.pointAt(e,n,i,a,u),f=Ce.pointAt(i,a,o,s,u),v=Ce.pointAt(h.x,h.y,d.x,d.y,u),p=Ce.pointAt(d.x,d.y,f.x,f.y,u);return[[r,t,h.x,h.y,v.x,v.y,l,c],[l,c,p.x,p.y,f.x,f.y,o,s]]}function Cl(r,t,e,n,i,a,o,s,u){if(u===0)return cM([r,e,i,o],[t,n,a,s]);var l=y0(r,t,e,n,i,a,o,s,.5),c=l[0],h=l[1];return c.push(u-1),h.push(u-1),Cl.apply(null,c)+Cl.apply(null,h)}const aa={extrema:pu,box:function(r,t,e,n,i,a,o,s){for(var u=[r,o],l=[t,s],c=pu(r,e,i,o),h=pu(t,n,a,s),d=0;d<c.length;d++)u.push(Ur(r,e,i,o,c[d]));for(var d=0;d<h.length;d++)l.push(Ur(t,n,a,s,h[d]));return Si(u,l)},length:function(r,t,e,n,i,a,o,s){return Cl(r,t,e,n,i,a,o,s,3)},nearestPoint:function(r,t,e,n,i,a,o,s,u,l,c){return v0([r,e,i,o],[t,n,a,s],u,l,Ur,c)},pointDistance:function(r,t,e,n,i,a,o,s,u,l,c){var h=this.nearestPoint(r,t,e,n,i,a,o,s,u,l,c);return de(h.x,h.y,u,l)},interpolationAt:Ur,pointAt:function(r,t,e,n,i,a,o,s,u){return{x:Ur(r,e,i,o,u),y:Ur(t,n,a,s,u)}},divide:function(r,t,e,n,i,a,o,s,u){return y0(r,t,e,n,i,a,o,s,u)},tangentAngle:function(r,t,e,n,i,a,o,s,u){var l=Wh(r,e,i,o,u),c=Wh(t,n,a,s,u);return Os(Math.atan2(c,l))}};function Uh(r,t){var e=Math.abs(r);return t>0?e:e*-1}const hM={box:function(r,t,e,n){return{x:r-e,y:t-n,width:e*2,height:n*2}},length:function(r,t,e,n){return Math.PI*(3*(e+n)-Math.sqrt((3*e+n)*(e+3*n)))},nearestPoint:function(r,t,e,n,i,a){var o=e,s=n;if(o===0||s===0)return{x:r,y:t};for(var u=i-r,l=a-t,c=Math.abs(u),h=Math.abs(l),d=o*o,f=s*s,v=Math.PI/4,p,g,y=0;y<4;y++){p=o*Math.cos(v),g=s*Math.sin(v);var m=(d-f)*Math.pow(Math.cos(v),3)/o,b=(f-d)*Math.pow(Math.sin(v),3)/s,x=p-m,S=g-b,C=c-m,w=h-b,I=Math.hypot(S,x),T=Math.hypot(w,C),O=I*Math.asin((x*w-S*C)/(I*T)),_=O/Math.sqrt(d+f-p*p-g*g);v+=_,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:r+Uh(p,u),y:t+Uh(g,l)}},pointDistance:function(r,t,e,n,i,a){var o=this.nearestPoint(r,t,e,n,i,a);return de(o.x,o.y,i,a)},pointAt:function(r,t,e,n,i){var a=2*Math.PI*i;return{x:r+e*Math.cos(a),y:t+n*Math.sin(a)}},tangentAngle:function(r,t,e,n,i){var a=2*Math.PI*i,o=Math.atan2(n*Math.cos(a),-e*Math.sin(a));return Os(o)}};function dM(r,t,e,n,i,a,o,s){return-1*e*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}function vM(r,t,e,n,i,a,o,s){return-1*e*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}function pM(r,t,e){return Math.atan(-t/r*Math.tan(e))}function gM(r,t,e){return Math.atan(t/(r*Math.tan(e)))}function $h(r,t,e,n,i,a){return e*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+r}function qh(r,t,e,n,i,a){return e*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+t}function yM(r,t,e,n){var i=Math.atan2(n*r,e*t);return(i+Math.PI*2)%(Math.PI*2)}function Gh(r,t,e){return{x:r*Math.cos(e),y:t*Math.sin(e)}}function Kh(r,t,e){var n=Math.cos(e),i=Math.sin(e);return[r*n-t*i,r*i+t*n]}const mM={box:function(r,t,e,n,i,a,o){for(var s=pM(e,n,i),u=1/0,l=-1/0,c=[a,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var d=s+h;a<o?a<d&&d<o&&c.push(d):o<d&&d<a&&c.push(d)}for(var h=0;h<c.length;h++){var f=$h(r,t,e,n,i,c[h]);f<u&&(u=f),f>l&&(l=f)}for(var v=gM(e,n,i),p=1/0,g=-1/0,y=[a,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var m=v+h;a<o?a<m&&m<o&&y.push(m):o<m&&m<a&&y.push(m)}for(var h=0;h<y.length;h++){var b=qh(r,t,e,n,i,y[h]);b<p&&(p=b),b>g&&(g=b)}return{x:u,y:p,width:l-u,height:g-p}},length:function(r,t,e,n,i,a,o){},nearestPoint:function(r,t,e,n,i,a,o,s,u){var l=Kh(s-r,u-t,-i),c=l[0],h=l[1],d=hM.nearestPoint(0,0,e,n,c,h),f=yM(e,n,d.x,d.y);f<a?d=Gh(e,n,a):f>o&&(d=Gh(e,n,o));var v=Kh(d.x,d.y,i);return{x:v[0]+r,y:v[1]+t}},pointDistance:function(r,t,e,n,i,a,o,s,u){var l=this.nearestPoint(r,t,e,n,s,u);return de(l.x,l.y,s,u)},pointAt:function(r,t,e,n,i,a,o,s){var u=(o-a)*s+a;return{x:$h(r,t,e,n,i,u),y:qh(r,t,e,n,i,u)}},tangentAngle:function(r,t,e,n,i,a,o,s){var u=(o-a)*s+a,l=dM(r,t,e,n,i,a,o,u),c=vM(r,t,e,n,i,a,o,u);return Os(Math.atan2(c,l))}};function m0(r){for(var t=0,e=[],n=0;n<r.length-1;n++){var i=r[n],a=r[n+1],o=de(i[0],i[1],a[0],a[1]),s={from:i,to:a,length:o};e.push(s),t+=o}return{segments:e,totalLength:t}}function bM(r){if(r.length<2)return 0;for(var t=0,e=0;e<r.length-1;e++){var n=r[e],i=r[e+1];t+=de(n[0],n[1],i[0],i[1])}return t}function xM(r,t){if(t>1||t<0||r.length<2)return null;var e=m0(r),n=e.segments,i=e.totalLength;if(i===0)return{x:r[0][0],y:r[0][1]};for(var a=0,o=null,s=0;s<n.length;s++){var u=n[s],l=u.from,c=u.to,h=u.length/i;if(t>=a&&t<=a+h){var d=(t-a)/h;o=Ce.pointAt(l[0],l[1],c[0],c[1],d);break}a+=h}return o}function SM(r,t){if(t>1||t<0||r.length<2)return 0;for(var e=m0(r),n=e.segments,i=e.totalLength,a=0,o=0,s=0;s<n.length;s++){var u=n[s],l=u.from,c=u.to,h=u.length/i;if(t>=a&&t<=a+h){o=Math.atan2(c[1]-l[1],c[0]-l[0]);break}a+=h}return o}function wM(r,t,e){for(var n=1/0,i=0;i<r.length-1;i++){var a=r[i],o=r[i+1],s=Ce.pointDistance(a[0],a[1],o[0],o[1],t,e);s<n&&(n=s)}return n}const MM={box:function(r){for(var t=[],e=[],n=0;n<r.length;n++){var i=r[n];t.push(i[0]),e.push(i[1])}return Si(t,e)},length:function(r){return bM(r)},pointAt:function(r,t){return xM(r,t)},pointDistance:function(r,t,e){return wM(r,t,e)},tangentAngle:function(r,t){return SM(r,t)}};function Zh(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function jf(r,t){var e=r.get("startArrowShape"),n=r.get("endArrowShape"),i=null,a=null;return e&&(i=e.getCanvasBBox(),t=Zh(t,i)),n&&(a=n.getCanvasBBox(),t=Zh(t,a)),t}function CM(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}var s=Si(n,i),u=s.x,l=s.y,c=s.width,h=s.height,d={minX:u,minY:l,maxX:u+c,maxY:l+h};return d=jf(r,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function EM(r){for(var t=r.attr(),e=t.points,n=[],i=[],a=0;a<e.length;a++){var o=e[a];n.push(o[0]),i.push(o[1])}return Si(n,i)}var gu=null;function AM(){if(!gu){var r=document.createElement("canvas");r.width=1,r.height=1,gu=r.getContext("2d")}return gu}function b0(r,t,e){var n=1;if(ot(r)&&(n=r.split(`
`).length),n>1){var i=kM(t,e);return t*n+i*(n-1)}return t}function kM(r,t){return t?t-r:r*.14}function OM(r,t){var e=AM(),n=0;if(St(r)||r==="")return n;if(e.save(),e.font=t,ot(r)&&r.includes(`
`)){var i=r.split(`
`);U(i,function(a){var o=e.measureText(a).width;n<o&&(n=o)})}else n=e.measureText(r).width;return e.restore(),n}function x0(r){var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,i=r.fontStyle,a=r.fontVariant;return[i,a,n,t+"px",e].join(" ").trim()}function IM(r){var t=r.attr(),e=t.x,n=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=x0(t));var u=OM(i,s),l;if(!u)l={x:e,y:n,width:0,height:0};else{var c=t.textAlign,h=t.textBaseline,d=b0(i,a,o),f={x:e,y:n-d};c&&(c==="end"||c==="right"?f.x-=u:c==="center"&&(f.x-=u/2)),h&&(h==="top"?f.y+=d:h==="middle"&&(f.y+=d/2)),l={x:f.x,y:f.y,width:u,height:d}}return l}var PM=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,TM=/[^\s\,]+/ig;function NM(r){var t=r||[];if(pt(t))return t;if(ot(t))return t=t.match(PM),U(t,function(e,n){if(e=e.match(TM),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}U(e,function(a,o){isNaN(a)||(e[o]=+a)}),t[n]=e}),t}function _M(r,t,e,n){var i=[],a=!!n,o,s,u,l,c,h,d;if(a){u=n[0],l=n[1];for(var f=0,v=r.length;f<v;f+=1){var p=r[f];u=hn([0,0],u,p),l=dn([0,0],l,p)}}for(var f=0,g=r.length;f<g;f+=1){var p=r[f];if(f===0&&!e)d=p;else if(f===g-1&&!e)h=p,i.push(d),i.push(h);else{var y=[f?f-1:g-1,f-1][e?0:1];o=r[y],s=r[e?(f+1)%g:f+1];var m=[0,0];m=su(m,s,o),m=me(m,m,t);var b=Xc(p,o),x=Xc(p,s),S=b+x;S!==0&&(b/=S,x/=S);var C=me([0,0],m,-b),w=me([0,0],m,x);h=se([0,0],p,C),c=se([0,0],p,w),c=hn([0,0],c,dn([0,0],s,p)),c=dn([0,0],c,hn([0,0],s,p)),C=su([0,0],c,p),C=me([0,0],C,-b/x),h=se([0,0],p,C),h=hn([0,0],h,dn([0,0],o,p)),h=dn([0,0],h,hn([0,0],o,p)),w=su([0,0],p,h),w=me([0,0],w,x/b),c=se([0,0],p,w),a&&(h=dn([0,0],h,u),h=hn([0,0],h,l),c=dn([0,0],c,u),c=hn([0,0],c,l)),i.push(d),i.push(h),d=c}}return e&&i.push(i.shift()),i}function LM(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var n=!!t,i=[],a=0,o=r.length;a<o;a+=2)i.push([r[a],r[a+1]]);for(var s=_M(i,.4,n,e),u=i.length,l=[],c,h,d,a=0;a<u-1;a+=1)c=s[a*2],h=s[a*2+1],d=i[a+1],l.push(["C",c[0],c[1],h[0],h[1],d[0],d[1]]);return n&&(c=s[u],h=s[u+1],d=i[0],l.push(["C",c[0],c[1],h[0],h[1],d[0],d[1]])),l}var oa=`	
\v\f\r \u2028\u2029`,BM=new RegExp("([a-z])["+oa+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+oa+"]*,?["+oa+"]*)+)","ig"),DM=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+oa+"]*,?["+oa+"]*","ig");function El(r){if(!r)return null;if(pt(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(r).replace(BM,function(n,i,a){var o=[],s=i.toLowerCase();if(a.replace(DM,function(u,l){l&&o.push(+l)}),s==="m"&&o.length>2&&(e.push([i].concat(o.splice(0,2))),s="l",i=i==="m"?"l":"L"),s==="o"&&o.length===1&&e.push([i,o[0]]),s==="r")e.push([i].concat(o));else for(;o.length>=t[s]&&(e.push([i].concat(o.splice(0,t[s]))),!!t[s]););return""}),e}var FM=/[a-z]/;function Qh(r,t){return[t[0]+(t[0]-r[0]),t[1]+(t[1]-r[1])]}function S0(r){var t=El(r);if(!t||!t.length)return[["M",0,0]];for(var e=!1,n=0;n<t.length;n++){var i=t[n][0];if(FM.test(i)||["V","H","T","S"].indexOf(i)>=0){e=!0;break}}if(!e)return t;var a=[],o=0,s=0,u=0,l=0,c=0,h=t[0];(h[0]==="M"||h[0]==="m")&&(o=+h[1],s=+h[2],u=o,l=s,c++,a[0]=["M",o,s]);for(var n=c,d=t.length;n<d;n++){var f=t[n],v=a[n-1],p=[],i=f[0],g=i.toUpperCase();if(i!==g)switch(p[0]=g,g){case"A":p[1]=f[1],p[2]=f[2],p[3]=f[3],p[4]=f[4],p[5]=f[5],p[6]=+f[6]+o,p[7]=+f[7]+s;break;case"V":p[1]=+f[1]+s;break;case"H":p[1]=+f[1]+o;break;case"M":u=+f[1]+o,l=+f[2]+s,p[1]=u,p[2]=l;break;default:for(var y=1,m=f.length;y<m;y++)p[y]=+f[y]+(y%2?o:s)}else p=t[n];switch(g){case"Z":o=+u,s=+l;break;case"H":o=p[1],p=["L",o,s];break;case"V":s=p[1],p=["L",o,s];break;case"T":o=p[1],s=p[2];var b=Qh([v[1],v[2]],[v[3],v[4]]);p=["Q",b[0],b[1],o,s];break;case"S":o=p[p.length-2],s=p[p.length-1];var x=v.length,S=Qh([v[x-4],v[x-3]],[v[x-2],v[x-1]]);p=["C",S[0],S[1],p[1],p[2],o,s];break;case"M":u=p[p.length-2],l=p[p.length-1];break;default:o=p[p.length-2],s=p[p.length-1]}a.push(p)}return a}function eo(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Al(r,t){return eo(r)*eo(t)?(r[0]*t[0]+r[1]*t[1])/(eo(r)*eo(t)):1}function Jh(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(Al(r,t))}function kl(r,t){return r[0]===t[0]&&r[1]===t[1]}function RM(r,t){var e=t[1],n=t[2],i=yf(mf(t[3]),Math.PI*2),a=t[4],o=t[5],s=r[0],u=r[1],l=t[6],c=t[7],h=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,f=h*h/(e*e)+d*d/(n*n);f>1&&(e*=Math.sqrt(f),n*=Math.sqrt(f));var v=e*e*(d*d)+n*n*(h*h),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,y=e?p*-n*h/e:0,m=(s+l)/2+Math.cos(i)*g-Math.sin(i)*y,b=(u+c)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(h-g)/e,(d-y)/n],S=[(-1*h-g)/e,(-1*d-y)/n],C=Jh([1,0],x),w=Jh(x,S);return Al(x,S)<=-1&&(w=Math.PI),Al(x,S)>=1&&(w=0),o===0&&w>0&&(w=w-2*Math.PI),o===1&&w<0&&(w=w+2*Math.PI),{cx:m,cy:b,rx:kl(r,[l,c])?0:e,ry:kl(r,[l,c])?0:n,startAngle:C,endAngle:C+w,xRotation:i,arcFlag:a,sweepFlag:o}}function td(r,t){return[t[0]+(t[0]-r[0]),t[1]+(t[1]-r[1])]}function w0(r){r=NM(r);for(var t=[],e=null,n=null,i=null,a=0,o=r.length,s=0;s<o;s++){var u=r[s];n=r[s+1];var l=u[0],c={command:l,prePoint:e,params:u,startTangent:null,endTangent:null};switch(l){case"M":i=[u[1],u[2]],a=s;break;case"A":var h=RM(e,u);c.arcParams=h;break}if(l==="Z")e=i,n=r[a+1];else{var d=u.length;e=[u[d-2],u[d-1]]}n&&n[0]==="Z"&&(n=r[a],t[a]&&(t[a].prePoint=e)),c.currentPoint=e,t[a]&&kl(e,t[a].currentPoint)&&(t[a].prePoint=c.prePoint);var f=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=f;var v=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[v[0]-e[0],v[1]-e[1]],c.endTangent=[e[0]-v[0],e[1]-v[1]];else if(l==="Q"){var p=[u[1],u[2]];c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[e[0]-p[0],e[1]-p[1]]}else if(l==="T"){var g=t[s-1],p=td(g.currentPoint,v);g.command==="Q"?(c.command="Q",c.startTangent=[v[0]-p[0],v[1]-p[1]],c.endTangent=[e[0]-p[0],e[1]-p[1]]):(c.command="TL",c.startTangent=[v[0]-e[0],v[1]-e[1]],c.endTangent=[e[0]-v[0],e[1]-v[1]])}else if(l==="C"){var y=[u[1],u[2]],m=[u[3],u[4]];c.startTangent=[v[0]-y[0],v[1]-y[1]],c.endTangent=[e[0]-m[0],e[1]-m[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[y[0]-m[0],y[1]-m[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[m[0]-y[0],m[1]-y[1]])}else if(l==="S"){var g=t[s-1],y=td(g.currentPoint,v),m=[u[1],u[2]];g.command==="C"?(c.command="C",c.startTangent=[v[0]-y[0],v[1]-y[1]],c.endTangent=[e[0]-m[0],e[1]-m[1]]):(c.command="SQ",c.startTangent=[v[0]-m[0],v[1]-m[1]],c.endTangent=[e[0]-m[0],e[1]-m[1]])}else if(l==="A"){var b=.001,x=c.arcParams||{},S=x.cx,C=S===void 0?0:S,w=x.cy,I=w===void 0?0:w,T=x.rx,O=T===void 0?0:T,_=x.ry,B=_===void 0?0:_,z=x.sweepFlag,Y=z===void 0?0:z,X=x.startAngle,K=X===void 0?0:X,G=x.endAngle,tt=G===void 0?0:G;Y===0&&(b*=-1);var H=O*Math.cos(K-b)+C,q=B*Math.sin(K-b)+I;c.startTangent=[H-i[0],q-i[1]];var J=O*Math.cos(K+tt+b)+C,rt=B*Math.sin(K+tt-b)+I;c.endTangent=[v[0]-J,v[1]-rt]}t.push(c)}return t}function zM(r,t){for(var e=[],n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=o.currentPoint,u=o.params,l=o.prePoint,c=void 0;switch(o.command){case"Q":c=g0.box(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=aa.box(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var h=o.arcParams;c=mM.box(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}c&&(o.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height)),t&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&i.push(o)}e=e.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0}),n=n.filter(function(y){return!Number.isNaN(y)&&y!==1/0&&y!==-1/0});var d=di(e),f=di(n),v=hi(e),p=hi(n);if(i.length===0)return{x:d,y:f,width:v-d,height:p-f};for(var a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,g=void 0;s[0]===d?(g=ro(o,t),d=d-g.xExtra):s[0]===v&&(g=ro(o,t),v=v+g.xExtra),s[1]===f?(g=ro(o,t),f=f-g.yExtra):s[1]===p&&(g=ro(o,t),p=p+g.yExtra)}return{x:d,y:f,width:v-d,height:p-f}}function ro(r,t){var e=r.prePoint,n=r.currentPoint,i=r.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||Yp(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),c=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var h={xExtra:Math.cos(u/2-l)*(t/2*(1/Math.sin(u/2)))-t/2||0,yExtra:Math.cos(c-u/2)*(t/2*(1/Math.sin(u/2)))-t/2||0};return h}function XM(r){var t=r.attr(),e=t.path,n=t.stroke,i=n?t.lineWidth:0,a=r.get("segments")||w0(e),o=zM(a,i),s=o.x,u=o.y,l=o.width,c=o.height,h={minX:s,minY:u,maxX:s+l,maxY:u+c};return h=jf(r,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function YM(r){var t=r.attr(),e=t.x1,n=t.y1,i=t.x2,a=t.y2,o=Math.min(e,i),s=Math.max(e,i),u=Math.min(n,a),l=Math.max(n,a),c={minX:o,maxX:s,minY:u,maxY:l};return c=jf(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function jM(r){var t=r.attr(),e=t.x,n=t.y,i=t.rx,a=t.ry;return{x:e-i,y:n-a,width:i*2,height:a*2}}tr("rect",h0);tr("image",h0);tr("circle",d0);tr("marker",d0);tr("polyline",CM);tr("polygon",EM);tr("text",IM);tr("path",XM);tr("line",YM);tr("ellipse",jM);var HM=(function(r){Xt(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return t})(Bf),Ol=function(t){return t+"-"+Math.random()+Date.now()},Hf=function(t){var e=0,n=0,i=0,a=0;if(xt(t))e=n=i=a=t;else if(ot(t)){var o=parseInt(t,10);e=n=i=a=o}else pt(t)&&(e=t[0],i=St(t[1])?t[0]:t[1],a=St(t[2])?t[0]:t[2],n=St(t[3])?i:t[3]);return[e,i,a,n]},VM=function(t){var e=new HM(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},WM=function(t){if(!t)return!1;for(var e=9,n=[1,0,0,0,1,0,0,0,1],i=0;i<e;i++)if(t[i]!==n[i])return!0;return!1},No=function(t){return Number.isNaN(Number(t))},M0=function(t){for(var e=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<t.length;o++){var s=t[o],u=s.getBBox(),l=u.minX,c=u.minY,h=u.maxX,d=u.maxY;l<e&&(e=l),c<i&&(i=c),h>n&&(n=h),d>a&&(a=d)}var f=Math.floor(e),v=Math.floor(i),p=Math.ceil(n)-Math.floor(e),g=Math.ceil(a)-Math.floor(i);return{x:f,y:v,width:p,height:g,minX:e,minY:i,maxX:n,maxY:a}},UM=function(t,e,n,i,a){e===void 0&&(e=15),n===void 0&&(n="quadratic"),i===void 0&&(i=void 0),a===void 0&&(a=void 0);for(var o=t.length,s=e*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},c=[],h={},d=0;d<o;d++){var f=t[d],v=f.source,p=f.target,g=v+"-"+p;if(!c[d]){l[g]||(l[g]=[]),c[d]=!0,l[g].push(f);for(var y=0;y<o;y++)if(d!==y){var m=t[y],b=m.source,x=m.target;c[y]||(v===x&&p===b?(l[g].push(m),c[y]=!0,h[b+"|"+x+"|"+(l[g].length-1)]=!0):v===b&&p===x&&(l[g].push(m),c[y]=!0))}}}for(var S in l)for(var C=l[S],w=C.length,I=0;I<w;I++){var T=C[I];if(T.source===T.target){a&&(T.type=a),T.loopCfg={position:u[I%8],dist:Math.floor(I/8)*20+50};continue}if(w===1&&i&&T.source!==T.target){T.type=i;continue}T.type=n;var O=(I%2===0?1:-1)*(h[T.source+"|"+T.target+"|"+I]?-1:1);w%2===1?T.curveOffset=O*Math.ceil(I/2)*s:T.curveOffset=O*(Math.floor(I/2)*s+e)}return t};const $M=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:M0,cloneEvent:VM,formatPadding:Hf,isNaN:No,isViewportChanged:WM,processParallelEdges:UM,uniqueId:Ol},Symbol.toStringTag,{value:"Module"}));var qM=(function(){function r(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return r.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),i=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(i-t[0]-t[2])/2+t[0]}},r.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var n=e.getCanvasBBox();if(!(n.width===0||n.height===0)){var i=this.getViewCenter(),a={x:n.x+n.width/2,y:n.y+n.height/2};t.translate(i.x-a.x,i.y-a.y)}},r.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),n=t.get("width"),i=t.get("height"),a=t.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var s=this.getViewCenter(),u={x:o.x+o.width/2,y:o.y+o.height/2};t.translate(s.x-u.x,s.y-u.y);var l=(n-e[1]-e[3])/o.width,c=(i-e[0]-e[2])/o.height,h=l;l>c&&(h=c),t.zoom(h,s)}},r.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return Hf(t)},r.prototype.focusPoint=function(t,e,n){var i=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),e){var u=(o.x-t.x)*s[0],l=(o.y-t.y)*s[4],c=0,h=0,d=0,f=0;this.graph.get("canvas").animate(function(v){d=u*v,f=l*v,i.graph.translate(d-c,f-h),c=d,h=f},E({},n))}else this.graph.translate((o.x-t.x)*s[0],(o.y-t.y)*s[4])},r.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=Ag({x:t,y:e},n);return i},r.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas"),i=n.getPointByClient(t,e);return this.getPointByCanvas(i.x,i.y)},r.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(t,e),a=n.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},r.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),qo({x:t,y:e},n)},r.prototype.focus=function(t,e,n){if(ot(t)&&(t=this.graph.findById(t)),t){var i=0,a=0;if(t.getType&&t.getType()==="edge"){var o=t.getSource().get("group").getMatrix(),s=t.getTarget().get("group").getMatrix();o&&s?(i=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(i=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=t.get("group"),l=u.getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),i=l[6],a=l[7]}this.focusPoint({x:i,y:a},e,n)}},r.prototype.changeSize=function(t,e){var n=this.graph;if(!xt(t)||!xt(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e});var i=n.get("canvas");i.changeSize(t,e);var a=n.get("plugins");a.forEach(function(o){if(o.get("gridContainer")){var s=n.get("minZoom");sh(o.get("container"),{width:t+"px",height:e+"px"}),sh(o.get("gridContainer"),{width:t/s+"px",height:e/s+"px",left:0,top:0})}})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},r})();function _o(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_o=function(e){return typeof e}:_o=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(r)}function ed(r){if(typeof r!="string")return r;var t=function(w){if(typeof w!="string")return w;try{return JSON.parse(w.trim())}catch{return w.trim()}},e=t(r);if(typeof e!="string")return e;for(var n=function(w){return w[w.length-1]},i=r.trim(),a=[],o=[],s=function(){for(var w=[],I=0;I<arguments.length;I++)w[I]=arguments[I];return w.some(function(T){return n(o)===T})},u=function(){return n(a)},l=null,c=0,h="";c<i.length;){var d=i[c],f=s('"',"'");if(!f&&!d.trim()){c+=1;continue}var v=i[c-1]==="\\",p=s("}"),g=s("]"),y=s(","),m=u();if(f)if(n(o)===d&&!v){o.pop();var b=t(h);m.push(b),l=b,h=""}else h+=d;else if(g&&d===",")h&&(m.push(t(h)),h="");else if(p&&d===":")o.push(","),h&&(m.push(h),h="");else if(y&&d===",")h&&(m.push(t(h)),h=""),o.pop();else if(d==="}"&&(p||y)){h&&(m.push(t(h)),h=""),y&&o.pop();for(var x={},S=1;S<m.length;S+=2)x[m[S-1]]=m[S];a.pop(),a.length&&n(a).push(x),o.pop(),l=x}else d==="]"&&g?(h&&(m.push(t(h)),h=""),a.pop(),a.length&&n(a).push(m),o.pop(),l=m):d==="{"?(a.push([]),o.push("}")):d==="["?(a.push([]),o.push("]")):d==='"'?o.push('"'):d==="'"?o.push("'"):h+=d;c+=1}return l||h}var GM=function(t){return t.split("-").reduce(function(e,n){return e+n.charAt(0).toUpperCase()+n.slice(1)})},KM=function(t){return function(e){for(var n=t.length,i=[],a=0,o="";a<n;)if(t[a]==="{"&&t[a+1]==="{")i.push(o),o="",a+=2;else if(t[a]==="}"&&t[a+1]==="}"){if(i.length){var s=i.pop();o=Up(e,o,s.endsWith("=")?'"{'+o+'}"':o),i.push(s+o)}a+=2,o=""}else o+=t[a],a+=1;return i.push(o),i.map(function(u,l){return i[l-1]&&i[l-1].endsWith("=")?'"{'+u+'}"':u}).join("")}};function C0(r,t){var e={},n=r.getAttributeNames&&r.getAttributeNames()||[],i=r.children&&Array.from(r.children).map(function(s){return C0(s,t)}),a={},o=r.tagName?r.tagName.toLowerCase():"group";return o==="text"&&(e.text=r.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(n).forEach(function(s){var u=GM(s),l=r.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=ed(l);e=E(E({},e),c)}else a[u]=ed(l)}catch(h){if(u==="style")throw h;a[u]=l}}),a.attrs=e,t&&t.style&&a.name&&_o(t.style[a.name])==="object"&&(a.attrs=E(E({},a.attrs),t.style[a.name])),t&&t.style&&a.keyshape&&(a.attrs=E(E({},a.attrs),t.style)),i.length&&(a.children=i),a}function ZM(r,t,e){var n=r.attrs,i=n===void 0?{}:n,a={x:t.x||0,y:t.y||0,width:e.width||0,height:e.height||0},o,s;switch(r.type){case"maker":case"circle":i.r&&(s=2*i.r,o=2*i.r);break;case"text":i.text&&(s=Rg(i.text,i.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,r.attrs=E({fontSize:12,fill:"#000"},i));break;default:i.width&&(s=i.width),i.height&&(o=i.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}function E0(r,t){var e;t===void 0&&(t={x:0,y:0});var n=E({x:0,y:0,width:0,height:0},t);if(!((e=r.children)===null||e===void 0)&&e.length){var i=r.attrs,a=i===void 0?{}:i,o=a.marginTop,s=E({},t);o&&(s.y+=o);for(var u=0;u<r.children.length;u++){r.children[u].attrs.key=(a.key||"root")+" -"+u+" ";var l=E0(r.children[u],s);if(l.bbox){var c=l.bbox;l.attrs.next==="inline"?s.x+=l.bbox.width:s.y+=l.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return r.bbox=ZM(r,t,n),r.attrs=E(E({},r.attrs),r.bbox),r}function A0(r,t){var e,n,i,a,o=(r||{}).type,s=(t?.attrs||{}).key;if(s&&r&&(r.attrs.key=s),!r&&t)return{action:"delete",val:t,type:o,key:s};if(r&&!t)return{action:"add",val:r,type:o};if(!r&&!t)return{action:"same",type:o};var u=[];if(((e=r.children)===null||e===void 0?void 0:e.length)>0||((n=t.children)===null||n===void 0?void 0:n.length)>0)for(var l=Math.max((i=r.children)===null||i===void 0?void 0:i.length,(a=t.children)===null||a===void 0?void 0:a.length),c=t.children||[],h=r.children||[],d=0;d<l;d+=1)u.push(A0(h[d],c[d]));var f=Object.keys(t.attrs),v=Object.keys(r.attrs);return t.type!==r.type?{action:"restructure",nowTarget:r,formerTarget:t,key:s,children:u}:f.filter(function(p){return p!=="children"}).some(function(p){return r.attrs[p]!==t.attrs[p]||!v.includes(p)})?{action:"change",val:r,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function rd(r){var t={},e=function(i){var a=typeof r=="function"?r(i):r,o=KM(a)(i),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],l=E0(C0(u,i));return s.remove(),l};return{draw:function(i,a){var o=e(i),s=a,u=function l(c){var h=c.attrs,d=h===void 0?{}:h,f=c.bbox,v=c.type,p=c.children,g=ge(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var y=a.addShape(c.type,E({attrs:d,origin:{bbox:f,type:v,children:p}},g));c.keyshape&&(s=y)}c.children&&c.children.forEach(function(m){return l(m)})};return u(o),t[i.id]=[o],s},update:function(i,a){t[i.id]||(t[i.id]=[]);var o=a.getContainer(),s=o.get("children"),u=e(i),l=t[i.id].pop(),c=A0(u,l),h=function v(p){var g;p.type!=="group"&&o.addShape(p.type,{attrs:p.attrs}),!((g=p.children)===null||g===void 0)&&g.length&&p.children.map(function(y){return v(y)})},d=function v(p){var g,y=s.find(function(m){return m.attrs.key===p.attrs.key});y&&o.removeChild(y),!((g=p.children)===null||g===void 0)&&g.length&&p.children.map(function(m){return v(m)})},f=function v(p){var g=p.key;if(p.type!=="group"){var y=s.find(function(b){return b.attrs.key===g});switch(p.action){case"change":if(y){var m=p.val.keyshape?a.getOriginStyle():{};y.attr(E(E({},m),p.val.attrs))}break;case"add":h(p.val);break;case"delete":d(p.val);break;case"restructure":d(p.formerTarget),h(p.nowTarget);break}}p.children&&p.children.forEach(function(b){return v(b)})};f(c),t[i.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var yu={};function nd(r){return yu[r]||(yu[r]=vi(r)),yu[r]}var QM={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this,n=e[t]||e[e.defaultShapeType]||e["simple-circle"];return n},draw:function(t,e,n){var i=this.getShape(t),a=i.draw(e,n);return i.afterDraw&&i.afterDraw(e,n,a),a},baseUpdate:function(t,e,n){var i=this.getShape(t);i.update&&i.update(e,n),i.afterUpdate&&i.afterUpdate(e,n)},setState:function(t,e,n,i){var a=this.getShape(t);a.setState(e,n,i)},shouldUpdate:function(t){var e=this.getShape(t);return!!e.update},getControlPoints:function(t,e){var n=this.getShape(t);return n.getControlPoints(e)},getAnchorPoints:function(t,e){var n=this.getShape(t);return n.getAnchorPoints(e)}},mu={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints,n=t.anchorPoints||e;return n}},zt=(function(){function r(){}return r.registerFactory=function(t,e){var n=nd(t),i=QM,a=E(E({},i),e);return r[n]=a,a.className=n,a},r.getFactory=function(t){var e=nd(t);return r[e]},r.registerNode=function(t,e,n){var i=r.Node,a;if(typeof e=="string"||typeof e=="function"){var o=rd(e);a=E(E({},i.getShape("single-node")),o)}else if(e.jsx){var s=e.jsx,o=rd(s);a=E(E(E({},i.getShape("single-node")),o),e)}else{i.getShape(n);var u=n?i.getShape(n):mu;a=E(E({},u),e)}return a.type=t,a.itemType="node",i[t]=a,a},r.registerEdge=function(t,e,n){var i=r.Edge,a=n?i.getShape(n):mu,o=E(E({},a),e);return o.type=t,o.itemType="edge",i[t]=o,o},r.registerCombo=function(t,e,n){var i=r.Combo,a=n?i.getShape(n):mu,o=E(E({},a),e);return o.type=t,o.itemType="combo",i[t]=o,o},r})();zt.registerFactory("node",{defaultShapeType:"circle"});zt.registerFactory("edge",{defaultShapeType:"line"});zt.registerFactory("combo",{defaultShapeType:"circle"});var bu="bboxCache",xu="bboxCanvasCache",k0=(function(){function r(t){this._cfg={},this.destroyed=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var n=this.get("model"),i=n.id,a=this.get("type");i||(i=Ol(a),this.get("model").id=i),this.set("id",i);var o=t.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var s=n.shape||n.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var l=u[s].options;if(l&&l.stateStyles){var c=this.get("styles")||n.stateStyles;c=$t({},l.stateStyles,c),this.set("styles",c)}}}return r.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=Zo(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=Zo(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),i=t.get("model");n.clear();var a=i.visible;if(a!==void 0&&!a&&t.changeVisibility(a),!!e){t.updatePosition(i);var o=t.getShapeCfg(i),s=o.type,u=e.draw(s,o,n);u&&(t.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(e,s)}},r.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),i=this,a=n.get("name");if(this.get("originStyle")){var s=this.getOriginStyle();a&&!s[a]&&(s[a]={});var u=this.getCurrentStatesStyle();U(e,function(l){var c=l.get("name"),h=l.attr();if(c&&c!==a){var d=u[c];s[c]||(s[c]={}),d?Object.keys(h).forEach(function(p){var g=h[p];g!==d[p]&&(s[c][p]=g)}):s[c]=l.get("type")!=="image"?Pt(h):i.getShapeStyleByName(c)}else{var f=l.attr(),v=E(E({},u),u[a]);Object.keys(f).forEach(function(p){var g=f[p];v[p]!==g&&(a?s[a][p]=g:s[p]=g)})}}),s.path&&delete s.path,s.matrix&&delete s.matrix,s.x&&delete s.x,s.y&&delete s.y,s[a]&&s[a].x&&delete s[a].x,s[a]&&s[a].y&&delete s[a].y,i.set("originStyle",s)}else{var o={};U(e,function(l){var c=l.get("type"),h=l.get("name");if(h&&h!==a)o[h]=c!=="image"?Pt(l.attr()):i.getShapeStyleByName(h);else{var d=i.getShapeStyleByName();if(d.path&&delete d.path,d.matrix&&delete d.matrix,!a)Object.assign(o,d);else if(h)o[a]=d;else{var f=Ol("shape");l.set("name",f),o[f]=c!=="image"?Pt(l.attr()):i.getShapeStyleByName(h)}}}),i.set("originStyle",o)}},r.prototype.restoreStates=function(t,e){var n=this,i=n.get("states");U(i,function(a){t.setState(e,a,!0,n)})},r.prototype.init=function(){var t=zt.getFactory(this.get("type"));this.set("shapeFactory",t)},r.prototype.get=function(t){return this._cfg[t]},r.prototype.set=function(t,e){ue(t)?this._cfg=E(E({},this._cfg),t):this._cfg[t]=e},r.prototype.getDefaultCfg=function(){return{}},r.prototype.clearCache=function(){this.set(bu,null),this.set(xu,null)},r.prototype.beforeDraw=function(){},r.prototype.afterDraw=function(){},r.prototype.afterUpdate=function(){},r.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},r.prototype.getShapeStyleByName=function(t){var e=this.get("group"),n;if(t?n=e.find(function(a){return a.get("name")===t}):n=this.getKeyShape(),n){var i={};return U(n.attr(),function(a,o){o!=="img"&&(i[o]=a)}),i}return{}},r.prototype.getShapeCfg=function(t){var e=this.get("styles");if(e){var n=t;return n.style=E(E({},e),t.style),n}return t},r.prototype.getStateStyle=function(t){var e=this.get("styles"),n=e&&e[t];return n},r.prototype.getOriginStyle=function(){return this.get("originStyle")},r.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return!n||!n.length?this.getOriginStyle():(U(t.getStates(),function(i){e=Object.assign(e,t.getStateStyle(i))}),e)},r.prototype.setState=function(t,e){var n=this.get("states"),i=this.get("shapeFactory"),a=t,o=t;ot(e)&&(a=t+":"+e,o=t+":");var s=n;if(xf(e)){var u=n.indexOf(o);if(e){if(u>-1)return;n.push(a)}else u>-1&&n.splice(u,1)}else if(ot(e)){var l=n.filter(function(d){return d.includes(o)});l.length>0&&this.clearStates(l),s=s.filter(function(d){return!d.includes(o)}),s.push(a),this.set("states",s)}if(i){var c=this.get("model"),h=c.type;i.setState(h,t,e,this)}},r.prototype.clearStates=function(t){var e=this,n=e.getStates(),i=e.get("shapeFactory"),a=e.get("model"),o=a.type;t||(t=n),ot(t)&&(t=[t]);var s=n.filter(function(u){return t.indexOf(u)===-1});e.set("states",s),t.forEach(function(u){i.setState(o,u,!1,e)})},r.prototype.getContainer=function(){return this.get("group")},r.prototype.getKeyShape=function(){return this.get("keyShape")},r.prototype.getModel=function(){return this.get("model")},r.prototype.getType=function(){return this.get("type")},r.prototype.getID=function(){return this.get("id")},r.prototype.isItem=function(){return!0},r.prototype.getStates=function(){return this.get("states")},r.prototype.hasState=function(t){var e=this.getStates();return e.indexOf(t)>=0},r.prototype.refresh=function(){var t=this.get("model");this.updatePosition(t),this.updateShape(),this.afterUpdate(),this.clearCache()},r.prototype.isOnlyMove=function(t){return!1},r.prototype.update=function(t,e){e===void 0&&(e=!1);var n=this.get("model"),i=n.visible,a=t.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var o={x:n.x,y:n.y};t.x=isNaN(t.x)?n.x:t.x,t.y=isNaN(t.y)?n.y:t.y;var s=this.get("styles");if(t.stateStyles){var u=t.stateStyles;dt(s,u),delete t.stateStyles}Object.assign(n,t),e?this.updatePosition(t):((o.x!==t.x||o.y!==t.y)&&this.updatePosition(t),this.updateShape()),this.afterUpdate(),this.clearCache()},r.prototype.updateShape=function(){var t=this.get("shapeFactory"),e=this.get("model"),n=e.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var i=this.getShapeCfg(e);t.baseUpdate(n,i,this),this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},r.prototype.updatePosition=function(t){var e=this.get("model"),n=St(t.x)?e.x:t.x,i=St(t.y)?e.y:t.y,a=this.get("group");if(St(n)||St(i))return!1;e.x=n,e.y=i;var o=a.getMatrix();return o&&o[6]===n&&o[7]===i?!1:(a.resetMatrix(),kg(a,{x:n,y:i}),this.clearCache(),!0)},r.prototype.getBBox=function(){var t=this.get(bu);return t||(t=this.calculateBBox(),this.set(bu,t)),t},r.prototype.getCanvasBBox=function(){var t=this.get(xu);return t||(t=this.calculateCanvasBBox(),this.set(xu,t)),t},r.prototype.toFront=function(){var t=this.get("group");t.toFront()},r.prototype.toBack=function(){var t=this.get("group");t.toBack()},r.prototype.show=function(){this.changeVisibility(!0)},r.prototype.hide=function(){this.changeVisibility(!1)},r.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},r.prototype.isVisible=function(){return this.get("visible")},r.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},r.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},r})(),no={source:"start",target:"end"},ir="Node",Qn="Point",JM="Anchor",tC=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,n){var i=no[e]+Qn,a=e+ir,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),ue(n)?(this.set(i,n),this.set(a,null)):(n.addEdge(this),this.set(a,n),this.set(i,null))},t.prototype.getLinkPoint=function(e,n,i){var a=no[e]+Qn,o=e+ir,s=this.get(a);if(!s){var u=this.get(o),l=e+JM,c=this.getPrePoint(e,i),h=n[l];St(h)||(s=u.getLinkPointByAnchor(h)),s=s||u.getLinkPoint(c),St(s.index)||this.set(e+"AnchorIndex",s.index)}return s},t.prototype.getPrePoint=function(e,n){if(n&&n.length){var i=e==="source"?0:n.length-1;return n[i]}var a=e==="source"?"target":"source";return this.getEndPoint(a)},t.prototype.getEndPoint=function(e){var n=e+ir,i=no[e]+Qn,a=this.get(n);return a?a.get("model"):this.get(i)},t.prototype.getControlPointsByCenter=function(e){var n=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),o=e.type;return a.getControlPoints(o,{startPoint:n,endPoint:i})},t.prototype.getEndCenter=function(e){var n=e+ir,i=no[e]+Qn,a=this.get(n);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(i)},t.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(e){var n=this,i=n.get("linkCenter"),a=r.prototype.getShapeCfg.call(this,e);if(i)a.startPoint=n.getEndCenter("source"),a.endPoint=n.getEndCenter("target");else{var o=a.controlPoints||n.getControlPointsByCenter(a);a.startPoint=n.getLinkPoint("source",e,o),a.endPoint=n.getLinkPoint("target",e,o)}return a.sourceNode=n.get("sourceNode"),a.targetNode=n.get("targetNode"),a},t.prototype.getModel=function(){var e=this.get("model"),n=this.get("source"+ir),i=this.get("target"+ir);return n?delete e["source"+ir]:e.source=this.get("start"+Qn),i?delete e["target"+ir]:e.target=this.get("end"+Qn),!ot(e.source)&&!ue(e.source)&&(e.source=e.source.getID()),!ot(e.target)&&!ue(e.target)&&(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,n){var i=this.get("model"),a=i.visible,o=e.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;dt(s,u),delete e.stateStyles}Object.assign(i,e),this.updateShape(),this.afterUpdate(),this.clearCache()},t.prototype.destroy=function(){var e=this.get("source"+ir),n=this.get("target"+ir);e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),r.prototype.destroy.call(this)},t})(k0),Su="anchorPointsCache",eC="bboxCache",O0=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getNearestPoint=function(e,n){for(var i=0,a=e[0],o=Go(e[0],n),s=0;s<e.length;s++){var u=e[s],l=Go(u,n);l<o&&(a=u,o=l,i=s)}return a.anchorIndex=i,a},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(n){return n.get("target")===e})},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(n){return n.get("source")===e})},t.prototype.getNeighbors=function(e){var n=this,i=this.get("edges");if(e==="target"){var a=function(l){return l.getSource()===n};return i.filter(a).map(function(u){return u.getTarget()})}if(e==="source"){var o=function(l){return l.getTarget()===n};return i.filter(o).map(function(u){return u.getSource()})}var s=function(l){return l.getSource()===n?l.getTarget():l.getSource()};return i.map(s)},t.prototype.getLinkPointByAnchor=function(e){var n=this.getAnchorPoints();return n[e]},t.prototype.getLinkPoint=function(e){var n=this.get("keyShape"),i=n.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var l=this.getAnchorPoints(),c;switch(i){case"circle":c=Cg({x:o,y:s,r:u.width/2},e);break;case"ellipse":c=Eg({x:o,y:s,rx:u.width/2,ry:u.height/2},e);break;default:c=Mg(u,e)}var h=c;return l.length&&(h||(h=e),h=this.getNearestPoint(l,h)),h||(h={x:o,y:s}),h},t.prototype.getAnchorPoints=function(){var e=this.get(Su);if(!e){e=[];var n=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=n.getAnchorPoints(s,o)||[];U(u,function(l,c){var h={x:i.minX+l[0]*i.width,y:i.minY+l[1]*i.height,anchorIndex:c};e.push(h)}),this.set(Su,e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var n=this.getEdges(),i=n.indexOf(e);i>-1&&n.splice(i,1)},t.prototype.clearCache=function(){this.set(eC,null),this.set(Su,null)},t.prototype.isOnlyMove=function(e){if(!e)return!1;var n=!St(e.x),i=!St(e.y),a=Object.keys(e);return a.length===1&&(n||i)||a.length===2&&n&&i},t})(k0),id="bboxCache",ad="bboxCanvasCache",wu="sizeCache",od="anchorPointsCache",rC=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var n=this.get("styles"),i=this.get("bbox");if(n&&i){var a=e,o={r:Math.hypot(i.height,i.width)/2||ct.defaultCombo.size[0]/2,width:i.width||ct.defaultCombo.size[0],height:i.height||ct.defaultCombo.size[1]};a.style=E(E(E({},n),e.style),o);var s=e.padding||ct.defaultCombo.padding;return xt(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r+=s[0],o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(wu,o),a}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),n=this.get("group"),i=Zo(e,n);i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var a=this.get(wu),o=this.get(id)||{},s=o.x,u=o.x;if(a){a.width=Math.max(a.width,i.width),a.height=Math.max(a.height,i.height);var l=e.get("type");l==="circle"?(i.width=a.r*2,i.height=a.r*2):(i.width=a.width,i.height=a.height),i.minX=i.centerX-i.width/2,i.minY=i.centerY-i.height/2,i.maxX=i.centerX+i.width/2,i.maxY=i.centerY+i.height/2}else i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;return i.x=i.minX,i.y=i.minY,(i.x!==s||i.y!==u)&&this.set(od,null),i}},t.prototype.getChildren=function(){var e=this;return{nodes:e.getNodes(),combos:e.getCombos()}},t.prototype.getNodes=function(){var e=this;return e.get("nodes")},t.prototype.getCombos=function(){var e=this;return e.get("combos")},t.prototype.addChild=function(e){var n=this,i=e.getType();switch(i){case"node":n.addNode(e);break;case"combo":n.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){var n=this;return n.get("combos").push(e),!0},t.prototype.addNode=function(e){var n=this;return n.get("nodes").push(e),!0},t.prototype.removeChild=function(e){var n=this,i=e.getType();switch(i){case"node":n.removeNode(e);break;case"combo":n.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(e){var n=this.getCombos(),i=n.indexOf(e);return i>-1?(n.splice(i,1),!0):!1}},t.prototype.removeNode=function(e){if(e){var n=this.getNodes(),i=n.indexOf(e);return i>-1?(n.splice(i,1),!0):!1}},t.prototype.isOnlyMove=function(e){return!1},t.prototype.getBBox=function(){this.set(ad,null);var e=this.calculateCanvasBBox();return e},t.prototype.clearCache=function(){this.set(id,null),this.set(ad,null),this.set(od,null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),n=this.get("group");e&&n.stopAnimate(),this.clearCache(),this.set(wu,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},t})(O0),_i="node",io="edge",sd="vedge",Li="combo",nC="default",ud="Mapper",br="stateStyles",iC=(function(){function r(t){this.graph=t,this.destroyed=!1}return r.prototype.addItem=function(t,e){var n=this.graph,i=t===sd?io:t,a=n.get(i+"Group")||n.get("group"),o=vi(i),s=null,u=n.get(i+vi(br))||{},l=n.get(nC+o);e[br]&&(u=e[br]),l&&U(l,function(m,b){Ye(m)&&!pt(m)?e[b]=$t({},m,e[b]):pt(m)?e[b]=e[b]||Pt(l[b]):e[b]=e[b]||l[b]});var c=n.get(i+ud);if(c){var h=c(e);h[br]&&(u=h[br],delete h[br]),U(h,function(m,b){Ye(m)&&!pt(m)?e[b]=$t({},e[b],m):e[b]=h[b]||e[b]})}if(n.emit("beforeadditem",{type:t,model:e}),t===io||t===sd){var d=void 0,f=void 0;if(d=e.source,f=e.target,d&&ot(d)&&(d=n.findById(d)),f&&ot(f)&&(f=n.findById(f)),!d||!f){console.warn("The source or target node of edge "+e.id+" does not exist!");return}d.getType&&d.getType()==="combo"&&(e.isComboEdge=!0),f.getType&&f.getType()==="combo"&&(e.isComboEdge=!0),s=new tC({model:e,source:d,target:f,styles:u,linkCenter:n.get("linkCenter"),group:a.addGroup()})}else if(t===_i)s=new O0({model:e,styles:u,group:a.addGroup()});else if(t===Li){var v=e.children,p=Po(v,n);isNaN(p.x)?isNaN(e.x)&&(e.x=Math.random()*100):e.x=p.x,isNaN(p.y)?isNaN(e.y)&&(e.y=Math.random()*100):e.y=p.y;var g=a.addGroup();g.setZIndex(e.depth),s=new rC({model:e,styles:u,bbox:e.collapsed?Po([],n):p,group:g});var y=s.getModel();(v||[]).forEach(function(m){var b=n.findById(m.id);s.addChild(b),m.depth=y.depth+2}),e.collapsed&&setTimeout(function(){n.collapseCombo(s)},16)}if(s)return n.get(t+"s").push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:e}),s},r.prototype.updateItem=function(t,e){var n,i,a=this.graph;if(ot(t)&&(t=a.findById(t)),!(!t||t.destroyed)){var o="";t.getType&&(o=t.getType());var s=a.get(o+ud),u=t.getModel(),l=t.isOnlyMove(e);if(s){var c=$t({},u,e),h=s(c),d=$t({},u,h,e);h[br]&&(t.set("styles",d[br]),delete d[br]),U(d,function(x,S){e[S]=x})}else U(e,function(x,S){u[S]&&Ye(x)&&!pt(x)&&(e[S]=E(E({},u[S]),e[S]))});if(a.emit("beforeupdateitem",{item:t,cfg:e}),o===io){if(e.source){var f=e.source;ot(f)&&(f=a.findById(f)),t.setSource(f)}if(e.target){var v=e.target;ot(v)&&(v=a.findById(v)),t.setTarget(v)}t.update(e)}if(o===_i||o===Li){t.update(e,l);var p=t.getEdges(),g=zg(e);if(g&&o===_i)U(p,function(x){x.refresh()});else if(g&&o===Li){var y=t.get("shapeFactory"),m=u.type||"circle",b=u.animate===void 0||e.animate===void 0?(i=(n=y[m])===null||n===void 0?void 0:n.options)===null||i===void 0?void 0:i.animate:u.animate||e.animate;b?setTimeout(function(){if(!(!t||t.destroyed)){var x=t.getKeyShape();!x||x.destroyed||U(p,function(S){S&&!S.destroyed&&S.refresh()})}},201):U(p,function(x){x.refresh()})}}a.emit("afterupdateitem",{item:t,cfg:e})}},r.prototype.updateCombo=function(t,e){var n=this,i,a,o=this.graph;if(ot(t)&&(t=o.findById(t)),!(!t||t.destroyed)){var s=t.getModel(),u=Po(s.collapsed?[]:e,o);t.set("bbox",u),t.update({x:u.x,y:u.y});var l=t.get("shapeFactory"),c=s.type||"circle",h=s.animate===void 0?(a=(i=l[c])===null||i===void 0?void 0:i.options)===null||a===void 0?void 0:a.animate:s.animate;h?setTimeout(function(){if(!(!t||t.destroyed)){var d=t.getKeyShape();!d||d.destroyed||(t.getShapeCfg(s),n.updateComboEdges(t))}},201):this.updateComboEdges(t)}},r.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],n=0;n<e.length;n++){var i=e[n];if(i&&!i.destroyed){var a=i.get("shapeFactory"),o=i.getShapeCfg(i.getModel()),s=i.getContainer();s.clear();var u=a.draw(o.type,o,s);i.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0),i.setOriginStyle()}}},r.prototype.collapseCombo=function(t){var e=this.graph;ot(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach(function(i){e.hideItem(i)}),n.combos.forEach(function(i){e.hideItem(i)})},r.prototype.expandCombo=function(t){var e=this.graph;ot(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach(function(i){e.showItem(i)}),n.combos.forEach(function(i){i.getModel().collapsed?i.show():e.showItem(i)})},r.prototype.removeItem=function(t){var e=this,n=this.graph;if(ot(t)&&(t=n.findById(t)),!(!t||t.destroyed)){var i=Pt(t.getModel());n.emit("beforeremoveitem",{item:i});var a="";t.getType&&(a=t.getType());var o=n.get(a+"s"),s=o.indexOf(t);if(s>-1&&o.splice(s,1),a===io){var u=n.get("v"+a+"s"),l=u.indexOf(t);l>-1&&u.splice(l,1)}var c=t.get("id"),h=n.get("itemMap");delete h[c];var d=n.get("comboTrees"),f=t.get("id");if(a===_i){var v=t.getModel().comboId;if(d&&v){var p=d,g=!1;d.forEach(function(C){g||Le(C,function(w){if(w.id===f&&p){var I=p.indexOf(w);return p.splice(I,1),g=!0,!1}return p=w.children,!0})})}for(var y=t.getEdges(),m=y.length-1;m>=0;m--)n.removeItem(y[m],!1);v&&n.updateCombo(v)}else if(a===Li){var b=t.getModel().parentId,x,S=!1;(d||[]).forEach(function(w){S||Le(w,function(I){return I.id===f?(x=I,S=!0,!1):!0})}),x.removed=!0,x&&x.children&&x.children.forEach(function(w){e.removeItem(w.id)});for(var y=t.getEdges(),m=y.length;m>=0;m--)n.removeItem(y[m],!1);b&&n.updateCombo(b)}t.destroy(),n.emit("afterremoveitem",{item:i})}},r.prototype.setItemState=function(t,e,n){var i=this.graph,a=e;ot(n)&&(a=e+":"+n),!(t.hasState(a)===n&&n||ot(n)&&t.hasState(a))&&(i.emit("beforeitemstatechange",{item:t,state:a,enabled:n}),t.setState(e,n),i.autoPaint(),i.emit("afteritemstatechange",{item:t,state:a,enabled:n}))},r.prototype.priorityState=function(t,e){var n=this.graph,i=t;ot(t)&&(i=n.findById(t)),this.setItemState(i,e,!1),this.setItemState(i,e,!0)},r.prototype.clearItemStates=function(t,e){var n=this.graph;ot(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},r.prototype.refreshItem=function(t){var e=this.graph;ot(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},r.prototype.addCombos=function(t,e){var n=this,i=this.graph;(t||[]).forEach(function(o){Vr(o,function(s){var u;return e.forEach(function(l){l.id===s.id&&(l.children=s.children,l.depth=s.depth,u=l)}),u&&n.addItem("combo",u),!0})});var a=i.get("comboGroup");a&&a.sort()},r.prototype.changeItemVisibility=function(t,e){var n=this,i=this.graph;if(ot(t)&&(t=i.findById(t)),!t){console.warn("The item to be shown or hidden does not exist!");return}if(i.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===_i){var a=t.getEdges();U(a,function(c){e&&!(c.get("source").isVisible()&&c.get("target").isVisible())||n.changeItemVisibility(c,e)})}else if(t.getType&&t.getType()===Li){var o=i.get("comboTrees"),s=t.get("id"),u=[],l=!1;(o||[]).forEach(function(h){l||!h.children||h.children.length===0||Le(h,function(d){return d.id===s?(u=d.children,l=!0,!1):!0})}),u&&(!e||e&&!t.getModel().collapsed)&&u.forEach(function(h){var d=i.findById(h.id);n.changeItemVisibility(d,e)});var a=t.getEdges();U(a,function(h){e&&!(h.get("source").isVisible()&&h.get("target").isVisible())||n.changeItemVisibility(h,e)})}return i.emit("afteritemvisibilitychange",{item:t,visible:e}),t},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r})(),vn=null,aC=(function(){function r(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return r.checkCache=function(t,e,n){if(n[e]){var i=n[e].indexOf(t);i>=0&&n[e].splice(i,1)}},r.cacheState=function(t,e,n){n[e]||(n[e]=[]),n[e].push(t)},r.prototype.updateState=function(t,e,n){var i=this,a=r.checkCache,o=r.cacheState;if(!t.destroyed){var s=this.cachedStates,u=s.enabled,l=s.disabled;n?(a(t,e,l),o(t,e,u)):(a(t,e,u),o(t,e,l)),vn&&clearTimeout(vn),vn=setTimeout(function(){vn=null,i.updateGraphStates()},16)}},r.prototype.updateStates=function(t,e,n){var i=this;ot(e)?this.updateState(t,e,n):e.forEach(function(a){i.updateState(t,a,n)})},r.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;U(e.disabled,function(n,i){t[i]&&(t[i]=t[i].filter(function(a){return n.indexOf(a)<0&&!n.destroyed}))}),U(e.enabled,function(n,i){if(!t[i])t[i]=n;else{var a={};t[i].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),n.forEach(function(o){if(!o.destroyed){var s=o.get("id");a[s]||(a[s]=!0,t[i].push(o))}})}}),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},r.prototype.destroy=function(){this.graph=null,this.cachedStates=null,vn&&clearTimeout(vn),vn=null,this.destroyed=!0},r})(),oC=function(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,i){if(n.charAt(0)==="\\")return n.slice(1);var a=e[i];return a===0&&(a="0"),a||""})},I0=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);for(var n=0,i=t;n<i.length;n++){var a=i[n],o=a.x,s=a.y;e.push(o),e.push(s)}var u=LM(e);return u.unshift(["M",t[0].x,t[0].y]),u},ns=function(t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var a={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];On(o,[e.x-t.x,e.y-t.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*i,o[0]*i];return a.x+=s[0],a.y+=s[1],a},sC=function(t,e){var n=t.length;if(!n)return"";for(var i="",a="",o=0;o<n;o++){var s=t[o];o===0?a="M{x} {y}":a="L{x} {y}",i+=oC(a,s)}return e&&(i+="Z"),i},Il=function(t){var e=[];return t.forEach(function(n){var i=n[0];if(i!=="A")for(var a=1;a<n.length;a=a+2)e.push([n[a],n[a+1]]);else{var o=n.length;e.push([n[o-2],n[o-1]])}}),e},Pl=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);var e=t[0],n=t[1],i=t[t.length-1],a=t[t.length-2];t.unshift(i),t.unshift(a),t.push(e),t.push(n);for(var o=[],s=1;s<t.length-2;s+=1){var u=t[s-1].x,l=t[s-1].y,c=t[s].x,h=t[s].y,d=t[s+1].x,f=t[s+1].y,v=s!==t.length-2?t[s+2].x:d,p=s!==t.length-2?t[s+2].y:f,g=c+(d-u)/6,y=h+(f-l)/6,m=d-(v-c)/6,b=f-(p-h)/6;o.push(["C",g,y,m,b,d,f])}return o.unshift(["M",i.x,i.y]),o},ld=function(t,e){return me([0,0],On([0,0],t),e)},fd=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(i===0)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},cd=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function Tl(r,t){var e=function(h){var d=[h[0][0],h[0][1]-t],f=[h[0][0],h[0][1]+t];return"M "+d+" A "+t+","+t+",0,0,0,"+f+" A "+t+","+t+",0,0,0,"+d},n=function(h){var d=me([0,0],fd(h[0],h[1]),t),f=me([0,0],d,-1),v=se([0,0],h[0],d),p=se([0,0],h[1],d),g=se([0,0],h[1],f),y=se([0,0],h[0],f);return"M "+v+" L "+p+" A "+[t,t,"0,0,0",g].join(",")+" L "+y+" A "+[t,t,"0,0,0",v].join(",")};if(!r||r.length<1)return"";if(r.length===1)return e(r);if(r.length===2)return n(r);for(var i=new Array(r.length),a=0;a<i.length;++a){var o=a===0?r[r.length-1]:r[a-1],s=r[a],u=me([0,0],fd(o,s),t);i[a]=[se([0,0],o,u),se([0,0],s,u)]}var l="A "+[t,t,"0,0,0,"].join(",");return i=i.map(function(c,h){var d="";return h===0&&(d="M "+i[i.length-1][1]+" "),d+=l+c[0]+" L "+c[1],d}),i.join(" ")}function P0(r,t){var e=r.length,n=function(c){var h=[c[0][0],c[0][1]-t],d=[c[0][0],c[0][1]+t];return"M "+h+" A "+[t,t,"0,0,0",d].join(",")+" A "+[t,t,"0,0,0",h].join(",")},i=function(c){var h=cd(c[0],c[1]),d=ld(h,t),f=se([0,0],c[0],me([0,0],d,-1)),v=se([0,0],c[1],d),p=1.2*t,g=ld(On([0,0],h),p),y=me([0,0],g,-1),m=se([0,0],f,y),b=se([0,0],v,y),x=se([0,0],f,g);return"M "+f+" C "+[m,b,v].join(",")+" S "+[x,f].join(",")+" Z"};if(!r||e<1)return"";if(e===1)return n(r);if(e===2)return i(r);for(var a=r.map(function(l,c){var h=r[(c+1)%e];return{p:l,v:On([0,0],cd(l,h))}}),o=0;o<a.length;++o){var s=o>0?o-1:e-1,u=On([0,0],se([0,0],a[s].v,me([0,0],a[o].v,-1)));a[o].p=se([0,0],a[o].p,me([0,0],u,t))}return a.map(function(l){var c=l.p;return{x:c[0],y:c[1]}})}const uC=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:Pl,getControlPoint:ns,getSpline:I0,paddedHull:P0,pathToPoints:Il,pointsToPolygon:sC,roundedHull:Tl},Symbol.toStringTag,{value:"Module"}));var hd=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},dd=function(t){var e=t.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});if(e.sort(function(s,u){return s.x===u.x?s.y-u.y:s.x-u.x}),e.length===1)return e;for(var n=[],i=0;i<e.length;i++){for(;n.length>=2&&hd(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}for(var a=[],i=e.length-1;i>=0;i--){for(;a.length>=2&&hd(a[a.length-2],a[a.length-1],e[i])<=0;)a.pop();a.push(e[i])}a.pop(),n.pop();var o=n.concat(a);return o},lC={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function fC(r,t,e){var n=!1,i=function(u,l){return t.cells[u+l*t.width]},a=function(u,l){var c=0;return i(u-1,l-1)>=e&&(c+=1),i(u,l-1)>e&&(c+=2),i(u-1,l)>e&&(c+=4),i(u,l)>e&&(c+=8),c},o=function(u,l){for(var c=u,h=l,d,f,v=0;v<t.width*t.height;v++){if(d=c,f=h,r.findIndex(function(g){return g.x===c&&g.y===h})>-1){if(!(r[0].x!==c||r[0].y!==h))return!0}else r.push({x:c,y:h});var p=a(c,h);switch(p){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:d===0&&(f===-1?c-=1:c+=1);break;case 1:case 13:case 5:h--;break;case 9:d===1&&(f===0?h-=1:h+=1);break;case 10:case 8:case 11:h++;break;default:return console.warn("Marching squares invalid state: "+p),!0}}};this.march=function(){for(var s=0;s<t.width&&!n;s+=1)for(var u=0;u<t.height&&!n;u+=1)i(s,u)>e&&a(s,u)!==15&&(n=o(s,u));return n}}var cC=function(t,e,n){var i=Math.ceil(t/n),a=Math.ceil(e/n),o=new Float32Array(Math.max(0,i*a)).fill(0);return{cells:o,width:i,height:a}},hC=function(t,e,n){var i=null,a=Number.POSITIVE_INFINITY;return e.forEach(function(o){var s={x:t.getModel().x,y:t.getModel().y},u={x:o.getModel().x,y:o.getModel().y},l=Ko(s,u),c=new Bn(s.x,s.y,u.x,u.y),h=n.reduce(function(d,f){return Lf(f,c)>0?d+1:d},0);l*Math.pow(h+1,2)<a&&(i=o,a=l*Math.pow(h+1,2))}),i},T0=function(t,e){var n=Number.POSITIVE_INFINITY,i=null;return t.forEach(function(a){var o=Lf(a,e);o>=0&&o<n&&(i=a,n=o)}),i},dC=function(t,e,n,i){var a=[],o=[];o.push(t);for(var s=!0,u=0,l=function(f,v){var p=!1;return v.forEach(function(g){p||(nl(f,{x:g.x1,y:g.y1})||nl(f,{x:g.x2,y:g.y2}))&&(p=!0)}),p},c=function(f,v){for(var p=0,g=v;p<g.length;p++){var y=g[p],m=y.getBBox(),b=[[m.x,m.y],[m.x+m.width,m.y],[m.x,m.y+m.height],[m.x+m.width,m.y+m.height]];if(ya(b,f.x,f.y))return!0}return!1};s&&u<n;){s=!1;for(var h=function(){var f=o.pop(),v=T0(e,f);if(v){var p=Tg(v,f),g=p[0],y=p[1];if(y===2){var m=function(x){for(var S=i,C=vd(v,S,g,x),w=l(C,o)||l(C,a),I=c(C,e);!w&&I&&S>=1;)S/=1.5,C=vd(v,S,g,x),w=l(C,o)||l(C,a),I=c(C,e);C&&!w&&(!x||!I)&&(o.push(new Bn(f.x1,f.y1,C.x,C.y)),o.push(new Bn(C.x,C.y,f.x2,f.y2)),s=!0)};m(!0),s||m(!1)}}s||a.push(f),u+=1};!s&&o.length;)h()}for(;o.length;)a.push(o.pop());return a};function vC(r,t,e,n,i){var a=hC(r,e,t);if(a===null)return[];var o=function(h){for(var d=[];h.length>0;){var f=h.pop();if(h.length===0){d.push(f);break}var v=h.pop(),p=new Bn(f.x1,f.y1,v.x2,v.y2),g=T0(t,p);g?(d.push(f),h.push(v)):h.push(p)}return d},s=new Bn(r.getModel().x,r.getModel().y,a.getModel().x,a.getModel().y),u=dC(s,t,n,i),l=o(u);return l}var pC=function(t,e,n){var i=Object.assign(lC,n),a=Ng(t.map(function(m){return{x:m.getModel().x,y:m.getModel().y}}));t=t.sort(function(m,b){return Ko({x:m.getModel().x,y:m.getModel().y},a)-Ko({x:b.getModel().x,y:b.getModel().y},a)});var o=[],s=[];t.forEach(function(m){var b=vC(m,e,o,i.maxRoutingIterations,i.morphBuffer);b.forEach(function(x){s.push(x)}),o.push(m)});for(var u=gC(t,s,i.nodeR0),l=cC(u.width,u.height,i.pixelGroupSize),c=[],h=[],d=0;d<i.maxMarchingIterations;d++)if(yC(t,e,s,u,l,i),c=[],h=[],!!new fC(c,l,i.threshold).march()){var f=c.map(function(m){return{x:Math.round(m.x*i.pixelGroupSize+u.minX),y:Math.round(m.y*i.pixelGroupSize+u.minY)}});if(f){var v=f.length;if(i.skip>1)for(v=Math.floor(f.length/i.skip);v<3&&i.skip>1;)i.skip-=1,v=Math.floor(f.length/i.skip);for(var p=0,g=0;g<v;g+=1,p+=i.skip)h.push({x:f[p].x,y:f[p].y})}var y=function(){for(var b=0,x=t;b<x.length;b++){var S=x[b],C=h.map(function(w){return[w.x,w.y]});if(!ya(C,S.getBBox().centerX,S.getBBox().centerY))return!1}return!0};if(h&&y())return h;if(i.threshold*=.9,d<=i.maxMarchingIterations*.5)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else if(i.nonMemberInfluenceFactor!==0&&e.length>0)i.nonMemberInfluenceFactor*=.8;else break}return h};function gC(r,t,e){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];r.forEach(function(u){i.push(u.getBBox())}),t.forEach(function(u){i.push(u.getBBox())});for(var a=0,o=i;a<o.length;a++){var s=o[a];n.minX=(s.minX<n.minX?s.minX:n.minX)-e,n.minY=(s.minY<n.minY?s.minY:n.minY)-e,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+e,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+e}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function yC(r,t,e,n,i,a){function o(f,v){var p=Math.floor((f-v)/a.pixelGroupSize);return p<0?0:p}function s(f,v){return f*a.pixelGroupSize+v}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),l=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(v,p){var g=Math.min(o(v.minX,p+n.minX),i.width),y=Math.min(o(v.minY,p+n.minY),i.height),m=Math.min(o(v.maxX,-p+n.minX),i.width),b=Math.min(o(v.maxY,-p+n.minY),i.height);return[g,y,m,b]},h=function(v,p){for(var g=v.getBBox(),y=c(g,a.nodeR1),m=y[0],b=y[1],x=y[2],S=y[3],C=b;C<S;C+=1)for(var w=m;w<x;w+=1)if(!(p<0&&i[w+C*i.width]<=0)){var I=s(w,n.minX),T=s(C,n.minY),O=Lg({x:I,y:T},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(O<Math.pow(a.nodeR1,2)){var _=Math.sqrt(O)-a.nodeR1;i.cells[w+C*i.width]+=p*_*_}}},d=function(v,p){for(var g=v.getBBox(),y=c(g,a.edgeR1),m=y[0],b=y[1],x=y[2],S=y[3],C=b;C<S;C+=1)for(var w=m;w<x;w+=1)if(!(p<0&&i.cells[w+C*i.width]<=0)){var I=s(w,n.minX),T=s(C,n.minY),O=_g({x:I,y:T},v);if(O<Math.pow(a.edgeR1,2)){var _=Math.sqrt(O)-a.edgeR1;i.cells[w+C*i.width]+=p*_*_}}};a.nodeInfluenceFactor&&r.forEach(function(f){h(f,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&e.forEach(function(f){d(f,a.edgeInfluenceFactor/l)}),a.negativeNodeInfluenceFactor&&t.forEach(function(f){h(f,a.negativeNodeInfluenceFactor/u)})}function vd(r,t,e,n){var i=r.getBBox(),a=e[0],o=e[1],s=e[2],u=e[3],l={topLeft:{x:i.minX-t,y:i.minY-t},topRight:{x:i.maxX+t,y:i.minY-t},bottomLeft:{x:i.minX-t,y:i.maxY+t},bottomRight:{x:i.maxX+t,y:i.maxY+t}},c=i.height*i.width;function h(v,p){return i.width*((v.y-i.minY+(p.y-i.minY))*.5)}if(o){if(a)return n?l.topLeft:l.bottomRight;if(s)return n?l.bottomLeft:l.topRight;var d=h(o,u);return d<c*.5?o.y>u.y?n?l.topLeft:l.bottomRight:n?l.topRight:l.bottomLeft:o.y<u.y?n?l.bottomLeft:l.topRight:n?l.bottomRight:l.topLeft}if(u){if(a)return n?l.topRight:l.bottomLeft;if(s)return n?l.bottomRight:l.topLeft}var f=h(a,s);return f<c*.5?a.x>s.x?n?l.topLeft:l.bottomRight:n?l.bottomLeft:l.topRight:a.x<s.x?n?l.topRight:l.bottomLeft:n?l.bottomRight:l.topLeft}var mC=(function(){function r(t,e){this.cfg=$t(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return ot(n)?t.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return ot(n)?t.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return r.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},r.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},r.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},r.prototype.calcPath=function(t,e){var n,i,a;switch(this.type){case"round-convex":n=dd(t),a=Tl(n.map(function(o){return[o.x,o.y]}),this.padding),i=El(a);break;case"smooth-convex":n=dd(t),n.length===2?(a=Tl(n.map(function(o){return[o.x,o.y]}),this.padding),i=El(a)):n.length>2&&(a=P0(n.map(function(o){return[o.x,o.y]}),this.padding),i=Pl(a));break;case"bubble":n=pC(t,e,this.cfg.bubbleCfg),i=n.length>=2&&Pl(n);break}return i},r.prototype.render=function(){this.group.addShape("path",{attrs:E({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},r.prototype.addMember=function(t){if(t){ot(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.addNonMember=function(t){if(t){ot(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.removeMember=function(t){if(t){ot(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1?(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.removeNonMember=function(t){if(t){ot(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1?(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(i){return ot(i)?n.graph.findById(i):i})),e&&(this.nonMembers=e.map(function(i){return ot(i)?n.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.updateStyle=function(t){var e=this.group.findById(this.id);e.attr(E({},t))},r.prototype.updateCfg=function(t){var e=this;this.cfg=$t(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(n){return ot(n)?e.graph.findById(n):n})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return ot(n)?e.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.contain=function(t){var e=this,n;ot(t)?n=this.graph.findById(t):n=t;var i,a=n.getKeyShape();if(n.get("type")==="path")i=Il(a.attr("path"));else{var o=a.getCanvasBBox();i=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return i=i.map(function(s){var u=e.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),Pg(i,Il(this.path))},r.prototype.destroy=function(){this.group.remove(),this.cfg=null},r})(),Mu=Es,bC="node",xC=(function(r){Xt(t,r);function t(e){var n=r.call(this)||this;return n.cfg=$t(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new $o(n.cfg.maxStep),n.redoStack=new $o(n.cfg.maxStep)),n}return t.prototype.init=function(){this.initCanvas();var e=new qM(this),n=new e2(this),i=new iC(this),a=new aC(this);this.set({viewController:e,modeController:n,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas"),n=this.get("canvas").get("el"),i=n.id,a=e.addGroup({id:i+"-root",className:ct.rootContainerClassName});if(this.get("groupByTypes")){var o=a.addGroup({id:i+"-edge",className:ct.edgeContainerClassName}),s=a.addGroup({id:i+"-node",className:ct.nodeContainerClassName}),u=a.addGroup({id:i+"-combo",className:ct.comboContainerClassName});u.toBack(),this.set({nodeGroup:s,edgeGroup:o,comboGroup:u})}var l=a.addGroup({id:i+"-delegate",className:ct.delegateContainerClassName});this.set({delegateGroup:l}),this.set("group",a)},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},t.prototype.set=function(e,n){return ue(e)?this.cfg=E(E({},this.cfg),e):this.cfg[e]=n,this},t.prototype.get=function(e){return this.cfg[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,n){ot(e)&&(e=this.findById(e));var i=this.get("itemController");n||(n=e.get("states")),i.clearItemStates(e,n);var a=this.get("stateController");a.updateStates(e,n,!1)},t.prototype.node=function(e){typeof e=="function"&&this.set("nodeMapper",e)},t.prototype.edge=function(e){typeof e=="function"&&this.set("edgeMapper",e)},t.prototype.combo=function(e){typeof e=="function"&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,n){var i,a=this.get(e+"s");return U(a,function(o,s){if(n(o,s))return i=o,i}),i},t.prototype.findAll=function(e,n){var i=[];return U(this.get(e+"s"),function(a,o){n(a,o)&&i.push(a)}),i},t.prototype.findAllByState=function(e,n){return this.findAll(e,function(i){return i.hasState(n)})},t.prototype.translate=function(e,n){var i=this.get("group"),a=Pt(i.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),a=Mu(a,[["t",e,n]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:i.getMatrix()}),this.autoPaint()},t.prototype.moveTo=function(e,n){var i=this.get("group");Og(i,{x:e,y:n}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},t.prototype.fitView=function(e){e&&this.set("fitViewPadding",e);var n=this.get("viewController");n.fitView(),this.autoPaint()},t.prototype.fitCenter=function(){var e=this.get("viewController");e.fitCenter(),this.autoPaint()},t.prototype.addBehaviors=function(e,n){var i=this.get("modeController");return i.manipulateBehaviors(e,n,!0),this},t.prototype.removeBehaviors=function(e,n){var i=this.get("modeController");return i.manipulateBehaviors(e,n,!1),this},t.prototype.updateBehavior=function(e,n,i){var a=this.get("modeController");return a.updateBehavior(e,n,i),this},t.prototype.zoom=function(e,n){var i=this.get("group"),a=Pt(i.getMatrix()),o=this.get("minZoom"),s=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),n?a=Mu(a,[["t",-n.x,-n.y],["s",e,e],["t",n.x,n.y]]):a=Mu(a,[["s",e,e]]),!(o&&a[0]<o||s&&a[0]>s)&&(i.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},t.prototype.zoomTo=function(e,n){var i=e/this.getZoom();this.zoom(i,n)},t.prototype.focusItem=function(e,n,i){var a=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var s={};i?s=i:i===void 0&&(s=this.get("animateCfg")),a.focus(e,o,s),this.autoPaint()},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,n){var i=this.get("viewController");return i.getPointByClient(e,n)},t.prototype.getClientByPoint=function(e,n){var i=this.get("viewController");return i.getClientByPoint(e,n)},t.prototype.getPointByCanvas=function(e,n){var i=this.get("viewController");return i.getPointByCanvas(e,n)},t.prototype.getCanvasByPoint=function(e,n){var i=this.get("viewController");return i.getCanvasByPoint(e,n)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(e,!0);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},l={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],l.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],l.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],l.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:u,after:l})}},t.prototype.hideItem=function(e,n){n===void 0&&(n=!0);var i=this.get("itemController"),a=i.changeItemVisibility(e,!1);if(n&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},l={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],l.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],l.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],l.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:u,after:l})}},t.prototype.refreshItem=function(e){var n=this.get("itemController");n.refreshItem(e)},t.prototype.setAutoPaint=function(e){var n=this;n.set("autoPaint",e);var i=n.get("canvas");i.set("autoDraw",e)},t.prototype.remove=function(e,n){n===void 0&&(n=!0),this.removeItem(e,n)},t.prototype.removeItem=function(e,n){n===void 0&&(n=!0);var i=e;if(ot(e)&&(i=this.findById(e)),!i&&ot(e))console.warn("The item to be removed does not exist!");else if(i){var a="";if(i.getType&&(a=i.getType()),n&&this.get("enabledStack")){var o=E(E({},i.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=i.getEdges(),l=u.length-1;l>=0;l--)s.edges.push(E(E({},u[l].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=i.getModel();c.comboId&&this.updateComboTree(i)}var h=this.get("itemController");if(h.removeItem(i),a==="combo"){var d=sl(this.get("comboTrees"));this.set("comboTrees",d)}}},t.prototype.addItem=function(e,n,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController");if(!t2(e,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c"+n.id+"%c is unique.","font-size: 20px; color: red;","");return}var u,l=this.get("comboTrees");if(l||(l=[]),e==="combo"){var c=this.get("itemMap"),h=!1;if(l.forEach(function(x){h||Vr(x,function(S){if(n.parentId===S.id){h=!0;var C=E({id:n.id,depth:S.depth+2},n);S.children?S.children.push(C):S.children=[C],n.depth=C.depth,u=s.addItem(e,n)}var w=c[S.id];return h&&w&&w.getType&&w.getType()==="combo"&&s.updateCombo(w,S.children),!0})}),!h){var d=E({id:n.id,depth:0},n);n.depth=d.depth,l.push(d),u=s.addItem(e,n)}this.set("comboTrees",l)}else if(e==="node"&&ot(n.comboId)&&l){var f=this.findById(n.comboId);f&&f.getType&&f.getType()!=="combo"&&console.warn("'"+n.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),u=s.addItem(e,n);var v=this.get("itemMap"),p=!1,g=!1;(l||[]).forEach(function(x){g||p||Vr(x,function(S){if(S.id===n.id)return g=!0,!1;if(n.comboId===S.id&&!g){p=!0;var C=Pt(n);C.itemType="node",S.children?S.children.push(C):S.children=[C],C.depth=S.depth+1}return p&&v[S.id].getType&&v[S.id].getType()==="combo"&&s.updateCombo(v[S.id],S.children),!0})})}else u=s.addItem(e,n);if(e==="node"&&n.comboId||e==="combo"&&n.parentId){var f=this.findById(n.comboId||n.parentId);f&&f.getType&&f.getType()==="combo"&&f.addChild(u)}var y=this.get("combos");if(y&&y.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var m=E(E({},u.getModel()),{itemType:e}),b={};switch(e){case"node":b.nodes=[m];break;case"edge":b.edges=[m];break;case"combo":b.combos=[m];break}this.pushStack("add",{before:{},after:b})}return u},t.prototype.add=function(e,n,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(e,n,i,a)},t.prototype.updateItem=function(e,n,i){var a=this;i===void 0&&(i=!0);var o=this.get("itemController"),s;ot(e)?s=this.findById(e):s=e;var u=Pt(s.getModel()),l="";s.getType&&(l=s.getType());var c=Qe([],s.getStates());if(l==="combo"&&U(c,function(v){return a.setItemState(s,v,!1)}),o.updateItem(s,n),l==="combo"&&U(c,function(v){return a.setItemState(s,v,!0)}),i&&this.get("enabledStack")){var h={nodes:[],edges:[],combos:[]},d={nodes:[],edges:[],combos:[]},f=E({id:u.id},n);switch(l){case"node":h.nodes.push(u),d.nodes.push(f);break;case"edge":h.edges.push(u),d.edges.push(f);break;case"combo":h.combos.push(u),d.combos.push(f);break}l==="node"&&h.nodes.push(u),this.pushStack("update",{before:h,after:d})}},t.prototype.update=function(e,n,i){i===void 0&&(i=!0),this.updateItem(e,n,i)},t.prototype.setItemState=function(e,n,i){ot(e)&&(e=this.findById(e));var a=this.get("itemController");a.setItemState(e,n,i);var o=this.get("stateController");ot(i)?o.updateState(e,n+":"+i,!0):o.updateState(e,n,i)},t.prototype.priorityState=function(e,n){var i=this.get("itemController");i.priorityState(e,n)},t.prototype.data=function(e){ah(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var i=n.nodes,a=i===void 0?[]:i,o=n.edges,s=o===void 0?[]:o,u=n.combos,l=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),U(a,function(g){e.add("node",g,!1,!1)}),l&&l.length!==0){var c=ol(l,a);this.set("comboTrees",c),e.addCombos(l)}U(s,function(g){e.add("edge",g,!1,!1)});var h=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var d=e.get("layoutController");if(d){if(d.layout(f),this.destroyed)return}else e.get("fitView")&&e.fitView(),e.get("fitCenter")&&e.fitCenter(),e.emit("afterrender"),e.set("animate",h);function f(){e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",h)}if(!this.get("groupByTypes"))if(l&&l.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var v=this.getNodes();v.forEach(function(g){g.toFront()})}else{var p=this.getEdges();p.forEach(function(g){g.toBack()})}this.get("enabledStack")&&this.pushStack("render")},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,n,i){var a=this,o,s=this.get("itemMap");U(i,function(u){if(o=s[u.id],o){if(a.get("animate")&&e===bC){var l=o.getContainer().getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:l[6],y:l[7]})}a.updateItem(o,u,!1)}else o=a.addItem(e,u,!1);o&&n[e+"s"].push(o)})},t.prototype.changeData=function(e,n){n===void 0&&(n=!0);var i=this;if(!ah(e))return this;n&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:e}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(p){return i.clearItemStates(p)}),this.getEdges().map(function(p){return i.clearItemStates(p)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(e),i.render());var s=this.get("itemMap"),u={nodes:[],edges:[]},l=e.combos;if(l){var c=ol(l,e.nodes);this.set("comboTrees",c)}this.diffItems("node",u,e.nodes),U(s,function(p,g){s[g].getModel().depth=0,!(p.getType&&p.getType()==="edge")&&(p.getType&&p.getType()==="combo"?(delete s[g],p.destroy()):u.nodes.indexOf(p)<0&&(delete s[g],i.remove(p,!1)))});for(var h=this.getCombos(),d=h.length,f=d-1;f>=0;f--)h[f].destroyed&&h.splice(f,1);l&&(i.addCombos(l),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",u,e.edges),U(s,function(p,g){p.getType&&(p.getType()==="node"||p.getType()==="combo")||u.edges.indexOf(p)<0&&(delete s[g],i.remove(p,!1))}),this.set({nodes:u.nodes,edges:u.edges});var v=this.get("layoutController");return v&&(v.changeData(),i.get("animate")&&!v.getLayoutType()?i.positionsAnimate():i.autoPaint()),setTimeout(function(){a.set("localRefresh",o)},16),this},t.prototype.addCombos=function(e){var n=this,i=n.get("comboTrees"),a=this.get("itemController");a.addCombos(i,e)},t.prototype.createCombo=function(e,n){var i=this;this.set("comboSorted",!1);var a="",o;if(e){if(ot(e))a=e,o={id:e};else{if(a=e.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=e}var s=n.map(function(l){var c=i.findById(l),h=c.getModel(),d="";c.getType&&(d=c.getType());var f={id:c.getID(),itemType:d};return d==="combo"?(f.parentId=a,h.parentId=a):d==="node"&&(f.comboId=a,h.comboId=a),f});o.children=s,this.addItem("combo",o,!1),this.set("comboSorted",!1);var u=this.get("comboTrees");(u||[]).forEach(function(l){Vr(l,function(c){return c.id===a?(c.itemType="combo",c.children=s,!1):!0})}),u&&this.sortCombos()}},t.prototype.uncombo=function(e){var n=this,i=this,a=e;if(ot(e)&&(a=this.findById(e)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item is not a combo!");return}var o=a.getModel().parentId,s=i.get("comboTrees");s||(s=[]);var u=this.get("itemMap"),l=a.get("id"),c,h=[],d=this.get("combos"),f=this.findById(o);if(s.forEach(function(p){c||Vr(p,function(g){if(g.id===l){c=g;var y=a.getEdges();y.forEach(function(b){n.removeItem(b,!1)});var m=d.indexOf(e);d.splice(m,1),delete u[l],a.destroy()}if(o&&c&&g.id===o){f.removeCombo(a),h=g.children;var m=h.indexOf(c);return m!==-1&&h.splice(m,1),c.children.forEach(function(x){var S=n.findById(x.id),C=S.getModel();S.getType&&S.getType()==="combo"?(x.parentId=o,delete x.comboId,C.parentId=o,delete C.comboId):S.getType&&S.getType()==="node"&&(x.comboId=o,C.comboId=o),f.addChild(S),h.push(x)}),!1}return!0})}),!o&&c){var v=s.indexOf(c);s.splice(v,1),c.children.forEach(function(p){p.parentId=void 0;var g=n.findById(p.id).getModel();delete g.parentId,delete g.comboId,p.itemType!=="node"&&s.push(p)})}},t.prototype.updateCombos=function(){var e=this,n=this,i=this.get("comboTrees"),a=n.get("itemController"),o=n.get("itemMap");(i||[]).forEach(function(s){Vr(s,function(u){if(!u)return!0;var l=o[u.id];if(l&&l.getType&&l.getType()==="combo"){var c=Qe([],l.getStates());U(c,function(h){return e.setItemState(l,h,!1)}),a.updateCombo(l,u.children),U(c,function(h){return e.setItemState(l,h,!0)})}return!0})}),n.sortCombos()},t.prototype.updateCombo=function(e){var n=this,i=this,a=e,o;if(ot(e)&&(a=this.findById(e)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=i.get("itemController"),l=i.get("itemMap");(s||[]).forEach(function(c){Vr(c,function(h){if(!h)return!0;var d=l[h.id];if(o===h.id&&d&&d.getType&&d.getType()==="combo"){var f=Qe([],d.getStates());U(f,function(v){d.getStateStyle(v)&&n.setItemState(d,v,!1)}),u.updateCombo(d,h.children),U(f,function(v){d.getStateStyle(v)&&n.setItemState(d,v,!0)}),o&&(o=h.parentId)}return!0})})},t.prototype.updateComboTree=function(e,n,i){i===void 0&&(i=!0);var a=this;this.set("comboSorted",!1);var o;ot(e)?o=a.findById(e):o=e;var s=o.getModel(),u=s.comboId||s.parentId,l="";if(o.getType&&(l=o.getType()),n&&l==="combo"){var c=this.get("comboTrees"),h=!0,d;if((c||[]).forEach(function(m){d||Le(m,function(b){if(!d)return b.id===o.getID()&&(d=b),!0})}),Le(d,function(m){return m.id===n?(h=!1,!1):!0}),!h){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(i&&this.get("enabledStack")){var f={},v={};l==="combo"?(f.combos=[{id:s.id,parentId:s.parentId}],v.combos=[{id:s.id,parentId:n}]):l==="node"&&(f.nodes=[{id:s.id,parentId:s.comboId}],v.nodes=[{id:s.id,parentId:n}]),this.pushStack("updateComboTree",{before:f,after:v})}if(s.parentId||s.comboId){var p=this.findById(s.parentId||s.comboId);p&&p.removeChild(o)}if(l==="combo"?s.parentId=n:l==="node"&&(s.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(u){var g=this.findById(u);g&&g.removeChild(o)}var y=sl(this.get("comboTrees"),s.id,n);this.set("comboTrees",y),this.updateCombos()},t.prototype.save=function(){var e=[],n=[],i=[];return U(this.get("nodes"),function(a){e.push(a.getModel())}),U(this.get("edges"),function(a){n.push(a.getModel())}),U(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:e,edges:n,combos:i}},t.prototype.changeSize=function(e,n){var i=this.get("viewController");return i.changeSize(e,n),this},t.prototype.refresh=function(){var e=this;if(e.emit("beforegraphrefresh"),e.get("animate"))e.positionsAnimate();else{var n=e.get("nodes"),i=e.get("edges"),a=e.get("edges");U(n,function(o){o.refresh()}),U(i,function(o){o.refresh()}),U(a,function(o){o.refresh()})}e.emit("aftergraphrefresh"),e.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if(ot(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo does not exist!");return}return e.getChildren()},t.prototype.positionsAnimate=function(){var e=this;e.emit("beforeanimate");var n=e.get("animateCfg"),i=n.onFrame,a=e.getNodes(),o=a.map(function(u){var l=u.getModel();return{id:l.id,x:l.x,y:l.y}});e.isAnimating()&&e.stopAnimate();var s=e.get("canvas");s.animate(function(u){U(o,function(l){var c=e.findById(l.id);if(!(!c||c.destroyed)){var h=c.get("originAttrs"),d=c.get("model");if(!h){var f=c.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),h={x:f[6],y:f[7]},c.set("originAttrs",h)}if(i){var v=i(c,u,l,h);c.set("model",Object.assign(d,v))}else d.x=h.x+(l.x-h.x)*u,d.y=h.y+(l.y-h.y)*u}}),e.refreshPositions()},{duration:n.duration,easing:n.easing,callback:function(){U(a,function(l){l.set("originAttrs",null)}),n.callback&&n.callback(),e.emit("afteranimate"),e.animating=!1}})},t.prototype.refreshPositions=function(){var e=this;e.emit("beforegraphrefreshposition");var n=e.get("nodes"),i=e.get("edges"),a=e.get("vedges"),o=e.get("combos"),s,u={};U(n,function(l){s=l.getModel();var c=l.get("originAttrs");if(!(c&&s.x===c.x&&s.y===c.y)){var h=l.updatePosition({x:s.x,y:s.y});u[s.id]=h,s.comboId&&(u[s.comboId]=u[s.comboId]||h)}}),o&&o.length!==0&&e.updateCombos(),U(i,function(l){var c=l.getSource().getModel(),h=l.getTarget();if(!ue(h)){var d=h.getModel();(u[c.id]||u[d.id]||l.getModel().isComboEdge)&&l.refresh()}}),U(a,function(l){l.refresh()}),e.emit("aftergraphrefreshposition"),e.autoPaint()},t.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){var e=this.get("modeController");return e.getMode()},t.prototype.setMode=function(e){var n=this.get("modeController");return n.setMode(e),this},t.prototype.clear=function(e){e===void 0&&(e=!1);var n=this.get("canvas");return n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e){var n=this.get("layoutController");ot(e)&&(e={type:e});var i=this.get("layout"),a={};Object.assign(a,i,e),this.set("layout",a),n.isLayoutTypeSame(a)&&a.gpuEnabled===i.gpuEnabled?n.updateLayoutCfg(a):n.changeLayout(a)},t.prototype.destroyLayout=function(){var e=this.get("layoutController");e.destroyLayout()},t.prototype.layout=function(){var e=this.get("layoutController"),n=this.get("layout");if(!(!n||!e)){if(n.workerEnabled){e.layout();return}e.layoutMethod?e.relayout(!0):e.layout()}},t.prototype.collapseCombo=function(e){var n=this;if(ot(e)&&(e=this.findById(e)),!e){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel(),a=this.get("itemController");a.collapseCombo(e),i.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],u=[],l=this.get("comboTrees"),c=!1;(l||[]).forEach(function(f){c||Le(f,function(v){if(c&&v.depth<=i.depth)return!1;if(i.id===v.id&&(c=!0),c){var p=n.findById(v.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),u=u.concat(p.getCombos()))}return!0})});var h={},d=[];o.forEach(function(f){if(!(f.isVisible()&&!f.getModel().isVEdge)){var v=f.getSource(),p=f.getTarget();if((s.includes(v)||u.includes(v))&&!s.includes(p)&&!u.includes(p)||v.getModel().id===i.id){var g=f.getModel();if(g.isVEdge){n.removeItem(f,!1);return}for(var y=p.getModel();!p.isVisible();){if(p=n.findById(y.parentId||y.comboId),!p||!y.parentId&&!y.comboId)return;y=p.getModel()}var m=y.id;if(h[i.id+"-"+m]){h[i.id+"-"+m]+=g.size||1;return}var b=n.addItem("vedge",{source:i.id,target:m,isVEdge:!0},!1);h[i.id+"-"+m]=g.size||1,d.push(b)}else if(!s.includes(v)&&!u.includes(v)&&(s.includes(p)||u.includes(p))||p.getModel().id===i.id){var g=f.getModel();if(g.isVEdge){n.removeItem(f,!1);return}for(var x=v.getModel();!v.isVisible();){if(v=n.findById(x.parentId||x.comboId),!v||!x.parentId&&!x.comboId)return;x=v.getModel()}var S=x.id;if(h[S+"-"+i.id]){h[S+"-"+i.id]+=g.size||1;return}var b=n.addItem("vedge",{target:i.id,source:S,isVEdge:!0},!1);h[S+"-"+i.id]=g.size||1,d.push(b)}}}),d.forEach(function(f){var v=f.getModel();n.updateItem(f,{size:h[v.source+"-"+v.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})},t.prototype.expandCombo=function(e){var n=this;if(ot(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel(),a=this.get("itemController");a.expandCombo(e),i.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],u=[],l=this.get("comboTrees"),c=!1;(l||[]).forEach(function(f){c||Le(f,function(v){if(c&&v.depth<=i.depth)return!1;if(i.id===v.id&&(c=!0),c){var p=n.findById(v.id);p&&p.getType&&p.getType()==="combo"&&(s=s.concat(p.getNodes()),u=u.concat(p.getCombos()))}return!0})});var h={},d={};o.forEach(function(f){if(!(f.isVisible()&&!f.getModel().isVEdge)){var v=f.getSource(),p=f.getTarget(),g=v.get("id"),y=p.get("id");if((s.includes(v)||u.includes(v))&&!s.includes(p)&&!u.includes(p)||g===i.id){if(f.getModel().isVEdge){n.removeItem(f,!1);return}for(var m=p.getModel();!p.isVisible();){if(p=n.findById(m.comboId||m.parentId),!p||!m.parentId&&!m.comboId)return;m=p.getModel()}y=m.id;for(var b=v.getModel();!v.isVisible();){if(v=n.findById(b.comboId||b.parentId),!v||!b.parentId&&!b.comboId)return;if(b.comboId===i.id||b.parentId===i.id)break;b=v.getModel()}if(g=b.id,y){var x=g+"-"+y;if(h[x]){h[x]+=f.getModel().size||1,n.updateItem(d[x],{size:h[x]},!1);return}var S=n.addItem("vedge",{source:g,target:y,isVEdge:!0},!1);h[x]=f.getModel().size||1,d[x]=S}}else if(!s.includes(v)&&!u.includes(v)&&(s.includes(p)||u.includes(p))||y===i.id){if(f.getModel().isVEdge){n.removeItem(f,!1);return}for(var b=v.getModel();!v.isVisible();){if(v=n.findById(b.comboId||b.parentId),!v||!b.parentId&&!b.comboId)return;b=v.getModel()}g=b.id;for(var m=p.getModel();!p.isVisible();){if(p=n.findById(m.comboId||m.parentId),!p||!m.parentId&&!m.comboId)return;if(m.comboId===i.id||m.parentId===i.id)break;m=p.getModel()}if(y=m.id,g){var x=g+"-"+y;if(h[x]){h[x]+=f.getModel().size||1,n.updateItem(d[x],{size:h[x]},!1);return}var S=n.addItem("vedge",{target:y,source:g,isVEdge:!0},!1);h[x]=f.getModel().size||1,d[x]=S}}else(s.includes(v)||u.includes(v))&&(s.includes(p)||u.includes(p))&&v.isVisible()&&p.isVisible()&&f.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})},t.prototype.collapseExpandCombo=function(e){if(ot(e)&&(e=this.findById(e)),!(!e||e.getType&&e.getType()!=="combo")){for(var n=e.getModel(),i=this.findById(n.parentId);i;){var a=i.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(a.parentId)}var o=n.collapsed;o?this.expandCombo(e):this.collapseCombo(e),this.updateCombo(e)}},t.prototype.sortCombos=function(){var e=this,n=this.get("comboSorted");if(!n){this.set("comboSorted",!0);var i=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(u){Le(u,function(l){return i[l.depth]?i[l.depth].push(l.id):i[l.depth]=[l.id],a[l.id]=l.depth,!0})});var s=this.getEdges().concat(this.get("vedges"));(s||[]).forEach(function(u){var l=u.getModel(),c=a[l.source]||0,h=a[l.target]||0,d=Math.max(c,h);i[d]?i[d].push(l.id):i[d]=[l.id]}),i.forEach(function(u){if(!(!u||!u.length))for(var l=u.length-1;l>=0;l--){var c=e.findById(u[l]);c&&c.toFront()}})}},t.prototype.getNeighbors=function(e,n){var i=e;return ot(e)&&(i=this.findById(e)),i.getNeighbors(n)},t.prototype.getNodeDegree=function(e,n,i){n===void 0&&(n=void 0),i===void 0&&(i=!1);var a=e;ot(e)&&(a=this.findById(e));var o=this.get("degrees");(!o||i)&&(o=Tr(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(n){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},t.prototype.pushStack=function(e,n,i){if(e===void 0&&(e="update"),i===void 0&&(i="undo"),!this.get("enabledStack")){console.warn(" undo & redo  Graph  enabledStack: true !");return}var a=n?Pt(n):{before:{},after:Pt(this.save())};i==="redo"?this.redoStack.push({action:e,data:a}):this.undoStack.push({action:e,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},t.prototype.getAdjMatrix=function(e,n){e===void 0&&(e=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix");return(!i||!e)&&(i=Ln(this.save(),n),this.set("adjMatrix",i)),i},t.prototype.getShortestPathMatrix=function(e,n){e===void 0&&(e=!0),n===void 0&&(n=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!i||!e)&&(i=Ln(this.save(),n),this.set("adjMatrix",i)),(!a||!e)&&(a=ga(this.save(),n),this.set("shortestPathMatrix",a)),a},t.prototype.on=function(e,n,i){return r.prototype.on.call(this,e,n,i)},t.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},t.prototype.createHull=function(e){if(!e.members||e.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),i[e.id])return console.warn("Existed hull id."),i[e.id];var a=n.addGroup({id:e.id+"-container"}),o=new mC(this,E(E({},e),{group:a})),s=o.id;return i[s]=o,o},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var n;ot(e)?n=this.getHullById(e):n=e;var i=this.get("hullMap");delete i[n.id],n.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();!e||!Object.keys(e).length||(Object.keys(e).forEach(function(n){var i=e[n];i.destroy()}),this.set("hullMap",{}))},t})(qp);function Lo(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lo=function(e){return typeof e}:Lo=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(r)}var pn=Es,SC="-shape",pd="-label",ao=["startArrow","endArrow"],gd={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},wC={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},oo={edge:wC,node:gd,combo:gd},Nl="-label-bg",Vf={options:{},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t){return $t({labelCfg:{style:{fontFamily:typeof window<"u"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window<"u"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){var n=this.drawShape(t,e);if(n.set("className",this.itemType+SC),t.label){var i=this.drawLabel(t,e);i.set("className",this.itemType+pd)}return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=this.getOptions(t).labelCfg,i=n||{},a=this.getLabelStyle(t,i,e),o=a.rotate;delete a.rotate;var s=e.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(o){var u=s.getBBox(),l=s.getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),a.rotateCenter)switch(a.rotateCenter){case"center":l=pn(l,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":l=pn(l,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":l=pn(l,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:l=pn(l,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else l=pn(l,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(l)}if(a.background){var c=this.drawLabelBg(t,e,s),h=this.itemType+Nl;c.set("classname",h),s.toFront()}return s},drawLabelBg:function(t,e,n){var i=this.options.labelCfg,a=dt({},i,t.labelCfg),o=this.getLabelBgStyleByPosition(n,t,a,e),s=e.addShape("rect",{name:"text-bg-shape",attrs:o});return s},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e,n,i){return{}},getLabelStyle:function(t,e,n){var i=this.getLabelStyleByPosition(t,e,n),a=this.itemType+"Label",o=ct[a]?ct[a].style:null,s=E(E(E({},o),i),e.style);return s},getShapeStyle:function(t){return t.style},update:function(t,e){this.updateShapeStyle(t,e),this.updateLabel(t,e)},updateShapeStyle:function(t,e){var n=e.getContainer(),i=e.getKeyShape(),a=dt({},i.attr(),t.style),o=function(l){var c,h=a[l];if(ue(h)){var d=n.find(function(f){return f.get("name")===l});d&&d.attr(h)}else i.attr((c={},c[l]=h,c))};for(var s in a)o(s)},updateLabel:function(t,e){var n=e.getContainer(),i=this.getOptions({}).labelCfg,a=this.itemType+pd,o=n.find(function(S){return S.get("className")===a}),s=this.itemType+Nl,u=n.find(function(S){return S.get("classname")===s});if(t.label||t.label==="")if(o){var c={};e.getModel&&(c=e.getModel().labelCfg);var h=$t({},i,c,t.labelCfg),d=this.getLabelStyleByPosition(t,h,n),f=t.labelCfg?t.labelCfg.style:void 0,v=h.style&&h.style.background,p=E(E(E({},o.attr()),d),f),g=p.rotate;if(delete p.rotate,g){var y=[1,0,0,0,1,0,0,0,1];y=pn(y,[["t",-p.x,-p.y],["r",g],["t",p.x,p.y]]),o.resetMatrix(),o.attr(E(E({},p),{matrix:y}))}else o.resetMatrix(),o.attr(p);if(!u)p.background&&(u=this.drawLabelBg(t,n,o),u.set("classname",s),o.toFront());else if(p.background){var m=this.getLabelBgStyleByPosition(o,t,h,n),b=E(E({},m),v);if(u.resetMatrix(),g){var x=[1,0,0,0,1,0,0,0,1];x=pn(x,[["t",-b.x,-b.y],["r",g],["t",b.x,b.y]]),b.matrix=x}u.attr(b)}else n.removeChild(u)}else{var l=this.drawLabel(t,n);l.set("className",a)}},afterUpdate:function(t,e){},setState:function(t,e,n){var i,a,o=n.get("keyShape");if(!(!o||o.destroyed)){var s=n.getType(),u=xf(e)?t:t+":"+e,l=this.getStateStyle(u,n),c=n.getStateStyle(u);if(!(!c&&!l)){var h=dt({},c||l),d=n.getContainer(),f={x:1,y:1,cx:1,cy:1};if(s==="combo"&&(f.r=1,f.width=1,f.height=1),e){var v=function(X){var K,G=h[X];if(ue(G)&&!ao.includes(X)){var tt=d.find(function(H){return H.get("name")===X});tt&&tt.attr(G)}else o.attr((K={},K[X]=G,K))};for(var p in h)v(p)}else{var g=ul(n.getCurrentStatesStyle()),y=n.getModel(),m=dt({},y.style,ul(n.getOriginStyle())),b=o.get("name"),x=o.attr(),S={};Object.keys(x).forEach(function(Y){if(Y!=="img"){var X=x[Y];X&&Lo(X)==="object"?S[Y]=Pt(X):S[Y]=X}});var C={},w=function(X){var K=h[X];if(ue(K)&&!ao.includes(X)){var G=d.find(function(q){return q.get("name")===X});if(G){var tt=Pt(G.attr());U(K,function(q,J){if(X===b&&S[J]&&!f[J]){delete S[J];var rt=m[X][J]||oo[s][J];o.attr(J,rt)}else if(tt[J]||tt[J]===0){delete tt[J];var ft=m[X][J]||oo[s][J];G.attr(J,ft)}}),C[X]=tt}}else if(S[X]&&!f[X]){delete S[X];var H=m[X]||(m[b]?m[b][X]:void 0)||oo[s][X];o.attr(X,H)}};for(var I in h)w(I);b?C[b]=S:dt(C,S);for(var p in g)if(!f[p]){var T=g[p];(!ue(T)||ao.includes(p))&&(b?(dt(m[b],(a={},a[p]=T,a)),delete m[p]):dt(m,(i={},i[p]=T,i)),delete g[p])}var O={};$t(O,m,C,g);var _=!1,B=function(X){var K,G,tt=O[X];if(ue(tt)&&!ao.includes(X)){var H=d.find(function(J){return J.get("name")===X});H&&(X===b&&(s==="combo"&&(delete tt.r,delete tt.width,delete tt.height),_=!0),H.attr(tt))}else if(!_){var q=tt||oo[s][X];s==="combo"?b||o.attr((K={},K[X]=q,K)):o.attr((G={},G[X]=q,G))}};for(var z in O)B(z)}}}},getStateStyle:function(t,e){var n=e.getModel(),i=e.getType(),a=this.getOptions(n),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,l=n.stateStyles?n.stateStyles[t]:o&&o[t];return i==="combo"?Pt(l):dt({},u,l)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.getOptions(t).anchorPoints;return e}},MC={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:ct.nodeLabel.offset,getSize:function(t){var e=t.size||this.getOptions({}).size||ct.defaultNode.size;return pt(e)&&e.length===1&&(e=[e[0],e[0]]),pt(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition;if(n==="center")return{x:0,y:0,text:t.label};var i=e.offset;St(i)&&(i=this.offset);var a=this.getSize(t),o=a[0],s=a[1],u;switch(n){case"top":u={x:0,y:0-s/2-i,textBaseline:"bottom"};break;case"bottom":u={x:0,y:s/2+i,textBaseline:"top"};break;case"left":u={x:0-o/2-i,y:0,textAlign:"right"};break;default:u={x:o/2+i,y:0,textAlign:"left"};break}return u.text=t.label,u},getLabelBgStyleByPosition:function(t,e,n,i){if(!t)return{};var a=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var s=Hf(o.padding),u=a.width+s[1]+s[3],l=a.height+s[0]+s[2],c=n.offset;St(c)&&(c=this.offset);var h;return h={x:a.minX-s[3],y:a.minY-s[0]},h=E(E(E({},h),o),{width:u,height:l}),h},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t),a=e.addShape(n,{attrs:i,draggable:!0,name:"node-shape"});return a},updateLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=e.find(function(w){return w.get("className")==="link-point-left"}),a=e.find(function(w){return w.get("className")==="link-point-right"}),o=e.find(function(w){return w.get("className")==="link-point-top"}),s=e.find(function(w){return w.get("className")==="link-point-bottom"}),u;i&&(u=i.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=n);var l=dt({},u,t.linkPoints),c=l.fill,h=l.stroke,d=l.lineWidth,f=l.size/2;f||(f=l.r);var v=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=v.left,g=v.right,y=v.top,m=v.bottom,b=this.getSize(t),x=b[0],S=b[1],C={r:f,fill:c,stroke:h,lineWidth:d};i?!p&&p!==void 0?i.remove():i.attr(E(E({},C),{x:-x/2,y:0})):p&&e.addShape("circle",{attrs:E(E({},C),{x:-x/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(!g&&g!==void 0&&a.remove(),a.attr(E(E({},C),{x:x/2,y:0}))):g&&e.addShape("circle",{attrs:E(E({},C),{x:x/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),o?(!y&&y!==void 0&&o.remove(),o.attr(E(E({},C),{x:0,y:-S/2}))):y&&e.addShape("circle",{attrs:E(E({},C),{x:0,y:-S/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?!m&&m!==void 0?s.remove():s.attr(E(E({},C),{x:0,y:S/2})):m&&e.addShape("circle",{attrs:E(E({},C),{x:0,y:S/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(t,e,n,i){var a=e.get("keyShape");a.attr(E({},n)),this.updateLabel(t,e),i&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,i=e.getContainer(),a=this.getOptions(t).icon,o=(t.icon?t.icon:{show:void 0}).show,s=i.find(function(d){return d.get("className")===n.type+"-icon"});if(s)if(o||o===void 0){var u=dt({},s.attr(),a),l=u.width,c=u.height;s.attr(E(E({},u),{x:-l/2,y:-c/2}))}else s.remove();else if(o){var l=a.width,c=a.height;i.addShape("image",{attrs:E(E({},a),{x:-l/2,y:-c/2}),className:this.type+"-icon",name:this.type+"-icon"});var h=i.find(function(v){return v.get("className")==="node-label"});h&&h.toFront()}}},CC=E(E({},Vf),MC);zt.registerNode("single-node",CC);var so="edge-shape";function EC(r){var t=r;return r==="start"?t="end":r==="end"&&(t="start"),t}var AC={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:ct.defaultEdge.size,style:{x:0,y:0,stroke:ct.defaultEdge.style.stroke,lineAppendWidth:ct.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ct.edgeLabel.style.fill,fontSize:ct.edgeLabel.style.fontSize}},stateStyles:E({},ct.edgeStateStyles)},getPath:function(t){var e=[];return U(t,function(n,i){i===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=dt({},e,n,t.style),a=t.size||ct.defaultEdge.size;t=this.getPathPoints(t);var o=t.startPoint,s=t.endPoint,u=this.getControlPoints(t),l=[o];u&&(l=l.concat(u)),l.push(s);var c=this.getPath(l),h=dt({},ct.defaultEdge.style,{stroke:ct.defaultEdge.color,lineWidth:a,path:c},i);return h},updateShapeStyle:function(t,e){var n=e.getContainer(),i={stroke:t.color},a=n.find(function(m){return m.get("className")==="edge-shape"})||e.getKeyShape(),o=t.size;t=this.getPathPoints(t);var s=t.startPoint,u=t.endPoint,l=this.getControlPoints(t),c=[s];l&&(c=c.concat(l)),c.push(u);var h=a.attr(),d=dt({},i,h,t.style),f=t.sourceNode,v=t.targetNode,p={radius:d.radius};l||(p={source:f,target:v,offset:d.offset,radius:d.radius}),h.endArrow&&d.endArrow===!1&&(t.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(t.style.startArrow={path:""});var g=this.getPath(c,p),y=dt(i,a.attr(),{lineWidth:o,path:g},t.style);a&&a.attr(y)},getLabelStyleByPosition:function(t,e,n){var i=e.position||this.labelPosition,a={},o=n&&n.find(function(d){return d.get("className")===so}),s;i==="start"?s=0:i==="end"?s=1:s=.5;var u=e.refX||this.refX,l=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return a.x=t.startPoint.x+u,a.y=t.startPoint.y+l,a.text=t.label,a;var c;St(e.autoRotate)?c=this.labelAutoRotate:c=e.autoRotate;var h=Io(o,s,u,l,c);return a.x=h.x,a.y=h.y,a.rotate=h.rotate,a.textAlign=this._getTextAlign(i,h.angle),a.text=t.label,a},getLabelBgStyleByPosition:function(t,e,n,i){if(!t)return{};var a=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var s=o.padding,u=a.width+s[1]+s[3],l=a.height+s[0]+s[2],c=n.position||this.labelPosition,h=E(E({},o),{width:u,height:l,x:a.minX-s[2],y:a.minY-s[0],rotate:0}),d;St(n.autoRotate)?d=this.labelAutoRotate:d=n.autoRotate;var f=i&&i.find(function(b){return b.get("className")===so}),v;c==="start"?v=0:c==="end"?v=1:v=.5;var p=n.refX||this.refX,g=n.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return h.x=e.startPoint.x+p-u/2,h.y=e.startPoint.y+g-l/2,h;var y=Io(f,v,p-u/2,g+l/2,d),m=y.angle;return m>1/2*Math.PI&&m<3/2*Math.PI&&(y=Io(f,v,p+u/2,g+l/2,d)),d&&(h.x=y.x,h.y=y.y),h.rotate=y.rotate,h},_getTextAlign:function(t,e){var n="center";return e?(e=e%(Math.PI*2),t!=="center"&&(e>=0&&e<=Math.PI/2||e>=3/2*Math.PI&&e<2*Math.PI?n=t:n=EC(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("path",{className:so,name:so,attrs:n});return i},drawLabel:function(t,e){var n=this.options.labelCfg,i;typeof window<"u"&&typeof window.getComputedStyle<"u"?i=window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif":i="Arial, sans-serif";var a=$t({fontFamily:i},n,t.labelCfg),o=this.getLabelStyle(t,a,e),s=o.rotate;delete o.rotate;var u=e.addShape("text",{attrs:o,name:"text-shape"});if(s&&u.rotateAtStart(s),o.background){var l=this.drawLabelBg(t,e,u),c=this.itemType+Nl;l.set("classname",c),u.toFront()}return u},drawLabelBg:function(t,e,n){var i=this.options.labelCfg,a=$t({},i,t.labelCfg),o=this.getLabelStyle(t,a,e),s=o.rotate,u=this.getLabelBgStyleByPosition(n,t,a,e);delete u.rotate;var l=e.addShape("rect",{name:"text-bg-shape",attrs:u});return s&&l.rotateAtStart(s),l}},kC=E(E({},Vf),AC);zt.registerEdge("single-edge",kC);zt.registerEdge("line",{getControlPoints:function(){}},"single-edge");zt.registerEdge("spline",{getPath:function(t){var e=I0(t);return e}},"single-edge");zt.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,i={x:(e.x+n.x)/2,y:(e.y+n.y)/2},a,o;if(t.controlPoints!==void 0){if(o=t.controlPoints[0],a=rl(e,o,n),e.x<=n.x&&e.y>n.y?this.clockwise=a.x>o.x?0:1:e.x<=n.x&&e.y<n.y?this.clockwise=a.x>o.x?1:0:e.x>n.x&&e.y<=n.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-e.x)/(o.y-e.y)===(n.x-e.x)/(n.y-e.y))return[]}else{t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),pt(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:n.x-e.x,y:n.y-e.y},u=Math.atan2(s.y,s.x);o={x:t.curveOffset*Math.cos(-Math.PI/2+u)+i.x,y:t.curveOffset*Math.sin(-Math.PI/2+u)+i.y},a=rl(e,o,n)}var l=Go(e,a),c=[{x:l,y:l}];return c},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),t.length===2?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge");zt.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,i=t.endPoint;t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),pt(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),pt(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]);var a=ns(n,i,t.curvePosition,t.curveOffset);e=[a]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge");zt.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),xt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),xt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,i=t.endPoint,a=ns(n,i,t.curvePosition[0],t.curveOffset[0]),o=ns(n,i,t.curvePosition[1],t.curveOffset[1]);e=[a,o]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge");zt.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),xt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),xt(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),xt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.y-e.y,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var o={x:e.x,y:e.y+i*this.curvePosition[0]+a[0]},s={x:n.x,y:n.y-i*this.curvePosition[1]+a[1]};return[o,s]}},"cubic");zt.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),xt(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),xt(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),xt(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.x-e.x,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var o={x:e.x+i*this.curvePosition[0]+a[0],y:e.y},s={x:n.x-i*this.curvePosition[1]+a[1],y:n.y},u=[o,s];return u}},"cubic");zt.registerEdge("loop",{getPathPoints:function(t){return Bg(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var OC={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:ct.comboLabel.refX,refY:ct.comboLabel.refY,options:{style:{stroke:ct.defaultCombo.style.stroke,fill:ct.defaultCombo.style.fill,lineWidth:ct.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ct.comboLabel.style.fill,fontSize:ct.comboLabel.style.fontSize}},stateStyles:E({},ct.comboStateStyles)},getSize:function(t){var e=Pt(t.size||this.options.size||ct.defaultCombo.size);return pt(e)&&e.length===1&&(e=[e[0],e[0]]),pt(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,a=t.padding||this.options.padding;pt(a)&&(a=a[0]);var o=e.refX,s=e.refY;St(o)&&(o=this.refX),St(s)&&(s=this.refY);var u=this.getSize(t),l=Math.max(i.r,u[0]/2)||u[0]/2,c=l+a,h;switch(n){case"top":h={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":h={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":h={x:-c+o,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:t.label,textAlign:"center"};break;default:h={x:c+o,y:0,textAlign:"right"};break}return h.text=t.label,h},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t),a=e.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"});return a},updateShape:function(t,e,n){var i=e.get("keyShape"),a=t.animate===void 0?this.options.animate:t.animate;a&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr(E({},n)),this.updateLabel(t,e)}},IC=E(E({},Vf),OC);zt.registerCombo("single-combo",IC);zt.registerCombo("circle",{options:{size:[ct.defaultCombo.size[0],ct.defaultCombo.size[0]],padding:ct.defaultCombo.padding[0],animate:!0,style:{stroke:ct.defaultCombo.style.stroke,fill:ct.defaultCombo.style.fill,lineWidth:ct.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ct.comboLabel.style.fill,fontSize:ct.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:E({},ct.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);delete n.height,delete n.width;var i=e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return i},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;pt(n)&&(n=n[0]);var i={stroke:t.color},a=dt({},e,i,t.style),o;if(t.fixSize)o=xt(t.fixSize)?t.fixSize:t.fixSize[0];else{var s=this.getSize(t);!xt(a.r)||isNaN(a.r)?o=s[0]/2||ct.defaultCombo.style.r:o=Math.max(a.r,s[0]/2)||s[0]/2}a.r=o+n;var u=E({x:0,y:0},a);return t.style?t.style.r=o:t.style={r:o},u},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;pt(i)&&(i=i[0]);var a=Pt(t.style),o;t.fixSize?o=xt(t.fixSize)?t.fixSize:t.fixSize[0]:o=Math.max(a.r,n[0]/2)||n[0]/2,a.r=o+i;var s=e.get("sizeCache");s&&(s.r=a.r);var u={stroke:t.color},l=e.get("keyShape"),c=dt({},l.attr(),u,a);t.style?t.style.r=o:t.style={r:o},this.updateShape(t,e,c,!0)}},"single-combo");zt.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:ct.defaultCombo.style.stroke,fill:ct.defaultCombo.style.fill,lineWidth:ct.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ct.comboLabel.style.fill,fontSize:ct.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:E({},ct.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return i},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,a=t.padding||this.options.padding;xt(a)&&(a=[a,a,a,a]);var o=e.refX,s=e.refY;St(o)&&(o=this.refX),St(s)&&(s=this.refY);var u=i.width/2+a[3],l=i.height/2+a[0],c;switch(n){case"top":c={x:0-u+o,y:0-l+s,textBaseline:"top",textAlign:"left"};break;case"bottom":c={x:0,y:l+s,textBaseline:"bottom",textAlign:"center"};break;case"left":c={x:0-u+s,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:t.label,textAlign:"center"};break;default:c={x:u+o,y:0,textAlign:"right"};break}return c.text=t.label,c},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;xt(n)&&(n=[n,n,n,n]);var i={stroke:t.color},a=dt({},e,i,t.style),o=this.getSize(t),s,u,l=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;l?xt(l)?(s=l,u=l):(s=l[0],u=l[1]):(!xt(a.width)||isNaN(a.width)?s=o[0]||ct.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!xt(a.height)||isNaN(a.height)?u=o[1]||ct.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-n[3],h=-u/2-n[0];a.width=s+n[1]+n[3],a.height=u+n[0]+n[2];var d=E({x:c,y:h},a);return t.style?(t.style.width=s,t.style.height=u):t.style={width:s,height:u},d},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;xt(i)&&(i=[i,i,i,i]);var a=Pt(t.style),o,s,u=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;u?xt(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,n[0])||n[0],s=Math.max(a.height,n[1])||n[1]),a.width=o+i[1]+i[3],a.height=s+i[0]+i[2];var l=e.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-o/2-i[3],a.y=-s/2-i[0];var c={stroke:t.color},h=e.get("keyShape"),d=dt({},h.attr(),c,a);t.style?(t.style.width=o,t.style.height=s):t.style={width:o,height:s},this.updateShape(t,e,d,!1)},updateShape:function(t,e,n){var i=e.get("keyShape"),a=t.animate===void 0?this.options.animate:t.animate;a&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr(E({},n)),this.updateLabel(t,e)}},"single-combo");zt.registerNode("simple-circle",{options:{size:ct.defaultNode.size,style:{x:0,y:0,stroke:ct.defaultNode.style.stroke,fill:ct.defaultNode.style.fill,lineWidth:ct.defaultNode.style.lineWidth},labelCfg:{style:{fill:ct.nodeLabel.style.fill,fontSize:ct.nodeLabel.style.fontSize}},stateStyles:E({},ct.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("circle",{attrs:n,className:this.type+"-keyShape",draggable:!0});return i},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=$t({},e,n),a=this.getSize(t),o=a[0]/2,s=E({x:0,y:0,r:o},i);return s},update:function(t,e){var n=this.getSize(t),i={stroke:t.color,r:n[0]/2},a=e.get("keyShape"),o=$t({},a.attr(),i,t.style);this.updateShape(t,e,o,!0)}},"single-node");zt.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:ct.defaultNode.style.stroke,fill:ct.defaultNode.style.fill,lineWidth:ct.defaultNode.style.lineWidth},labelCfg:{style:{fill:ct.nodeLabel.style.fill,fontSize:ct.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:E({},ct.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return i},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=dt({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],u=E({x:-o/2,y:-s/2,width:o,height:s},i);return u},update:function(t,e){e.getContainer();var n=this.getOptions({}).style,i=this.getSize(t),a=e.get("keyShape");t.size||(i[0]=a.attr("width")||n.width,i[1]=a.attr("height")||n.height);var o={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=dt({},n,a.attr(),o);s=dt(s,t.style),this.updateShape(t,e,s,!1)}},"single-node");zt.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t);delete i.fill;var a=e.addShape(n,{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(t,a),a},drawClip:function(t,e){var n=this.getOptions(t).clipCfg;if(n.show){var i=n.type,a=n.x,o=n.y,s=n.style;if(i==="circle"){var u=n.r;e.setClip({type:"circle",attrs:E({r:u,x:a,y:o},s)})}else if(i==="rect"){var l=n.width,c=n.height,h=a-l/2,d=o-c/2;e.setClip({type:"rect",attrs:E({x:h,y:d,width:l,height:c},s)})}else if(i==="ellipse"){var f=n.rx,v=n.ry;e.setClip({type:"ellipse",attrs:E({x:a,y:o,rx:f,ry:v},s)})}else if(i==="polygon"){var p=n.points;e.setClip({type:"polygon",attrs:E({points:p},s)})}else if(i==="path"){var g=n.path;e.setClip({type:"path",attrs:E({path:g},s)})}}},getShapeStyle:function(t){var e=this.getOptions(t).style,n=this.getSize(t),i=this.getOptions(t).img,a=n[0],o=n[1];e&&(a=e.width||n[0],o=e.height||n[1]);var s=E({x:-a/2,y:-o/2,width:a,height:o,img:i},e);return s},updateShapeStyle:function(t,e){var n=e.getContainer(),i=this.itemType+"-shape",a=n.find(function(s){return s.get("className")===i})||e.getKeyShape(),o=this.getShapeStyle(t);a&&a.attr(o)}},"single-node");const PC={triangle:function(t,e,n){t===void 0&&(t=10),e===void 0&&(e=15),n===void 0&&(n=0);var i=n*2,a="M "+i+",0 L "+(i+e)+",-"+t/2+" L "+(i+e)+","+t/2+" Z";return a},vee:function(t,e,n){t===void 0&&(t=15),e===void 0&&(e=20),n===void 0&&(n=0);var i=n*2,a="M "+i+",0 L "+(i+e)+",-"+t/2+`
        L `+(i+2*e/3)+",0 L "+(i+e)+","+t/2+" Z";return a},circle:function(t,e){t===void 0&&(t=5),e===void 0&&(e=0);var n=e*2,i="M "+n+`, 0
            a `+t+","+t+" 0 1,0 "+t*2+`,0
            a `+t+","+t+" 0 1,0 "+-t*2+",0";return i},rect:function(t,e,n){t===void 0&&(t=10),e===void 0&&(e=10),n===void 0&&(n=0);var i=n*2,a="M "+i+","+-t/2+` 
        L `+(i+e)+","+-t/2+` 
        L `+(i+e)+","+t/2+` 
        L `+i+","+t/2+" Z";return a},diamond:function(t,e,n){t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=0);var i=n*2,a="M "+i+`,0 
        L `+(i+e/2)+","+-t/2+` 
        L `+(i+e)+`,0 
        L `+(i+e/2)+","+t/2+" Z";return a},triangleRect:function(t,e,n,i,a,o){t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=15),i===void 0&&(i=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+e+a,l="M "+s+",0 L "+(s+e)+",-"+t/2+" L "+(s+e)+","+t/2+` Z
            M `+u+", -"+n/2+`
            L `+(u+i)+" -"+n/2+`
            L `+(u+i)+" "+n/2+`
            L `+u+" "+n/2+`
            Z`;return l}},TC={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",t-i,e+a],["L",t+i,e+a],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),a=n*Math.sin(Math.PI/6);return[["M",t-i,e-a],["L",t+i,e-a],["L",t,e+n],["Z"]]}};var NC=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const _C=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:NC},Symbol.toStringTag,{value:"Module"}));var LC=Es,jn=E(E(E(E(E(E({},$M),JS),uC),WS),_C),{transform:LC,mat3:nS}),BC=(function(){function r(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map(function(i){return i?.type||""}):null},r.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t);return Array.isArray(this.layoutType)?this.layoutType.every(function(n,i){return n===e[i]}):t?.type===this.layoutType},r.prototype.refreshLayout=function(){var t=this.graph;t&&(t.get("animate")?t.positionsAnimate():t.refreshPositions())},r.prototype.changeLayout=function(t){this.layoutCfg=t,this.destoryLayoutMethods(),this.layout()},r.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},r.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods;t?.forEach(function(e){e.destroy()}),this.layoutMethods=[]},r.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var t=[],e=[],n=[],i=[],a=[],o=[],s=[],u=this.graph.getNodes(),l=this.graph.getEdges(),c=this.graph.getCombos(),h=u.length,d=0;d<h;d++){var f=u[d];if(!(!f||f.destroyed)){var v=f.getModel();if(!f.isVisible()){e.push(v);continue}t.push(v)}}for(var p=l.length,d=0;d<p;d++){var g=l[d];if(!(!g||g.destroyed)){var v=g.getModel();if(!g.isVisible()){i.push(v);continue}v.isComboEdge?a.push(v):n.push(v)}}for(var y=c.length,d=0;d<y;d++){var m=c[d];if(!m.destroyed){var v=m.getModel();if(!m.isVisible()){i.push(v);continue}o.push(v)}}return{nodes:t,hiddenNodes:e,edges:n,hiddenEdges:i,combos:o,hiddenCombos:s,comboEdges:a}},r.prototype.reLayoutMethod=function(t,e){var n=this;return new Promise(function(i,a){var o=n.graph,s=e?.type;e.onLayoutEnd=function(){o.emit("aftersublayout",{type:s}),i()},t.init(n.data),s==="force"&&(t.ticking=!1,t.forceSimulation.stop()),o.emit("beforesublayout",{type:s}),t.execute(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd()})},r.prototype.relayout=function(t){var e=this,n=this,i=n.graph,a=n.layoutMethods,o=n.layoutCfg;if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(o.center,s)}i.emit("beforelayout");var u=Promise.resolve();a?.forEach(function(l,c){var h=o[c];u=u.then(function(){return e.reLayoutMethod(l,h)})}),u.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd()}).catch(function(l){console.warn("relayout failed",l)})},r.prototype.filterLayoutData=function(t,e){var n=t.nodes,i=t.edges,a=ge(t,["nodes","edges"]);if(!n)return t;var o,s;if(Jt(e?.nodesFilter)?o=e.nodesFilter:o=function(){return!0},Jt(e?.edgesFilter))s=e.edgesFilter;else{var u=n.reduce(function(l,c){return l[c.id]=!0,l},{});s=function(c){return u[c.source]&&u[c.target]}}return E({nodes:n.filter(o),edges:i.filter(s)},a)},r.prototype.getLayoutBBox=function(t){var e=this.graph,n=Wo(e.getNodes(),function(o){return o.getModel().layoutOrder}),i=Object.values(n).map(function(o){var s=M0(o);return s.size=[s.width,s.height],s}),a=Object.values(Wo(t,"layoutOrder"));return{groupNodes:a,layoutNodes:i}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var t=this.graph,e=t.get("data"),n=e.nodes;if(!(n[0].x===void 0||n[0].x===null||No(n[0].x))){for(var i=[0,0],a=n.length,o=0;o<a;o++){var s=n[o];i[0]+=s.x,i[1]+=s.y}i[0]/=n.length,i[1]/=n.length;for(var o=0;o<a;o++){var s=n[o];s.x-=i[0],s.y-=i[1]}}},r.prototype.initPositions=function(t,e){var n=this.graph;if(!e)return!1;var i=e?e.length:0;if(i){var a=n.get("width")*.85,o=n.get("height")*.85,s=Math.ceil(Math.sqrt(i)*(a/o)),u=Math.ceil(i/s),l=a/(s-1),c=o/(u-1);(!isFinite(l)||!l)&&(l=0),(!isFinite(c)||!l)&&(c=0);for(var h=t[0]-a/2,d=t[1]-o/2,f=!0,v=0;v<i;v++){var p=e[v];No(p.x)&&(f=!1,p.x=v%s*l+h),No(p.y)&&(f=!1,p.y=Math.floor(v/s)*c+d)}return f}},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},r})(),DC=(function(){function r(t){this.graph=t,this.destroyed=!1,this.initEvents()}return r})(),yd;(function(r){r.CLICK="click",r.DBLCLICK="dblclick",r.MOUSEDOWN="mousedown",r.MOUDEUP="mouseup",r.CONTEXTMENU="contextmenu",r.MOUSEENTER="mouseenter",r.MOUSEOUT="mouseout",r.MOUSEOVER="mouseover",r.MOUSEMOVE="mousemove",r.MOUSELEAVE="mouseleave",r.DRAGSTART="dragstart",r.DRAGEND="dragend",r.DRAG="drag",r.DRAGENTER="dragenter",r.DRAGLEAVE="dragleave",r.DRAGOVER="dragover",r.DRAGOUT="dragout",r.DDROP="drop",r.KEYUP="keyup",r.KEYDOWN="keydown",r.WHEEL="wheel",r.FOCUS="focus",r.BLUR="blur",r.TOUCHSTART="touchstart",r.TOUCHMOVE="touchmove",r.TOUCHEND="touchend",r.CANVAS_TOUCHSTART="canvas:touchstart",r.CANVAS_TOUCHMOVE="canvas:touchmove",r.CANVAS_TOUCHEND="canvas:touchend",r.NODE_TOUCHSTART="node:touchstart",r.NODE_TOUCHMOVE="node:touchmove",r.NODE_TOUCHEND="node:touchend",r.COMBO_TOUCHSTART="combo:touchstart",r.COMBO_TOUCHMOVE="combo:touchmove",r.COMBO_TOUCHEND="combo:touchend",r.EDGE_TOUCHSTART="edge:touchstart",r.EDGE_TOUCHMOVE="edge:touchmove",r.EDGE_TOUCHEND="edge:touchend",r.NODE_CONTEXTMENU="node:contextmenu",r.NODE_CLICK="node:click",r.NODE_DBLCLICK="node:dblclick",r.NODE_MOUSEDOWN="node:mousedown",r.NODE_MOUSEUP="node:mouseup",r.NODE_MOUSEENTER="node:mouseenter",r.NODE_MOUSELEAVE="node:mouseleave",r.NODE_MOUSEMOVE="node:mousemove",r.NODE_MOUSEOUT="node:mouseout",r.NODE_MOUSEOVER="node:mouseover",r.NODE_DROP="node:drop",r.NODE_DRAGOVER="node:dragover",r.NODE_DRAGENTER="node:dragenter",r.NODE_DRAGLEAVE="node:dragleave",r.NODE_DRAGSTART="node:dragstart",r.NODE_DRAG="node:drag",r.NODE_DRAGEND="node:dragend",r.NODE_TAP="node:tap",r.NODE_PANSTART="node:panstart",r.NODE_PANMOVE="node:panmove",r.NODE_PANEND="node:panend",r.COMBO_CONTEXTMENU="combo:contextmenu",r.COMBO_CLICK="combo:click",r.COMBO_DBLCLICK="combo:dblclick",r.COMBO_MOUSEDOWN="combo:mousedown",r.COMBO_MOUSEUP="combo:mouseup",r.COMBO_MOUSEENTER="combo:mouseenter",r.COMBO_MOUSELEAVE="combo:mouseleave",r.COMBO_MOUSEMOVE="combo:mousemove",r.COMBO_MOUSEOUT="combo:mouseout",r.COMBO_MOUSEOVER="combo:mouseover",r.COMBO_DROP="combo:drop",r.COMBO_DRAGOVER="combo:dragover",r.COMBO_DRAGENTER="combo:dragenter",r.COMBO_DRAGLEAVE="combo:dragleave",r.COMBO_DRAGSTART="combo:dragstart",r.COMBO_DRAG="combo:drag",r.COMBO_DRAGEND="combo:dragend",r.COMBO_TAP="combo:tap",r.COMBO_PANSTART="combo:panstart",r.COMBO_PANMOVE="combo:panmove",r.COMBO_PANEND="combo:panend",r.EDGE_CONTEXTMENU="edge:contextmenu",r.EDGE_CLICK="edge:click",r.EDGE_DBLCLICK="edge:dblclick",r.EDGE_MOUSEDOWN="edge:mousedown",r.EDGE_MOUSEUP="edge:mouseup",r.EDGE_MOUSEENTER="edge:mouseenter",r.EDGE_MOUSELEAVE="edge:mouseleave",r.EDGE_MOUSEMOVE="edge:mousemove",r.EDGE_MOUSEOUT="edge:mouseout",r.EDGE_MOUSEOVER="edge:mouseover",r.EDGE_DROP="edge:drop",r.EDGE_DRAGOVER="edge:dragover",r.EDGE_DRAGENTER="edge:dragenter",r.EDGE_DRAGLEAVE="edge:dragleave",r.CANVAS_CONTEXTMENU="canvas:contextmenu",r.CANVAS_CLICK="canvas:click",r.CANVAS_DBLCLICK="canvas:dblclick",r.CANVAS_MOUSEDOWN="canvas:mousedown",r.CANVAS_MOUSEUP="canvas:mouseup",r.CANVAS_MOUSEENTER="canvas:mouseenter",r.CANVAS_MOUSELEAVE="canvas:mouseleave",r.CANVAS_MOUSEMOVE="canvas:mousemove",r.CANVAS_MOUSEOUT="canvas:mouseout",r.CANVAS_MOUSEOVER="canvas:mouseover",r.CANVAS_DROP="canvas:drop",r.CANVAS_DRAGENTER="canvas:dragenter",r.CANVAS_DRAGLEAVE="canvas:dragleave",r.CANVAS_DRAGSTART="canvas:dragstart",r.CANVAS_DRAG="canvas:drag",r.CANVAS_DRAGEND="canvas:dragend",r.CANVAS_TAP="canvas:tap",r.CANVAS_PANSTART="canvas:panstart",r.CANVAS_PANMOVE="canvas:panmove",r.CANVAS_PANEND="canvas:panend",r.BEFORERENDER="beforerender",r.AFTERRENDER="afterrender",r.BEFOREADDITEM="beforeadditem",r.AFTERADDITEM="afteradditem",r.BEFOREREMOVEITEM="beforeremoveitem",r.AFTERREMOVEITEM="afterremoveitem",r.BEFOREUPDATEITEM="beforeupdateitem",r.AFTERUPDATEITEM="afterupdateitem",r.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",r.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",r.BEFOREITEMSTATECHANGE="beforeitemstatechange",r.AFTERITEMSTATECHANGE="afteritemstatechange",r.BEFOREITEMREFRESH="beforeitemrefresh",r.AFTERITEMREFRESH="afteritemrefresh",r.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",r.AFTERITEMSTATESCLEAR="afteritemstatesclear",r.BEFOREMODECHANGE="beforemodechange",r.AFTERMODECHANGE="aftermodechange",r.BEFORELAYOUT="beforelayout",r.AFTERLAYOUT="afterlayout",r.BEFORECREATEEDGE="beforecreateedge",r.AFTERCREATEEDGE="aftercreateedge",r.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",r.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",r.BEFOREGRAPHREFRESH="beforegraphrefresh",r.AFTERGRAPHREFRESH="aftergraphrefresh",r.BEFOREANIMATE="beforeanimate",r.AFTERANIMATE="afteranimate",r.BEFOREPAINT="beforepaint",r.AFTERPAINT="afterpaint",r.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",r.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",r.GRAPHSTATECHANGE="graphstatechange",r.AFTERACTIVATERELATIONS="afteractivaterelations",r.NODESELECTCHANGE="nodeselectchange",r.TOOLTIPCHANGE="tooltipchange",r.WHEELZOOM="wheelzoom",r.VIEWPORTCHANGE="viewportchange",r.DRAGNODEEND="dragnodeend",r.STACKCHANGE="stackchange",r.TAP="tap",r.PINCHSTART="pinchstart",r.PINCHMOVE="pinchmove",r.PANSTART="panstart",r.PANMOVE="panmove",r.PANEND="panend"})(yd||(yd={}));var _r=zt.registerNode,N0=zt.registerEdge,FC=zt.registerCombo,_0=Sf.registerBehavior,ut=ct;zt.registerNode,zt.registerEdge,zt.registerCombo,Sf.registerBehavior;var qr={};function RC(r){if(qr?.requestAnimationFrame)return qr.requestAnimationFrame(r);var t=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame:function(e){return setTimeout(e,16)};return t(r)}function md(r){if(qr?.clearAnimationFrame)return qr.clearAnimationFrame(r);var t=typeof window=="object"&&window.cancelAnimationFrame?window.cancelAnimationFrame:clearTimeout;return t(r)}function zC(){return typeof window=="object"&&window.devicePixelRatio?window.devicePixelRatio:1}function L0(r,t,e,n){var i=r-e,a=t-n;return Math.sqrt(i*i+a*a)}function Gr(r,t,e,n,i,a){return i>=r&&i<=r+e&&a>=t&&a<=t+n}function Ma(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)}function XC(r,t){return!r||!t?r||t:{minX:Math.min(r.minX,t.minX),minY:Math.min(r.minY,t.minY),maxX:Math.max(r.maxX,t.maxX),maxY:Math.max(r.maxY,t.maxY)}}function bd(r,t){return r[0]===t[0]&&r[1]===t[1]}function YC(r,t){if(r.isCanvas())return!0;for(var e=t.getParent(),n=!1;e;){if(e===r){n=!0;break}e=e.getParent()}return n}var jC=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,HC=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,VC=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,B0=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function D0(r,t){var e=r.match(B0);U(e,function(n){var i=n.split(":");t.addColorStop(i[0],i[1])})}function WC(r,t,e){var n=jC.exec(e),i=parseFloat(n[1])%360*(Math.PI/180),a=n[2],o=t.getBBox(),s,u;i>=0&&i<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=i&&i<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=i&&i<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var l=Math.tan(i),c=l*l,h=(u.x-s.x+l*(u.y-s.y))/(c+1)+s.x,d=l*(u.x-s.x+l*(u.y-s.y))/(c+1)+s.y,f=r.createLinearGradient(s.x,s.y,h,d);return D0(a,f),f}function UC(r,t,e){var n=HC.exec(e),i=parseFloat(n[1]),a=parseFloat(n[2]),o=parseFloat(n[3]),s=n[4];if(o===0){var u=s.match(B0);return u[u.length-1].split(":")[1]}var l=t.getBBox(),c=l.maxX-l.minX,h=l.maxY-l.minY,d=Math.sqrt(c*c+h*h)/2,f=r.createRadialGradient(l.minX+c*i,l.minY+h*a,0,l.minX+c/2,l.minY+h/2,o*d);return D0(s,f),f}function $C(r,t,e){if(t.get("patternSource")&&t.get("patternSource")===e)return t.get("pattern");var n,i,a=VC.exec(e),o=a[1],s=a[2];function u(){n=r.createPattern(i,o),t.set("pattern",n),t.set("patternSource",e)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?u():(i.onload=u,i.src=i.src),n}function qC(r,t,e){if(ot(e)){if(e[1]==="("||e[2]==="("){if(e[0]==="l")return WC(r,t,e);if(e[0]==="r")return UC(r,t,e);if(e[0]==="p")return $C(r,t,e)}return e}}function GC(r){var t=0,e=0,n=0,i=0;return pt(r)?r.length===1?t=e=n=i=r[0]:r.length===2?(t=n=r[0],e=i=r[1]):r.length===3?(t=r[0],e=i=r[1],n=r[2]):(t=r[0],e=r[1],n=r[2],i=r[3]):t=e=n=i=r,[t,e,n,i]}function uo(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function _l(r,t){return uo(r)*uo(t)?(r[0]*t[0]+r[1]*t[1])/(uo(r)*uo(t)):1}function xd(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(_l(r,t))}function Sd(r,t){var e=t[1],n=t[2],i=yf(mf(t[3]),Math.PI*2),a=t[4],o=t[5],s=r[0],u=r[1],l=t[6],c=t[7],h=Math.cos(i)*(s-l)/2+Math.sin(i)*(u-c)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(u-c)/2,f=h*h/(e*e)+d*d/(n*n);f>1&&(e*=Math.sqrt(f),n*=Math.sqrt(f));var v=e*e*(d*d)+n*n*(h*h),p=v?Math.sqrt((e*e*(n*n)-v)/v):1;a===o&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*e*d/n:0,y=e?p*-n*h/e:0,m=(s+l)/2+Math.cos(i)*g-Math.sin(i)*y,b=(u+c)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(h-g)/e,(d-y)/n],S=[(-1*h-g)/e,(-1*d-y)/n],C=xd([1,0],x),w=xd(x,S);return _l(x,S)<=-1&&(w=Math.PI),_l(x,S)>=1&&(w=0),o===0&&w>0&&(w=w-2*Math.PI),o===1&&w<0&&(w=w+2*Math.PI),{cx:m,cy:b,rx:bd(r,[l,c])?0:e,ry:bd(r,[l,c])?0:n,startAngle:C,endAngle:C+w,xRotation:i,arcFlag:a,sweepFlag:o}}var is=Math.sin,as=Math.cos,Wf=Math.atan2,lo=Math.PI;function F0(r,t,e,n,i,a,o){var s=t.stroke,u=t.lineWidth,l=e-i,c=n-a,h=Wf(c,l),d=new Gf({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*as(lo/6)+","+10*is(lo/6)+" L0,0 L"+10*as(lo/6)+",-"+10*is(lo/6),stroke:s,lineWidth:u}});d.translate(i,a),d.rotateAtPoint(i,a,h),r.set(o?"startArrowShape":"endArrowShape",d)}function R0(r,t,e,n,i,a,o){var s=t.startArrow,u=t.endArrow,l=t.stroke,c=t.lineWidth,h=o?s:u,d=h.d,f=h.fill,v=h.stroke,p=h.lineWidth,g=ge(h,["d","fill","stroke","lineWidth"]),y=e-i,m=n-a,b=Wf(m,y);d&&(i=i-as(b)*d,a=a-is(b)*d);var x=new Gf({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:E(E({},g),{stroke:v||l,lineWidth:p||c,fill:f})});x.translate(i,a),x.rotateAtPoint(i,a,b),r.set(o?"startArrowShape":"endArrowShape",x)}function Pn(r,t,e,n,i){var a=Wf(n-t,e-r);return{dx:as(a)*i,dy:is(a)*i}}function Uf(r,t,e,n,i,a){typeof t.startArrow=="object"?R0(r,t,e,n,i,a,!0):t.startArrow?F0(r,t,e,n,i,a,!0):r.set("startArrowShape",null)}function $f(r,t,e,n,i,a){typeof t.endArrow=="object"?R0(r,t,e,n,i,a,!1):t.endArrow?F0(r,t,e,n,i,a,!1):r.set("startArrowShape",null)}var wd={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function yi(r,t){var e=t.attr();for(var n in e){var i=e[n],a=wd[n]?wd[n]:n;a==="matrix"&&i?r.transform(i[0],i[1],i[3],i[4],i[6],i[7]):a==="lineDash"&&r.setLineDash?pt(i)&&r.setLineDash(i):(a==="strokeStyle"||a==="fillStyle"?i=qC(r,t,i):a==="globalAlpha"&&(i=i*r.globalAlpha),r[a]=i)}}function Ll(r,t,e){for(var n=0;n<t.length;n++){var i=t[n];i.cfg.visible?i.draw(r,e):i.skipDraw()}}function KC(r,t,e){var n=r.get("refreshElements");U(n,function(i){if(i!==r)for(var a=i.cfg.parent;a&&a!==r&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),n[0]===r?qf(t):Bl(t,e)}function Bl(r,t){for(var e=0;e<r.length;e++){var n=r[e];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&qf(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&Bl(n.cfg.children,t);else{var i=ZC(n,t);n.cfg.refresh=i,i&&n.isGroup()&&Bl(n.cfg.children,t)}}}function z0(r){for(var t=0;t<r.length;t++){var e=r[t];e.cfg.hasChanged=!1,e.isGroup()&&!e.destroyed&&z0(e.cfg.children)}}function qf(r,t){for(var e=0;e<r.length;e++){var n=r[e];n.cfg.refresh=!0,n.isGroup()&&qf(n.get("children"))}}function ZC(r,t){var e=r.cfg.cacheCanvasBBox,n=r.cfg.isInView&&e&&Ma(e,t);return n}function X0(r,t,e,n){var i=e.path,a=e.startArrow,o=e.endArrow;if(i){var s=[0,0],u=[0,0],l={dx:0,dy:0};t.beginPath();for(var c=0;c<i.length;c++){var h=i[c],d=h[0];if(c===0&&a&&a.d){var f=r.getStartTangent();l=Pn(f[0][0],f[0][1],f[1][0],f[1][1],a.d)}else if(c===i.length-2&&i[c+1][0]==="Z"&&o&&o.d){var v=i[c+1];if(v[0]==="Z"){var f=r.getEndTangent();l=Pn(f[0][0],f[0][1],f[1][0],f[1][1],o.d)}}else if(c===i.length-1&&o&&o.d&&i[0]!=="Z"){var f=r.getEndTangent();l=Pn(f[0][0],f[0][1],f[1][0],f[1][1],o.d)}var p=l.dx,g=l.dy;switch(d){case"M":t.moveTo(h[1]-p,h[2]-g),u=[h[1],h[2]];break;case"L":t.lineTo(h[1]-p,h[2]-g);break;case"Q":t.quadraticCurveTo(h[1],h[2],h[3]-p,h[4]-g);break;case"C":t.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-p,h[6]-g);break;case"A":{var y=void 0;n?(y=n[c],y||(y=Sd(s,h),n[c]=y)):y=Sd(s,h);var m=y.cx,b=y.cy,x=y.rx,S=y.ry,C=y.startAngle,w=y.endAngle,I=y.xRotation,T=y.sweepFlag;if(t.ellipse)t.ellipse(m,b,x,S,I,C,w,1-T);else{var O=x>S?x:S,_=x>S?1:x/S,B=x>S?S/x:1;t.translate(m,b),t.rotate(I),t.scale(_,B),t.arc(0,0,O,C,w,1-T),t.scale(1/_,1/B),t.rotate(-I),t.translate(-m,-b)}break}case"Z":t.closePath();break}if(d==="Z")s=u;else{var z=h.length;s=[h[z-2],h[z-1]]}}}}function Y0(r,t){var e=r.get("canvas");e&&(t==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(e.refreshElement(r,t,e),e.get("autoDraw")&&e.draw())))}function QC(r){var t;if(r.destroyed)t=r._cacheCanvasBBox;else{var e=r.get("cacheCanvasBBox"),n=e&&!!(e.width&&e.height),i=r.getCanvasBBox(),a=i&&!!(i.width&&i.height);n&&a?t=XC(e,i):n?t=e:a&&(t=i)}return t}function JC(r){if(!r.length)return null;var t=[],e=[],n=[],i=[];return U(r,function(a){var o=QC(a);o&&(t.push(o.minX),e.push(o.minY),n.push(o.maxX),i.push(o.maxY))}),{minX:Math.min.apply(null,t),minY:Math.min.apply(null,e),maxX:Math.max.apply(null,n),maxY:Math.max.apply(null,i)}}function tE(r,t){return!r||!t||!Ma(r,t)?null:{minX:Math.max(r.minX,t.minX),minY:Math.max(r.minY,t.minY),maxX:Math.min(r.maxX,t.maxX),maxY:Math.min(r.maxY,t.maxY)}}var j0=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onCanvasChange=function(e){Y0(this,e)},t.prototype.getShapeBase=function(){return $l},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,n){n&&(e.save(),yi(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,n=[],i=[];U(e,function(d){var f=d.cfg.cacheCanvasBBox;f&&d.cfg.isInView&&(n.push(f.minX,f.maxX),i.push(f.minY,f.maxY))});var a=null;if(n.length){var o=Math.min.apply(null,n),s=Math.max.apply(null,n),u=Math.min.apply(null,i),l=Math.max.apply(null,i);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:l,width:s-o,height:l-u};var c=this.cfg.canvas;if(c){var h=c.getViewRange();this.set("isInView",Ma(a,h))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},t.prototype.draw=function(e,n){var i=this.cfg.children,a=n?this.cfg.refresh:!0;i.length&&a&&(e.save(),yi(e,this),this._applyClip(e,this.getClip()),Ll(e,i,n),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t})(sM),er=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return $l},t.prototype.getGroupBase=function(){return j0},t.prototype.onCanvasChange=function(e){Y0(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),n=this.getHitLineWidth(),i=lM(e),a=i(this),o=n/2,s=a.x-o,u=a.y-o,l=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+n,height:a.height+n,maxX:l,maxY:c}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,n){n&&(e.save(),yi(e,n),n.createPath(e),e.restore(),e.clip(),n._afterDraw())},t.prototype.draw=function(e,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Ma(n,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}e.save(),yi(e,this),this._applyClip(e,i),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var n=this.getCanvasBBox(),i=Ma(n,e);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isFill()&&(!St(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.isStroke()&&i>0&&(!St(o)&&o!==1&&(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,n){var i=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,n,i,a,o)},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t})(uM),eE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),u=s.x,l=s.y,c=s.r,h=o/2,d=L0(u,l,e,n);return a&&i?d<=c+h:a?d<=c:i?d>=c-h&&d<=c+h:!1},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.r;e.beginPath(),e.arc(i,a,o,0,Math.PI*2,!1),e.closePath()},t})(er);function fo(r,t,e,n){return r/(e*e)+t/(n*n)}var rE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),u=o/2,l=s.x,c=s.y,h=s.rx,d=s.ry,f=(e-l)*(e-l),v=(n-c)*(n-c);return a&&i?fo(f,v,h+u,d+u)<=1:a?fo(f,v,h,d)<=1:i?fo(f,v,h-u,d-u)>=1&&fo(f,v,h+u,d+u)<=1:!1},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.rx,s=n.ry;if(e.beginPath(),e.ellipse)e.ellipse(i,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,l=o>s?1:o/s,c=o>s?s/o:1;e.save(),e.translate(i,a),e.scale(l,c),e.arc(0,0,u,0,Math.PI*2),e.restore(),e.closePath()}},t})(er);function Md(r){return r instanceof HTMLElement&&ot(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var te=null;function nE(r){te=r}var iE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var n=this,i=this.attrs;if(te?.isMini()&&!te?.isMiniNative()){this.attr("img",e);return}if(ot(e)){var a=null;te?.isMiniNative()?a=te?.get("container").createImage():a=new Image,a.onload=function(){if(n.destroyed)return!1;n.attr("img",a),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},a.crossOrigin="Anonymous",a.src=e,this.set("loading",!0)}else te?.isMiniNative()||e instanceof Image?(i.width||(i.width=e.width),i.height||(i.height=e.height)):Md(e)&&(i.width||(i.width=Number(e.getAttribute("width"))),i.height||(i.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e==="img"&&this._setImage(n)},t.prototype.createPath=function(e){var n=this.attr(),i=n.img,a=n.x,o=n.y,s=n.width,u=n.height,l=n.sx,c=n.sy,h=n.swidth,d=n.sheight;if(this.get("loading")){this.set("toDraw",!0),this.set("context",e);return}if(te?.isMini()){e.drawImage(i,a,o,s,u);return}(i instanceof Image||Md(i))&&(!St(l)&&!St(c)&&!St(h)&&!St(d)?e.drawImage(i,l,c,h,d,a,o,s,u):e.drawImage(i,a,o,s,u))},t})(er);function Kr(r,t,e,n,i,a,o){var s=Math.min(r,e),u=Math.max(r,e),l=Math.min(t,n),c=Math.max(t,n),h=i/2;return a>=s-h&&a<=u+h&&o>=l-h&&o<=c+h?Ce.pointToLine(r,t,e,n,a,o)<=i/2:!1}var aE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.startArrow,u=e.endArrow;s&&Uf(this,e,a,o,n,i),u&&$f(this,e,n,i,a,o)},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr(),u=s.x1,l=s.y1,c=s.x2,h=s.y2;return Kr(u,l,c,h,o,e,n)},t.prototype.createPath=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2,u=n.startArrow,l=n.endArrow,c={dx:0,dy:0},h={dx:0,dy:0};u&&u.d&&(c=Pn(i,a,o,s,n.startArrow.d)),l&&l.d&&(h=Pn(i,a,o,s,n.endArrow.d)),e.beginPath(),e.moveTo(i+c.dx,a+c.dy),e.lineTo(o-h.dx,s-h.dy)},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),n=e.x1,i=e.y1,a=e.x2,o=e.y2;return Ce.length(n,i,a,o)},t.prototype.getPoint=function(e){var n=this.attr(),i=n.x1,a=n.y1,o=n.x2,s=n.y2;return Ce.pointAt(i,a,o,s,e)},t})(er),oE={circle:function(r,t,e){return[["M",r-e,t],["A",e,e,0,1,0,r+e,t],["A",e,e,0,1,0,r-e,t]]},square:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t-e],["L",r+e,t+e],["L",r-e,t+e],["Z"]]},diamond:function(r,t,e){return[["M",r-e,t],["L",r,t-e],["L",r+e,t],["L",r,t+e],["Z"]]},triangle:function(r,t,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",r-e,t+n],["L",r,t-n],["L",r+e,t+n],["Z"]]},"triangle-down":function(r,t,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",r-e,t-n],["L",r+e,t-n],["L",r,t+n],["Z"]]}},sE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),["symbol","x","y","r","radius"].indexOf(e)!==-1&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return St(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e=this.attr(),n=e.x,i=e.y,a=e.symbol||"circle",o=this._getR(e),s,u;if(Jt(a))s=a,u=s(n,i,o),u=S0(u);else{if(s=t.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(n,i,o)}return u},t.prototype.createPath=function(e){var n=this._getPath(),i=this.get("paramsCache");X0(this,e,{path:n},i)},t.Symbols=oE,t})(er),uE=1e-6;function Cu(r){return Math.abs(r)<uE?0:r<0?-1:1}function lE(r,t,e){return(e[0]-r[0])*(t[1]-r[1])===(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}function H0(r,t,e){var n=!1,i=r.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=r[a],s=r[(a+1)%i];if(lE(o,s,[t,e]))return!0;Cu(o[1]-e)>0!=Cu(s[1]-e)>0&&Cu(t-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function fE(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return ws(n,e),ke(r,n,t)}function cE(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return Ms(n,e),ke(r,n,t)}function hE(r,t,e){var n=[0,0,0,0,0,0,0,0,0];return Cs(n,e),ke(r,n,t)}function dE(r,t,e){return ke(r,e,t)}function vE(r,t){for(var e=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,i=t.length;n<i;n++){var a=t[n];switch(a[0]){case"t":fE(e,e,[a[1],a[2]]);break;case"s":hE(e,e,[a[1],a[2]]);break;case"r":cE(e,e,a[1]);break;case"m":dE(e,e,a[1]);break}}return e}function Gi(r,t,e,n,i,a,o,s){var u=(Math.atan2(s-t,o-r)+Math.PI*2)%(Math.PI*2);if(u<n||u>i)return!1;var l={x:r+e*Math.cos(u),y:t+e*Math.sin(u)};return L0(l.x,l.y,o,s)<=a/2}var pE=vE;function gE(r){for(var t=!1,e=r.length,n=0;n<e;n++){var i=r[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){t=!0;break}}return t}function yE(r,t,e,n,i){for(var a=!1,o=t/2,s=0;s<r.length;s++){var u=r[s],l=u.currentPoint,c=u.params,h=u.prePoint,d=u.box;if(!(d&&!Gr(d.x-o,d.y-o,d.width+t,d.height+t,e,n))){switch(u.command){case"L":case"Z":a=Kr(h[0],h[1],l[0],l[1],t,e,n);break;case"Q":var f=g0.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],e,n);a=f<=t/2;break;case"C":var v=aa.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],e,n,i);a=v<=t/2;break;case"A":var p=u.arcParams,g=p.cx,y=p.cy,m=p.rx,b=p.ry,x=p.startAngle,S=p.endAngle,C=p.xRotation,w=[e,n,1],I=m>b?m:b,T=m>b?1:m/b,O=m>b?b/m:1,_=pE(null,[["t",-g,-y],["r",-C],["s",1/T,1/O]]);wf(w,w,_),a=Gi(0,0,I,x,S,t,w[0],w[1]);break}if(a)break}}return a}function mE(r){for(var t=r.length,e=[],n=[],i=[],a=0;a<t;a++){var o=r[a],s=o[0];s==="M"?(i.length&&(n.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(e.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&n.push(i),{polygons:e,polylines:n}}const co=E({hasArc:gE,extractPolygons:mE,isPointInStroke:yE},b2);function Cd(r,t,e){for(var n=!1,i=0;i<r.length;i++){var a=r[i];if(n=H0(a,t,e),n)break}return n}var Gf=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e==="path"&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=S0(e);var n=co.hasArc(e);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=w0(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e=this.attr(),n=e.startArrow,i=e.endArrow;if(n){var a=this.getStartTangent();Uf(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}if(i){var a=this.getEndTangent();$f(this,e,a[0][0],a[0][1],a[1][0],a[1][1])}},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.getSegments();this.get("hasArc");var u=!1;if(i){var l=this.getTotalLength();u=co.isPointInStroke(s,o,e,n,l)}if(!u&&a){var c=this.attr("path"),h=co.extractPolygons(c);u=Cd(h.polygons,e,n)||Cd(h.polylines,e,n)}return u},t.prototype.createPath=function(e){var n=this.attr(),i=this.get("paramsCache");X0(this,e,n,i)},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return St(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,a,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;U(n,function(c,h){e>=c[0]&&e<=c[1]&&(i=(e-c[0])/(c[1]-c[0]),a=h)});var s=o[a];if(St(s)||St(a))return null;var u=s.length,l=o[a+1];return aa.pointAt(s[u-2],s[u-1],l[1],l[2],l[3],l[4],l[5],l[6],i)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",co.pathToCurve(e))},t.prototype._setTcache=function(){var e=0,n=0,i=[],a,o,s,u,l=this.get("curve");if(l){if(U(l,function(c,h){s=l[h+1],u=c.length,s&&(e+=aa.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",e),e===0){this.set("tCache",[]);return}U(l,function(c,h){s=l[h+1],u=c.length,s&&(a=[],a[0]=n/e,o=aa.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),n+=o||0,a[1]=n/e,i.push(a))}),this.set("tCache",i)}},t.prototype.getStartTangent=function(){var e=this.getSegments(),n;if(e.length>1){var i=e[0].currentPoint,a=e[1].currentPoint,o=e[1].startTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([a[0],a[1]]),n.push([i[0],i[1]]))}return n},t.prototype.getEndTangent=function(){var e=this.getSegments(),n=e.length,i;if(n>1){var a=e[n-2].currentPoint,o=e[n-1].currentPoint,s=e[n-1].endTangent;i=[],s?(i.push([o[0]-s[0],o[1]-s[1]]),i.push([o[0],o[1]])):(i.push([a[0],a[1]]),i.push([o[0],o[1]]))}return i},t})(er);function V0(r,t,e,n,i){var a=r.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=r[o][0],u=r[o][1],l=r[o+1][0],c=r[o+1][1];if(Kr(s,u,l,c,t,e,n))return!0}if(i){var h=r[0],d=r[a-1];if(Kr(h[0],h[1],d[0],d[1],t,e,n))return!0}return!1}var bE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr().points,u=!1;return i&&(u=V0(s,o,e,n,!0)),!u&&a&&(u=H0(s,e,n)),u},t.prototype.createPath=function(e){var n=this.attr(),i=n.points;if(!(i.length<2)){e.beginPath();for(var a=0;a<i.length;a++){var o=i[a];a===0?e.moveTo(o[0],o[1]):e.lineTo(o[0],o[1])}e.closePath()}},t})(er),xE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),this.setArrow(),["points"].indexOf(e)!==-1&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),n=this.attrs,i=n.points,a=n.startArrow,o=n.endArrow,s=i.length,u=i[0][0],l=i[0][1],c=i[s-1][0],h=i[s-1][1];a&&Uf(this,e,i[1][0],i[1][1],u,l),o&&$f(this,e,i[s-2][0],i[s-2][1],c,h)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){if(!i||!o)return!1;var s=this.attr().points;return V0(s,o,e,n,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var n=this.attr(),i=n.points,a=n.startArrow,o=n.endArrow,s=i.length;if(!(i.length<2)){var u=i[0][0],l=i[0][1],c=i[s-1][0],h=i[s-1][1];if(a&&a.d){var d=Pn(u,l,i[1][0],i[1][1],a.d);u+=d.dx,l+=d.dy}if(o&&o.d){var d=Pn(i[s-2][0],i[s-2][1],c,h,o.d);c-=d.dx,h-=d.dy}e.beginPath(),e.moveTo(u,l);for(var f=0;f<s-1;f++){var v=i[f];e.lineTo(v[0],v[1])}e.lineTo(c,h)}},t.prototype.afterDrawPath=function(e){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(e),i&&i.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,n=this.get("totalLength");return St(n)?(this.set("totalLength",MM.length(e)),this.get("totalLength")):n},t.prototype.getPoint=function(e){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var a,o;return U(i,function(s,u){e>=s[0]&&e<=s[1]&&(a=(e-s[0])/(s[1]-s[0]),o=u)}),Ce.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],a)},t.prototype._setTcache=function(){var e=this.attr().points;if(!(!e||e.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,a=[],o,s;U(e,function(u,l){e[l+1]&&(o=[],o[0]=i/n,s=Ce.length(u[0],u[1],e[l+1][0],e[l+1][1]),i+=s,o[1]=i/n,a.push(o))}),this.set("tCache",a)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},t.prototype.getEndTangent=function(){var e=this.attr().points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},t})(er);function SE(r,t,e,n,i,a,o){var s=i/2;return Gr(r-s,t-s,e,i,a,o)||Gr(r+e-s,t-s,i,n,a,o)||Gr(r+s,t+n-s,e,i,a,o)||Gr(r-s,t+s,i,n,a,o)}function wE(r,t,e,n,i,a,o,s){return Kr(r+i,t,r+e-i,t,a,o,s)||Kr(r+e,t+i,r+e,t+n-i,a,o,s)||Kr(r+e-i,t+n,r+i,t+n,a,o,s)||Kr(r,t+n-i,r,t+i,a,o,s)||Gi(r+e-i,t+i,i,1.5*Math.PI,2*Math.PI,a,o,s)||Gi(r+e-i,t+n-i,i,0,.5*Math.PI,a,o,s)||Gi(r+i,t+n-i,i,.5*Math.PI,Math.PI,a,o,s)||Gi(r+i,t+i,i,Math.PI,1.5*Math.PI,a,o,s)}var ME=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,n,i,a,o){var s=this.attr(),u=s.x,l=s.y,c=s.width,h=s.height,d=s.radius;if(d){var v=!1;return i&&(v=wE(u,l,c,h,d,o,e,n)),!v&&a&&(v=Gr(u,l,c,h,e,n)),v}else{var f=o/2;if(a&&i)return Gr(u-f,l-f,c+f,h+f,e,n);if(a)return Gr(u,l,c,h,e,n);if(i)return SE(u,l,c,h,o,e,n)}},t.prototype.createPath=function(e){var n=this.attr(),i=n.x,a=n.y,o=n.width,s=n.height,u=n.radius;if(e.beginPath(),u===0)e.rect(i,a,o,s);else{var l=GC(u),c=l[0],h=l[1],d=l[2],f=l[3];e.moveTo(i+c,a),e.lineTo(i+o-h,a),h!==0&&e.arc(i+o-h,a+h,h,-Math.PI/2,0),e.lineTo(i+o,a+s-d),d!==0&&e.arc(i+o-d,a+s-d,d,0,Math.PI/2),e.lineTo(i+f,a+s),f!==0&&e.arc(i+f,a+s-f,f,Math.PI/2,Math.PI),e.lineTo(i,a+c),c!==0&&e.arc(i+c,a+c,c,Math.PI,Math.PI*1.5),e.closePath()}},t})(er),CE=(function(r){Xt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return E(E({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=x0(e)},t.prototype._setText=function(e){var n=null;ot(e)&&e.indexOf(`
`)!==-1&&(n=e.split(`
`)),this.set("textArr",n)},t.prototype.onAttrChange=function(e,n,i){r.prototype.onAttrChange.call(this,e,n,i),e.startsWith("font")&&this._assembleFont(),e==="text"&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,n=e.lineHeight,i=e.fontSize*1;return n?n-i:i*.14},t.prototype._drawTextArr=function(e,n,i){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,l=a.fontSize*1,c=this._getSpaceingY(),h=b0(a.text,a.fontSize,a.lineHeight),d;U(n,function(f,v){d=u+v*(c+l)-h+l,o==="middle"&&(d+=h-l-(h-l)/2),o==="top"&&(d+=h-l),i?e.fillText(f,s,d):e.strokeText(f,s,d)})},t.prototype._drawText=function(e,n){var i=this.attr(),a=i.x,o=i.y,s=this.get("textArr");if(s)this._drawTextArr(e,s,n);else{var u=i.text;n?e.fillText(u,a,o):e.strokeText(u,a,o)}},t.prototype.strokeAndFill=function(e){var n=this.attrs,i=n.lineWidth,a=n.opacity,o=n.strokeOpacity,s=n.fillOpacity;this.isStroke()&&i>0&&(!St(o)&&o!==1&&(e.globalAlpha=a),this.stroke(e)),this.isFill()&&(!St(s)&&s!==1?(e.globalAlpha=s,this.fill(e),e.globalAlpha=a):this.fill(e)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t})(er);function EE(r,t){if(t){var e=qg(t);return Mn(e,r)}return r}function W0(r,t,e){var n=r.getTotalMatrix();if(n){var i=EE([t,e,1],n),a=i[0],o=i[1];return[a,o]}return[t,e]}function Ed(r,t,e){if(r.isCanvas&&r.isCanvas())return!0;if(!pl(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var n=W0(r,t,e),i=n[0],a=n[1];if(r.isClipped(i,a))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&e>=o.minY&&e<=o.maxY}function U0(r,t,e){if(!Ed(r,t,e))return null;for(var n=null,i=r.getChildren(),a=i.length,o=a-1;o>=0;o--){var s=i[o];if(s.isGroup())n=U0(s,t,e);else if(Ed(s,t,e)){var u=s,l=W0(s,t,e),c=l[0],h=l[1];u.isInShape(c,h)&&(n=s)}if(n)break}return n}function $0(r,t){return r===void 0?t:r}function AE(){let r={};return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(t=>r[t]=!0),r}const q0="compute",G0="auto",Dl="manipulation",Tn="none",Ca="pan-x",Ea="pan-y",Eu=AE(),Kf="touch",kE="pen",OE="mouse",IE="kinect",PE=25,vr=1,Is=2,Fe=4,pr=8,os=1,Ta=2,Na=4,_a=8,La=16,gr=Ta|Na,Fn=_a|La,K0=gr|Fn,Z0=["x","y"],ss=["clientX","clientY"],Bo=1,je=2,mi=4,Jr=8,Ar=Jr,Aa=16,fr=32;let Fl;typeof Object.assign!="function"?Fl=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");let t=Object(r);for(let e=1;e<arguments.length;e++){const n=arguments[e];if(n!=null)for(const i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}:Fl=Object.assign;const tn=Fl;let TE=1;function NE(){return TE++}function kr(r,t,e){let n;if(r)if(r.forEach)r.forEach(t,e);else if(r.length!==void 0)for(n=0;n<r.length;)t.call(e,r[n],n,r),n++;else for(n in r)r.hasOwnProperty(n)&&t.call(e,r[n],n,r)}function ni(r,t,e){return Array.isArray(r)?(kr(r,e[t],e),!0):!1}function Rn(r,t,e){if(r.indexOf&&!e)return r.indexOf(t);{let n=0;for(;n<r.length;){if(e&&r[n][e]==t||!e&&r[n]===t)return n;n++}return-1}}const _E="function",{round:ii,abs:zn}=Math,{now:Zf}=Date;function Ps(r,t){return typeof r===_E?r.apply(t&&t[0]||void 0,t):r}function ho(r,t){let{manager:e}=t;return e?e.get(r):r}function Ad(r){return r&Aa?"cancel":r&Jr?"end":r&mi?"move":r&je?"start":""}class wi{constructor(t){this.options=tn({},this.defaults,t||{}),this.id=NE(),this.manager=null,this.options.enable=$0(this.options.enable,!0),this.state=Bo,this.simultaneous={},this.requireFail=[]}set(t){return tn(this.options,t),this.manager&&this.manager.touchAction.update(),this}recognizeWith(t){if(ni(t,"recognizeWith",this))return this;let{simultaneous:e}=this;return t=ho(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this}dropRecognizeWith(t){return ni(t,"dropRecognizeWith",this)?this:(t=ho(t,this),delete this.simultaneous[t.id],this)}requireFailure(t){if(ni(t,"requireFailure",this))return this;let{requireFail:e}=this;return t=ho(t,this),Rn(e,t)===-1&&(e.push(t),t.requireFailure(this)),this}dropRequireFailure(t){if(ni(t,"dropRequireFailure",this))return this;t=ho(t,this);let e=Rn(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this}hasRequireFailures(){return this.requireFail.length>0}canRecognizeWith(t){return!!this.simultaneous[t.id]}emit(t){let e=this,{state:n}=this;function i(a){e.manager.emit(a,t)}n<Jr&&i(e.options.event+Ad(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=Jr&&i(e.options.event+Ad(n))}tryEmit(t){if(this.canEmit())return this.emit(t);this.state=fr}canEmit(){let t=0;for(;t<this.requireFail.length;){if(!(this.requireFail[t].state&(fr|Bo)))return!1;t++}return!0}recognize(t){let e=tn({},t);if(!Ps(this.options.enable,[this,e])){this.reset(),this.state=fr;return}this.state&(Ar|Aa|fr)&&(this.state=Bo),this.state=this.process(e),this.state&(je|mi|Jr|Aa)&&this.tryEmit(e)}process(t){}getTouchAction(){}reset(){}}wi.prototype.defaults={};class Xn extends wi{constructor(){super(...arguments)}attrTest(t){let e=this.options.pointers;return e===0||t.pointers.length===e}process(t){let{state:e}=this,{eventType:n}=t,i=e&(je|mi),a=this.attrTest(t);return i&&(n&pr||!a)?e|Aa:i||a?n&Fe?e|Jr:e&je?e|mi:je:fr}}Xn.prototype.defaults={pointers:1};class Qf extends Xn{constructor(){super(...arguments)}getTouchAction(){return[Tn]}attrTest(t){return super.attrTest(t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&je)}}Qf.prototype.defaults={event:"rotate",threshold:0,pointers:2};class Jf extends Xn{constructor(){super(...arguments)}getTouchAction(){return[Tn]}attrTest(t){return super.attrTest(t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&je)}emit(t){if(t.scale!==1){let e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}super.emit(t)}}Jf.prototype.defaults={event:"pinch",threshold:0,pointers:2};function Q0(r){return r===La?"down":r===_a?"up":r===Ta?"left":r===Na?"right":""}class Ts extends Xn{constructor(){super(...arguments),this.pX=null,this.pY=null}getTouchAction(){let{options:{direction:t}}=this,e=[];return t&gr&&e.push(Ea),t&Fn&&e.push(Ca),e}directionTest(t){let{options:e}=this,n=!0,{distance:i}=t,{direction:a}=t,o=t.deltaX,s=t.deltaY;return a&e.direction||(e.direction&gr?(a=o===0?os:o<0?Ta:Na,n=o!==this.pX,i=Math.abs(t.deltaX)):(a=s===0?os:s<0?_a:La,n=s!==this.pY,i=Math.abs(t.deltaY))),t.direction=a,n&&i>e.threshold&&a&e.direction}attrTest(t){return Xn.prototype.attrTest.call(this,t)&&(this.state&je||!(this.state&je)&&this.directionTest(t))}emit(t){this.pX=t.deltaX,this.pY=t.deltaY;let e=Q0(t.direction);e&&(t.additionalEvent=this.options.event+e),super.emit(t)}}Ts.prototype.defaults={event:"pan",threshold:10,pointers:1,direction:K0};class tc extends Xn{constructor(){super(...arguments)}getTouchAction(){return Ts.prototype.getTouchAction.call(this)}attrTest(t){let{direction:e}=this.options,n;return e&(gr|Fn)?n=t.overallVelocity:e&gr?n=t.overallVelocityX:e&Fn&&(n=t.overallVelocityY),super.attrTest(t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers===this.options.pointers&&zn(n)>this.options.velocity&&t.eventType&Fe}emit(t){let e=Q0(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}tc.prototype.defaults={event:"swipe",threshold:10,velocity:.3,direction:gr|Fn,pointers:1};function J0(r,t){return function(){return r.apply(t,arguments)}}function Rl(r,t,e){return setTimeout(J0(r,e),t)}function us(r,t,e){e||(e=Z0);let n=t[e[0]]-r[e[0]],i=t[e[1]]-r[e[1]];return Math.sqrt(n*n+i*i)}class ls extends wi{constructor(){super(...arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[Dl]}process(t){let{options:e}=this,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime<e.time;if(this.reset(),t.eventType&vr&&this.count===0)return this.failTimeout();if(i&&a&&n){if(t.eventType!==Fe)return this.failTimeout();let o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,s=!this.pCenter||us(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,!s||!o?this.count=1:this.count+=1,this._input=t,this.count%e.taps===0)return this.hasRequireFailures()?(this._timer=Rl(()=>{this.state=Ar,this.tryEmit()},e.interval,this),je):Ar}return fr}failTimeout(){return this._timer=Rl(()=>{this.state=fr},this.options.interval,this),fr}reset(){clearTimeout(this._timer),this._timer=null}emit(){this.state===Ar&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}ls.prototype.defaults={event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10};class ec extends wi{constructor(){super(...arguments),this._timer=null,this._input=null}getTouchAction(){return[G0]}process(t){let{options:e}=this,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,a=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Fe|pr)&&!a)this.reset();else if(t.eventType&vr)this.reset(),this._timer=Rl(()=>{this.state=Ar,this.tryEmit()},e.time,this);else if(t.eventType&Fe)return Ar;return fr}reset(){clearTimeout(this._timer),this._timer=null}emit(t){this.state===Ar&&(t&&t.eventType&Fe?this.manager.emit(`${this.options.event}up`,t):(this._input.timeStamp=Zf(),this.manager.emit(this.options.event,this._input)))}}ec.prototype.defaults={event:"press",pointers:1,time:251,threshold:9};function En(r,t){return r.indexOf(t)>-1}function LE(r){if(En(r,Tn))return Tn;let t=En(r,Ca),e=En(r,Ea);return t&&e?Tn:t||e?t?Ca:Ea:En(r,Dl)?Dl:G0}class ty{constructor(t,e){this.manager=t,this.set(e)}set(t){t===q0&&(t=this.compute()),this.actions=t.toLowerCase().trim()}update(){this.set(this.manager.options.touchAction)}compute(){let t=[];return kr(this.manager.recognizers,e=>{Ps(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),LE(t.join(" "))}preventDefaults(t){let{srcEvent:e}=t,n=t.offsetDirection;if(this.manager.session.prevented){e.preventDefault();return}let{actions:i}=this,a=En(i,Tn)&&!Eu[Tn],o=En(i,Ea)&&!Eu[Ea],s=En(i,Ca)&&!Eu[Ca];if(a){let u=t.pointers.length===1,l=t.distance<2,c=t.deltaTime<250;if(u&&l&&c)return}if(!(s&&o)&&(a||o&&n&gr||s&&n&Fn))return this.preventSrc(e)}preventSrc(t){this.manager.session.prevented=!0,t.preventDefault()}}function BE(r,t){for(;r;){if(r===t)return!0;r=r.parentNode}return!1}function ey(r){let t=r.length;if(t===1)return{x:ii(r[0].clientX),y:ii(r[0].clientY)};let e=0,n=0,i=0;for(;i<t;)e+=r[i].clientX,n+=r[i].clientY,i++;return{x:ii(e/t),y:ii(n/t)}}function kd(r){let t=[],e=0;for(;e<r.pointers.length;)t[e]={clientX:ii(r.pointers[e].clientX),clientY:ii(r.pointers[e].clientY)},e++;return{timeStamp:Zf(),pointers:t,center:ey(t),deltaX:r.deltaX,deltaY:r.deltaY}}function zl(r,t,e){e||(e=Z0);let n=t[e[0]]-r[e[0]],i=t[e[1]]-r[e[1]];return Math.atan2(i,n)*180/Math.PI}function ry(r,t){return r===t?os:zn(r)>=zn(t)?r<0?Ta:Na:t<0?_a:La}function DE(r,t){let{center:e}=t,n=r.offsetDelta||{},i=r.prevDelta||{},a=r.prevInput||{};(t.eventType===vr||a.eventType===Fe)&&(i=r.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=r.offsetDelta={x:e.x,y:e.y}),t.deltaX=i.x+(e.x-n.x),t.deltaY=i.y+(e.y-n.y)}function ny(r,t,e){return{x:t/r||0,y:e/r||0}}function FE(r,t){return us(t[0],t[1],ss)/us(r[0],r[1],ss)}function RE(r,t){return zl(t[1],t[0],ss)+zl(r[1],r[0],ss)}function zE(r,t){let e=r.lastInterval||t,n=t.timeStamp-e.timeStamp,i,a,o,s;if(t.eventType!==pr&&(n>PE||e.velocity===void 0)){let u=t.deltaX-e.deltaX,l=t.deltaY-e.deltaY,c=ny(n,u,l);a=c.x,o=c.y,i=zn(c.x)>zn(c.y)?c.x:c.y,s=ry(u,l),r.lastInterval=t}else i=e.velocity,a=e.velocityX,o=e.velocityY,s=e.direction;t.velocity=i,t.velocityX=a,t.velocityY=o,t.direction=s}function XE(r,t){let{session:e}=r,{pointers:n}=t,{length:i}=n;e.firstInput||(e.firstInput=kd(t)),i>1&&!e.firstMultiple?e.firstMultiple=kd(t):i===1&&(e.firstMultiple=!1);let{firstInput:a,firstMultiple:o}=e,s=o?o.center:a.center,u=t.center=ey(n);t.timeStamp=Zf(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=zl(s,u),t.distance=us(s,u),DE(e,t),t.offsetDirection=ry(t.deltaX,t.deltaY);let l=ny(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=zn(l.x)>zn(l.y)?l.x:l.y,t.scale=o?FE(o.pointers,n):1,t.rotation=o?RE(o.pointers,n):0,t.maxPointers=e.prevInput?t.pointers.length>e.prevInput.maxPointers?t.pointers.length:e.prevInput.maxPointers:t.pointers.length,zE(e,t)}function YE(r,t,e){let n=e.pointers.length,i=e.changedPointers.length,a=t&vr&&n-i===0,o=t&(Fe|pr)&&n-i===0;e.isFirst=!!a,e.isFinal=!!o,a&&(r.session={}),e.eventType=t,XE(r,e),r.emit("hammer.input",e),r.recognize(e),r.session.prevInput=e}function bi(r){return r.trim().split(/\s+/g)}function Od(r,t,e){kr(bi(t),n=>{r.addEventListener(n,e,!1)})}function jE(r,t,e){kr(bi(t),n=>{r.on(`origin_input:${n}`,e)})}class rc{constructor(t,e){let n=this;this.manager=t,this.callback=e,this.eventHandler=function(i){Ps(t.options.enable,[t])&&n.handler(i)},this.init()}handler(){}init(){jE(this.manager,this.events||"",this.eventHandler)}destroy(){removeManagerListeners(this.manager,this.events||"",this.eventHandler)}}function Xl(r){return Array.prototype.slice.call(r,0)}function iy(r,t,e){let n=[],i=[],a=0;for(;a<r.length;){let o=t?r[a][t]:r[a];Rn(i,o)<0&&n.push(r[a]),i[a]=o,a++}return e&&(t?n=n.sort((o,s)=>o[t]>s[t]):n=n.sort()),n}const HE={touchstart:vr,touchmove:Is,touchend:Fe,touchcancel:pr},Au="touchstart touchmove touchend touchcancel";class Nn extends rc{constructor(){Nn.prototype.evTarget=Au,Nn.prototype.targetIds={},Nn.prototype.events=Au,super(...arguments),this.evTarget=Au,this.targetIds={}}handler(t){let e=HE[t.type],n=VE.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Kf,srcEvent:t})}}function VE(r,t){let e=Xl(r.touches),{targetIds:n}=this;if(t&(vr|Is)&&e.length===1)return n[e[0].identifier]=!0,[e,e];let i,a,o=Xl(r.changedTouches),s=[];if(a=e,t===vr)for(i=0;i<a.length;)n[a[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&s.push(o[i]),t&(Fe|pr)&&delete n[o[i].identifier],i++;if(s.length)return[iy(a.concat(s),"identifier",!0),s]}function WE(r){let t=Nn;return r.options.inputClass&&(t=inputClass),new t(r,YE)}const UE=1,Id=2;class ay{constructor(t){this.options=tn({},Ba.defaults,t||{}),this.handlers={},this.filters=[],this.session={},this.recognizers=[],this.input=WE(this),this.touchAction=new ty(this,this.options.touchAction),kr(this.options.recognizers,e=>{let n=this.add(new e[0](e[1]));e[2]&&n.recognizeWith(e[2]),e[3]&&n.requireFailure(e[3])},this)}set(t){return tn(this.options,t),t.touchAction&&this.touchAction.update(),this}stop(t){this.session.stopped=t?Id:UE}addFilter(t){if(typeof t!="function")throw new Error("filter must be a function");this.filters.push(t)}recognize(t){let{session:e}=this;if(e.stopped)return;this.touchAction.preventDefaults(t);let n,{recognizers:i}=this,{curRecognizer:a}=e;(!a||a&&a.state&Ar)&&(a=e.curRecognizer=null);let o=0;for(;o<i.length;)n=i[o],e.stopped!==Id&&(!a||n===a||n.canRecognizeWith(a))?n.recognize(t):n.reset(),!a&&n.state&(je|mi|Jr)&&(a=e.curRecognizer=n),o++}get(t){if(t instanceof wi)return t;let{recognizers:e}=this;for(let n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null}add(t){if(ni(t,"add",this))return this;let e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t}remove(t){if(ni(t,"remove",this))return this;if(t=this.get(t),t){let{recognizers:e}=this,n=Rn(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update())}return this}on(t,e){if(t===void 0||e===void 0)return;let{handlers:n}=this;return kr(bi(t),i=>{n[i]=n[i]||[],n[i].push(e)}),this}off(t,e){if(t===void 0)return;let{handlers:n}=this;return kr(bi(t),i=>{e?n[i]&&n[i].splice(Rn(n[i],e),1):delete n[i]}),this}emit(t,e){let n=this.handlers[t]&&this.handlers[t].slice();if(!n||!n.length)return;t.startsWith("origin_input")||(e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault&&e.srcEvent.preventDefault()});let i=0;for(;i<n.length;)n[i](e),i++}destroy(){this.handlers={},this.filters=[],this.session={},this.input.destroy()}}class Ba{constructor(t){return t=t||{},t.recognizers=$0(t.recognizers,Ba.defaults.preset),new ay(t)}}Ba.defaults={domEvents:!1,touchAction:q0,enable:!0,inputClass:null,preset:[[Qf,{enable:!1}],[Jf,{enable:!1},["rotate"]],[tc,{direction:gr}],[Ts,{direction:gr},["swipe"]],[ls],[ls,{event:"doubletap",taps:2},["tap"]],[ec]]};const $E={pointerdown:vr,pointermove:Is,pointerup:Fe,pointercancel:pr,pointerout:pr},qE={2:Kf,3:kE,4:OE,5:IE};let Pd="pointerdown",Td="pointermove pointerup pointercancel";class nc extends rc{constructor(){nc.prototype.events=`${Pd} ${Td}`,super(...arguments),this.evEl=Pd,this.evWin=Td,this.store=this.manager.session.pointerEvents=[]}handler(t){let{store:e}=this,n=!1,i=t.type.toLowerCase().replace("ms",""),a=$E[i],o=qE[t.pointerType]||t.pointerType,s=o===Kf,u=Rn(e,t.pointerId,"pointerId");a&vr&&(t.button===0||s)?u<0&&(e.push(t),u=e.length-1):a&(Fe|pr)&&(n=!0),!(u<0)&&(e[u]=t,this.callback(this.manager,a,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(u,1))}}function Nd(r,t,e){kr(bi(t),n=>{r.removeEventListener(n,e,!1)})}function oy(r,t,e){let n=`DEPRECATED METHOD: ${t}
${e} AT 
`;return function(){let i=new Error("get-stack-trace"),a=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=console.warn;return o&&o(n,a),r.apply(this,arguments)}}const sy=oy((r,t,e)=>{let n=Object.keys(t),i=0;for(;i<n.length;)(!e||e&&r[n[i]]===void 0)&&(r[n[i]]=t[n[i]]),i++;return r},"extend","Use `assign`."),GE=oy((r,t)=>sy(r,t,!0),"merge","Use `assign`.");function KE(r,t,e){let n=t.prototype,i;i=r.prototype=Object.create(n),i.constructor=r,i._super=n,e&&tn(i,e)}const gn=tn(Ba,{INPUT_START:vr,INPUT_MOVE:Is,INPUT_END:Fe,INPUT_CANCEL:pr,STATE_POSSIBLE:Bo,STATE_BEGAN:je,STATE_CHANGED:mi,STATE_ENDED:Jr,STATE_RECOGNIZED:Ar,STATE_CANCELLED:Aa,STATE_FAILED:fr,DIRECTION_NONE:os,DIRECTION_LEFT:Ta,DIRECTION_RIGHT:Na,DIRECTION_UP:_a,DIRECTION_DOWN:La,DIRECTION_HORIZONTAL:gr,DIRECTION_VERTICAL:Fn,DIRECTION_ALL:K0,Manager:ay,Input:rc,TouchAction:ty,TouchInput:Nn,PointerEventInput:nc,Recognizer:wi,AttrRecognizer:Xn,Tap:ls,Pan:Ts,Swipe:tc,Pinch:Jf,Rotate:Qf,Press:ec,on:Od,off:Nd,each:kr,merge:GE,extend:sy,assign:tn,inherit:KE,bindFn:J0,toArray:Xl,inArray:Rn,uniqueArray:iy,splitStr:bi,boolOrFn:Ps,hasParent:BE,addEventListeners:Od,removeEventListeners:Nd});var ZE=40;function _d(r,t,e){e.name=t,e.target=r,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}function QE(r,t,e){if(e.bubbles){var n=void 0,i=!1;if(r.isCanvas()&&i)return;if(n&&YC(r,n)){e.bubbles=!1;return}e.name=t,e.currentTarget=r,e.delegateTarget=r,r.emit(t,e)}}var JE=(function(){function r(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.panstartShape=null,this.panstartPoint=null,this.handleEvent=function(n){e.hammerRuntime.emit("origin_input:"+n.type,n)},this.canvas=t.canvas,this._initEvent()}return r.prototype._initEvent=function(){var t=this;this.hammerRuntime=new gn({},{inputClass:Nn}),this.hammerRuntime.add(new gn.Pan({threshold:0,pointers:1})),this.hammerRuntime.add(new gn.Swipe).recognizeWith(this.hammerRuntime.get("pan")),this.hammerRuntime.add(new gn.Pinch({threshold:0,pointers:2})),this.hammerRuntime.add(new gn.Tap({event:"dbltap",taps:2})),this.hammerRuntime.add(new gn.Tap),this.hammerRuntime.add(new gn.Press({time:500})),this.hammerRuntime.on("panstart panmove panend pancancel",function(e){e.srcEvent.extra=e;var n=t._getPointInfo(e),i=t._getShape(n,e);(e.type==="panend"||e.type==="pancancel")&&t._onpanend(n,i,e),e.type==="panstart"&&(t.dragging&&(t.draggingShape=null,t.dragging=!1,t.panstartShape=null,t.panstartPoint=null),t._onpanstart(n,i,e)),e.type==="panmove"&&t._onpanmove(n,i,e),t.currentShape=i}),this.hammerRuntime.on("tap dbltap press swipe rotatestart rotatemove",function(e){t._emitMobileEvent(e.type,e)}),this.hammerRuntime.on("pinchstart pinchmove pinchend pinchcancel",function(e){if(e.type==="pinchend"||e.type==="pinchcancel"){t._emitMobileEvent(e.type,e);return}e.srcEvent.extra={scale:e.scale},t._emitMobileEvent(e.type,e)})},r.prototype._emitMobileEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e);this._emitEvent(t,e,n,i)},r.prototype._getEventObj=function(t,e,n,i,a,o){var s=new Bf(t,e);return s.fromShape=a,s.toShape=o,s.x=n.x,s.y=n.y,s.clientX=n.clientX,s.clientY=n.clientY,s.propagationPath.push(i),s},r.prototype._getShape=function(t,e){var n=e.srcEvent;return this.canvas.getShape(t.x,t.y,n)},r.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),i=e.getPointByEvent(t);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e),a=this["_on"+t];if(a)a.call(this,n,i,e);else{var o=this.currentShape;t==="panstart"||t==="dragenter"?(this._emitEvent(t,e,n,null,null,i),i&&this._emitEvent(t,e,n,i,null,i),t==="panstart"&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):t==="panend"||t==="dragleave"?(o&&this._emitEvent(t,e,n,o,o,null),this._emitEvent(t,e,n,null,o,null),t==="panend"&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,i,null,null)}},r.prototype._onpanstart=function(t,e,n){this.panstartShape=e,this.panstartPoint=t,this.panstartTimeStamp=n.timeStamp,this._emitEvent("panstart",n,t,e,null,null)},r.prototype._emitDragoverEvents=function(t,e,n,i,a){i?(i!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,i),this._emitEvent("dragenter",t,e,i,n,i)),a||this._emitEvent("dragover",t,e,i)):n&&this._emitEvent("dragleave",t,e,n,n,i),a&&this._emitEvent("dragover",t,e,i)},r.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);this.currentShape=i},r.prototype._onpanend=function(t,e,n){var i=this.draggingShape;this.dragging&&(i&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,i),this._afterDrag(i,t,n)),this._emitEvent("panend",n,t,e),this.panstartShape=null,this.panstartPoint=null},r.prototype._onpanmove=function(t,e,n){var i=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,a,e,!1),this._emitEvent("drag",n,t,o);else{var s=this.panstartPoint;if(s){var u=this.panstartShape,l=n.timeStamp,c=l-this.panstartTimeStamp,h=s.clientX-t.clientX,d=s.clientY-t.clientY,f=h*h+d*d;(c>120||f>ZE)&&(u&&u.get("draggable")?(o=this.panstartShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.panstartShape=null,this.panstartPoint=null):!u&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.panstartShape=null,this.panstartPoint=null):this._emitEvent("panmove",n,t,e))}}this._emitEvent("panmove",n,t,e)},r.prototype._emitEvent=function(t,e,n,i,a,o){var s=this._getEventObj(t,e,n,i,a,o);if(i){s.shape=i,_d(i,t,s);for(var u=i.getParent();u;)u.emitDelegation(t,s),s.propagationStopped||QE(u,t,s),s.propagationPath.push(u),u=u.getParent()}else{var l=this.canvas;_d(l,t,s)}},r.prototype.destroy=function(){this.canvas=null,this.currentShape=null,this.draggingShape=null,this.panstartPoint=null,this.panstartShape=null,this.panstartTimeStamp=null},r})(),tA=(function(){function r(){}return r.prototype.set=function(t,e,n){switch(e){case"strokeStyle":t.setStrokeStyle(n);break;case"fillStyle":t.setFillStyle(n);break;case"lineWidth":t.setLineWidth(n);break;case"lineDash":t.setLineDash(n);break;case"globalAlpha":(n||n===0)&&(t.globalAlpha=n,t.setGlobalAlpha(n));break;case"fontSize":t.setFontSize(n);break;case"textAlign":t.setTextAlign(n);break;case"fontStyle":case"font":t.setFont(n);break;case"textBaseline":t.setTextBaseline(n);break;default:t[e]=n}return!0},r.prototype.get=function(t,e){return e==="globalAlpha"&&t[e]===void 0?1:typeof t[e]=="function"?t[e].bind(t):t[e]},r})();function uy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function eA(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var t=r.default;if(typeof t=="function"){var e=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var We={},ku={};const rA=eA(Ix);var Ld;function nA(){return Ld||(Ld=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.isAllowCapture=r.isParent=r.isBrowser=r.removeFromArray=void 0;function t(a,o){var s=a.indexOf(o);s!==-1&&a.splice(s,1)}r.removeFromArray=t,r.isBrowser=typeof window<"u"&&typeof window.document<"u";var e=rA;Object.defineProperty(r,"isNil",{enumerable:!0,get:function(){return e.isNil}}),Object.defineProperty(r,"isFunction",{enumerable:!0,get:function(){return e.isFunction}}),Object.defineProperty(r,"isString",{enumerable:!0,get:function(){return e.isString}}),Object.defineProperty(r,"isObject",{enumerable:!0,get:function(){return e.isObject}}),Object.defineProperty(r,"isArray",{enumerable:!0,get:function(){return e.isArray}}),Object.defineProperty(r,"mix",{enumerable:!0,get:function(){return e.mix}}),Object.defineProperty(r,"each",{enumerable:!0,get:function(){return e.each}}),Object.defineProperty(r,"upperFirst",{enumerable:!0,get:function(){return e.upperFirst}});function n(a,o){if(a.isCanvas())return!0;for(var s=o.getParent(),u=!1;s;){if(s===a){u=!0;break}s=s.getParent()}return u}r.isParent=n;function i(a){return a.cfg.visible&&a.cfg.capture}r.isAllowCapture=i})(ku)),ku}var Bi={},Bd;function iA(){if(Bd)return Bi;Bd=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.getOffScreenContext=void 0;var r=null;function t(){if(!r){var e=document.createElement("canvas");e.width=1,e.height=1,r=e.getContext("2d")}return r}return Bi.getOffScreenContext=t,Bi}var Dd;function aA(){if(Dd)return We;Dd=1,Object.defineProperty(We,"__esModule",{value:!0}),We.assembleFont=We.getTextWidth=We.getLineSpaceing=We.getTextHeight=void 0;var r=nA(),t=iA();function e(o,s,u){var l=1;if(r.isString(o)&&(l=o.split(`
`).length),l>1){var c=n(s,u);return s*l+c*(l-1)}return s}We.getTextHeight=e;function n(o,s){return s?s-o:o*.14}We.getLineSpaceing=n;function i(o,s){var u=t.getOffScreenContext(),l=0;if(r.isNil(o)||o==="")return l;if(u.save(),u.font=s,r.isString(o)&&o.includes(`
`)){var c=o.split(`
`);r.each(c,function(h){var d=u.measureText(h).width;l<d&&(l=d)})}else l=u.measureText(o).width;return u.restore(),l}We.getTextWidth=i;function a(o){var s=o.fontSize,u=o.fontFamily,l=o.fontWeight,c=o.fontStyle,h=o.fontVariant;return[c,h,l,s+"px",u].join(" ").trim()}return We.assembleFont=a,We}var Fd=aA(),ei=null;function oA(r){ei=r}function sA(r,t){var e=0;if(St(r)||r==="")return e;if(ei.save(),ei.font=t,ot(r)&&r.includes(`
`)){var n=r.split(`
`);U(n,function(i){var a=ei.measureText(i).width;e<a&&(e=a)})}else e=ei.measureText(r).width;return ei.restore(),e}function uA(r){var t=r.attr(),e=t.x,n=t.y,i=t.text,a=t.fontSize,o=t.lineHeight,s=t.font;s||(s=Fd.assembleFont(t));var u=sA(i,s),l;if(!u)l={x:e,y:n,width:0,height:0};else{var c=t.textAlign,h=t.textBaseline,d=Fd.getTextHeight(i,a,o),f={x:e,y:n-d};c&&(c==="end"||c==="right"?f.x-=u:c==="center"&&(f.x-=u/2)),h&&(h==="top"?f.y+=d:h==="middle"&&(f.y+=d/2)),l={x:f.x,y:f.y,width:u,height:d}}return l}const lA=(function(r){oA(r),tr("text",uA)}),fA=(function(r,t){nE(t),lA(r)});var vo=(function(r){Xt(t,r);function t(e){var n=r.call(this,e)||this,i=n.get("context");return n.isMini()&&(n.isMiniNative()?(n.get("container"),void 0):n.set("context",new Proxy(i,new tA)),fA(i,n)),n}return t.prototype.isMiniNative=function(){return this.get("renderer")==="mini-native"},t.prototype.isMini=function(){return this.get("renderer").startsWith("mini")},t.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e.boundingClientRect={width:0,height:0,left:0,top:0,bottom:0,right:0},e},t.prototype.initEvents=function(){var e=new JE({canvas:this});this.set("eventController",e)},t.prototype.registerEventCallback=function(e){var n=this.get("eventController");n.handleEvent(e)},t.prototype.clearEvents=function(){var e=this.get("eventController");e.destroy()},t.prototype.onCanvasChange=function(e){(e==="attr"||e==="sort"||e==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return $l},t.prototype.getGroupBase=function(){return j0},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||zC();return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.initDom=function(){if(this.isMini()){var e=this.get("context"),n=this.getPixelRatio();n>1&&e.scale(n,n);return}r.prototype.initDom.call(this)},t.prototype.createDom=function(){var e=document.createElement("canvas"),n=e.getContext("2d");return this.set("context",n),e},t.prototype.setDOMSize=function(e,n){r.prototype.setDOMSize.call(this,e,n);var i=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*e,a.height=o*n,o>1&&i.scale(o,o)},t.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var e=this.get("context");e.clearRect(0,0,this.get("width"),this.get("height"))},t.prototype.getShape=function(e,n){var i;return this.get("quickHit")?i=U0(this,e,n):i=r.prototype.getShape.call(this,e,n,null),i},t.prototype._getRefreshRegion=function(){var e=this.get("refreshElements"),n=this.getViewRange(),i;if(e.length&&e[0]===this)i=n;else if(i=JC(e),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var a=this.get("clipView");a&&(i=tE(i,n))}return i},t.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(md(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._startDraw=function(){var e=this,n=this.get("drawFrame");n||(n=RC(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),md(n),e.set("drawFrame",null)}),this.set("drawFrame",n))},t.prototype._drawRegion=function(){var e=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),a=this._getRefreshRegion();a?(e.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.save(),e.beginPath(),e.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),e.clip(),yi(e,this),KC(this,i,a),Ll(e,i,a),e.restore()):n.length&&z0(n),U(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.isMini()&&!this.isMiniNative()&&e.draw(!0),this.set("refreshElements",[])},t.prototype._drawAll=function(){var e=this.get("context"),n=this.getChildren();e.clearRect(0,0,this.get("width"),this.get("height")),yi(e,this),Ll(e,n),this.isMini()&&!this.isMiniNative()&&e.draw(!0),this.set("refreshElements",[])},t.prototype.skipDraw=function(){},t.prototype.refreshElement=function(e){var n=this.get("refreshElements");n.push(e)},t.prototype.getPointByEvent=function(e){if(this.isMini()){var n=this.getClientByEvent(e),i=n.x,a=n.y;return this.getPointByClient(i,a)}return r.prototype.getPointByEvent.call(this,e)},t.prototype.getClientByEvent=function(e){var n=e.srcEvent,i=null;return n.touches&&(n.type==="touchend"?i=n.changedTouches[0]:i=n.touches[0]),i?{x:i.clientX,y:i.clientY}:{}},t.prototype.getPointByClient=function(e,n){if(this.isMini()){var i=this.get("boundingClientRect");return{x:e+i.left,y:n+i.top}}var a=this.get("el"),o=a.getBoundingClientRect();return{x:e-o.left,y:n-o.top}},t.prototype.removeDom=function(){this.isMini()||r.prototype.removeDom.call(this)},t.prototype.getClientByPoint=function(e,n){if(this.isMini()){var i=this.get("boundingClientRect");return{x:e+i.left,y:n+i.top}}var a=this.get("el"),o=a.getBoundingClientRect();return{x:e+o.left,y:n+o.top}},t})(oM),Ou={exports:{}},Iu,Rd;function ly(){return Rd||(Rd=1,Iu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Iu}var Pu={exports:{}},Tu,zd;function cA(){return zd||(zd=1,Tu=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")}),Tu}var Xd;function hA(){if(Xd)return Pu.exports;Xd=1;var r=cA(),t=Array.prototype.concat,e=Array.prototype.slice,n=Pu.exports=function(a){for(var o=[],s=0,u=a.length;s<u;s++){var l=a[s];r(l)?o=t.call(o,e.call(l)):o.push(l)}return o};return n.wrap=function(i){return function(){return i(n(arguments))}},Pu.exports}var Yd;function dA(){if(Yd)return Ou.exports;Yd=1;var r=ly(),t=hA(),e=Object.hasOwnProperty,n=Object.create(null);for(var i in r)e.call(r,i)&&(n[r[i]]=i);var a=Ou.exports={to:{},get:{}};a.get=function(u){var l=u.substring(0,3).toLowerCase(),c,h;switch(l){case"hsl":c=a.get.hsl(u),h="hsl";break;case"hwb":c=a.get.hwb(u),h="hwb";break;default:c=a.get.rgb(u),h="rgb";break}return c?{model:h,value:c}:null},a.get.rgb=function(u){if(!u)return null;var l=/^#([a-f0-9]{3,4})$/i,c=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,h=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,d=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,f=/^(\w+)$/,v=[0,0,0,1],p,g,y;if(p=u.match(c)){for(y=p[2],p=p[1],g=0;g<3;g++){var m=g*2;v[g]=parseInt(p.slice(m,m+2),16)}y&&(v[3]=parseInt(y,16)/255)}else if(p=u.match(l)){for(p=p[1],y=p[3],g=0;g<3;g++)v[g]=parseInt(p[g]+p[g],16);y&&(v[3]=parseInt(y+y,16)/255)}else if(p=u.match(h)){for(g=0;g<3;g++)v[g]=parseInt(p[g+1],0);p[4]&&(p[5]?v[3]=parseFloat(p[4])*.01:v[3]=parseFloat(p[4]))}else if(p=u.match(d)){for(g=0;g<3;g++)v[g]=Math.round(parseFloat(p[g+1])*2.55);p[4]&&(p[5]?v[3]=parseFloat(p[4])*.01:v[3]=parseFloat(p[4]))}else return(p=u.match(f))?p[1]==="transparent"?[0,0,0,0]:e.call(r,p[1])?(v=r[p[1]],v[3]=1,v):null:null;for(g=0;g<3;g++)v[g]=o(v[g],0,255);return v[3]=o(v[3],0,1),v},a.get.hsl=function(u){if(!u)return null;var l=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=u.match(l);if(c){var h=parseFloat(c[4]),d=(parseFloat(c[1])%360+360)%360,f=o(parseFloat(c[2]),0,100),v=o(parseFloat(c[3]),0,100),p=o(isNaN(h)?1:h,0,1);return[d,f,v,p]}return null},a.get.hwb=function(u){if(!u)return null;var l=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=u.match(l);if(c){var h=parseFloat(c[4]),d=(parseFloat(c[1])%360+360)%360,f=o(parseFloat(c[2]),0,100),v=o(parseFloat(c[3]),0,100),p=o(isNaN(h)?1:h,0,1);return[d,f,v,p]}return null},a.to.hex=function(){var u=t(arguments);return"#"+s(u[0])+s(u[1])+s(u[2])+(u[3]<1?s(Math.round(u[3]*255)):"")},a.to.rgb=function(){var u=t(arguments);return u.length<4||u[3]===1?"rgb("+Math.round(u[0])+", "+Math.round(u[1])+", "+Math.round(u[2])+")":"rgba("+Math.round(u[0])+", "+Math.round(u[1])+", "+Math.round(u[2])+", "+u[3]+")"},a.to.rgb.percent=function(){var u=t(arguments),l=Math.round(u[0]/255*100),c=Math.round(u[1]/255*100),h=Math.round(u[2]/255*100);return u.length<4||u[3]===1?"rgb("+l+"%, "+c+"%, "+h+"%)":"rgba("+l+"%, "+c+"%, "+h+"%, "+u[3]+")"},a.to.hsl=function(){var u=t(arguments);return u.length<4||u[3]===1?"hsl("+u[0]+", "+u[1]+"%, "+u[2]+"%)":"hsla("+u[0]+", "+u[1]+"%, "+u[2]+"%, "+u[3]+")"},a.to.hwb=function(){var u=t(arguments),l="";return u.length>=4&&u[3]!==1&&(l=", "+u[3]),"hwb("+u[0]+", "+u[1]+"%, "+u[2]+"%"+l+")"},a.to.keyword=function(u){return n[u.slice(0,3)]};function o(u,l,c){return Math.min(Math.max(l,u),c)}function s(u){var l=Math.round(u).toString(16).toUpperCase();return l.length<2?"0"+l:l}return Ou.exports}var Nu={exports:{}},jd;function fy(){if(jd)return Nu.exports;jd=1;var r=ly(),t={};for(var e in r)r.hasOwnProperty(e)&&(t[r[e]]=e);var n=Nu.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in n)if(n.hasOwnProperty(i)){if(!("channels"in n[i]))throw new Error("missing channels property: "+i);if(!("labels"in n[i]))throw new Error("missing channel labels property: "+i);if(n[i].labels.length!==n[i].channels)throw new Error("channel and label counts mismatch: "+i);var a=n[i].channels,o=n[i].labels;delete n[i].channels,delete n[i].labels,Object.defineProperty(n[i],"channels",{value:a}),Object.defineProperty(n[i],"labels",{value:o})}n.rgb.hsl=function(u){var l=u[0]/255,c=u[1]/255,h=u[2]/255,d=Math.min(l,c,h),f=Math.max(l,c,h),v=f-d,p,g,y;return f===d?p=0:l===f?p=(c-h)/v:c===f?p=2+(h-l)/v:h===f&&(p=4+(l-c)/v),p=Math.min(p*60,360),p<0&&(p+=360),y=(d+f)/2,f===d?g=0:y<=.5?g=v/(f+d):g=v/(2-f-d),[p,g*100,y*100]},n.rgb.hsv=function(u){var l,c,h,d,f,v=u[0]/255,p=u[1]/255,g=u[2]/255,y=Math.max(v,p,g),m=y-Math.min(v,p,g),b=function(x){return(y-x)/6/m+1/2};return m===0?d=f=0:(f=m/y,l=b(v),c=b(p),h=b(g),v===y?d=h-c:p===y?d=1/3+l-h:g===y&&(d=2/3+c-l),d<0?d+=1:d>1&&(d-=1)),[d*360,f*100,y*100]},n.rgb.hwb=function(u){var l=u[0],c=u[1],h=u[2],d=n.rgb.hsl(u)[0],f=1/255*Math.min(l,Math.min(c,h));return h=1-1/255*Math.max(l,Math.max(c,h)),[d,f*100,h*100]},n.rgb.cmyk=function(u){var l=u[0]/255,c=u[1]/255,h=u[2]/255,d,f,v,p;return p=Math.min(1-l,1-c,1-h),d=(1-l-p)/(1-p)||0,f=(1-c-p)/(1-p)||0,v=(1-h-p)/(1-p)||0,[d*100,f*100,v*100,p*100]};function s(u,l){return Math.pow(u[0]-l[0],2)+Math.pow(u[1]-l[1],2)+Math.pow(u[2]-l[2],2)}return n.rgb.keyword=function(u){var l=t[u];if(l)return l;var c=1/0,h;for(var d in r)if(r.hasOwnProperty(d)){var f=r[d],v=s(u,f);v<c&&(c=v,h=d)}return h},n.keyword.rgb=function(u){return r[u]},n.rgb.xyz=function(u){var l=u[0]/255,c=u[1]/255,h=u[2]/255;l=l>.04045?Math.pow((l+.055)/1.055,2.4):l/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92;var d=l*.4124+c*.3576+h*.1805,f=l*.2126+c*.7152+h*.0722,v=l*.0193+c*.1192+h*.9505;return[d*100,f*100,v*100]},n.rgb.lab=function(u){var l=n.rgb.xyz(u),c=l[0],h=l[1],d=l[2],f,v,p;return c/=95.047,h/=100,d/=108.883,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,f=116*h-16,v=500*(c-h),p=200*(h-d),[f,v,p]},n.hsl.rgb=function(u){var l=u[0]/360,c=u[1]/100,h=u[2]/100,d,f,v,p,g;if(c===0)return g=h*255,[g,g,g];h<.5?f=h*(1+c):f=h+c-h*c,d=2*h-f,p=[0,0,0];for(var y=0;y<3;y++)v=l+1/3*-(y-1),v<0&&v++,v>1&&v--,6*v<1?g=d+(f-d)*6*v:2*v<1?g=f:3*v<2?g=d+(f-d)*(2/3-v)*6:g=d,p[y]=g*255;return p},n.hsl.hsv=function(u){var l=u[0],c=u[1]/100,h=u[2]/100,d=c,f=Math.max(h,.01),v,p;return h*=2,c*=h<=1?h:2-h,d*=f<=1?f:2-f,p=(h+c)/2,v=h===0?2*d/(f+d):2*c/(h+c),[l,v*100,p*100]},n.hsv.rgb=function(u){var l=u[0]/60,c=u[1]/100,h=u[2]/100,d=Math.floor(l)%6,f=l-Math.floor(l),v=255*h*(1-c),p=255*h*(1-c*f),g=255*h*(1-c*(1-f));switch(h*=255,d){case 0:return[h,g,v];case 1:return[p,h,v];case 2:return[v,h,g];case 3:return[v,p,h];case 4:return[g,v,h];case 5:return[h,v,p]}},n.hsv.hsl=function(u){var l=u[0],c=u[1]/100,h=u[2]/100,d=Math.max(h,.01),f,v,p;return p=(2-c)*h,f=(2-c)*d,v=c*d,v/=f<=1?f:2-f,v=v||0,p/=2,[l,v*100,p*100]},n.hwb.rgb=function(u){var l=u[0]/360,c=u[1]/100,h=u[2]/100,d=c+h,f,v,p,g;d>1&&(c/=d,h/=d),f=Math.floor(6*l),v=1-h,p=6*l-f,(f&1)!==0&&(p=1-p),g=c+p*(v-c);var y,m,b;switch(f){default:case 6:case 0:y=v,m=g,b=c;break;case 1:y=g,m=v,b=c;break;case 2:y=c,m=v,b=g;break;case 3:y=c,m=g,b=v;break;case 4:y=g,m=c,b=v;break;case 5:y=v,m=c,b=g;break}return[y*255,m*255,b*255]},n.cmyk.rgb=function(u){var l=u[0]/100,c=u[1]/100,h=u[2]/100,d=u[3]/100,f,v,p;return f=1-Math.min(1,l*(1-d)+d),v=1-Math.min(1,c*(1-d)+d),p=1-Math.min(1,h*(1-d)+d),[f*255,v*255,p*255]},n.xyz.rgb=function(u){var l=u[0]/100,c=u[1]/100,h=u[2]/100,d,f,v;return d=l*3.2406+c*-1.5372+h*-.4986,f=l*-.9689+c*1.8758+h*.0415,v=l*.0557+c*-.204+h*1.057,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d*12.92,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:f*12.92,v=v>.0031308?1.055*Math.pow(v,1/2.4)-.055:v*12.92,d=Math.min(Math.max(0,d),1),f=Math.min(Math.max(0,f),1),v=Math.min(Math.max(0,v),1),[d*255,f*255,v*255]},n.xyz.lab=function(u){var l=u[0],c=u[1],h=u[2],d,f,v;return l/=95.047,c/=100,h/=108.883,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,d=116*c-16,f=500*(l-c),v=200*(c-h),[d,f,v]},n.lab.xyz=function(u){var l=u[0],c=u[1],h=u[2],d,f,v;f=(l+16)/116,d=c/500+f,v=f-h/200;var p=Math.pow(f,3),g=Math.pow(d,3),y=Math.pow(v,3);return f=p>.008856?p:(f-16/116)/7.787,d=g>.008856?g:(d-16/116)/7.787,v=y>.008856?y:(v-16/116)/7.787,d*=95.047,f*=100,v*=108.883,[d,f,v]},n.lab.lch=function(u){var l=u[0],c=u[1],h=u[2],d,f,v;return d=Math.atan2(h,c),f=d*360/2/Math.PI,f<0&&(f+=360),v=Math.sqrt(c*c+h*h),[l,v,f]},n.lch.lab=function(u){var l=u[0],c=u[1],h=u[2],d,f,v;return v=h/360*2*Math.PI,d=c*Math.cos(v),f=c*Math.sin(v),[l,d,f]},n.rgb.ansi16=function(u){var l=u[0],c=u[1],h=u[2],d=1 in arguments?arguments[1]:n.rgb.hsv(u)[2];if(d=Math.round(d/50),d===0)return 30;var f=30+(Math.round(h/255)<<2|Math.round(c/255)<<1|Math.round(l/255));return d===2&&(f+=60),f},n.hsv.ansi16=function(u){return n.rgb.ansi16(n.hsv.rgb(u),u[2])},n.rgb.ansi256=function(u){var l=u[0],c=u[1],h=u[2];if(l===c&&c===h)return l<8?16:l>248?231:Math.round((l-8)/247*24)+232;var d=16+36*Math.round(l/255*5)+6*Math.round(c/255*5)+Math.round(h/255*5);return d},n.ansi16.rgb=function(u){var l=u%10;if(l===0||l===7)return u>50&&(l+=3.5),l=l/10.5*255,[l,l,l];var c=(~~(u>50)+1)*.5,h=(l&1)*c*255,d=(l>>1&1)*c*255,f=(l>>2&1)*c*255;return[h,d,f]},n.ansi256.rgb=function(u){if(u>=232){var l=(u-232)*10+8;return[l,l,l]}u-=16;var c,h=Math.floor(u/36)/5*255,d=Math.floor((c=u%36)/6)/5*255,f=c%6/5*255;return[h,d,f]},n.rgb.hex=function(u){var l=((Math.round(u[0])&255)<<16)+((Math.round(u[1])&255)<<8)+(Math.round(u[2])&255),c=l.toString(16).toUpperCase();return"000000".substring(c.length)+c},n.hex.rgb=function(u){var l=u.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!l)return[0,0,0];var c=l[0];l[0].length===3&&(c=c.split("").map(function(p){return p+p}).join(""));var h=parseInt(c,16),d=h>>16&255,f=h>>8&255,v=h&255;return[d,f,v]},n.rgb.hcg=function(u){var l=u[0]/255,c=u[1]/255,h=u[2]/255,d=Math.max(Math.max(l,c),h),f=Math.min(Math.min(l,c),h),v=d-f,p,g;return v<1?p=f/(1-v):p=0,v<=0?g=0:d===l?g=(c-h)/v%6:d===c?g=2+(h-l)/v:g=4+(l-c)/v+4,g/=6,g%=1,[g*360,v*100,p*100]},n.hsl.hcg=function(u){var l=u[1]/100,c=u[2]/100,h=1,d=0;return c<.5?h=2*l*c:h=2*l*(1-c),h<1&&(d=(c-.5*h)/(1-h)),[u[0],h*100,d*100]},n.hsv.hcg=function(u){var l=u[1]/100,c=u[2]/100,h=l*c,d=0;return h<1&&(d=(c-h)/(1-h)),[u[0],h*100,d*100]},n.hcg.rgb=function(u){var l=u[0]/360,c=u[1]/100,h=u[2]/100;if(c===0)return[h*255,h*255,h*255];var d=[0,0,0],f=l%1*6,v=f%1,p=1-v,g=0;switch(Math.floor(f)){case 0:d[0]=1,d[1]=v,d[2]=0;break;case 1:d[0]=p,d[1]=1,d[2]=0;break;case 2:d[0]=0,d[1]=1,d[2]=v;break;case 3:d[0]=0,d[1]=p,d[2]=1;break;case 4:d[0]=v,d[1]=0,d[2]=1;break;default:d[0]=1,d[1]=0,d[2]=p}return g=(1-c)*h,[(c*d[0]+g)*255,(c*d[1]+g)*255,(c*d[2]+g)*255]},n.hcg.hsv=function(u){var l=u[1]/100,c=u[2]/100,h=l+c*(1-l),d=0;return h>0&&(d=l/h),[u[0],d*100,h*100]},n.hcg.hsl=function(u){var l=u[1]/100,c=u[2]/100,h=c*(1-l)+.5*l,d=0;return h>0&&h<.5?d=l/(2*h):h>=.5&&h<1&&(d=l/(2*(1-h))),[u[0],d*100,h*100]},n.hcg.hwb=function(u){var l=u[1]/100,c=u[2]/100,h=l+c*(1-l);return[u[0],(h-l)*100,(1-h)*100]},n.hwb.hcg=function(u){var l=u[1]/100,c=u[2]/100,h=1-c,d=h-l,f=0;return d<1&&(f=(h-d)/(1-d)),[u[0],d*100,f*100]},n.apple.rgb=function(u){return[u[0]/65535*255,u[1]/65535*255,u[2]/65535*255]},n.rgb.apple=function(u){return[u[0]/255*65535,u[1]/255*65535,u[2]/255*65535]},n.gray.rgb=function(u){return[u[0]/100*255,u[0]/100*255,u[0]/100*255]},n.gray.hsl=n.gray.hsv=function(u){return[0,0,u[0]]},n.gray.hwb=function(u){return[0,100,u[0]]},n.gray.cmyk=function(u){return[0,0,0,u[0]]},n.gray.lab=function(u){return[u[0],0,0]},n.gray.hex=function(u){var l=Math.round(u[0]/100*255)&255,c=(l<<16)+(l<<8)+l,h=c.toString(16).toUpperCase();return"000000".substring(h.length)+h},n.rgb.gray=function(u){var l=(u[0]+u[1]+u[2])/3;return[l/255*100]},Nu.exports}var _u,Hd;function vA(){if(Hd)return _u;Hd=1;var r=fy();function t(){for(var a={},o=Object.keys(r),s=o.length,u=0;u<s;u++)a[o[u]]={distance:-1,parent:null};return a}function e(a){var o=t(),s=[a];for(o[a].distance=0;s.length;)for(var u=s.pop(),l=Object.keys(r[u]),c=l.length,h=0;h<c;h++){var d=l[h],f=o[d];f.distance===-1&&(f.distance=o[u].distance+1,f.parent=u,s.unshift(d))}return o}function n(a,o){return function(s){return o(a(s))}}function i(a,o){for(var s=[o[a].parent,a],u=r[o[a].parent][a],l=o[a].parent;o[l].parent;)s.unshift(o[l].parent),u=n(r[o[l].parent][l],u),l=o[l].parent;return u.conversion=s,u}return _u=function(a){for(var o=e(a),s={},u=Object.keys(o),l=u.length,c=0;c<l;c++){var h=u[c],d=o[h];d.parent!==null&&(s[h]=i(h,o))}return s},_u}var Lu,Vd;function pA(){if(Vd)return Lu;Vd=1;var r=fy(),t=vA(),e={},n=Object.keys(r);function i(o){var s=function(u){return u==null?u:(arguments.length>1&&(u=Array.prototype.slice.call(arguments)),o(u))};return"conversion"in o&&(s.conversion=o.conversion),s}function a(o){var s=function(u){if(u==null)return u;arguments.length>1&&(u=Array.prototype.slice.call(arguments));var l=o(u);if(typeof l=="object")for(var c=l.length,h=0;h<c;h++)l[h]=Math.round(l[h]);return l};return"conversion"in o&&(s.conversion=o.conversion),s}return n.forEach(function(o){e[o]={},Object.defineProperty(e[o],"channels",{value:r[o].channels}),Object.defineProperty(e[o],"labels",{value:r[o].labels});var s=t(o),u=Object.keys(s);u.forEach(function(l){var c=s[l];e[o][l]=a(c),e[o][l].raw=i(c)})}),Lu=e,Lu}var Bu,Wd;function gA(){if(Wd)return Bu;Wd=1;var r=dA(),t=pA(),e=[].slice,n=["keyword","gray","hex"],i={};Object.keys(t).forEach(function(f){i[e.call(t[f].labels).sort().join("")]=f});var a={};function o(f,v){if(!(this instanceof o))return new o(f,v);if(v&&v in n&&(v=null),v&&!(v in t))throw new Error("Unknown model: "+v);var p,g;if(f==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(f instanceof o)this.model=f.model,this.color=f.color.slice(),this.valpha=f.valpha;else if(typeof f=="string"){var y=r.get(f);if(y===null)throw new Error("Unable to parse color from string: "+f);this.model=y.model,g=t[this.model].channels,this.color=y.value.slice(0,g),this.valpha=typeof y.value[g]=="number"?y.value[g]:1}else if(f.length){this.model=v||"rgb",g=t[this.model].channels;var m=e.call(f,0,g);this.color=d(m,g),this.valpha=typeof f[g]=="number"?f[g]:1}else if(typeof f=="number")f&=16777215,this.model="rgb",this.color=[f>>16&255,f>>8&255,f&255],this.valpha=1;else{this.valpha=1;var b=Object.keys(f);"alpha"in f&&(b.splice(b.indexOf("alpha"),1),this.valpha=typeof f.alpha=="number"?f.alpha:0);var x=b.sort().join("");if(!(x in i))throw new Error("Unable to parse color from object: "+JSON.stringify(f));this.model=i[x];var S=t[this.model].labels,C=[];for(p=0;p<S.length;p++)C.push(f[S[p]]);this.color=d(C)}if(a[this.model])for(g=t[this.model].channels,p=0;p<g;p++){var w=a[this.model][p];w&&(this.color[p]=w(this.color[p]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}o.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(f){var v=this.model in r.to?this:this.rgb();v=v.round(typeof f=="number"?f:1);var p=v.valpha===1?v.color:v.color.concat(this.valpha);return r.to[v.model](p)},percentString:function(f){var v=this.rgb().round(typeof f=="number"?f:1),p=v.valpha===1?v.color:v.color.concat(this.valpha);return r.to.rgb.percent(p)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var f={},v=t[this.model].channels,p=t[this.model].labels,g=0;g<v;g++)f[p[g]]=this.color[g];return this.valpha!==1&&(f.alpha=this.valpha),f},unitArray:function(){var f=this.rgb().color;return f[0]/=255,f[1]/=255,f[2]/=255,this.valpha!==1&&f.push(this.valpha),f},unitObject:function(){var f=this.rgb().object();return f.r/=255,f.g/=255,f.b/=255,this.valpha!==1&&(f.alpha=this.valpha),f},round:function(f){return f=Math.max(f||0,0),new o(this.color.map(u(f)).concat(this.valpha),this.model)},alpha:function(f){return arguments.length?new o(this.color.concat(Math.max(0,Math.min(1,f))),this.model):this.valpha},red:l("rgb",0,c(255)),green:l("rgb",1,c(255)),blue:l("rgb",2,c(255)),hue:l(["hsl","hsv","hsl","hwb","hcg"],0,function(f){return(f%360+360)%360}),saturationl:l("hsl",1,c(100)),lightness:l("hsl",2,c(100)),saturationv:l("hsv",1,c(100)),value:l("hsv",2,c(100)),chroma:l("hcg",1,c(100)),gray:l("hcg",2,c(100)),white:l("hwb",1,c(100)),wblack:l("hwb",2,c(100)),cyan:l("cmyk",0,c(100)),magenta:l("cmyk",1,c(100)),yellow:l("cmyk",2,c(100)),black:l("cmyk",3,c(100)),x:l("xyz",0,c(100)),y:l("xyz",1,c(100)),z:l("xyz",2,c(100)),l:l("lab",0,c(100)),a:l("lab",1),b:l("lab",2),keyword:function(f){return arguments.length?new o(f):t[this.model].keyword(this.color)},hex:function(f){return arguments.length?new o(f):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var f=this.rgb().color;return(f[0]&255)<<16|(f[1]&255)<<8|f[2]&255},luminosity:function(){for(var f=this.rgb().color,v=[],p=0;p<f.length;p++){var g=f[p]/255;v[p]=g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)}return .2126*v[0]+.7152*v[1]+.0722*v[2]},contrast:function(f){var v=this.luminosity(),p=f.luminosity();return v>p?(v+.05)/(p+.05):(p+.05)/(v+.05)},level:function(f){var v=this.contrast(f);return v>=7.1?"AAA":v>=4.5?"AA":""},isDark:function(){var f=this.rgb().color,v=(f[0]*299+f[1]*587+f[2]*114)/1e3;return v<128},isLight:function(){return!this.isDark()},negate:function(){for(var f=this.rgb(),v=0;v<3;v++)f.color[v]=255-f.color[v];return f},lighten:function(f){var v=this.hsl();return v.color[2]+=v.color[2]*f,v},darken:function(f){var v=this.hsl();return v.color[2]-=v.color[2]*f,v},saturate:function(f){var v=this.hsl();return v.color[1]+=v.color[1]*f,v},desaturate:function(f){var v=this.hsl();return v.color[1]-=v.color[1]*f,v},whiten:function(f){var v=this.hwb();return v.color[1]+=v.color[1]*f,v},blacken:function(f){var v=this.hwb();return v.color[2]+=v.color[2]*f,v},grayscale:function(){var f=this.rgb().color,v=f[0]*.3+f[1]*.59+f[2]*.11;return o.rgb(v,v,v)},fade:function(f){return this.alpha(this.valpha-this.valpha*f)},opaquer:function(f){return this.alpha(this.valpha+this.valpha*f)},rotate:function(f){var v=this.hsl(),p=v.color[0];return p=(p+f)%360,p=p<0?360+p:p,v.color[0]=p,v},mix:function(f,v){if(!f||!f.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof f);var p=f.rgb(),g=this.rgb(),y=v===void 0?.5:v,m=2*y-1,b=p.alpha()-g.alpha(),x=((m*b===-1?m:(m+b)/(1+m*b))+1)/2,S=1-x;return o.rgb(x*p.red()+S*g.red(),x*p.green()+S*g.green(),x*p.blue()+S*g.blue(),p.alpha()*y+g.alpha()*(1-y))}},Object.keys(t).forEach(function(f){if(n.indexOf(f)===-1){var v=t[f].channels;o.prototype[f]=function(){if(this.model===f)return new o(this);if(arguments.length)return new o(arguments,f);var p=typeof arguments[v]=="number"?v:this.valpha;return new o(h(t[this.model][f].raw(this.color)).concat(p),f)},o[f]=function(p){return typeof p=="number"&&(p=d(e.call(arguments),v)),new o(p,f)}}});function s(f,v){return Number(f.toFixed(v))}function u(f){return function(v){return s(v,f)}}function l(f,v,p){return f=Array.isArray(f)?f:[f],f.forEach(function(g){(a[g]||(a[g]=[]))[v]=p}),f=f[0],function(g){var y;return arguments.length?(p&&(g=p(g)),y=this[f](),y.color[v]=g,y):(y=this[f]().color[v],p&&(y=p(y)),y)}}function c(f){return function(v){return Math.max(0,Math.min(f,v))}}function h(f){return Array.isArray(f)?f:[f]}function d(f,v){for(var p=0;p<v;p++)typeof f[p]!="number"&&(f[p]=0);return f}return Bu=o,Bu}var yA=gA();const sa=uy(yA);function le(r,t){mA(r)&&(r="100%");var e=bA(r);return r=t===360?r:Math.min(t,Math.max(0,parseFloat(r))),e&&(r=parseInt(String(r*t),10)/100),Math.abs(r-t)<1e-6?1:(t===360?r=(r<0?r%t+t:r%t)/parseFloat(String(t)):r=r%t/parseFloat(String(t)),r)}function po(r){return Math.min(1,Math.max(0,r))}function mA(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function bA(r){return typeof r=="string"&&r.indexOf("%")!==-1}function cy(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function go(r){return r<=1?"".concat(Number(r)*100,"%"):r}function An(r){return r.length===1?"0"+r:String(r)}function xA(r,t,e){return{r:le(r,255)*255,g:le(t,255)*255,b:le(e,255)*255}}function Ud(r,t,e){r=le(r,255),t=le(t,255),e=le(e,255);var n=Math.max(r,t,e),i=Math.min(r,t,e),a=0,o=0,s=(n+i)/2;if(n===i)o=0,a=0;else{var u=n-i;switch(o=s>.5?u/(2-n-i):u/(n+i),n){case r:a=(t-e)/u+(t<e?6:0);break;case t:a=(e-r)/u+2;break;case e:a=(r-t)/u+4;break}a/=6}return{h:a,s:o,l:s}}function Du(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*(6*e):e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r}function SA(r,t,e){var n,i,a;if(r=le(r,360),t=le(t,100),e=le(e,100),t===0)i=e,a=e,n=e;else{var o=e<.5?e*(1+t):e+t-e*t,s=2*e-o;n=Du(s,o,r+1/3),i=Du(s,o,r),a=Du(s,o,r-1/3)}return{r:n*255,g:i*255,b:a*255}}function $d(r,t,e){r=le(r,255),t=le(t,255),e=le(e,255);var n=Math.max(r,t,e),i=Math.min(r,t,e),a=0,o=n,s=n-i,u=n===0?0:s/n;if(n===i)a=0;else{switch(n){case r:a=(t-e)/s+(t<e?6:0);break;case t:a=(e-r)/s+2;break;case e:a=(r-t)/s+4;break}a/=6}return{h:a,s:u,v:o}}function wA(r,t,e){r=le(r,360)*6,t=le(t,100),e=le(e,100);var n=Math.floor(r),i=r-n,a=e*(1-t),o=e*(1-i*t),s=e*(1-(1-i)*t),u=n%6,l=[e,o,a,a,s,e][u],c=[s,e,e,o,a,a][u],h=[a,a,s,e,e,o][u];return{r:l*255,g:c*255,b:h*255}}function qd(r,t,e,n){var i=[An(Math.round(r).toString(16)),An(Math.round(t).toString(16)),An(Math.round(e).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function MA(r,t,e,n,i){var a=[An(Math.round(r).toString(16)),An(Math.round(t).toString(16)),An(Math.round(e).toString(16)),An(CA(n))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function CA(r){return Math.round(parseFloat(r)*255).toString(16)}function Gd(r){return Te(r)/255}function Te(r){return parseInt(r,16)}function EA(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var Yl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function AA(r){var t={r:0,g:0,b:0},e=1,n=null,i=null,a=null,o=!1,s=!1;return typeof r=="string"&&(r=IA(r)),typeof r=="object"&&(xr(r.r)&&xr(r.g)&&xr(r.b)?(t=xA(r.r,r.g,r.b),o=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):xr(r.h)&&xr(r.s)&&xr(r.v)?(n=go(r.s),i=go(r.v),t=wA(r.h,n,i),o=!0,s="hsv"):xr(r.h)&&xr(r.s)&&xr(r.l)&&(n=go(r.s),a=go(r.l),t=SA(r.h,n,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(e=r.a)),e=cy(e),{ok:o,format:r.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var kA="[-\\+]?\\d+%?",OA="[-\\+]?\\d*\\.\\d+%?",Zr="(?:".concat(OA,")|(?:").concat(kA,")"),Fu="[\\s|\\(]+(".concat(Zr,")[,|\\s]+(").concat(Zr,")[,|\\s]+(").concat(Zr,")\\s*\\)?"),Ru="[\\s|\\(]+(".concat(Zr,")[,|\\s]+(").concat(Zr,")[,|\\s]+(").concat(Zr,")[,|\\s]+(").concat(Zr,")\\s*\\)?"),$e={CSS_UNIT:new RegExp(Zr),rgb:new RegExp("rgb"+Fu),rgba:new RegExp("rgba"+Ru),hsl:new RegExp("hsl"+Fu),hsla:new RegExp("hsla"+Ru),hsv:new RegExp("hsv"+Fu),hsva:new RegExp("hsva"+Ru),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function IA(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var t=!1;if(Yl[r])r=Yl[r],t=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=$e.rgb.exec(r);return e?{r:e[1],g:e[2],b:e[3]}:(e=$e.rgba.exec(r),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=$e.hsl.exec(r),e?{h:e[1],s:e[2],l:e[3]}:(e=$e.hsla.exec(r),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=$e.hsv.exec(r),e?{h:e[1],s:e[2],v:e[3]}:(e=$e.hsva.exec(r),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=$e.hex8.exec(r),e?{r:Te(e[1]),g:Te(e[2]),b:Te(e[3]),a:Gd(e[4]),format:t?"name":"hex8"}:(e=$e.hex6.exec(r),e?{r:Te(e[1]),g:Te(e[2]),b:Te(e[3]),format:t?"name":"hex"}:(e=$e.hex4.exec(r),e?{r:Te(e[1]+e[1]),g:Te(e[2]+e[2]),b:Te(e[3]+e[3]),a:Gd(e[4]+e[4]),format:t?"name":"hex8"}:(e=$e.hex3.exec(r),e?{r:Te(e[1]+e[1]),g:Te(e[2]+e[2]),b:Te(e[3]+e[3]),format:t?"name":"hex"}:!1)))))))))}function xr(r){return!!$e.CSS_UNIT.exec(String(r))}var yo=(function(){function r(t,e){t===void 0&&(t=""),e===void 0&&(e={});var n;if(t instanceof r)return t;typeof t=="number"&&(t=EA(t)),this.originalInput=t;var i=AA(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=e.format)!==null&&n!==void 0?n:i.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},r.prototype.getLuminance=function(){var t=this.toRgb(),e,n,i,a=t.r/255,o=t.g/255,s=t.b/255;return a<=.03928?e=a/12.92:e=Math.pow((a+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*e+.7152*n+.0722*i},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(t){return this.a=cy(t),this.roundA=Math.round(100*this.a)/100,this},r.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},r.prototype.toHsv=function(){var t=$d(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},r.prototype.toHsvString=function(){var t=$d(this.r,this.g,this.b),e=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this.a===1?"hsv(".concat(e,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},r.prototype.toHsl=function(){var t=Ud(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},r.prototype.toHslString=function(){var t=Ud(this.r,this.g,this.b),e=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this.a===1?"hsl(".concat(e,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},r.prototype.toHex=function(t){return t===void 0&&(t=!1),qd(this.r,this.g,this.b,t)},r.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},r.prototype.toHex8=function(t){return t===void 0&&(t=!1),MA(this.r,this.g,this.b,this.a,t)},r.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},r.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(e,", ").concat(n,")"):"rgba(".concat(t,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},r.prototype.toPercentageRgb=function(){var t=function(e){return"".concat(Math.round(le(e,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var t=function(e){return Math.round(le(e,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+qd(this.r,this.g,this.b,!1),e=0,n=Object.entries(Yl);e<n.length;e++){var i=n[e],a=i[0],o=i[1];if(t===o)return a}return!1},r.prototype.toString=function(t){var e=!!t;t=t??this.format;var n=!1,i=this.a<1&&this.a>=0,a=!e&&i&&(t.startsWith("hex")||t==="name");return a?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.l+=t/100,e.l=po(e.l),new r(e)},r.prototype.brighten=function(t){t===void 0&&(t=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),new r(e)},r.prototype.darken=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.l-=t/100,e.l=po(e.l),new r(e)},r.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},r.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},r.prototype.desaturate=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.s-=t/100,e.s=po(e.s),new r(e)},r.prototype.saturate=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.s+=t/100,e.s=po(e.s),new r(e)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(t){var e=this.toHsl(),n=(e.h+t)%360;return e.h=n<0?360+n:n,new r(e)},r.prototype.mix=function(t,e){e===void 0&&(e=50);var n=this.toRgb(),i=new r(t).toRgb(),a=e/100,o={r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a};return new r(o)},r.prototype.analogous=function(t,e){t===void 0&&(t=6),e===void 0&&(e=30);var n=this.toHsl(),i=360/e,a=[this];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,a.push(new r(n));return a},r.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new r(t)},r.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var e=this.toHsv(),n=e.h,i=e.s,a=e.v,o=[],s=1/t;t--;)o.push(new r({h:n,s:i,v:a})),a=(a+s)%1;return o},r.prototype.splitcomplement=function(){var t=this.toHsl(),e=t.h;return[this,new r({h:(e+72)%360,s:t.s,l:t.l}),new r({h:(e+216)%360,s:t.s,l:t.l})]},r.prototype.onBackground=function(t){var e=this.toRgb(),n=new r(t).toRgb(),i=e.a+n.a*(1-e.a);return new r({r:(e.r*e.a+n.r*n.a*(1-e.a))/i,g:(e.g*e.a+n.g*n.a*(1-e.a))/i,b:(e.b*e.a+n.b*n.a*(1-e.a))/i,a:i})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(t){for(var e=this.toHsl(),n=e.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new r({h:(n+o*a)%360,s:e.s,l:e.l}));return i},r.prototype.equals=function(t){return this.toRgbString()===new r(t).toRgbString()},r})(),mo=2,Kd=.16,PA=.05,TA=.05,NA=.15,hy=5,dy=4,_A=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Zd(r,t,e){var n;return Math.round(r.h)>=60&&Math.round(r.h)<=240?n=e?Math.round(r.h)-mo*t:Math.round(r.h)+mo*t:n=e?Math.round(r.h)+mo*t:Math.round(r.h)-mo*t,n<0?n+=360:n>=360&&(n-=360),n}function Qd(r,t,e){if(r.h===0&&r.s===0)return r.s;var n;return e?n=r.s-Kd*t:t===dy?n=r.s+Kd:n=r.s+PA*t,n>1&&(n=1),e&&t===hy&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function Jd(r,t,e){var n;return e?n=r.v+TA*t:n=r.v-NA*t,n>1&&(n=1),Number(n.toFixed(2))}function fs(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],n=new yo(r),i=hy;i>0;i-=1){var a=n.toHsv(),o=new yo({h:Zd(a,i,!0),s:Qd(a,i,!0),v:Jd(a,i,!0)}).toHexString();e.push(o)}e.push(n.toHexString());for(var s=1;s<=dy;s+=1){var u=n.toHsv(),l=new yo({h:Zd(u,s),s:Qd(u,s),v:Jd(u,s)}).toHexString();e.push(l)}return t.theme==="dark"?_A.map(function(c){var h=c.index,d=c.opacity,f=new yo(t.backgroundColor||"#141414").mix(e[h],d*100).toHexString();return f}):e}var zu={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Xu={},Yu={};Object.keys(zu).forEach(function(r){Xu[r]=fs(zu[r]),Xu[r].primary=Xu[r][5],Yu[r]=fs(zu[r],{theme:"dark",backgroundColor:"#141414"}),Yu[r].primary=Yu[r][5]});var ee=function(t,e,n){var i=sa(t),a=sa(e);return sa([(1-n)*i.red()+n*a.red(),(1-n)*i.green()+n*a.green(),(1-n)*i.blue()+n*a.blue()]).rgb()},LA=function(t,e,n){e===void 0&&(e="#fff");var i=ee(e,t,.05).rgb().toString(),a=ee(e,t,.1).rgb().toString(),o=ee(e,t,.2).rgb().toString(),s=ee(e,t,.4).rgb().toString(),u=ee(e,n,.02).rgb().toString(),l=ee(e,n,.05).rgb().toString(),c=ee(e,n,.1).rgb().toString(),h=ee(e,n,.2).rgb().toString(),d=ee(e,n,.3).rgb().toString(),f=fs(t,{theme:"default",backgroundColor:e}),v=sa(t).hex().toLowerCase(),p=f.indexOf(v),g=t;return p!==-1&&(g=f[p+1]),{mainStroke:t,mainFill:a,activeStroke:t,activeFill:i,inactiveStroke:s,inactiveFill:i,selectedStroke:t,selectedFill:e,highlightStroke:g,highlightFill:o,disableStroke:d,disableFill:l,edgeMainStroke:d,edgeActiveStroke:t,edgeInactiveStroke:h,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:d,comboMainFill:u,comboActiveStroke:t,comboActiveFill:i,comboInactiveStroke:d,comboInactiveFill:u,comboSelectedStroke:t,comboSelectedFill:u,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:h,comboDisableFill:l}},BA=function(t,e,n){e===void 0&&(e="#fff");var i=ee(e,t,.2).rgb().toString(),a=ee(e,t,.3).rgb().toString(),o=ee(e,t,.6).rgb().toString(),s=ee(e,t,.8).rgb().toString(),u=ee(e,n,.2).rgb().toString(),l=ee(e,n,.25).rgb().toString(),c=ee(e,n,.3).rgb().toString(),h=ee(e,n,.4).rgb().toString(),d=ee(e,n,.5).rgb().toString(),f=fs(t,{theme:"dark",backgroundColor:e}),v=sa(t).hex().toLowerCase(),p=f.indexOf(v),g=t;return p!==-1&&(g=f[p+1]),{mainStroke:s,mainFill:i,activeStroke:t,activeFill:a,inactiveStroke:s,inactiveFill:i,selectedStroke:t,selectedFill:i,highlightStroke:t,highlightFill:o,disableStroke:d,disableFill:l,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:l,comboActiveStroke:t,comboActiveFill:u,comboInactiveStroke:h,comboInactiveFill:l,comboSelectedStroke:t,comboSelectedFill:u,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:h,comboDisableFill:u}},ic=function(t,e,n,i){return e===void 0&&(e="#fff"),n===void 0&&(n="default"),n==="default"?LA(t,e,"rgb(150, 150, 150)"):BA(t,e,"#777")},DA=function(t,e,n,i){e===void 0&&(e="#fff"),n===void 0&&(n="default");var a=[];return t.forEach(function(o){a.push(ic(o,e,n))}),a};const FA=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors:DA,getColorsWithSubjectColor:ic,mixColor:ee},Symbol.toStringTag,{value:"Module"}));var RA="rgb(95, 149, 255)",zA="rgb(255, 255, 255)",tv="rgb(0, 0, 0)",Et=ic(RA,zA);const _e={version:"0.0.16",rootContainerClassName:"root-container",uiContainerClassName:"ui-container",waterContainerClassName:"water-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Et.mainStroke,fill:Et.mainFill},size:20,color:Et.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Et.activeFill,stroke:Et.activeStroke}},nodeStateStyles:{active:{fill:Et.activeFill,stroke:Et.activeStroke,lineWidth:2,shadowColor:Et.mainStroke,shadowBlur:10},selected:{fill:Et.selectedFill,stroke:Et.selectedStroke,lineWidth:4,shadowColor:Et.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Et.highlightFill,stroke:Et.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Et.inactiveFill,stroke:Et.inactiveStroke,lineWidth:1},disable:{fill:Et.disableFill,stroke:Et.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:tv,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Et.edgeMainStroke,lineAppendWidth:2},color:Et.edgeMainStroke},edgeStateStyles:{active:{stroke:Et.edgeActiveStroke,lineWidth:1},selected:{stroke:Et.edgeSelectedStroke,lineWidth:2,shadowColor:Et.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Et.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Et.edgeInactiveStroke,lineWidth:1},disable:{stroke:Et.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:tv,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Et.comboMainFill,lineWidth:1,stroke:Et.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Et.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Et.comboActiveStroke,lineWidth:1,fill:Et.comboActiveFill},selected:{stroke:Et.comboSelectedStroke,lineWidth:2,fill:Et.comboSelectedFill,shadowColor:Et.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Et.comboHighlightStroke,lineWidth:2,fill:Et.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Et.comboInactiveStroke,fill:Et.comboInactiveFill,lineWidth:1},disable:{stroke:Et.comboDisableStroke,fill:Et.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};var XA=jn.cloneEvent,YA=jn.isViewportChanged,jA=(function(r){Xt(t,r);function t(e){var n=r.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.preItem=null,n.graph=e,n.destroyed=!1,n}return t.prototype.initEvents=function(){var e=this,n=e.graph;e.extendEvents;var i=n.get("canvas");this.canvasHandler=gf(this,"onCanvasEvents"),i.off("*").on("*",this.canvasHandler)},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var n=this.graph,i=n.get("canvas"),a=e.target,o=e.type;e.canvasX=e.x,e.canvasY=e.y;var s={x:e.canvasX,y:e.canvasY},u=n.get("group"),l=u.getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),YA(l)&&(s=n.getPointByClient(e.clientX,e.clientY)),e.x=s.x,e.y=s.y,e.currentTarget=n,a===i){o==="panmove"&&this.handleTouchMove(e,"canvas"),e.target=i,e.item=null,n.emit(o,e),n.emit("canvas:".concat(o),e);return}var c=t.getItemRoot(a);if(!c){n.emit(o,e);return}var h=c.get("item");if(!h.destroyed){var d=h.getType();if(e.target=a,e.item=h,e.canvasX===e.x&&e.canvasY===e.y){var f=n.getCanvasByPoint(e.x,e.y);e.canvasX=f.x,e.canvasY=f.y}n.emit(o,e),e.name&&!e.name.includes(":")?n.emit("".concat(d,":").concat(o),e):n.emit(e.name,e),o==="dragstart"&&(this.dragging=!0),o==="dragend"&&(this.dragging=!1),o==="panmove"&&this.handleTouchMove(e,d)}},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.emitCustomEvent=function(e,n,i){i.type=n,this.graph.emit("".concat(e,":").concat(n),i)},t.prototype.destroy=function(){var e=this,n=e.graph,i=e.canvasHandler,a=e.extendEvents,o=n.get("canvas");o.off("*",i),U(a,function(s){s.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},t.prototype.handleTouchMove=function(e,n){var i=this,a=i.graph,o=i.preItem,s=a.get("canvas"),u=e.target===s?null:e.item;e=XA(e),o&&o!==u&&!o.destroyed&&(e.item=o,this.emitCustomEvent(o.getType(),"touchleave",e),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",e)),u&&o!==u&&(e.item=u,this.emitCustomEvent(n,"touchenter",e),this.dragging&&this.emitCustomEvent(n,"dragenter",e)),this.preItem=u},t})(DC),yn={},Ue={},Di={},ev;function vy(){if(ev)return Di;ev=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Base=void 0;var r=(function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(e){return this.init(e),this.execute(!0)},t.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[]},t.prototype.execute=function(e){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(e){e&&Object.assign(this,e)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t})();return Di.Base=r,Di}var mn={},bn={},rv;function HA(){if(rv)return bn;rv=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.camelize=bn.isString=void 0;var r=function(n){return typeof n=="string"};bn.isString=r;var t=function(n){var i=Object.create(null);return(function(a){var o=i[a];return o||(i[a]=n(a))})},e=/-(\w)/g;return bn.camelize=t(function(n){return n.replace(e,function(i,a){return a?a.toUpperCase():""})}),bn}var Fi={},nv;function VA(){return nv||(nv=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.isArray=void 0,Fi.isArray=Array.isArray),Fi}var ju={},iv;function WA(){return iv||(iv=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.toNumber=r.isNaN=r.isNumber=void 0;var t=function(i){return typeof i=="number"};r.isNumber=t;var e=function(i){return Number.isNaN(Number(i))};r.isNaN=e;var n=function(i){var a=parseFloat(i);return r.isNaN(a)?i:a};r.toNumber=n})(ju)),ju}var Pe={},av;function UA(){if(av)return Pe;av=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.traverseTreeUp=Pe.scaleMatrix=Pe.getAdjMatrix=Pe.floydWarshall=Pe.getDegree=void 0;var r=function(o,s,u){for(var l=[],c=0;c<o;c++)l[c]=0;return u&&u.forEach(function(h){h.source&&(l[s[h.source]]+=1),h.target&&(l[s[h.target]]+=1)}),l};Pe.getDegree=r;var t=function(o){for(var s=[],u=o.length,l=0;l<u;l+=1){s[l]=[];for(var c=0;c<u;c+=1)l===c?s[l][c]=0:o[l][c]===0||!o[l][c]?s[l][c]=1/0:s[l][c]=o[l][c]}for(var h=0;h<u;h+=1)for(var l=0;l<u;l+=1)for(var c=0;c<u;c+=1)s[l][c]>s[l][h]+s[h][c]&&(s[l][c]=s[l][h]+s[h][c]);return s};Pe.floydWarshall=t;var e=function(o,s){var u=o.nodes,l=o.edges,c=[],h={};if(!u)throw new Error("invalid nodes data!");return u&&u.forEach(function(d,f){h[d.id]=f;var v=[];c.push(v)}),l&&l.forEach(function(d){var f=d.source,v=d.target,p=h[f],g=h[v];c[p][g]=1,s||(c[g][p]=1)}),c};Pe.getAdjMatrix=e;var n=function(o,s){var u=[];return o.forEach(function(l){var c=[];l.forEach(function(h){c.push(h*s)}),u.push(c)}),u};Pe.scaleMatrix=n;var i=function(o,s){if(o&&o.children){for(var u=o.children.length-1;u>=0;u--)if(!i(o.children[u],s))return}return!!s(o)},a=function(o,s){typeof s=="function"&&i(o,s)};return Pe.traverseTreeUp=a,Pe}var Ri={},ov;function $A(){return ov||(ov=1,(function(r){var t=Ri&&Ri.__assign||function(){return t=Object.assign||function(i){for(var a,o=1,s=arguments.length;o<s;o++){a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i},t.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.isObject=void 0;var e=function(i){return i!==null&&typeof i=="object"};r.isObject=e;var n=function(i){if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){var a=[];return i.forEach(function(s){a.push(s)}),a.map(function(s){return r.clone(s)})}if(typeof i=="object"&&i!=={}){var o=t({},i);return Object.keys(o).forEach(function(s){o[s]=r.clone(o[s])}),o}return i};r.clone=n})(Ri)),Ri}var zi={},sv;function qA(){if(sv)return zi;sv=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.isFunction=void 0;var r=function(t){return typeof t=="function"};return zi.isFunction=r,zi}var uv;function GA(){return uv||(uv=1,(function(r){var t=mn&&mn.__createBinding||(Object.create?(function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}):(function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]})),e=mn&&mn.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&t(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),e(HA(),r),e(VA(),r),e(WA(),r),e(UA(),r),e($A(),r),e(qA(),r)})(mn)),mn}var lv;function py(){if(lv)return Ue;lv=1;var r=Ue&&Ue.__extends||(function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(c[d]=h[d])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(u,l);function c(){this.constructor=u}u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}})();Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getLayoutByName=Ue.unRegisterLayout=Ue.registerLayout=void 0;var t=vy(),e=GA(),n=new Map,i=function(s,u){if(n.get(s)&&console.warn("The layout with the name "+s+" exists already, it will be overridden"),e.isObject(u)){var l=(function(c){r(h,c);function h(d){var f=c.call(this)||this,v=f,p={},g=v.getDefaultCfg();return Object.assign(p,g,u,d),Object.keys(p).forEach(function(y){var m=p[y];v[y]=m}),f}return h})(t.Base);n.set(s,l)}else n.set(s,u)};Ue.registerLayout=i;var a=function(s){n.has(s)&&n.delete(s)};Ue.unRegisterLayout=a;var o=function(s){return n.has(s)?n.get(s):null};return Ue.getLayoutByName=o,Ue}var fv;function KA(){if(fv)return yn;fv=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.Layouts=yn.Layout=void 0;var r=py(),t=(function(){function e(n){var i=r.getLayoutByName(n.type);this.layoutInstance=new i(n)}return e.prototype.layout=function(n){return this.layoutInstance.layout(n)},e.prototype.updateCfg=function(n){this.layoutInstance.updateCfg(n)},e.prototype.init=function(n){this.layoutInstance.init(n)},e.prototype.execute=function(){this.layoutInstance.execute()},e.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},e.prototype.destroy=function(){return this.layoutInstance.destroy()},e})();return yn.Layout=t,yn.Layouts=new Proxy({},{get:function(e,n){return r.getLayoutByName(n)},set:function(e,n,i){return r.registerLayout(n,i),!0}}),yn}var cs=KA(),jl=py(),xn={},cv;function ZA(){if(cv)return xn;cv=1;var r=xn&&xn.__extends||(function(){var n=function(i,a){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])},n(i,a)};return function(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");n(i,a);function o(){this.constructor=i}i.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}})();Object.defineProperty(xn,"__esModule",{value:!0}),xn.RandomLayout=void 0;var t=vy(),e=(function(n){r(i,n);function i(a){var o=n.call(this)||this;return o.center=[0,0],o.width=300,o.height=300,o.nodes=[],o.edges=[],o.onLayoutEnd=function(){},o.updateCfg(a),o}return i.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},i.prototype.execute=function(){var a=this,o=a.nodes,s=.9,u=a.center;return!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),o&&o.forEach(function(l){l.x=(Math.random()-.5)*s*a.width+u[0],l.y=(Math.random()-.5)*s*a.height+u[1]}),a.onLayoutEnd&&a.onLayoutEnd(),{nodes:o,edges:this.edges}},i.prototype.getType=function(){return"random"},i})(t.Base);return xn.RandomLayout=e,xn}var QA=ZA();jl.registerLayout("random",QA.RandomLayout);var JA=["force","grid","circular"],tk=(function(r){Xt(t,r);function t(e){var n=r.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n}return t.prototype.updateLayoutCfg=function(e){var n=this,i=this,a=i.graph,o=i.layoutMethods,s=dt({},this.layoutCfg,e);if(this.layoutCfg=s,!o?.length){this.layout();return}this.data=this.setDataFromGraph(),a.emit("beforelayout");var u=Promise.resolve();o.length===1?u=u.then(function(){return n.updateLayoutMethod(o[0],s)}):o?.forEach(function(l,c){var h=s.pipes[c];u=u.then(function(){return n.updateLayoutMethod(l,h)})}),this.data=this.setDataFromGraph(),u.then(function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()}).catch(function(l){console.warn("layout failed",l)})},t.prototype.layout=function(e){var n=this,i=this.graph;this.data=this.setDataFromGraph();var a=this.data,o=a.nodes,s=a.hiddenNodes;if(!o)return!1;var u=i.get("width"),l=i.get("height"),c={};Object.assign(c,{width:u,height:l,center:[u/2,l/2]},this.layoutCfg),this.layoutCfg=c,this.destoryLayoutMethods(),i.emit("beforelayout"),this.initPositions(c.center,o),this.initPositions(c.center,s);var h=c.onLayoutEnd,d=c.layoutEndFormatted,f=c.adjust;d||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return eb(n,void 0,void 0,function(){return rb(this,function(p){switch(p.label){case 0:return h&&h(),this.refreshLayout(),f&&c.pipes?[4,this.adjustPipesBox(this.data,f)]:[3,2];case 1:p.sent(),this.refreshLayout(),p.label=2;case 2:return i.emit("afterlayout"),[2]}})})});var v=Promise.resolve();return c.type?v=v.then(function(){return n.execLayoutMethod(c,0)}):c.pipes&&c.pipes.forEach(function(p,g){v=v.then(function(){return n.execLayoutMethod(p,g)})}),v.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),e&&e()}).catch(function(p){console.warn("graph layout failed,",p)}),!1},t.prototype.execLayoutMethod=function(e,n){var i=this;return new Promise(function(a,o){var s=i.graph,u=e.type;e.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()};var l=u==="force"||u==="g6force"||u==="gForce";if(l){var c=e.onTick,h=function(){c&&c(),s.refreshPositions()};e.tick=h}else e.type==="comboForce"&&(e.comboTrees=s.get("comboTrees"));var d=!1,f;try{f=new cs.Layout(e)}catch{console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}if(d=f.enableTick,d){var v=e.onTick,h=function(){v&&v(),s.refreshPositions()};f.tick=h}var p=i.filterLayoutData(i.data,e);ek(p,n),f.init(p),s.emit("beforesublayout",{type:u}),f.execute(),f.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),i.layoutMethods.push(f)})},t.prototype.updateLayoutMethod=function(e,n){var i=this;return new Promise(function(a,o){var s=i.graph,u=n?.type;n.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()};var l=i.filterLayoutData(i.data,n);e.init(l),e.updateCfg(n),s.emit("beforesublayout",{type:u}),e.execute(),e.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd()})},t.prototype.adjustPipesBox=function(e,n){var i=this;return new Promise(function(a){var o=e.nodes;o?.length||a(),JA.includes(n)||(console.warn("The adjust type ".concat(n," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:i.layoutCfg.center,nodeSize:function(v){return Math.max(v.height,v.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=i.getLayoutBBox(o),l=u.groupNodes,c=u.layoutNodes,h=Pt(c);s.onLayoutEnd=function(){c?.forEach(function(f,v){var p,g,y,m=f.x-((p=h[v])===null||p===void 0?void 0:p.x),b=f.y-((g=h[v])===null||g===void 0?void 0:g.y);(y=l[v])===null||y===void 0||y.forEach(function(x){x.x+=m,x.y+=b})}),a()};var d=new cs.Layout(s);d.layout({nodes:c})})},t.prototype.destroy=function(){this.destoryLayoutMethods(),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t})(BC);function ek(r,t){var e;if(!((e=r?.nodes)===null||e===void 0)&&e.length){var n=r.nodes;n.forEach(function(i){i.layoutOrder=t})}}var rk=function(t,e,n){return n[t]&&console.warn("The graph with the name ".concat(t," exists already, it will be overridden")),n[t]=e(n),n},nk=(function(r){Xt(t,r);function t(e){var n=r.call(this,e)||this;n.get("renderer").startsWith("mini")&&n.set("context",e.context),r.prototype.init.call(n);var i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return t.prototype.init=function(){},t.prototype.emitEvent=function(e){var n=this.get("canvas");e.type=e.type.toLowerCase(),n.registerEventCallback(e)},t.prototype.initLayoutController=function(){var e=new tk(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new jA(this);if(this.set({eventController:e}),!this.get("renderer").startsWith("mini")){var n=this.get("canvas"),i=n.get("el");"touchstart touchmove touchend touchcancel".split(" ").forEach(function(a){i.addEventListener(a,n.registerEventCallback.bind(n),!1)})}},t.prototype.initCanvas=function(){var e=this.get("container");e!==null&&typeof e=="string"&&(e=document.getElementById(e),this.set("container",e));var n=this.get("renderer");if(!e&&!n.startsWith("mini"))throw new Error("invalid container");var i=this.get("width"),a=this.get("height"),o=this.get("context"),s=this.get("fitView"),u={container:e,context:o,width:i,height:a,renderer:n,fitView:s},l=this.get("pixelRatio");l&&(u.pixelRatio=l);var c=new vo(u);this.set("canvas",c)},t.prototype.initPlugins=function(){var e=this;U(e.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(e)})},t.prototype.toDataURL=function(e,n){var i=this.get("canvas"),a=i.getRenderer(),o=i.get("el");e||(e="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),l=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",l);c.replaceChild(u,c.documentElement);var h=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(h))}else{var d=void 0,f=o.getContext("2d"),v=this.get("width"),p=this.get("height"),g=void 0;if(n){var y=typeof window<"u"?window.devicePixelRatio:1;d=f.getImageData(0,0,v*y,p*y),g=f.globalCompositeOperation,f.globalCompositeOperation="destination-over",f.fillStyle=n,f.fillRect(0,0,v,p)}s=o.toDataURL(e),n&&(f.clearRect(0,0,v,p),f.putImageData(d,0,0),f.globalCompositeOperation=g)}return s},t.prototype.toFullDataURL=function(e,n,i){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),l=oh('<id="virtual-image"></div>'),c=i?i.backgroundColor:void 0,h=i?i.padding:void 0;h?xt(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var d=o+h[0]+h[2],f=s+h[1]+h[3],v={container:l,height:d,width:f,quickHit:!0},p=new vo(v),g=this.get("group"),y=g.clone(),m=Pt(y.getMatrix());m||(m=[1,0,0,0,1,0,0,0,1]);var b=(a.maxX+a.minX)/2,x=(a.maxY+a.minY)/2;Wi(m,m,[-b,-x]),Wi(m,m,[s/2+h[3],o/2+h[0]]),y.resetMatrix(),y.setMatrix(m),p.add(y);var S=p.get("el"),C="";n||(n="image/png"),setTimeout(function(){if(u==="svg"){var w=S.cloneNode(!0),I=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),T=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",I);T.replaceChild(w,T.documentElement);var O=new XMLSerializer().serializeToString(T);C="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(O))}else{var _=void 0,B=S.getContext("2d"),z=void 0;if(c){var Y=typeof window<"u"?window.devicePixelRatio:1;_=B.getImageData(0,0,f*Y,d*Y),z=B.globalCompositeOperation,B.globalCompositeOperation="destination-over",B.fillStyle=c,B.fillRect(0,0,f,d)}C=S.toDataURL(n),c&&(B.clearRect(0,0,f,d),B.putImageData(_,0,0),B.globalCompositeOperation=z)}e&&e(C)},16)},t.prototype.downloadFullImage=function(e,n,i){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,l=this.get("renderer"),c=oh('<id="virtual-image"></div>'),h=i?i.backgroundColor:void 0,d=i?i.padding:void 0;d?xt(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var f=s+d[0]+d[2],v=u+d[1]+d[3],p={container:c,height:f,width:v},g=new vo(p),y=this.get("group"),m=y.clone(),b=Pt(m.getMatrix());b||(b=[1,0,0,0,1,0,0,0,1]);var x=(o.maxX+o.minX)/2,S=(o.maxY+o.minY)/2;Wi(b,b,[-x,-S]),Wi(b,b,[u/2+d[3],s/2+d[0]]),m.resetMatrix(),m.setMatrix(b),g.add(m);var C=g.get("el");n||(n="image/png"),setTimeout(function(){var w="";if(l==="svg"){var I=C.cloneNode(!0),T=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),O=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",T);O.replaceChild(I,O.documentElement);var _=new XMLSerializer().serializeToString(O);w="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(_))}else{var B=void 0,z=C.getContext("2d"),Y=void 0;if(h){var X=typeof window<"u"?window.devicePixelRatio:1;B=z.getImageData(0,0,v*X,f*X),Y=z.globalCompositeOperation,z.globalCompositeOperation="destination-over",z.fillStyle=h,z.fillRect(0,0,v,f)}w=C.toDataURL(n),h&&(z.clearRect(0,0,v,f),z.putImageData(B,0,0),z.globalCompositeOperation=Y)}var K=document.createElement("a"),G=(e||"graph")+(l==="svg"?".svg":".".concat(n.split("/")[1]));a.dataURLToImage(w,l,K,G);var tt=document.createEvent("MouseEvents");tt.initEvent("click",!1,!1),K.dispatchEvent(tt)},16)},t.prototype.downloadImage=function(e,n,i){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();n||(n="image/png");var l=(e||"graph")+(u==="svg"?".svg":n.split("/")[1]),c=document.createElement("a");setTimeout(function(){var h=o.toDataURL(n,i);a.dataURLToImage(h,u,c,l);var d=document.createEvent("MouseEvents");d.initEvent("click",!1,!1),c.dispatchEvent(d)},16)},t.prototype.dataURLToImage=function(e,n,i,a){if(typeof window<"u")if(window.Blob&&window.URL&&n!=="svg"){var o=e.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var l=atob(o[1]),c=l.length,h=new Uint8Array(c);c--;)h[c]=l.charCodeAt(c);var d=new Blob([h],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(d,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(d)})}else i.addEventListener("click",function(){i.download=a,i.href=e})},t.prototype.addPlugin=function(e){var n=this;e.destroyed||(n.get("plugins").push(e),e.initPlugin(n))},t.prototype.removePlugin=function(e){var n=this.get("plugins"),i=n.indexOf(e);i>=0&&(e.destroyPlugin(),n.splice(i,1))},t.prototype.isMiniNative=function(){return this.get("renderer")==="mini-native"},t.prototype.isMini=function(){return this.get("renderer").startsWith("mini")},t.prototype.isBrowser=function(){return this.get("renderer")==="canvas"},t.prototype.setImageWaterMarker=function(e,n,i){var a=this,o=$t({},_e.imageWaterMarkerConfig,n),s=o.width,u=o.height,l=o.image,c=l.rotate;l.x,l.y;var h=l.width,d=l.height;if(this.isMini()&&this.isMiniNative(),this.isMiniNative()){i.width=s||this.get("width"),i.height=u||this.get("height");var f=i.getContext("2d"),v=this.get("extra").createImage,p=v();p.crossOrigin="anonymous",p.src=e,p.onload=function(){if(!a.destroyed){var b=h/p.width,x=d/p.height;f.rotate(-(c*Math.PI)/180);var S=f.createPattern(p,"repeat");f.fillStyle=S,f.scale(b,x),f.fillRect(-a.get("width")*2,-a.get("height"),a.get("width")*10,a.get("height")*10),a.get("waterGroup").addShape("image",{attrs:{img:i}})}}}if(this.isBrowser()){var g=document.createElement("canvas");g.width=s||this.get("width"),g.height=u||this.get("height");var y=g.getContext("2d"),m=new Image;m.crossOrigin="anonymous",m.src=e,m.onload=function(){if(!a.destroyed){var b=h/m.width,x=d/m.height;y.rotate(-(c*Math.PI)/180);var S=y.createPattern(m,"repeat");y.fillStyle=S,y.scale(b,x),y.fillRect(-a.get("width")*2,-a.get("height"),a.get("width")*10,a.get("height")*10);var C=g.toDataURL();a.get("waterGroup").addShape("image",{attrs:{img:C}})}}}},t.prototype.setTextWaterMarker=function(e,n){var i=this.get("container");ot(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),o=$t({},_e.textWaterMarkerConfig,n),s=o.width,u=o.height,l=o.compatible,c=o.text;if(!a){var h={container:i,width:s,height:u,capture:!1},d=this.get("pixelRatio");d&&(h.pixelRatio=d),a=new vo(h),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var f=a.get("context"),v=c.rotate,p=c.fill,g=c.fontFamily,y=c.fontSize,m=c.baseline,b=c.x,x=c.y,S=c.lineHeight;f.rotate(-v*Math.PI/180),f.font="".concat(y,"px ").concat(g),f.fillStyle=p,f.textBaseline=m;for(var C=e.length-1;C>=0;C--)f.fillText(e[C],b,x+C*S);if(f.rotate(v*Math.PI/180),l)i.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var w=document.querySelector(".g6-graph-watermarker");w||(w=document.createElement("div"),w.className="g6-graph-watermarker"),w.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),i.appendChild(w)}},t.prototype.destroy=function(){var e;U(this.get("plugins"),function(s){s.destroyPlugin()});var n=this.get("tooltips");if(n)for(var i=0;i<n.length;i++){var a=n[i];if(a){var o=a.parentElement;o&&o.removeChild(a)}}this.get("eventController").destroy(),(e=this.get("layoutController"))===null||e===void 0||e.destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),typeof document<"u"&&document.querySelector&&document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),r.prototype.destroy.call(this)},t.prototype.initGroups=function(){var e=this.get("canvas"),n=e.addGroup({id:"root",className:_e.rootContainerClassName}),i=e.addGroup({id:"water",className:_e.waterContainerClassName});if(this.get("groupByTypes")){var a=n.addGroup({id:"edge",className:_e.edgeContainerClassName}),o=n.addGroup({id:"node",className:_e.nodeContainerClassName}),s=n.addGroup({id:"combo",className:_e.comboContainerClassName});s.toBack(),this.set({nodeGroup:o,edgeGroup:a,comboGroup:s})}var u=e.addGroup({id:"uiGroup",className:_e.uiContainerClassName}),l=n.addGroup({id:"delegate",className:_e.delegateContainerClassName});this.set({delegateGroup:l}),this.set("group",n),this.set("uiGroup",u),this.set("waterGroup",i)},t})(xC),hv=jn.traverseTree,ik=function(t,e){var n;return t?xt(t)?n=function(a){return t}:n=t:n=function(a){return e||1},n},ak=function(t,e){var n=[],i=[],a={},o=0;for(o=0;o<t.length;o++){var s=t[o];a[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),i.push([])}for(o=0;o<e.length;o++){var u=e[o];i[a[u.source]].push(a[u.target]),i[a[u.target]].push(a[u.source])}var l=0;for(o=0;o<t.length;o++){var c=n.length,h=i[o],d=h.length;n[o*4+2]=c,n[o*4+3]=h.length,l=Math.max(l,h.length);for(var f=0;f<d;++f){var v=h[f];n.push(+v)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},ok=function(t,e,n){var i=[],a=[],o={},s=0;for(s=0;s<t.length;s++){var u=t[s];o[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),a.push([])}for(s=0;s<e.length;s++){var l=e[s];a[o[l.source]].push(o[l.target]),a[o[l.source]].push(n(l)),a[o[l.target]].push(o[l.source]),a[o[l.target]].push(n(l))}var c=0;for(s=0;s<t.length;s++){var h=i.length,d=a[s],f=d.length;i[s*4+2]=h,i[s*4+3]=f/2,c=Math.max(c,f/2);for(var v=0;v<f;++v){var p=d[v];i.push(+p)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},sk=function(t,e,n,i){var a=[],o=[],s={},u=0;for(u=0;u<t.length;u++){var l=t[u];s[l.id]=u,a.push(l.x),a.push(l.y),a.push(0),a.push(0),o.push([])}for(u=0;u<e.length;u++){var c=e[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(n(c)),o[s[c.source]].push(i(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(n(c)),o[s[c.target]].push(i(c)),o[s[c.target]].push(0)}var h=0;for(u=0;u<t.length;u++){var d=a.length,f=o[u],v=f.length;a[u*4+2]=d+1048576*v/4,a[u*4+3]=0,h=Math.max(h,v/4);for(var p=0;p<v;++p){var g=f[p];a.push(+g)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:h}},uk=function(t,e){var n=[],i=t.length,a={};return e.forEach(function(o){t.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),n.push(a[o[s]]),u===i-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(a).length}},lk=function(t){for(var e=[],n=t.length,i=t[0].length,a=function(u){t.forEach(function(l,c){if(e.push(l[u]),c===n-1)for(;e.length%4!==0;)e.push(0)})},o=0;o<i;o++)a(o);return new Float32Array(e)},fk=function(t,e){var n=["V","TB","BT"],i={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";e&&n.indexOf(e)>=0&&(s="x",o="y");var u=0;hv(t,function(h){return u++,h.x>a.x&&(a.x=h.x),h.x<i.x&&(i.x=h.x),h.y>a.y&&(a.y=h.y),h.y<i.y&&(i.y=h.y),!0});var l=Math.PI*2/u,c=a[s]-i[s];return c===0||hv(t,function(h){var d=(h[s]-i[s])/c*(Math.PI*2-l)+l,f=Math.abs(o==="x"?h.x-t.x:h.y-t.y);return h.x=f*Math.cos(d),h.y=f*Math.sin(d),!0}),t};const ck=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData:lk,attributesToTextureData:uk,buildTextureData:ak,buildTextureDataWithOneEdgeAttr:ok,buildTextureDataWithTwoEdgeAttr:sk,proccessToFunc:ik,radialLayout:fk},Symbol.toStringTag,{value:"Module"}));var Ns=E(E(E({},jn),FA),ck);_r("circle",{options:{size:ut.defaultNode.size,style:{x:0,y:0,stroke:ut.defaultNode.style.stroke,fill:ut.defaultNode.style.fill,lineWidth:ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:ut.nodeLabel.style.fill,fontSize:ut.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ut.defaultNode.linkPoints.size,lineWidth:ut.defaultNode.linkPoints.lineWidth,fill:ut.defaultNode.linkPoints.fill,stroke:ut.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:E({},ut.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=$t({},i,t.icon),s=e.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0}),u=o.width,l=o.height,c=o.show,h=o.text;return c&&(h?e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:E({x:-u/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),s},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,h=ge(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),f=d[0]/2;o&&e.addShape("circle",{attrs:E(E({},h),{x:-f,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:E(E({},h),{x:f,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:-f,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:f,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=$t({},e,n),a=this.getSize(t),o=a[0]/2,s=E({x:0,y:0,r:o},i);return s},update:function(t,e){var n=e.getContainer(),i=this.getSize(t),a={stroke:t.color,r:i[0]/2},o=e.get("keyShape"),s=$t({},o.attr(),a,t.style);this.updateShape(t,e,s,!0),this.updateLinkPoints(t,n)}},"single-node");_r("rect",{options:{size:[100,30],style:{radius:0,stroke:ut.defaultNode.style.stroke,fill:ut.defaultNode.style.fill,lineWidth:ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:ut.nodeLabel.style.fill,fontSize:ut.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ut.defaultNode.linkPoints.size,lineWidth:ut.defaultNode.linkPoints.lineWidth,fill:ut.defaultNode.linkPoints.fill,stroke:ut.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:E({},ut.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,h=ge(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),f=d[0],v=d[1];o&&e.addShape("circle",{attrs:E(E({},h),{x:-f/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:E(E({},h),{x:f/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:-v/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:v/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=dt({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],u=E({x:-o/2,y:-s/2,width:o,height:s},i);return u},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,a=this.getSize(t),o=e.get("keyShape");t.size||(a[0]=o.attr("width")||i.width,a[1]=o.attr("height")||i.height);var s={stroke:t.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},u=dt({},i,o.attr(),s);u=dt(u,t.style),this.updateShape(t,e,u,!1),this.updateLinkPoints(t,n)}},"single-node");_r("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:ut.defaultNode.style.stroke,fill:ut.defaultNode.style.fill,lineWidth:ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:ut.nodeLabel.style.fill,fontSize:ut.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ut.defaultNode.linkPoints.size,lineWidth:ut.defaultNode.linkPoints.lineWidth,fill:ut.defaultNode.linkPoints.fill,stroke:ut.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:E({},ut.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),s=i.width,u=i.height,l=i.show,c=i.text;return l&&(c?e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:E({x:-s/2,y:-u/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,h=ge(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),f=d[0]/2,v=d[1]/2;o&&e.addShape("circle",{attrs:E(E({},h),{x:-f,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:E(E({},h),{x:f,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:-v,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:v,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=dt({},e,n),a=this.getSize(t),o=a[0]/2,s=a[1]/2,u=E({x:0,y:0,rx:o,ry:s},i);return u},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,a=this.getSize(t),o={stroke:t.color,rx:a[0]/2,ry:a[1]/2},s=e.get("keyShape"),u=dt({},i,s.attr(),o);u=dt(u,t.style),this.updateShape(t,e,u,!0),this.updateLinkPoints(t,n)}},"single-node");_r("diamond",{options:{size:[80,80],style:{stroke:ut.defaultNode.style.stroke,fill:ut.defaultNode.style.fill,lineWidth:ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:ut.nodeLabel.style.fill,fontSize:ut.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ut.defaultNode.linkPoints.size,lineWidth:ut.defaultNode.linkPoints.lineWidth,fill:ut.defaultNode.linkPoints.fill,stroke:ut.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:E({},ut.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=i.width,u=i.height,l=i.show,c=i.text;return l&&(c?e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:E({x:-s/2,y:-u/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,h=ge(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),f=d[0],v=d[1];o&&e.addShape("circle",{attrs:E(E({},h),{x:-f/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:E(E({},h),{x:f/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:-v/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:v/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(t){var e=this.getSize(t),n=e[0],i=e[1],a=[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]];return a},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=dt({},e,n),a=this.getPath(t),o=E({path:a},i);return o},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,a=this.getPath(t),o={stroke:t.color,path:a},s=e.get("keyShape"),u=dt({},i,s.attr(),o);u=dt(u,t.style),this.updateShape(t,e,u,!0),this.updateLinkPoints(t,n)}},"single-node");_r("triangle",{options:{size:40,direction:"up",style:{stroke:ut.defaultNode.style.stroke,fill:ut.defaultNode.style.fill,lineWidth:ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:ut.nodeLabel.style.fill,fontSize:ut.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ut.defaultNode.linkPoints.size,lineWidth:ut.defaultNode.linkPoints.lineWidth,fill:ut.defaultNode.linkPoints.fill,stroke:ut.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:E({},ut.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.getOptions(t),i=n.icon,a=i===void 0?{}:i,o=n.direction,s=this.getShapeStyle(t),u=t.direction||o,l=e.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),c=a.width,h=a.height,d=a.show,f=a.offset,v=a.text;if(d)if(v)e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var p=-c/2,g=-h/2;(u==="up"||u==="down")&&(g+=f),(u==="left"||u==="right")&&(p+=f),e.addShape("image",{attrs:E({x:p,y:g},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(t,e),l},drawLinkPoints:function(t,e){var n=this.getOptions(t),i=n.linkPoints,a=i===void 0?{}:i,o=n.direction,s=t.direction||o,u=a.top,l=a.left,c=a.right,h=a.bottom,d=a.size,f=a.r,v=ge(a,["top","left","right","bottom","size","r"]),p=this.getSize(t),g=p[0];if(l){var y=null,m=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?y=[-b,m]:s==="down"?y=[-b,-m]:s==="left"&&(y=[-b,b-m]),y&&e.addShape("circle",{attrs:E(E({},v),{x:y[0],y:y[1],r:d/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(c){var x=null,m=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?x=[b,m]:s==="down"?x=[b,-m]:s==="right"&&(x=[b,b-m]),x&&e.addShape("circle",{attrs:E(E({},v),{x:x[0],y:x[1],r:d/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(u){var S=null,m=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="up"?S=[b-m,-m]:s==="left"?S=[b,-m]:s==="right"&&(S=[-b,-m]),S&&e.addShape("circle",{attrs:E(E({},v),{x:S[0],y:S[1],r:d/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(h){var C=null,m=g*Math.sin(1/3*Math.PI),b=g*Math.sin(1/3*Math.PI);s==="down"?C=[-b+m,m]:s==="left"?C=[b,m]:s==="right"&&(C=[-b,m]),C&&e.addShape("circle",{attrs:E(E({},v),{x:C[0],y:C[1],r:d/2||f||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(t){var e=this.getOptions(t).direction,n=t.direction||e,i=this.getSize(t),a=i[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return n==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:n==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:n==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=dt({},e,n),a=this.getPath(t),o=E({path:a},i);return o},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,a=this.getPath(t),o={stroke:t.color,path:a},s=e.get("keyShape"),u=dt({},i,s.attr(),o);u=dt(u,t.style),this.updateShape(t,e,u,!0),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var n=this.getOptions({}),i=n.linkPoints,a=n.direction,o=t.direction||a,s=e.find(function(K){return K.get("className")==="link-point-left"}),u=e.find(function(K){return K.get("className")==="link-point-right"}),l=e.find(function(K){return K.get("className")==="link-point-top"}),c=e.find(function(K){return K.get("className")==="link-point-bottom"}),h=i,d=s||u||l||c;d&&(h=d.attr());var f=dt({},h,t.linkPoints),v=f.fill,p=f.stroke,g=f.lineWidth,y=f.size/2;y||(y=f.r);var m=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},b=m.left,x=m.right,S=m.top,C=m.bottom,w=this.getSize(t),I=w[0],T={r:y,fill:v,stroke:p,lineWidth:g},O=null,_=I*Math.sin(1/3*Math.PI),B=I*Math.sin(1/3*Math.PI);o==="up"?O=[-B,_]:o==="down"?O=[-B,-_]:o==="left"&&(O=[-B,B-_]),O&&(s?!b&&b!==void 0?s.remove():s.attr(E(E({},T),{x:O[0],y:O[1]})):b&&e.addShape("circle",{attrs:E(E({},T),{x:O[0],y:O[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var z=null;o==="up"?z=[B,_]:o==="down"?z=[B,-_]:o==="right"&&(z=[B,B-_]),z&&(u?!x&&x!==void 0?u.remove():u.attr(E(E({},T),{x:z[0],y:z[1]})):x&&e.addShape("circle",{attrs:E(E({},T),{x:z[0],y:z[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Y=null;o==="up"?Y=[B-_,-_]:o==="left"?Y=[B,-_]:o==="right"&&(Y=[-B,-_]),Y&&(l?!S&&S!==void 0?l.remove():l.attr(E(E({},T),{x:Y[0],y:Y[1]})):S&&e.addShape("circle",{attrs:E(E({},T),{x:Y[0],y:Y[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var X=null;o==="down"?X=[-B+_,_]:o==="left"?X=[B,_]:o==="right"&&(X=[-B,_]),X&&(c?!C&&C!==void 0?c.remove():c.attr(E(E({},T),{x:X[0],y:X[1]})):C&&e.addShape("circle",{attrs:E(E({},T),{x:X[0],y:X[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node");_r("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:ut.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=this.getOptions(t).preRect,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=this.getSize(t),s=o[0],u=o[1],l=e.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),c=i.show,h=ge(i,["show"]);return c&&e.addShape("rect",{attrs:E({x:-s/2,y:-u/2,height:u},h),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),l},drawLogoIcon:function(t,e){var n=this.getOptions(t).logoIcon,i=n===void 0?{}:n,a=this.getSize(t),o=a[0];if(i.show){var s=i.width,u=i.height,l=i.x,c=i.y,h=i.offset,d=i.text,f=ge(i,["width","height","x","y","offset","text"]);d?e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},f),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:E(E({},f),{x:l||-o/2+s+h,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=this.getOptions(t).stateIcon,i=n===void 0?{}:n,a=this.getSize(t),o=a[0];if(i.show){var s=i.width,u=i.height,l=i.x,c=i.y,h=i.offset,d=i.text,f=ge(i,["width","height","x","y","offset","text"]);d?e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},f),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:E(E({},f),{x:l||o/2-s+h,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,u=i.bottom,l=i.size,c=i.r,h=ge(i,["top","left","right","bottom","size","r"]),d=this.getSize(t),f=d[0],v=d[1];o&&e.addShape("circle",{attrs:E(E({},h),{x:-f/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:E(E({},h),{x:f/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:-v/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&e.addShape("circle",{attrs:E(E({},h),{x:0,y:v/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(t,e){var n=this.getOptions(t),i=n.labelCfg,a=i===void 0?{}:i,o=n.logoIcon,s=o===void 0?{}:o,u=n.descriptionCfg,l=u===void 0?{}:u,c=this.getSize(t),h=c[0],d=null,f=s.show,v=s.width,p=-h/2+a.offset;f&&(p=-h/2+v+a.offset);var g=a.style,y=l.style,m=l.paddingTop;return ot(t.description)?(d=e.addShape("text",{attrs:E(E({},g),{x:p,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.addShape("text",{attrs:E(E({},y),{x:p,y:17+(m||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})):d=e.addShape("text",{attrs:E(E({},g),{x:p,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),d},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=dt({},e,n),a=this.getSize(t),o=i.width||a[0],s=i.height||a[1],u=E({x:-o/2,y:-s/2,width:o,height:s},i);return u},update:function(t,e){var n=this.getOptions(t),i=n.style,a=i===void 0?{}:i,o=n.labelCfg,s=o===void 0?{}:o,u=n.descriptionCfg,l=u===void 0?{}:u,c=this.getSize(t),h=c[0],d=c[1],f=e.get("keyShape");f.attr(E(E({},a),{x:-h/2,y:-d/2,width:h,height:d}));var v=e.getContainer(),p=v.find(function(Ot){return Ot.get("className")==="rect-logo-icon"}),g=p?p.attr():{},y=dt({},g,t.logoIcon),m=y.width;m===void 0&&(m=this.options.logoIcon.width);var b=t.logoIcon?t.logoIcon.show:void 0,x=s.offset,S=-h/2+m+x;!b&&b!==void 0&&(S=-h/2+x);var C=v.find(function(Ot){return Ot.get("className")==="node-label"}),w=v.find(function(Ot){return Ot.get("className")==="rect-description"});if(t.label)if(!C)v.addShape("text",{attrs:E(E({},s.style),{x:S,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0});else{var I=t.labelCfg?t.labelCfg.style:{},T=dt({},C.attr(),I);t.label&&(T.text=t.label),T.x=S,ot(t.description)&&(T.y=-5),w&&(w.resetMatrix(),w.attr({x:S})),C.resetMatrix(),C.attr(T)}if(ot(t.description)){var O=l.paddingTop;if(!w)v.addShape("text",{attrs:E(E({},l.style),{x:S,y:17+(O||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var I=t.descriptionCfg?t.descriptionCfg.style:{},_=dt({},w.attr(),I);ot(t.description)&&(_.text=t.description),_.x=S,w.resetMatrix(),w.attr(E(E({},_),{y:17+(O||0)}))}}var B=v.find(function(Ot){return Ot.get("className")==="pre-rect"});if(B){var z=dt({},B.attr(),t.preRect);B.attr(E(E({},z),{x:-h/2,y:-d/2,height:d}))}if(p)if(!b&&b!==void 0)p.remove();else{var Y=y.width,X=y.height,K=y.x,G=y.y,tt=y.offset,H=ge(y,["width","height","x","y","offset"]);p.attr(E(E({},H),{x:K||-h/2+Y+tt,y:G||-X/2,width:Y,height:X}))}else b&&this.drawLogoIcon(t,v);var q=v.find(function(Ot){return Ot.get("className")==="rect-state-icon"}),J=q?q.attr():{},rt=dt({},J,t.stateIcon);if(q){!rt.show&&rt.show!==void 0&&q.remove();var ft=rt.width,X=rt.height,K=rt.x,G=rt.y,wt=rt.offset,mt=ge(rt,["width","height","x","y","offset"]);q.attr(E(E({},mt),{x:K||h/2-ft+wt,y:G||-X/2,width:ft,height:X}))}else rt.show&&this.drawStateIcon(t,v);this.updateLinkPoints(t,v)}},"single-node");_r("star",{options:{size:60,style:{stroke:ut.defaultNode.style.stroke,fill:ut.defaultNode.style.fill,lineWidth:ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:ut.nodeLabel.style.fill,fontSize:ut.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ut.defaultNode.linkPoints.size,lineWidth:ut.defaultNode.linkPoints.lineWidth,fill:ut.defaultNode.linkPoints.fill,stroke:ut.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:E({},ut.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=i.width,u=i.height,l=i.show,c=i.text;return l&&(c?e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:E({x:-s/2,y:-u/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=n===void 0?{}:n,a=i.top,o=i.left,s=i.right,u=i.leftBottom,l=i.rightBottom,c=i.size,h=i.r,d=ge(i,["top","left","right","leftBottom","rightBottom","size","r"]),f=this.getSize(t),v=f[0];if(s){var p=Math.cos(.1*Math.PI)*v,g=Math.sin(18/180*Math.PI)*v;e.addShape("circle",{attrs:E(E({},d),{x:p,y:-g,r:c/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(a){var p=Math.cos(.5*Math.PI)*v,g=Math.sin(90/180*Math.PI)*v;e.addShape("circle",{attrs:E(E({},d),{x:p,y:-g,r:c/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(o){var p=Math.cos(.9*Math.PI)*v,g=Math.sin(162/180*Math.PI)*v;e.addShape("circle",{attrs:E(E({},d),{x:p,y:-g,r:c/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(u){var p=Math.cos(1.3*Math.PI)*v,g=Math.sin(234/180*Math.PI)*v;e.addShape("circle",{attrs:E(E({},d),{x:p,y:-g,r:c/2||h||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){var p=Math.cos(1.7*Math.PI)*v,g=Math.sin(306/180*Math.PI)*v;e.addShape("circle",{attrs:E(E({},d),{x:p,y:-g,r:c/2||h||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){for(var e=this.getSize(t),n=e[0],i=n*3/8,a=t.innerR||i,o=[],s=0;s<5;s++){var u=Math.cos((18+72*s)/180*Math.PI)*n,l=Math.sin((18+72*s)/180*Math.PI)*n,c=Math.cos((54+72*s)/180*Math.PI)*a,h=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",u,-l]):o.push(["L",u,-l]),o.push(["L",c,-h])}return o.push(["Z"]),o},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=dt({},e,n),a=this.getPath(t),o=E({path:a},i);return o},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,a=this.getPath(t),o={stroke:t.color,path:a},s=e.get("keyShape"),u=dt({},i,s.attr(),o);u=dt(u,t.style),this.updateShape(t,e,u,!0),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,i=e.find(function(_){return _.get("className")==="link-point-left"}),a=e.find(function(_){return _.get("className")==="link-point-right"}),o=e.find(function(_){return _.get("className")==="link-point-top"}),s=e.find(function(_){return _.get("className")==="link-point-left-bottom"}),u=e.find(function(_){return _.get("className")==="link-point-right-bottom"}),l=n,c=i||a||o||s||u;c&&(l=c.attr());var h=dt({},l,t.linkPoints),d=h.fill,f=h.stroke,v=h.lineWidth,p=h.size/2;p||(p=h.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},y=g.left,m=g.right,b=g.top,x=g.leftBottom,S=g.rightBottom,C=this.getSize(t),w=C[0],I={r:p,fill:d,stroke:f,lineWidth:v},T=Math.cos(18/180*Math.PI)*w,O=Math.sin(18/180*Math.PI)*w;a?!m&&m!==void 0?a.remove():a.attr(E(E({},I),{x:T,y:-O})):m&&e.addShape("circle",{attrs:E(E({},I),{x:T,y:-O}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),T=Math.cos(90/180*Math.PI)*w,O=Math.sin(90/180*Math.PI)*w,o?!b&&b!==void 0?o.remove():o.attr(E(E({},I),{x:T,y:-O})):b&&e.addShape("circle",{attrs:E(E({},I),{x:T,y:-O}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),T=Math.cos(162/180*Math.PI)*w,O=Math.sin(162/180*Math.PI)*w,i?!y&&y!==void 0?i.remove():i.attr(E(E({},I),{x:T,y:-O})):y&&e.addShape("circle",{attrs:E(E({},I),{x:T,y:-O}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),T=Math.cos(234/180*Math.PI)*w,O=Math.sin(234/180*Math.PI)*w,s?!x&&x!==void 0?s.remove():s.attr(E(E({},I),{x:T,y:-O})):x&&e.addShape("circle",{attrs:E(E({},I),{x:T,y:-O}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),T=Math.cos(306/180*Math.PI)*w,O=Math.sin(306/180*Math.PI)*w,u?!S&&S!==void 0?s.remove():u.attr(E(E({},I),{x:T,y:-O})):S&&e.addShape("circle",{attrs:E(E({},I),{x:T,y:-O}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var Xi=jn.defaultSubjectColors;_r("donut",{options:{size:ut.defaultNode.size,style:{x:0,y:0,stroke:ut.defaultNode.style.stroke,fill:ut.defaultNode.style.fill,lineWidth:ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:ut.nodeLabel.style.fill,fontSize:ut.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ut.defaultNode.linkPoints.size,lineWidth:ut.defaultNode.linkPoints.lineWidth,fill:ut.defaultNode.linkPoints.fill,stroke:ut.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:E({},ut.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=n===void 0?{}:n,a=this.getShapeStyle(t),o=$t({},i,t.icon),s=e.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"}),u=o.width,l=o.height,c=o.show,h=o.text;c&&(h?e.addShape("text",{attrs:E({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:E({x:-u/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var d=s.attr("r"),f=.6*d,v=(d+f)/2,p=t,g=p.donutAttrs,y=g===void 0?{}:g,m=p.donutColorMap,b=m===void 0?{}:m,x=Object.keys(y).length;if(y&&x>1){var S=[],C=0;if(Object.keys(y).forEach(function(O){var _=y[O]||0;xt(_)&&(S.push({key:O,value:_,color:b[O]}),C+=_)}),C){var w=d-f;if(x===1){e.addShape("circle",{attrs:{r:v,x:0,y:0,stroke:S[0].color||Xi[0],lineWidth:w},name:"fan-shape-0"});return}var I=[v,0],T=0;S.forEach(function(O,_){var B=O.value/C;if(!(B<.001)){if(B>.999&&(B=1),B===1){e.addShape("circle",{attrs:{r:v,x:0,y:0,stroke:O.color||Xi[_%Xi.length],lineWidth:w},name:"fan-shape-"+_});return}O.percent=B,O.angle=B*Math.PI*2,O.beginAgnle=T,T+=O.angle,O.endAngle=T,O.arcBegin=I,O.arcEnd=[v*Math.cos(O.endAngle),-v*Math.sin(O.endAngle)];var z=O.angle>Math.PI?1:0,Y=[["M",O.arcBegin[0],O.arcBegin[1]],["A",v,v,0,z,0,O.arcEnd[0],O.arcEnd[1]],["L",O.arcEnd[0],O.arcEnd[1]]];e.addShape("path",{attrs:{path:Y,lineWidth:w,stroke:O.color||Xi[_%Xi.length]},name:"fan-shape-"+_}),I=O.arcEnd}})}}return this.drawLinkPoints(t,e),s},update:void 0},"circle");var bo=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},hk=function(t){t===void 0&&(t=[]);var e=[],n=[];t.forEach(function(u){e.push(u.x),n.push(u.y)});var i=Math.min.apply(Math,e),a=Math.max.apply(Math,e),o=Math.min.apply(Math,n),s=Math.max.apply(Math,n);return{centerX:(i+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:i,minY:o,height:s-o,width:a-i}},ac=function(t){for(var e=[],n={},i=t.length,a=i-1;a>=0;a--){var o=t[a];o.id=o.x+"|||"+o.y,n[o.id]=o,e.push(o)}return e},gy=function(t){return ac(t)},hs=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},dk=function(t,e){var n=Math.abs(t.x-e.centerX),i=Math.abs(t.y-e.centerY);return n===0&&i===0?0:n/e.width>i/e.height},Hl=function(t,e,n){var i=dk(e,t);if(i===0){var a=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?a=t.maxX:n.x<e.x?a=t.minX:n.x===e.x&&(o=t.maxY),{x:a,y:o}}return i?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},dv=function(t,e){var n=Math.min(t.minX,e.minX),i=Math.min(t.minY,e.minY),a=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+a)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:a,maxY:o,height:o-i,width:a-n}},Vl=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},xo=function(t,e){var n=t.x,i=t.y;return n<e.minX||n>e.maxX||i<e.minY||i>e.maxY},vk=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},pk=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},gk=function(t,e){return vk(t,e.x).concat(pk(t,e.y))},ka=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},yk=function(t,e){var n=-2,i=0;return e.forEach(function(a){a&&(t.x===a.x&&(i+=n),t.y===a.y&&(i+=n))}),i},vv=function(t,e,n,i,a){return ka(t,e)+ka(t,n)+yk(t,[e,n,i,a])},mk=function r(t,e,n,i,a){a===void 0&&(a=0),t.unshift(e[i]),n[i]&&n[i]!==i&&a<=100&&r(t,e,n,n[i],a+1)},bk=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},So=function(t,e,n,i){var a=n.x-t.x,o=n.y-t.y,s=i.x-t.x,u=i.y-t.y,l=n.x-e.x,c=n.y-e.y,h=i.x-e.x,d=i.y-e.y,f=a*u-o*s,v=l*d-c*h,p=a*c-o*l,g=s*d-u*h;return f*v<=0&&p*g<=0},Wl=function(t,e,n){if(n.width||n.height){var i=Vl(n),a=i[0],o=i[1],s=i[2],u=i[3];return So(t,e,a,o)||So(t,e,a,u)||So(t,e,o,s)||So(t,e,s,u)}return!1},xk=function(t,e,n,i){var a=[];return t.forEach(function(o){if(o!==e&&(o.x===e.x||o.y===e.y)){if(Wl(o,e,n)||Wl(o,e,i))return;a.push(o)}}),ac(a)},Sk=function(t,e,n,i,a,o,s){var u=[],l=[e],c={},h={},d={};h[e.id]=0,d[e.id]=vv(e,n,e);var f={};t.forEach(function(y){f[y.id]=y});for(var v,p;l.length;){if(v=void 0,p=1/0,l.forEach(function(y){d[y.id]<=p&&(p=d[y.id],v=y)}),v===n){var g=[];return mk(g,f,c,n.id),g}bk(l,v),u.push(v),xk(t,v,i,a).forEach(function(y){if(u.indexOf(y)===-1){l.indexOf(y)===-1&&l.push(y);var m=d[v.id]+ka(v,y);h[y.id]&&m>=h[y.id]||(c[y.id]=v.id,h[y.id]=m,d[y.id]=h[y.id]+vv(y,n,e,o,s))}})}return[e,n]},wk=function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)},Mk=function(t,e,n,i){var a=ka(t,e),o=ka(n,e);a<i&&(i=a),o<i&&(i=o);var s={x:e.x-i/a*(e.x-t.x),y:e.y-i/a*(e.y-t.y)},u={x:e.x-i/o*(e.x-n.x),y:e.y-i/o*(e.y-n.y)};return[s,u]},pv=function(t,e){var n=[],i=t[0];return n.push("M"+i.x+" "+i.y),t.forEach(function(a,o){var s=t[o+1],u=t[o+2];if(s&&u)if(wk(a,s,u)){var l=Mk(a,s,u,e),c=l[0],h=l[1];n.push("L"+c.x+" "+c.y),n.push("Q"+s.x+" "+s.y+" "+h.x+" "+h.y),n.push("L"+h.x+" "+h.y)}else n.push("L"+s.x+" "+s.y);else s&&n.push("L"+s.x+" "+s.y)}),n.join("")},yy=function(t,e,n,i,a){var o,s;if(!n||!n.getType())o=bo(t);else if(n.getType()==="combo"){var u=n.getKeyShape();o=u.getCanvasBBox()||bo(t),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=n.getBBox();if(!i||!i.getType())s=bo(e);else if(i.getType()==="combo"){var l=i.getKeyShape().getBBox();if(l){var c=i.getModel(),h=c.x,d=c.y;s={x:h,y:d,width:l.width,height:l.height,minX:l.minX+h,maxX:l.maxX+h,minY:l.minY+d,maxY:l.maxY+d},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=bo(e)}else s=i&&i.getBBox();var f=hs(o,a),v=hs(s,a),p=Hl(f,t,e),g=Hl(v,e,t),y=hk([p,g]),m=dv(f,y),b=dv(v,y),x=[];x=x.concat(Vl(m)).concat(Vl(b));var S={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[y,m,b].forEach(function(w){x=x.concat(gk(w,S).filter(function(I){return xo(I,f)&&xo(I,v)}))}),[{x:p.x,y:g.y},{x:g.x,y:p.y}].forEach(function(w){xo(w,f)&&xo(w,v)&&x.push(w)}),x.unshift(p),x.push(g),x=ac(x);var C=Sk(x,p,g,o,s,t,e);return C.unshift(t),C.push(e),gy(C)},Ck=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},Ek=function(t,e,n,i,a){return gy(yy(t,e,n,i,a.offset))},Ak={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Ck,fallbackRoute:Ek},Cr=function(t,e){var n=Math.round(Math.abs(t/e)),i=t<0?-1:1;return n<0?0:i*n},kk=function(t,e,n){var i={};return t.forEach(function(a){if(a)for(var o=hs(a.getBBox(),n),s=Cr(o.minX,e);s<=Cr(o.maxX,e);s+=1)for(var u=Cr(o.minY,e);u<=Cr(o.maxY,e);u+=1)i[s+"|||"+u]=!0}),i},Hu=function(t,e){var n=e.x-t.x,i=e.y-t.y;return n||i?Math.atan2(i,n):0},gv=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},yv=function(t,e,n){for(var i=1/0,a=0,o=e.length;a<o;a++){var s=n(t,e[a]);s<i&&(i=s)}return i},mv=function(t,e,n,i,a){var o=[];if(!n)return[t];var s=a.directions,u=a.offset,l=n.getBBox(),c=e.x>l.minX&&e.x<l.maxX&&e.y>l.minY&&e.y<l.maxY,h=hs(l,u);for(var d in h)h[d]=Cr(h[d],a.gridSize);if(c){for(var f=0,v=s;f<v.length;f++)for(var p=v[f],g=[[{x:h.minX,y:h.minY},{x:h.maxX,y:h.minY}],[{x:h.minX,y:h.minY},{x:h.minX,y:h.maxY}],[{x:h.maxX,y:h.minY},{x:h.maxX,y:h.maxY}],[{x:h.minX,y:h.maxY},{x:h.maxX,y:h.maxY}]],d=0;d<4;d++){var y=g[d],m=jn.getLineIntersect(t,{x:t.x+p.stepX*h.width,y:t.y+p.stepY*h.height},y[0],y[1]);m&&!Wl(t,m,l)&&(m.id=m.x+"|||"+m.y,o.push(m))}return o}var b=Hl(h,t,i);return b.id=b.x+"|||"+b.y,[b]},Ul=function(t,e,n,i){var a=Hu(t,e);if(!n[t.id]){var o=Hu(i,t);return gv(o,a)}var s=Hu({x:n[t.id].x,y:n[t.id].y},t);return gv(s,a)},Ok=function(t,e,n,i,a,o,s){var u=[i],l=t.id,c=t.x,h=t.y,d={x:c,y:h,id:l};for(Ul(d,o,e,n)&&u.unshift({x:o.x===i.x?i.x:d.x*s,y:o.y===i.y?i.y:d.y*s});e[l]&&e[l].id!==l;){var f={x:c,y:h,id:l},v=e[l].id,p=e[l].x,g=e[l].y,y={x:p,y:g,id:v},m=Ul(y,f,e,n);m&&u.unshift({x:y.x===f.x?u[0].x:y.x*s,y:y.y===f.y?u[0].y:y.y*s}),l=v,c=p,h=g}var b={x:c,y:h};return u[0].x=b.x===n.x?a.x:u[0].x,u[0].y=b.y===n.y?a.y:u[0].y,u.unshift(a),u},Ik=function(t,e,n,i,a){if(isNaN(t.x)||isNaN(e.x))return[];var o=$t(Ak,a);o.obstacles=o.obstacles||[];var s=o.gridSize,u=kk(o.obstacles.concat([n,i]),s,o.offset),l={x:Cr(t.x,s),y:Cr(t.y,s)},c={x:Cr(e.x,s),y:Cr(e.y,s)};t.id=l.x+"|||"+l.y,e.id=c.x+"|||"+c.y;var h=mv(l,t,n,c,o),d=mv(c,e,i,l,o);h.forEach(function(z){delete u[z.id]}),d.forEach(function(z){delete u[z.id]});for(var f={},v={},p={},g={},y={},m=0;m<h.length;m++){var b=h[m];f[b.id]=b,g[b.id]=0,y[b.id]=yv(b,d,o.distFunc)}for(var x=o.maximumLoops,S=o.penalties,C,w,I,T,O,_,B;Object.keys(f).length>0&&x>0&&(C=void 0,w=1/0,Object.keys(f).forEach(function(z){var Y=f[z].id;y[Y]<=w&&(w=y[Y],C=f[Y])}),!!C);){if(d.findIndex(function(z){return z.x===C.x&&z.y===C.y})>-1)return Ok(C,p,l,e,t,c,s);delete f[C.id],v[C.id]=!0;for(var m=0;m<o.directions.length;m++)I=o.directions[m],T={x:C.x+I.stepX,y:C.y+I.stepY,id:Math.round(C.x)+I.stepX+"|||"+(Math.round(C.y)+I.stepY)},!v[T.id]&&(B=Ul(C,T,p,l),!(B>o.maxAllowedDirectionChange)&&(u[T.id]||(f[T.id]||(f[T.id]=T),O=o.distFunc(C,T)+(isNaN(S[B])?s:S[B]),_=g[C.id]+O,!(g[T.id]&&_>=g[T.id])&&(p[T.id]=C,g[T.id]=_,y[T.id]=_+yv(T,d,o.distFunc)))));x-=1}return o.fallbackRoute(t,e,n,i,o)};N0("polyline",{options:{color:ut.defaultEdge.color,size:ut.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:ut.defaultEdge.style.stroke,lineAppendWidth:ut.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ut.edgeLabel.style.fill,fontSize:ut.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:E({},ut.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);n.radius===0&&delete n.radius;var i=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return i},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=dt({},e,n,t.style);t=this.getPathPoints(t),this.radius=i.radius,this.offset=i.offset;var a=t.startPoint,o=t.endPoint,s=this.getControlPoints(t),u=[a];s&&(u=u.concat(s)),u.push(o);var l=t.sourceNode,c=t.targetNode,h=i.radius,d=this.options.routeCfg,f=dt({},d,t.routeCfg);f.offset=i.offset;var v=this.getPath(u,l,c,h,f);(pt(v)&&v.length<=1||ot(v)&&v.indexOf("L")===-1)&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(v="M0 0, L0 0");var p=dt({},ut.defaultEdge.style,i,{lineWidth:t.size,path:v});return p},updateShapeStyle:function(t,e){var n=e.getContainer();if(e.isVisible()){var i={stroke:t.color},a=n.find(function(x){return x.get("className")==="edge-shape"})||e.getKeyShape(),o=t.size;t=this.getPathPoints(t);var s=t.startPoint,u=t.endPoint,l=this.getControlPoints(t),c=[s];l&&(c=c.concat(l)),c.push(u);var h=a.attr(),d=dt({},i,h,t.style),f=t.sourceNode,v=t.targetNode,p=d.radius,g=this.options.routeCfg,y=dt({},g,t.routeCfg);y.offset=d.offset;var m=this.getPath(c,f,v,p,y);(pt(m)&&m.length<=1||ot(m)&&m.indexOf("L")===-1)&&(m="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(m="M0 0, L0 0"),h.endArrow&&d.endArrow===!1&&(t.style.endArrow={path:""}),h.startArrow&&d.startArrow===!1&&(t.style.startArrow={path:""});var b=dt(i,a.attr(),{lineWidth:o,path:m},t.style);a&&a.attr(b)}},getPath:function(t,e,n,i,a){var o=a.offset,s=a.simple;if(!o||t.length>2){if(i)return pv(t,i);var u=[];return U(t,function(d,f){f===0?u.push(["M",d.x,d.y]):u.push(["L",d.x,d.y])}),u}var l=s?yy(t[t.length-1],t[0],n,e,o):Ik(t[0],t[t.length-1],e,n,a);if(!l||!l.length)return"M0 0, L0 0";if(i){var c=pv(l,i);return c}var h=jn.pointsToPolygon(l);return h}},"single-edge");var bv=Ns.cloneEvent,xv=Ns.isNaN,Sv=Math.abs,Pk=10;const Tk={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,i=+t.clientY;if(!(xv(n)||xv(i))){var a=n-e.x,o=i-e.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:n,y:i};var s=this.graph.get("width"),u=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox();(l.minX<=s+this.scalableRange&&l.minX+a>s+this.scalableRange||l.maxX+this.scalableRange>=0&&l.maxX+this.scalableRange+a<0)&&(a=0),(l.minY<=u+this.scalableRange&&l.minY+o>u+this.scalableRange||l.maxY+this.scalableRange>=0&&l.maxY+this.scalableRange+o<0)&&(o=0),this.graph.translate(a,o)}},onDragStart:function(t){var e=this;if(t.originalEvent,!!this.shouldBegin.call(this,t)){var n=t.target,i=n&&n.isCanvas&&n.isCanvas();if(!(!this.allowDragOnItem&&!i)&&(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize)){for(var a=this.graph,o=a.getEdges(),s=0,u=o.length;s<u;s++){var l=o[s].get("group").get("children");l&&l.forEach(function(b){b.set("ori-visibility",b.get("ori-visibility")||b.get("visible")),b.hide()})}for(var c=a.getNodes(),h=0,d=c.length;h<d;h++)for(var f=c[h].getContainer(),v=f.get("children"),p=0,g=v;p<g.length;p++){var y=g[p],m=y.get("isKeyShape");m||(y.set("ori-visibility",y.get("ori-visibility")||y.get("visible")),y.hide())}}}},onDragMove:function(t){this.graph;var e=t.target,n=e&&e.isCanvas&&e.isCanvas();if(!(!this.allowDragOnItem&&!n)&&(t=bv(t),!!this.origin)){if(!this.dragging){if(Sv(this.origin.x-t.clientX)+Sv(this.origin.y-t.clientY)<Pk)return;this.shouldBegin.call(this,t)&&(t.type="dragstart",this.dragging=!0)}this.shouldUpdate.call(this,t)&&this.updateViewport(t)}},onDragEnd:function(t){var e=this.graph;if(this.enableOptimize){for(var n=e.getEdges(),i=0,a=n.length;i<a;i++){var o=n[i].get("group").get("children");o&&o.forEach(function(y){var m=y.get("ori-visibility");m&&y.show()})}for(var s=e.getNodes(),u=0,l=s.length;u<l;u++)for(var c=s[u].getContainer(),h=c.get("children"),d=0,f=h;d<f.length;d++){var v=f[d],p=v.get("isKeyShape");if(!p){var g=v.get("ori-visibility");g&&v.show()}}}if(!this.dragging){this.origin=null;return}t=bv(t),this.shouldEnd.call(this,t)&&this.updateViewport(t),t.type="dragend",this.endDrag()},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1}},Nk={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(t){if(!this.origin||!t||t.destroyed)return!1;var e=t.getType();return e==="combo"},onDragStart:function(t){var e=this;if(this.shouldBegin.call(this,t)){var n=t.item;if(!(!n||n.destroyed||n.hasLocked())){var i=t.target;if(i){var a=i.get("isAnchorPoint");if(a)return}var o=this.graph;this.targets=[],this.targetCombo=null;var s=o.findAllByState("node",this.selectedState),u=n.get("id"),l=s.filter(function(h){var d=h.get("id");return u===d});l.length===0?this.targets.push(n):s.length>1?s.forEach(function(h){var d=h.hasLocked();d||e.targets.push(h)}):this.targets.push(n);var c=[];this.targets.forEach(function(h){c.push(Pt(h.getModel()))}),this.set("beforeDragNodes",c),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;this.origin&&this.shouldUpdate(this,t)&&(this.get("enableDelegate")?this.updateDelegate(t):this.targets.map(function(n){e.update(n,t)}))},onDragEnd:function(t){if(!(!this.origin||!this.shouldEnd.call(this,t))){var e=t.item;if(e){var n=e.getContainer();n.set("capture",!0)}this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(t);var i=this.graph;if(i.get("enabledStack")){var a={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(o){a.after.nodes.push(o.getModel())}),i.pushStack("update",Pt(a))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.validationCombo(e)){this.updatePositions(t);var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var i=e.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==i.id&&n.updateComboTree(a,i.id)}),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;!this.targets||this.targets.length===0||(this.updatePositions(t),this.onlyChangeComboSize?e.updateCombos():this.targets.map(function(n){var i=n.getModel();i.comboId&&e.updateComboTree(n)}))},onDropNode:function(t){var e=this;if(!(!e.targets||e.targets.length===0)){var n=t.item;e.updatePositions(t);var i=e.graph,a=n.getModel().comboId;if(a){var o=i.findById(a);e.comboActiveState&&i.setItemState(o,e.comboActiveState,!1),e.targets.map(function(s){var u=s.getModel();a!==u.comboId&&i.updateComboTree(s,a)}),i.updateCombo(o)}else e.targets.map(function(s){var u=s.getModel();u.comboId&&i.updateComboTree(s)});i.emit("dragnodeend",{items:e.targets,targetItem:n})}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t){var e=this;!this.targets||this.targets.length===0||this.get("enableDelegate")&&this.targets.map(function(n){return e.update(n,t)})},update:function(t,e){var n=this.origin,i=t.get("model"),a=t.get("id");this.point[a]||(this.point[a]={x:i.x||0,y:i.y||0});var o=e.x-n.x+this.point[a].x,s=e.y-n.y+this.point[a].y,u={x:o,y:s};this.get("updateEdge")?this.graph.updateItem(t,u,!1):t.updatePosition(u)},updateDelegate:function(t){if(this.graph,this.delegateRect){var h=t.x-this.origin.x+this.originPoint.minX,d=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:h,y:d})}else{var e=this.graph.get("group"),n=$t({},_e.delegateStyle,this.delegateStyle),i=this.calculationGroupPosition(t),a=i.x,o=i.y,s=i.width,u=i.height,l=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:l,minY:c},this.delegateRect=e.addShape("rect",{attrs:E({width:s,height:u,x:a,y:o},n),name:"rect-delegate-shape"})}},calculationGroupPosition:function(t){var e=this.graph,n=e.findAllByState("node",this.selectedState);n.length===0&&n.push(t.item);for(var i=1/0,a=-1/0,o=1/0,s=-1/0,u=0;u<n.length;u++){var l=n[u],c=l.getBBox(),h=c.minX,d=c.minY,f=c.maxX,v=c.maxY;h<i&&(i=h),d<o&&(o=d),f>a&&(a=f),v>s&&(s=v)}var p=Math.floor(i),g=Math.floor(o),y=Math.ceil(a)-Math.floor(i),m=Math.ceil(s)-Math.floor(o);return{x:p,y:g,width:y,height:m,minX:i,minY:o}}},_k={getDefaultCfg:function(){return{activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return{"node:tap":"setAllItemStates","canvas:tap":"clearAllItemStates"}},setAllItemStates:function(t){var e=this,n=t.item,i=e.graph;if(e.item=n,!!e.shouldUpdate(t.item,{event:t,action:"activate"})){for(var a=e.activeState,o=e.inactiveState,s=i.getNodes(),u=i.getEdges(),l=s.length,c=u.length,h=0;h<l;h++){var d=s[h],f=d.hasState("selected");e.resetSelected&&f&&i.setItemState(d,"selected",!1),i.setItemState(d,a,!1),o&&i.setItemState(d,o,!0)}for(var h=0;h<c;h++){var v=u[h];i.setItemState(v,a,!1),o&&i.setItemState(v,o,!0)}o&&i.setItemState(n,o,!1),i.setItemState(n,a,!0);for(var p=n.getEdges(),g=p.length,h=0;h<g;h++){var v=p[h],y=void 0;v.getSource()===n?y=v.getTarget():y=v.getSource(),o&&i.setItemState(y,o,!1),i.setItemState(y,a,!0),i.setItemState(v,o,!1),i.setItemState(v,a,!0),v.toFront()}i.emit("afteractivaterelations",{item:t.item,action:"activate"})}},clearActiveState:function(t){var e=this,n=e.get("graph");if(e.shouldUpdate(t.item,{event:t,action:"deactivate"})){var i=this.activeState,a=this.inactiveState,o=n.get("autoPaint");n.setAutoPaint(!1);for(var s=n.getNodes(),u=n.getEdges(),l=s.length,c=u.length,h=0;h<l;h++){var d=s[h];n.clearItemStates(d,[i,a])}for(var h=0;h<c;h++){var f=u[h];n.clearItemStates(f,[i,a,"deactivate"])}n.paint(),n.setAutoPaint(o),n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}},clearAllItemStates:function(t){var e=this,n=e.graph;if(e.shouldUpdate(t.item,{event:t,action:"deactivate"})){for(var i=this.activeState,a=this.inactiveState,o=n.getNodes(),s=n.getEdges(),u=o.length,l=s.length,c=0;c<u;c++){var h=o[c];n.clearItemStates(h,[i,a])}for(var c=0;c<l;c++){var d=s[c];n.clearItemStates(d,[i,a,"deactivate"])}n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}},Lk={getDefaultCfg:function(){return{multiple:!0,selectedState:"selected"}},getEvents:function(){return{"node:tap":"onClick","combo:tap":"onClick","canvas:tap":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(!(!n||n.destroyed)){var i=n.getType(),a=e.graph,o=e.multiple,s=e.shouldUpdate,u=e.shouldBegin;if(u.call(e,t)){if(!o){var l=a.findAllByState(i,e.selectedState);U(l,function(d){d!==n&&a.setItemState(d,e.selectedState,!1)})}if(n.hasState(e.selectedState)){s.call(e,t)&&a.setItemState(n,e.selectedState,!1);var c=a.findAllByState("node",e.selectedState),h=a.findAllByState("combo",e.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,combos:h},select:!1})}else{s.call(e,t)&&a.setItemState(n,e.selectedState,!0);var c=a.findAllByState("node",e.selectedState),h=a.findAllByState("combo",e.selectedState);a.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,combos:h},select:!0})}}}},onCanvasClick:function(){var t=this,e=this.graph,n=e.findAllByState("node",this.selectedState);U(n,function(a){e.setItemState(a,t.selectedState,!1)});var i=e.findAllByState("combo",this.selectedState);U(i,function(a){e.setItemState(a,t.selectedState,!1)}),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},Bk={firstScale:null,getDefaultCfg:function(){return{originScale:1,sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{pinchstart:"onPinch",pinchmove:"onPinch"}},onPinch:function(t){t.preventDefault&&t.preventDefault(),t.originalEvent.preventDefault&&t.originalEvent.preventDefault();var e=t.originalEvent.pointers;if(!(e.length<2)){t.type==="pinchstart"&&(this.firstScale=this.graph.getZoom());var n=t.originalEvent.scale||t.originalEvent.srcEvent.extra.scale,i=this.firstScale*n;this.currentScale=i;var a=this.get("minZoom")||this.graph.get("minZoom"),o=this.get("maxZoom")||this.graph.get("maxZoom");if(!(i>o||i<a)){var s=this.graph.get("canvas"),u={x:e[0].clientX,y:e[0].clientY},l={x:e[1].clientX,y:e[1].clientY},c=s.getPointByClient((u.x+l.x)/2,(u.y+l.y)/2);this.graph.zoomTo(i,{x:c.x,y:c.y})}}}};var wv="tap",Dk=["tap","dbltap"];const Fk={getDefaultCfg:function(){return{trigger:wv,onChange:function(){}}},getEvents:function(){var t,e;return Dk.includes(this.trigger)?e=this.trigger:(e=wv,console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),t={},t["node:".concat(e)]="onNodeTap",t.touchstart="onNodeTap",t},onNodeTap:function(t){var e=t.item,n=this.graph.findDataById(e.get("id"));if(n){var i=n.children;if(!(!i||i.length===0)){var a=!n.collapsed;if(this.shouldBegin(t,a)&&(n.collapsed=a,e.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:t.item,collapsed:a}),!!this.shouldUpdate(t,a))){try{this.onChange(e,a)}catch(o){console.warn(o)}this.graph.layout()}}}}};var Rk=Ns.calculationItemsBBox,zk=function r(t,e){if(e(t)!==!1&&t){var n=t.get("combos");if(n.length===0)return!1;U(n,function(i){r(i,e)})}};const Xk={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;if(!e||e.destroyed||!this.shouldUpdate(this,t))return!1;var n=e.getType();return n==="combo"},onDragStart:function(t){var e=this,n=this.graph,i=t.item;if(this.validationCombo(t)){this.targets=[];var a=n.findAllByState("combo",this.selectedState),o=i.get("id"),s=a.filter(function(u){var l=u.get("id");return o===l});s.length===0?this.targets.push(i):this.targets=a,this.activeState&&this.targets.map(function(u){var l=u.getModel();if(l.parentId){var c=n.findById(l.parentId);c&&n.setItemState(c,e.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],zk(i,function(u){if(u.destroyed)return!1;var l=u.getModel();return e.currentItemChildCombos.push(l.id),!0})}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,i=t.item,a=i.getModel(),o=n.getCombos(),s=i.getBBox(),u=s.centerX,l=s.centerY,c=s.width,h=o.filter(function(d){var f=d.getModel();return a.parentId,f.id!==a.id&&!e.currentItemChildCombos.includes(f.id)});h.map(function(d){var f=d.getBBox(),v=f.centerX,p=f.centerY,g=f.width,y=u-v,m=l-p,b=2*Math.sqrt(y*y+m*m);c+g-b>.8*c?n.setItemState(d,e.activeState,!0):n.setItemState(d,e.activeState,!1)})}U(this.targets,function(d){e.updateCombo(d,t)})}},updatePositions:function(t){var e=this;this.enableDelegate&&U(this.targets,function(n){e.updateCombo(n,t)})},onDrop:function(t){var e=this,n=t.item;if(!(!n||!this.targets||n.destroyed)){this.updatePositions(t);var i=this.graph,a=n.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(e.activeState&&i.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o,a.id)):i.updateCombo(n)}),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(!(!this.targets||this.targets.length===0)){this.updatePositions(t);var n=this.graph,i=t.item,a=i.getModel().comboId,o;if(a){if(this.activeState){var s=n.findById(a);n.setItemState(s,this.activeState,!1)}this.targets.map(function(u){e.onlyChangeComboSize?n.updateCombo(u):a!==u.getID()&&(o=n.findById(a),a!==u.getModel().parentId&&n.updateComboTree(u,a))})}else this.targets.map(function(u){if(e.onlyChangeComboSize)n.updateCombo(u);else{var l=u.getModel();l.comboId&&n.updateComboTree(u)}});this.endComparison=!0,this.end(o,t)}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(!(!this.targets||this.targets.length===0)){var e=t.item;this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(this.origin){var i=this.graph;if(this.delegateShape){var a=i.get("delegateGroup");a.clear(),this.delegateShape=null}t&&this.activeState&&i.setItemState(t,this.activeState,!1),t||this.targets.map(function(o){n.onlyChangeComboSize?i.updateCombo(o):i.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e){var n=this;if(e(t)!==!1&&t){var i=t.get("combos");U(i,function(o){n.traverse(o,e)});var a=t.get("nodes");U(a,function(o){n.traverse(o,e)})}},updateCombo:function(t,e){var n=this;this.traverse(t,function(i){return i.destroyed?!1:(n.updateSignleItem(i,e),!0)})},updateSignleItem:function(t,e){var n=this.origin,i=this.graph,a=t.getModel(),o=t.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=e.x-n.x+this.point[o].x,u=e.y-n.y+this.point[o].y;i.updateItem(t,{x:s,y:u})},getParentCombo:function(t){var e=this.graph;if(t){var n=e.findById(t);if(n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var d=t.x-this.origin.x+this.originPoint.minX,f=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:d,y:f})}else{var n=e.get("delegateGroup"),i=null;this.targets.length>1?i=Rk(this.targets):i=this.targets[0].getBBox();var a=i.x,o=i.y,s=i.width,u=i.height,l=i.minX,c=i.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:l,minY:c};var h=E(E({},_e.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:E({width:i.width,height:i.height,x:i.x,y:i.y},h),name:"combo-delegate-shape"})}}};var Mv="dblclick",Yk=["click","dblclick"];const jk={getDefaultCfg:function(){return{trigger:Mv,relayout:!0}},getEvents:function(){var t,e;return Yk.includes(this.trigger)?e=this.trigger:(e=Mv,console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),t={},t["combo:".concat(e)]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this,i=n.graph,a=n.relayout;if(!(!e||e.destroyed||e.getType()!=="combo")){var o=e.getModel(),s=o.id;s&&(i.collapseExpandCombo(s),a&&i.get("layout")?i.layout():i.refreshPositions())}}};var Cv="tap",Hk=["tap","drag"],Ev=void 0,Vk=["shift","ctrl","control","alt","meta",void 0];const Wk={getDefaultCfg:function(){return{trigger:Cv,key:Ev,edgeConfig:{}}},getEvents:function(){var t=this;Hk.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=Cv,console.warn("Behavior create-edge  trigger  'click''drag'")),t.key&&Vk.indexOf(t.key.toLowerCase())===-1&&(t.trigger=Ev,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined"));var e;return t.trigger==="drag"?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:t.trigger==="click"&&(e={"node:tap":"onClick",mousemove:"updateEndPoint","edge:tap":"cancelCreating","canvas:tap":"cancelCreating","combo:tap":"onClick"}),t.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=t.item;(!n||n.getID()===e.source||n.getType()!=="node")&&e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=t.item,i=e.graph,a=n.getModel();if(e.addingEdge&&e.edge){if(!e.shouldEnd.call(e,t))return;var o={target:a.id};e.source===a.id&&(o.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(e.edge,o),i.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin.call(e,t))return;e.edge=i.addItem("edge",E({source:a.id,target:a.id},e.edgeConfig),!1),e.source=a.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!(e.key&&!e.keydown)){var n={x:t.x,y:t.y};if(!e.graph.findById(e.source)){e.addingEdge=!1;return}e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1)}},cancelCreating:function(t){var e=this;if(!(e.key&&!e.keydown)){var n=e.graph,i=t.item;if(e.addingEdge&&t.target&&t.target.isCanvas&&t.target.isCanvas()){n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1;return}if(e.addingEdge&&e.edge===i){var a=!0;if(!n.get("groupByTypes"))for(var o=t.x,s=t.y,u=n.getNodes(),l=u.length,c=0;c<l;c++){var h=u[c],d=h.getModel(),f=h.getBBox();if(o<=f.maxX&&o>=f.minX&&s<=f.maxY&&s>=f.minY){if(!e.shouldEnd.call(e,{x:t.x,y:t.y,canvasX:t.canvasX,canvasY:t.canvasY,clientX:t.clientX,clientY:t.clientY,item:h}))return;n.emit("beforecreateedge",{}),n.updateItem(e.edge,{target:d.id}),n.emit("aftercreateedge",{edge:e.edge}),a=!1;break}}a&&n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1}}},onKeyDown:function(t){var e=this,n=t.key;n&&(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}},Uk={bind:function(t){this.type==="drag-canvas"&&t.get("canvas").set("draggable",!0);var e=this.events;this.graph=t,U(e,function(n,i){t.on(i,n)})},unbind:function(t){var e=this.events;this.type==="drag-canvas"&&t.get("canvas").set("draggable",!1),this.graph=null,U(e,function(n,i){t.off(i,n)})}};var $k={"drag-canvas":Tk,"zoom-canvas":Bk,"drag-node":Nk,"activate-relations":_k,"click-select":Lk,"collapse-expand":Fk,"drag-combo":Xk,"collapse-expand-combo":jk,"create-edge":Wk};U($k,function(r,t){_0(t,E(E({},r),Uk))});var $r={version:_e.version,Graph:nk,Util:Ns,Layout:cs.Layout,Layouts:cs.Layouts,registerLayout:jl.registerLayout,unRegisterLayout:jl.unRegisterLayout,Global:_e,registerBehavior:_0,registerCombo:FC,registerEdge:N0,registerNode:_r,Algorithm:_S,Arrow:PC,Marker:TC,Shape:zt};function qk(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,Qe(Qe([],t,!0),[$r],!1))}}var Gk=qk(rk);$r.registerGraph=Gk;var Do={exports:{}},Kk=Do.exports,Av;function Zk(){return Av||(Av=1,(function(r,t){(function(e,n){r.exports=n()})(Kk,(function(){return(function(e){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=n,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:s})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var u in a)i.d(s,u,(function(l){return a[l]}).bind(null,u));return s},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=224)})({0:function(e,n,i){i.r(n),i.d(n,"contains",(function(){return o})),i.d(n,"includes",(function(){return o})),i.d(n,"difference",(function(){return u})),i.d(n,"find",(function(){return C})),i.d(n,"findIndex",(function(){return w})),i.d(n,"firstValue",(function(){return I})),i.d(n,"flatten",(function(){return T})),i.d(n,"flattenDeep",(function(){return O})),i.d(n,"getRange",(function(){return z})),i.d(n,"pull",(function(){return G})),i.d(n,"pullAt",(function(){return H})),i.d(n,"reduce",(function(){return q})),i.d(n,"remove",(function(){return J})),i.d(n,"sortBy",(function(){return ft})),i.d(n,"union",(function(){return mt})),i.d(n,"uniq",(function(){return wt})),i.d(n,"valuesOfKey",(function(){return Ot})),i.d(n,"head",(function(){return Yt})),i.d(n,"last",(function(){return jt})),i.d(n,"startsWith",(function(){return Qt})),i.d(n,"endsWith",(function(){return Bt})),i.d(n,"filter",(function(){return s})),i.d(n,"every",(function(){return ne})),i.d(n,"some",(function(){return k})),i.d(n,"group",(function(){return W})),i.d(n,"groupBy",(function(){return D})),i.d(n,"groupToMap",(function(){return V})),i.d(n,"getWrapBehavior",(function(){return j})),i.d(n,"wrapBehavior",(function(){return at})),i.d(n,"number2color",(function(){return nt})),i.d(n,"parseRadius",(function(){return F})),i.d(n,"clamp",(function(){return st})),i.d(n,"fixedBase",(function(){return $})),i.d(n,"isDecimal",(function(){return lt})),i.d(n,"isEven",(function(){return it})),i.d(n,"isInteger",(function(){return vt})),i.d(n,"isNegative",(function(){return ht})),i.d(n,"isNumberEqual",(function(){return gt})),i.d(n,"isOdd",(function(){return yt})),i.d(n,"isPositive",(function(){return kt})),i.d(n,"max",(function(){return _})),i.d(n,"maxBy",(function(){return Tt})),i.d(n,"min",(function(){return B})),i.d(n,"minBy",(function(){return Wt})),i.d(n,"mod",(function(){return Dt})),i.d(n,"toDegree",(function(){return Ft})),i.d(n,"toInteger",(function(){return fe})),i.d(n,"toRadian",(function(){return He})),i.d(n,"forIn",(function(){return Zt})),i.d(n,"has",(function(){return xe})),i.d(n,"hasKey",(function(){return Lr})),i.d(n,"hasValue",(function(){return Hn})),i.d(n,"keys",(function(){return y})),i.d(n,"isMatch",(function(){return m})),i.d(n,"values",(function(){return Se})),i.d(n,"lowerCase",(function(){return Mi})),i.d(n,"lowerFirst",(function(){return Ci})),i.d(n,"substitute",(function(){return un})),i.d(n,"upperCase",(function(){return Vn})),i.d(n,"upperFirst",(function(){return Ei})),i.d(n,"getType",(function(){return Wn})),i.d(n,"isArguments",(function(){return Br})),i.d(n,"isArray",(function(){return f})),i.d(n,"isArrayLike",(function(){return a})),i.d(n,"isBoolean",(function(){return Oe})),i.d(n,"isDate",(function(){return Dr})),i.d(n,"isError",(function(){return Nt})),i.d(n,"isFunction",(function(){return h})),i.d(n,"isFinite",(function(){return oe})),i.d(n,"isNil",(function(){return d})),i.d(n,"isNull",(function(){return qt})),i.d(n,"isNumber",(function(){return Q})),i.d(n,"isObject",(function(){return p})),i.d(n,"isObjectLike",(function(){return x})),i.d(n,"isPlainObject",(function(){return S})),i.d(n,"isPrototype",(function(){return Re})),i.d(n,"isRegExp",(function(){return Un})),i.d(n,"isString",(function(){return rt})),i.d(n,"isType",(function(){return c})),i.d(n,"isUndefined",(function(){return $n})),i.d(n,"isElement",(function(){return ln})),i.d(n,"requestAnimationFrame",(function(){return qn})),i.d(n,"clearAnimationFrame",(function(){return Gn})),i.d(n,"augment",(function(){return _s})),i.d(n,"clone",(function(){return Ls})),i.d(n,"debounce",(function(){return Da})),i.d(n,"memoize",(function(){return Fa})),i.d(n,"deepMix",(function(){return Bs})),i.d(n,"each",(function(){return g})),i.d(n,"extend",(function(){return Ds})),i.d(n,"indexOf",(function(){return Fs})),i.d(n,"isEmpty",(function(){return zs})),i.d(n,"isEqual",(function(){return za})),i.d(n,"isEqualWith",(function(){return Xs})),i.d(n,"map",(function(){return Ys})),i.d(n,"mapValues",(function(){return my})),i.d(n,"mix",(function(){return Rr})),i.d(n,"assign",(function(){return Rr})),i.d(n,"get",(function(){return by})),i.d(n,"set",(function(){return xy})),i.d(n,"pick",(function(){return wy})),i.d(n,"omit",(function(){return My})),i.d(n,"throttle",(function(){return Cy})),i.d(n,"toArray",(function(){return Ey})),i.d(n,"toString",(function(){return rr})),i.d(n,"uniqueId",(function(){return Ay})),i.d(n,"noop",(function(){return ky})),i.d(n,"identity",(function(){return Oy})),i.d(n,"size",(function(){return Iy})),i.d(n,"measureTextWidth",(function(){return ki})),i.d(n,"getEllipsisText",(function(){return Ty})),i.d(n,"Cache",(function(){return Ny}));var a=function(M){return M!==null&&typeof M!="function"&&isFinite(M.length)},o=function(M,A){return!!a(M)&&M.indexOf(A)>-1},s=function(M,A){if(!a(M))return M;for(var P=[],L=0;L<M.length;L++){var R=M[L];A(R,L)&&P.push(R)}return P},u=function(M,A){return A===void 0&&(A=[]),s(M,(function(P){return!o(A,P)}))},l={}.toString,c=function(M,A){return l.call(M)==="[object "+A+"]"},h=function(M){return c(M,"Function")},d=function(M){return M==null},f=function(M){return Array.isArray?Array.isArray(M):c(M,"Array")};function v(M){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(M)}var p=function(M){var A=v(M);return M!==null&&A==="object"||A==="function"},g=function(M,A){if(M){if(f(M))for(var P=0,L=M.length;P<L&&A(M[P],P)!==!1;P++);else if(p(M)){for(var R in M)if(M.hasOwnProperty(R)&&A(M[R],R)===!1)break}}},y=Object.keys?function(M){return Object.keys(M)}:function(M){var A=[];return g(M,(function(P,L){h(M)&&L==="prototype"||A.push(L)})),A},m=function(M,A){var P=y(A),L=P.length;if(d(M))return!L;for(var R=0;R<L;R+=1){var Z=P[R];if(A[Z]!==M[Z]||!(Z in M))return!1}return!0};function b(M){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(M)}var x=function(M){return b(M)==="object"&&M!==null},S=function(M){if(!x(M)||!c(M,"Object"))return!1;if(Object.getPrototypeOf(M)===null)return!0;for(var A=M;Object.getPrototypeOf(A)!==null;)A=Object.getPrototypeOf(A);return Object.getPrototypeOf(M)===A},C=function(M,A){if(!f(M))return null;var P;if(h(A)&&(P=A),S(A)&&(P=function(R){return m(R,A)}),P){for(var L=0;L<M.length;L+=1)if(P(M[L]))return M[L]}return null},w=function(M,A,P){P===void 0&&(P=0);for(var L=P;L<M.length;L++)if(A(M[L],L))return L;return-1},I=function(M,A){for(var P=null,L=0;L<M.length;L++){var R=M[L][A];if(!d(R)){P=f(R)?R[0]:R;break}}return P},T=function(M){if(!f(M))return[];for(var A=[],P=0;P<M.length;P++)A=A.concat(M[P]);return A},O=function M(A,P){if(P===void 0&&(P=[]),f(A))for(var L=0;L<A.length;L+=1)M(A[L],P);else P.push(A);return P},_=function(M){if(f(M))return M.reduce((function(A,P){return Math.max(A,P)}),M[0])},B=function(M){if(f(M))return M.reduce((function(A,P){return Math.min(A,P)}),M[0])},z=function(M){var A=M.filter((function(Z){return!isNaN(Z)}));if(!A.length)return{min:0,max:0};if(f(M[0])){for(var P=[],L=0;L<M.length;L++)P=P.concat(M[L]);A=P}var R=_(A);return{min:B(A),max:R}},Y=Array.prototype,X=Y.splice,K=Y.indexOf,G=function(M){for(var A=[],P=1;P<arguments.length;P++)A[P-1]=arguments[P];for(var L=0;L<A.length;L++)for(var R=A[L],Z=-1;(Z=K.call(M,R))>-1;)X.call(M,Z,1);return M},tt=Array.prototype.splice,H=function(M,A){if(!a(M))return[];for(var P=M?A.length:0,L=P-1;P--;){var R=void 0,Z=A[P];P!==L&&Z===R||(R=Z,tt.call(M,Z,1))}return M},q=function(M,A,P){if(!f(M)&&!S(M))return M;var L=P;return g(M,(function(R,Z){L=A(L,R,Z)})),L},J=function(M,A){var P=[];if(!a(M))return P;for(var L=-1,R=[],Z=M.length;++L<Z;){var bt=M[L];A(bt,L,M)&&(P.push(bt),R.push(L))}return H(M,R),P},rt=function(M){return c(M,"String")},ft=function(M,A){var P;if(h(A))P=function(R,Z){return A(R)-A(Z)};else{var L=[];rt(A)?L.push(A):f(A)&&(L=A),P=function(R,Z){for(var bt=0;bt<L.length;bt+=1){var It=L[bt];if(R[It]>Z[It])return 1;if(R[It]<Z[It])return-1}return 0}}return M.sort(P),M};function wt(M,A){A===void 0&&(A=new Map);var P=[];if(Array.isArray(M))for(var L=0,R=M.length;L<R;L++){var Z=M[L];A.has(Z)||(P.push(Z),A.set(Z,!0))}return P}var mt=function(){for(var M=[],A=0;A<arguments.length;A++)M[A]=arguments[A];return wt([].concat.apply([],M))},Ot=function(M,A){for(var P=[],L={},R=0;R<M.length;R++){var Z=M[R][A];if(!d(Z)){f(Z)||(Z=[Z]);for(var bt=0;bt<Z.length;bt++){var It=Z[bt];L[It]||(P.push(It),L[It]=!0)}}}return P};function Yt(M){if(a(M))return M[0]}function jt(M){if(a(M))return M[M.length-1]}var Qt=function(M,A){return!(!f(M)&&!rt(M))&&M[0]===A},Bt=function(M,A){return!(!f(M)&&!rt(M))&&M[M.length-1]===A},ne=function(M,A){for(var P=0;P<M.length;P++)if(!A(M[P],P))return!1;return!0},k=function(M,A){for(var P=0;P<M.length;P++)if(A(M[P],P))return!0;return!1},N=Object.prototype.hasOwnProperty,D=function(M,A){if(!A||!f(M))return{};for(var P,L={},R=h(A)?A:function(It){return It[A]},Z=0;Z<M.length;Z++){var bt=M[Z];P=R(bt),N.call(L,P)?L[P].push(bt):L[P]=[bt]}return L};function V(M,A){if(!A)return{0:M};if(!h(A)){var P=f(A)?A:A.replace(/\s+/g,"").split("*");A=function(L){for(var R="_",Z=0,bt=P.length;Z<bt;Z++)R+=L[P[Z]]&&L[P[Z]].toString();return R}}return D(M,A)}var W=function(M,A){if(!A)return[M];var P=V(M,A),L=[];for(var R in P)L.push(P[R]);return L},j=function(M,A){return M["_wrap_"+A]},at=function(M,A){if(M["_wrap_"+A])return M["_wrap_"+A];var P=function(L){M[A](L)};return M["_wrap_"+A]=P,P},et={},nt=function(M){var A=et[M];if(!A){for(var P=M.toString(16),L=P.length;L<6;L++)P="0"+P;A="#"+P,et[M]=A}return A},F=function(M){var A=0,P=0,L=0,R=0;return f(M)?M.length===1?A=P=L=R=M[0]:M.length===2?(A=L=M[0],P=R=M[1]):M.length===3?(A=M[0],P=R=M[1],L=M[2]):(A=M[0],P=M[1],L=M[2],R=M[3]):A=P=L=R=M,{r1:A,r2:P,r3:L,r4:R}},st=function(M,A,P){return M<A?A:M>P?P:M},$=function(M,A){var P=A.toString(),L=P.indexOf(".");if(L===-1)return Math.round(M);var R=P.substr(L+1).length;return R>20&&(R=20),parseFloat(M.toFixed(R))},Q=function(M){return c(M,"Number")},lt=function(M){return Q(M)&&M%1!=0},it=function(M){return Q(M)&&M%2==0},vt=Number.isInteger?Number.isInteger:function(M){return Q(M)&&M%1==0},ht=function(M){return Q(M)&&M<0};function gt(M,A,P){return P===void 0&&(P=1e-5),Math.abs(M-A)<P}var yt=function(M){return Q(M)&&M%2!=0},kt=function(M){return Q(M)&&M>0},Tt=function(M,A){if(f(M)){for(var P,L=-1/0,R=0;R<M.length;R++){var Z=M[R],bt=h(A)?A(Z):Z[A];bt>L&&(P=Z,L=bt)}return P}},Wt=function(M,A){if(f(M)){for(var P,L=1/0,R=0;R<M.length;R++){var Z=M[R],bt=h(A)?A(Z):Z[A];bt<L&&(P=Z,L=bt)}return P}},Dt=function(M,A){return(M%A+A)%A},Ut=180/Math.PI,Ft=function(M){return Ut*M},fe=parseInt,Kt=Math.PI/180,He=function(M){return Kt*M},Zt=g,xe=function(M,A){return M.hasOwnProperty(A)},Lr=xe,Se=Object.values?function(M){return Object.values(M)}:function(M){var A=[];return g(M,(function(P,L){h(M)&&L==="prototype"||A.push(P)})),A},Hn=function(M,A){return o(Se(M),A)},rr=function(M){return d(M)?"":M.toString()},Mi=function(M){return rr(M).toLowerCase()},Ci=function(M){var A=rr(M);return A.charAt(0).toLowerCase()+A.substring(1)},un=function(M,A){return M&&A?M.replace(/\\?\{([^{}]+)\}/g,(function(P,L){return P.charAt(0)==="\\"?P.slice(1):A[L]===void 0?"":A[L]})):M},Vn=function(M){return rr(M).toUpperCase()},Ei=function(M){var A=rr(M);return A.charAt(0).toUpperCase()+A.substring(1)},Ai={}.toString,Wn=function(M){return Ai.call(M).replace(/^\[object /,"").replace(/]$/,"")},Br=function(M){return c(M,"Arguments")},Oe=function(M){return c(M,"Boolean")},Dr=function(M){return c(M,"Date")},Nt=function(M){return c(M,"Error")},oe=function(M){return Q(M)&&isFinite(M)},qt=function(M){return M===null},we=Object.prototype,Re=function(M){var A=M&&M.constructor;return M===(typeof A=="function"&&A.prototype||we)},Un=function(M){return c(M,"RegExp")},$n=function(M){return M===void 0},ln=function(M){return M instanceof Element||M instanceof HTMLDocument};function qn(M){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(A){return setTimeout(A,16)})(M)}function Gn(M){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(M)}function Fr(M,A){for(var P in A)A.hasOwnProperty(P)&&P!=="constructor"&&A[P]!==void 0&&(M[P]=A[P])}function Rr(M,A,P,L){return A&&Fr(M,A),P&&Fr(M,P),L&&Fr(M,L),M}var _s=function(){for(var M=[],A=0;A<arguments.length;A++)M[A]=arguments[A];for(var P=M[0],L=1;L<M.length;L++){var R=M[L];h(R)&&(R=R.prototype),Rr(P.prototype,R)}};function Kn(M){return(Kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(M)}var Ls=function M(A){if(Kn(A)!=="object"||A===null)return A;var P;if(f(A)){P=[];for(var L=0,R=A.length;L<R;L++)Kn(A[L])==="object"&&A[L]!=null?P[L]=M(A[L]):P[L]=A[L]}else for(var Z in P={},A)Kn(A[Z])==="object"&&A[Z]!=null?P[Z]=M(A[Z]):P[Z]=A[Z];return P},Da=function(M,A,P){var L;return function(){var R=this,Z=arguments,bt=function(){L=null,P||M.apply(R,Z)},It=P&&!L;clearTimeout(L),L=setTimeout(bt,A),It&&M.apply(R,Z)}},Fa=function(M,A){if(!h(M))throw new TypeError("Expected a function");var P=function L(){for(var R=[],Z=0;Z<arguments.length;Z++)R[Z]=arguments[Z];var bt=A?A.apply(this,R):R[0],It=L.cache;if(It.has(bt))return It.get(bt);var Ie=M.apply(this,R);return It.set(bt,Ie),Ie};return P.cache=new Map,P};function Ra(M,A,P,L){for(var R in P=P||0,L=L||5,A)if(A.hasOwnProperty(R)){var Z=A[R];Z!==null&&S(Z)?(S(M[R])||(M[R]={}),P<L?Ra(M[R],Z,P+1,L):M[R]=A[R]):f(Z)?(M[R]=[],M[R]=M[R].concat(Z)):Z!==void 0&&(M[R]=Z)}}var Bs=function(M){for(var A=[],P=1;P<arguments.length;P++)A[P-1]=arguments[P];for(var L=0;L<A.length;L+=1)Ra(M,A[L]);return M},Ds=function(M,A,P,L){h(A)||(P=A,A=M,M=function(){});var R=Object.create?function(bt,It){return Object.create(bt,{constructor:{value:It}})}:function(bt,It){function Ie(){}Ie.prototype=bt;var Ve=new Ie;return Ve.constructor=It,Ve},Z=R(A.prototype,M);return M.prototype=Rr(Z,M.prototype),M.superclass=R(A.prototype,A),Rr(Z,P),Rr(M,L),M},Fs=function(M,A){if(!a(M))return-1;var P=Array.prototype.indexOf;if(P)return P.call(M,A);for(var L=-1,R=0;R<M.length;R++)if(M[R]===A){L=R;break}return L},Rs=Object.prototype.hasOwnProperty,zs=function(M){if(d(M))return!0;if(a(M))return!M.length;var A=Wn(M);if(A==="Map"||A==="Set")return!M.size;if(Re(M))return!Object.keys(M).length;for(var P in M)if(Rs.call(M,P))return!1;return!0},za=function M(A,P){if(A===P)return!0;if(!A||!P||rt(A)||rt(P))return!1;if(a(A)||a(P)){if(A.length!==P.length)return!1;for(var L=!0,R=0;R<A.length&&(L=M(A[R],P[R]));R++);return L}if(x(A)||x(P)){var Z=Object.keys(A),bt=Object.keys(P);if(Z.length!==bt.length)return!1;for(L=!0,R=0;R<Z.length&&(L=M(A[Z[R]],P[Z[R]]));R++);return L}return!1},Xs=function(M,A,P){return h(P)?!!P(M,A):za(M,A)},Ys=function(M,A){if(!a(M))return M;for(var P=[],L=0;L<M.length;L++){var R=M[L];P.push(A(R,L))}return P},js=function(M){return M},my=function(M,A){A===void 0&&(A=js);var P={};return p(M)&&!d(M)&&Object.keys(M).forEach((function(L){P[L]=A(M[L],L)})),P},by=function(M,A,P){for(var L=0,R=rt(A)?A.split("."):A;M&&L<R.length;)M=M[R[L++]];return M===void 0||L<R.length?P:M},xy=function(M,A,P){var L=M,R=rt(A)?A.split("."):A;return R.forEach((function(Z,bt){bt<R.length-1?(p(L[Z])||(L[Z]=Q(R[bt+1])?[]:{}),L=L[Z]):L[Z]=P})),M},Sy=Object.prototype.hasOwnProperty,wy=function(M,A){if(M===null||!S(M))return{};var P={};return g(A,(function(L){Sy.call(M,L)&&(P[L]=M[L])})),P},My=function(M,A){return q(M,(function(P,L,R){return A.includes(R)||(P[R]=L),P}),{})},Cy=function(M,A,P){var L,R,Z,bt,It=0;P||(P={});var Ie=function(){It=P.leading===!1?0:Date.now(),L=null,bt=M.apply(R,Z),L||(R=Z=null)},Ve=function(){var Hs=Date.now();It||P.leading!==!1||(It=Hs);var Vs=A-(Hs-It);return R=this,Z=arguments,Vs<=0||Vs>A?(L&&(clearTimeout(L),L=null),It=Hs,bt=M.apply(R,Z),L||(R=Z=null)):L||P.trailing===!1||(L=setTimeout(Ie,Vs)),bt};return Ve.cancel=function(){clearTimeout(L),It=0,L=R=Z=null},Ve},Ey=function(M){return a(M)?Array.prototype.slice.call(M):[]},Xa={},Ay=function(M){return Xa[M=M||"g"]?Xa[M]+=1:Xa[M]=1,M+Xa[M]},ky=function(){},Oy=function(M){return M};function Iy(M){return d(M)?0:a(M)?M.length:Object.keys(M).length}var Ya,Py=i(1),ki=Fa((function(M,A){A===void 0&&(A={});var P=A.fontSize,L=A.fontFamily,R=A.fontWeight,Z=A.fontStyle,bt=A.fontVariant;return Ya||(Ya=document.createElement("canvas").getContext("2d")),Ya.font=[Z,bt,R,P+"px",L].join(" "),Ya.measureText(rt(M)?M:"").width}),(function(M,A){return A===void 0&&(A={}),Object(Py.g)([M],Se(A)).join("")})),Ty=function(M,A,P,L){L===void 0&&(L="...");var R,Z,bt=ki(L,P),It=rt(M)?M:rr(M),Ie=A,Ve=[];if(ki(M,P)<=A)return M;for(;R=It.substr(0,16),!((Z=ki(R,P))+bt>Ie&&Z>Ie);)if(Ve.push(R),Ie-=Z,!(It=It.substr(16)))return Ve.join("");for(;R=It.substr(0,1),!((Z=ki(R,P))+bt>Ie);)if(Ve.push(R),Ie-=Z,!(It=It.substr(1)))return Ve.join("");return""+Ve.join("")+L},Ny=(function(){function M(){this.map={}}return M.prototype.has=function(A){return this.map[A]!==void 0},M.prototype.get=function(A,P){var L=this.map[A];return L===void 0?P:L},M.prototype.set=function(A,P){this.map[A]=P},M.prototype.clear=function(){this.map={}},M.prototype.delete=function(A){delete this.map[A]},M.prototype.size=function(){return Object.keys(this.map).length},M})()},1:function(e,n,i){i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){return s})),i.d(n,"e",(function(){return u})),i.d(n,"b",(function(){return l})),i.d(n,"d",(function(){return c})),i.d(n,"g",(function(){return h})),i.d(n,"f",(function(){return d}));var a=function(f,v){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])})(f,v)};function o(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=f}a(f,v),f.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}var s=function(){return(s=Object.assign||function(f){for(var v,p=1,g=arguments.length;p<g;p++)for(var y in v=arguments[p])Object.prototype.hasOwnProperty.call(v,y)&&(f[y]=v[y]);return f}).apply(this,arguments)};function u(f,v){var p={};for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&v.indexOf(g)<0&&(p[g]=f[g]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function"){var y=0;for(g=Object.getOwnPropertySymbols(f);y<g.length;y++)v.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(f,g[y])&&(p[g[y]]=f[g[y]])}return p}function l(f,v,p,g){return new(p||(p=Promise))((function(y,m){function b(C){try{S(g.next(C))}catch(w){m(w)}}function x(C){try{S(g.throw(C))}catch(w){m(w)}}function S(C){var w;C.done?y(C.value):(w=C.value,w instanceof p?w:new p((function(I){I(w)}))).then(b,x)}S((g=g.apply(f,v||[])).next())}))}function c(f,v){var p,g,y,m,b={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return m={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function x(S){return function(C){return(function(w){if(p)throw new TypeError("Generator is already executing.");for(;m&&(m=0,w[0]&&(b=0)),b;)try{if(p=1,g&&(y=2&w[0]?g.return:w[0]?g.throw||((y=g.return)&&y.call(g),0):g.next)&&!(y=y.call(g,w[1])).done)return y;switch(g=0,y&&(w=[2&w[0],y.value]),w[0]){case 0:case 1:y=w;break;case 4:return b.label++,{value:w[1],done:!1};case 5:b.label++,g=w[1],w=[0];continue;case 7:w=b.ops.pop(),b.trys.pop();continue;default:if(y=b.trys,!((y=y.length>0&&y[y.length-1])||w[0]!==6&&w[0]!==2)){b=0;continue}if(w[0]===3&&(!y||w[1]>y[0]&&w[1]<y[3])){b.label=w[1];break}if(w[0]===6&&b.label<y[1]){b.label=y[1],y=w;break}if(y&&b.label<y[2]){b.label=y[2],b.ops.push(w);break}y[2]&&b.ops.pop(),b.trys.pop();continue}w=v.call(f,b)}catch(I){w=[6,I],g=0}finally{p=y=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}})([S,C])}}}function h(){for(var f=0,v=0,p=arguments.length;v<p;v++)f+=arguments[v].length;var g=Array(f),y=0;for(v=0;v<p;v++)for(var m=arguments[v],b=0,x=m.length;b<x;b++,y++)g[y]=m[b];return g}function d(f,v,p){if(p||arguments.length===2)for(var g,y=0,m=v.length;y<m;y++)!g&&y in v||(g||(g=Array.prototype.slice.call(v,0,y)),g[y]=v[y]);return f.concat(g||Array.prototype.slice.call(v))}},121:function(e,n,i){(function(a){var o,s,u,l;function c(h){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(h)}l=function(){return(function(h){var d={};function f(v){if(d[v])return d[v].exports;var p=d[v]={i:v,l:!1,exports:{}};return h[v].call(p.exports,p,p.exports,f),p.l=!0,p.exports}return f.m=h,f.c=d,f.d=function(v,p,g){f.o(v,p)||Object.defineProperty(v,p,{configurable:!1,enumerable:!0,get:g})},f.n=function(v){var p=v&&v.__esModule?function(){return v.default}:function(){return v};return f.d(p,"a",p),p},f.o=function(v,p){return Object.prototype.hasOwnProperty.call(v,p)},f.p="",f(f.s=31)})([function(h,d,f){var v=f(4);d.a=function(p){return Array.isArray?Array.isArray(p):Object(v.a)(p,"Array")}},function(h,d,f){d.a=function(v){return v!==null&&typeof v!="function"&&isFinite(v.length)}},function(h,d,f){var v=f(0),p=f(13);d.a=function(g,y){if(g){if(Object(v.a)(g))for(var m=0,b=g.length;m<b&&y(g[m],m)!==!1;m++);else if(Object(p.a)(g)){for(var x in g)if(g.hasOwnProperty(x)&&y(g[x],x)===!1)break}}}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"Function")}},function(h,d,f){var v={}.toString;d.a=function(p,g){return v.call(p)==="[object "+g+"]"}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"Number")}},function(h,d,f){d.a=function(v){return v==null}},function(h,d,f){var v=f(33).mix;h.exports={assign:v}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"String")}},function(h,d,f){var v=f(15),p=f(4);d.a=function(g){if(!Object(v.a)(g)||!Object(p.a)(g,"Object"))return!1;if(Object.getPrototypeOf(g)===null)return!0;for(var y=g;Object.getPrototypeOf(y)!==null;)y=Object.getPrototypeOf(y);return Object.getPrototypeOf(g)===y}},function(h,d,f){var v=f(6);d.a=function(p){return Object(v.a)(p)?"":p.toString()}},function(h,d,f){var v=f(18),p=(function(){function g(y,m){m===void 0&&(m={}),this.options=m,this.rootNode=v(y,m)}return g.prototype.execute=function(){throw new Error("please override this method")},g})();h.exports=p},function(h,d,f){var v=f(1);d.a=function(p,g){return!!Object(v.a)(p)&&p.indexOf(g)>-1}},function(h,d,f){d.a=function(v){var p=c(v);return v!==null&&p==="object"||p==="function"}},function(h,d,f){var v=f(2),p=f(1);d.a=function(g,y){if(!Object(p.a)(g))return g;var m=[];return Object(v.a)(g,(function(b,x){y(b,x)&&m.push(b)})),m}},function(h,d,f){d.a=function(v){return c(v)==="object"&&v!==null}},function(h,d,f){function v(p,g){for(var y in g)g.hasOwnProperty(y)&&y!=="constructor"&&g[y]!==void 0&&(p[y]=g[y])}d.a=function(p,g,y,m){return g&&v(p,g),y&&v(p,y),m&&v(p,m),p}},function(h,d,f){var v=f(30),p=["LR","RL","TB","BT","H","V"],g=["LR","RL","H"],y=p[0];h.exports=function(m,b,x){var S=b.direction||y;if(b.isHorizontal=(function(_){return g.indexOf(_)>-1})(S),p.indexOf(S)===-1)throw new TypeError("Invalid direction: "+S);if(S===p[0])x(m,b);else if(S===p[1])x(m,b),m.right2left();else if(S===p[2])x(m,b);else if(S===p[3])x(m,b),m.bottom2top();else if(S===p[4]||S===p[5]){var C=v(m,b),w=C.left,I=C.right;x(w,b),x(I,b),b.isHorizontal?w.right2left():w.bottom2top(),I.translate(w.x-I.x,w.y-I.y),m.x=w.x,m.y=I.y;var T=m.getBoundingBox();b.isHorizontal?T.top<0&&m.translate(0,-T.top):T.left<0&&m.translate(-T.left,0)}var O=b.fixedRoot;return O===void 0&&(O=!0),O&&m.translate(-(m.x+m.width/2+m.hgap),-(m.y+m.height/2+m.vgap)),m}},function(h,d,f){var v=f(7),p={getId:function(y){return y.id||y.name},getPreH:function(y){return y.preH||0},getPreV:function(y){return y.preV||0},getHGap:function(y){return y.hgap||18},getVGap:function(y){return y.vgap||18},getChildren:function(y){return y.children},getHeight:function(y){return y.height||36},getWidth:function(y){var m=y.label||" ";return y.width||18*m.split("").length}};function g(y,m){var b=this;if(b.vgap=b.hgap=0,y instanceof g)return y;b.data=y;var x=m.getHGap(y),S=m.getVGap(y);return b.preH=m.getPreH(y),b.preV=m.getPreV(y),b.width=m.getWidth(y),b.height=m.getHeight(y),b.width+=b.preH,b.height+=b.preV,b.id=m.getId(y),b.x=b.y=0,b.depth=0,b.children||(b.children=[]),b.addGap(x,S),b}v.assign(g.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(y,m){this.hgap+=y,this.vgap+=m,this.width+=2*y,this.height+=2*m},eachNode:function(y){for(var m,b=[this];m=b.shift();)y(m),b=m.children.concat(b)},DFTraverse:function(y){this.eachNode(y)},BFTraverse:function(y){for(var m,b=[this];m=b.shift();)y(m),b=b.concat(m.children)},getBoundingBox:function(){var y={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(m){y.left=Math.min(y.left,m.x),y.top=Math.min(y.top,m.y),y.width=Math.max(y.width,m.x+m.width),y.height=Math.max(y.height,m.y+m.height)})),y},translate:function(y,m){y===void 0&&(y=0),m===void 0&&(m=0),this.eachNode((function(b){b.x+=y,b.y+=m,b.x+=b.preH,b.y+=b.preV}))},right2left:function(){var y=this.getBoundingBox();this.eachNode((function(m){m.x=m.x-2*(m.x-y.left)-m.width})),this.translate(y.width,0)},bottom2top:function(){var y=this.getBoundingBox();this.eachNode((function(m){m.y=m.y-2*(m.y-y.top)-m.height})),this.translate(0,y.height)}}),h.exports=function(y,m,b){m===void 0&&(m={});var x,S=new g(y,m=v.assign({},p,m)),C=[S];if(!b&&!y.collapsed){for(;x=C.shift();)if(!x.data.collapsed){var w=m.getChildren(x.data),I=w?w.length:0;if(x.children=new Array(I),w&&I)for(var T=0;T<I;T++){var O=new g(w[T],m);x.children[T]=O,C.push(O),O.parent=x,O.depth=x.depth+1}}}return S}},function(h,d,f){var v=f(6),p=f(20);d.a=function(g,y){var m=Object(p.a)(y),b=m.length;if(Object(v.a)(g))return!b;for(var x=0;x<b;x+=1){var S=m[x];if(y[S]!==g[S]||!(S in g))return!1}return!0}},function(h,d,f){var v=f(2),p=f(3),g=Object.keys?function(y){return Object.keys(y)}:function(y){var m=[];return Object(v.a)(y,(function(b,x){Object(p.a)(y)&&x==="prototype"||m.push(x)})),m};d.a=g},function(h,d,f){var v=f(1),p=Array.prototype.splice;d.a=function(g,y){if(!Object(v.a)(g))return[];for(var m=g?y.length:0,b=m-1;m--;){var x=void 0,S=y[m];m!==b&&S===x||(x=S,p.call(g,S,1))}return g}},function(h,d,f){var v=f(12),p=f(2);d.a=function(g){var y=[];return Object(p.a)(g,(function(m){Object(v.a)(y,m)||y.push(m)})),y}},function(h,d,f){var v=f(0),p=f(3),g=f(24);d.a=function(y,m){if(!m)return{0:y};if(!Object(p.a)(m)){var b=Object(v.a)(m)?m:m.replace(/\s+/g,"").split("*");m=function(x){for(var S="_",C=0,w=b.length;C<w;C++)S+=x[b[C]]&&x[b[C]].toString();return S}}return Object(g.a)(y,m)}},function(h,d,f){var v=f(2),p=f(0),g=f(3),y=Object.prototype.hasOwnProperty;d.a=function(m,b){if(!b||!Object(p.a)(m))return{};var x,S={},C=Object(g.a)(b)?b:function(w){return w[b]};return Object(v.a)(m,(function(w){x=C(w),y.call(S,x)?S[x].push(w):S[x]=[w]})),S}},function(h,d,f){d.a=function(v,p){return v.hasOwnProperty(p)}},function(h,d,f){var v=f(2),p=f(3),g=Object.values?function(y){return Object.values(y)}:function(y){var m=[];return Object(v.a)(y,(function(b,x){Object(p.a)(y)&&x==="prototype"||m.push(b)})),m};d.a=g},function(h,d,f){var v={}.toString;d.a=function(p){return v.call(p).replace(/^\[object /,"").replace(/]$/,"")}},function(h,d,f){var v=Object.prototype;d.a=function(p){var g=p&&p.constructor;return p===(typeof g=="function"&&g.prototype||v)}},function(h,d,f){var v=f(15),p=f(1),g=f(8);d.a=function y(m,b){if(m===b)return!0;if(!m||!b||Object(g.a)(m)||Object(g.a)(b))return!1;if(Object(p.a)(m)||Object(p.a)(b)){if(m.length!==b.length)return!1;for(var x=!0,S=0;S<m.length&&(x=y(m[S],b[S]));S++);return x}if(Object(v.a)(m)||Object(v.a)(b)){var C=Object.keys(m),w=Object.keys(b);if(C.length!==w.length)return!1;for(x=!0,S=0;S<C.length&&(x=y(m[C[S]],b[C[S]]));S++);return x}return!1}},function(h,d,f){var v=f(18);h.exports=function(p,g){for(var y=v(p.data,g,!0),m=v(p.data,g,!0),b=p.children.length,x=Math.round(b/2),S=g.getSide||function(I,T){return T<x?"right":"left"},C=0;C<b;C++){var w=p.children[C];S(w,C)==="right"?m.children.push(w):y.children.push(w)}return y.eachNode((function(I){I.isRoot()||(I.side="left")})),m.eachNode((function(I){I.isRoot()||(I.side="right")})),{left:y,right:m}}},function(h,d,f){var v={compactBox:f(32),dendrogram:f(114),indented:f(116),mindmap:f(118)};h.exports=v},function(h,d,f){var v=f(11),p=f(113),g=f(17),y=f(7),m=(function(x){var S,C;function w(){return x.apply(this,arguments)||this}return C=x,(S=w).prototype=Object.create(C.prototype),S.prototype.constructor=S,S.__proto__=C,w.prototype.execute=function(){return g(this.rootNode,this.options,p)},w})(v),b={};h.exports=function(x,S){return S=y.assign({},b,S),new m(x,S).execute()}},function(h,d,f){Object.defineProperty(d,"__esModule",{value:!0});var v=f(12);f.d(d,"contains",(function(){return v.a})),f.d(d,"includes",(function(){return v.a}));var p=f(34);f.d(d,"difference",(function(){return p.a}));var g=f(35);f.d(d,"find",(function(){return g.a}));var y=f(36);f.d(d,"findIndex",(function(){return y.a}));var m=f(37);f.d(d,"firstValue",(function(){return m.a}));var b=f(38);f.d(d,"flatten",(function(){return b.a}));var x=f(39);f.d(d,"flattenDeep",(function(){return x.a}));var S=f(40);f.d(d,"getRange",(function(){return S.a}));var C=f(41);f.d(d,"pull",(function(){return C.a}));var w=f(21);f.d(d,"pullAt",(function(){return w.a}));var I=f(42);f.d(d,"reduce",(function(){return I.a}));var T=f(43);f.d(d,"remove",(function(){return T.a}));var O=f(44);f.d(d,"sortBy",(function(){return O.a}));var _=f(45);f.d(d,"union",(function(){return _.a}));var B=f(22);f.d(d,"uniq",(function(){return B.a}));var z=f(46);f.d(d,"valuesOfKey",(function(){return z.a}));var Y=f(47);f.d(d,"head",(function(){return Y.a}));var X=f(48);f.d(d,"last",(function(){return X.a}));var K=f(49);f.d(d,"startsWith",(function(){return K.a}));var G=f(50);f.d(d,"endsWith",(function(){return G.a}));var tt=f(14);f.d(d,"filter",(function(){return tt.a}));var H=f(51);f.d(d,"every",(function(){return H.a}));var q=f(52);f.d(d,"some",(function(){return q.a}));var J=f(53);f.d(d,"group",(function(){return J.a}));var rt=f(24);f.d(d,"groupBy",(function(){return rt.a}));var ft=f(23);f.d(d,"groupToMap",(function(){return ft.a}));var wt=f(54);f.d(d,"getWrapBehavior",(function(){return wt.a}));var mt=f(55);f.d(d,"wrapBehavior",(function(){return mt.a}));var Ot=f(56);f.d(d,"number2color",(function(){return Ot.a}));var Yt=f(57);f.d(d,"parseRadius",(function(){return Yt.a}));var jt=f(58);f.d(d,"clamp",(function(){return jt.a}));var Qt=f(59);f.d(d,"fixedBase",(function(){return Qt.a}));var Bt=f(60);f.d(d,"isDecimal",(function(){return Bt.a}));var ne=f(61);f.d(d,"isEven",(function(){return ne.a}));var k=f(62);f.d(d,"isInteger",(function(){return k.a}));var N=f(63);f.d(d,"isNegative",(function(){return N.a}));var D=f(64);f.d(d,"isNumberEqual",(function(){return D.a}));var V=f(65);f.d(d,"isOdd",(function(){return V.a}));var W=f(66);f.d(d,"isPositive",(function(){return W.a}));var j=f(67);f.d(d,"maxBy",(function(){return j.a}));var at=f(68);f.d(d,"minBy",(function(){return at.a}));var et=f(69);f.d(d,"mod",(function(){return et.a}));var nt=f(70);f.d(d,"toDegree",(function(){return nt.a}));var F=f(71);f.d(d,"toInteger",(function(){return F.a}));var st=f(72);f.d(d,"toRadian",(function(){return st.a}));var $=f(73);f.d(d,"forIn",(function(){return $.a}));var Q=f(25);f.d(d,"has",(function(){return Q.a}));var lt=f(74);f.d(d,"hasKey",(function(){return lt.a}));var it=f(75);f.d(d,"hasValue",(function(){return it.a}));var vt=f(20);f.d(d,"keys",(function(){return vt.a}));var ht=f(19);f.d(d,"isMatch",(function(){return ht.a}));var gt=f(26);f.d(d,"values",(function(){return gt.a}));var yt=f(76);f.d(d,"lowerCase",(function(){return yt.a}));var kt=f(77);f.d(d,"lowerFirst",(function(){return kt.a}));var Tt=f(78);f.d(d,"substitute",(function(){return Tt.a}));var Wt=f(79);f.d(d,"upperCase",(function(){return Wt.a}));var Dt=f(80);f.d(d,"upperFirst",(function(){return Dt.a}));var Ut=f(27);f.d(d,"getType",(function(){return Ut.a}));var Ft=f(81);f.d(d,"isArguments",(function(){return Ft.a}));var fe=f(0);f.d(d,"isArray",(function(){return fe.a}));var Kt=f(1);f.d(d,"isArrayLike",(function(){return Kt.a}));var He=f(82);f.d(d,"isBoolean",(function(){return He.a}));var Zt=f(83);f.d(d,"isDate",(function(){return Zt.a}));var xe=f(84);f.d(d,"isError",(function(){return xe.a}));var Lr=f(3);f.d(d,"isFunction",(function(){return Lr.a}));var Se=f(85);f.d(d,"isFinite",(function(){return Se.a}));var Hn=f(6);f.d(d,"isNil",(function(){return Hn.a}));var rr=f(86);f.d(d,"isNull",(function(){return rr.a}));var Mi=f(5);f.d(d,"isNumber",(function(){return Mi.a}));var Ci=f(13);f.d(d,"isObject",(function(){return Ci.a}));var un=f(15);f.d(d,"isObjectLike",(function(){return un.a}));var Vn=f(9);f.d(d,"isPlainObject",(function(){return Vn.a}));var Ei=f(28);f.d(d,"isPrototype",(function(){return Ei.a}));var Ai=f(87);f.d(d,"isRegExp",(function(){return Ai.a}));var Wn=f(8);f.d(d,"isString",(function(){return Wn.a}));var Br=f(4);f.d(d,"isType",(function(){return Br.a}));var Oe=f(88);f.d(d,"isUndefined",(function(){return Oe.a}));var Dr=f(89);f.d(d,"isElement",(function(){return Dr.a}));var Nt=f(90);f.d(d,"requestAnimationFrame",(function(){return Nt.a}));var oe=f(91);f.d(d,"clearAnimationFrame",(function(){return oe.a}));var qt=f(92);f.d(d,"augment",(function(){return qt.a}));var we=f(93);f.d(d,"clone",(function(){return we.a}));var Re=f(94);f.d(d,"debounce",(function(){return Re.a}));var Un=f(95);f.d(d,"memoize",(function(){return Un.a}));var $n=f(96);f.d(d,"deepMix",(function(){return $n.a}));var ln=f(2);f.d(d,"each",(function(){return ln.a}));var qn=f(97);f.d(d,"extend",(function(){return qn.a}));var Gn=f(98);f.d(d,"indexOf",(function(){return Gn.a}));var Fr=f(99);f.d(d,"isEmpty",(function(){return Fr.a}));var Rr=f(29);f.d(d,"isEqual",(function(){return Rr.a}));var _s=f(100);f.d(d,"isEqualWith",(function(){return _s.a}));var Kn=f(101);f.d(d,"map",(function(){return Kn.a}));var Ls=f(102);f.d(d,"mapValues",(function(){return Ls.a}));var Da=f(16);f.d(d,"mix",(function(){return Da.a})),f.d(d,"assign",(function(){return Da.a}));var Fa=f(103);f.d(d,"get",(function(){return Fa.a}));var Ra=f(104);f.d(d,"set",(function(){return Ra.a}));var Bs=f(105);f.d(d,"pick",(function(){return Bs.a}));var Ds=f(106);f.d(d,"throttle",(function(){return Ds.a}));var Fs=f(107);f.d(d,"toArray",(function(){return Fs.a}));var Rs=f(10);f.d(d,"toString",(function(){return Rs.a}));var zs=f(108);f.d(d,"uniqueId",(function(){return zs.a}));var za=f(109);f.d(d,"noop",(function(){return za.a}));var Xs=f(110);f.d(d,"identity",(function(){return Xs.a}));var Ys=f(111);f.d(d,"size",(function(){return Ys.a}));var js=f(112);f.d(d,"Cache",(function(){return js.a}))},function(h,d,f){var v=f(14),p=f(12);d.a=function(g,y){return y===void 0&&(y=[]),Object(v.a)(g,(function(m){return!Object(p.a)(y,m)}))}},function(h,d,f){var v=f(3),p=f(19),g=f(0),y=f(9);d.a=function(m,b){if(!Object(g.a)(m))return null;var x;if(Object(v.a)(b)&&(x=b),Object(y.a)(b)&&(x=function(C){return Object(p.a)(C,b)}),x){for(var S=0;S<m.length;S+=1)if(x(m[S]))return m[S]}return null}},function(h,d,f){d.a=function(v,p,g){g===void 0&&(g=0);for(var y=g;y<v.length;y++)if(p(v[y],y))return y;return-1}},function(h,d,f){var v=f(6),p=f(0);d.a=function(g,y){for(var m=null,b=0;b<g.length;b++){var x=g[b][y];if(!Object(v.a)(x)){m=Object(p.a)(x)?x[0]:x;break}}return m}},function(h,d,f){var v=f(0);d.a=function(p){if(!Object(v.a)(p))return[];for(var g=[],y=0;y<p.length;y++)g=g.concat(p[y]);return g}},function(h,d,f){var v=f(0);d.a=function p(g,y){if(y===void 0&&(y=[]),Object(v.a)(g))for(var m=0;m<g.length;m+=1)p(g[m],y);else y.push(g);return y}},function(h,d,f){var v=f(0),p=f(14);d.a=function(g){if(!(g=Object(p.a)(g,(function(x){return!isNaN(x)}))).length)return{min:0,max:0};if(Object(v.a)(g[0])){for(var y=[],m=0;m<g.length;m++)y=y.concat(g[m]);g=y}var b=Math.max.apply(null,g);return{min:Math.min.apply(null,g),max:b}}},function(h,d,f){var v=Array.prototype,p=v.splice,g=v.indexOf;d.a=function(y){for(var m=[],b=1;b<arguments.length;b++)m[b-1]=arguments[b];for(var x=0;x<m.length;x++)for(var S=m[x],C=-1;(C=g.call(y,S))>-1;)p.call(y,C,1);return y}},function(h,d,f){var v=f(2),p=f(0),g=f(9);d.a=function(y,m,b){if(!Object(p.a)(y)&&!Object(g.a)(y))return y;var x=b;return Object(v.a)(y,(function(S,C){x=m(x,S,C)})),x}},function(h,d,f){var v=f(1),p=f(21);d.a=function(g,y){var m=[];if(!Object(v.a)(g))return m;for(var b=-1,x=[],S=g.length;++b<S;){var C=g[b];y(C,b,g)&&(m.push(C),x.push(b))}return Object(p.a)(g,x),m}},function(h,d,f){var v=f(0),p=f(8),g=f(3);d.a=function(y,m){var b;if(Object(g.a)(m))b=function(S,C){return m(S)-m(C)};else{var x=[];Object(p.a)(m)?x.push(m):Object(v.a)(m)&&(x=m),b=function(S,C){for(var w=0;w<x.length;w+=1){var I=x[w];if(S[I]>C[I])return 1;if(S[I]<C[I])return-1}return 0}}return y.sort(b),y}},function(h,d,f){var v=f(22);d.a=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];return Object(v.a)([].concat.apply([],p))}},function(h,d,f){var v=f(2),p=f(0),g=f(6);d.a=function(y,m){var b=[],x={};return y.forEach((function(S){var C=S[m];Object(g.a)(C)||(Object(p.a)(C)||(C=[C]),Object(v.a)(C,(function(w){x[w]||(b.push(w),x[w]=!0)})))})),b}},function(h,d,f){d.a=function(p){if(Object(v.a)(p))return p[0]};var v=f(1)},function(h,d,f){d.a=function(p){if(Object(v.a)(p))return p[p.length-1]};var v=f(1)},function(h,d,f){var v=f(0),p=f(8);d.a=function(g,y){return!(!Object(v.a)(g)&&!Object(p.a)(g))&&g[0]===y}},function(h,d,f){var v=f(0),p=f(8);d.a=function(g,y){return!(!Object(v.a)(g)&&!Object(p.a)(g))&&g[g.length-1]===y}},function(h,d,f){d.a=function(v,p){for(var g=0;g<v.length;g++)if(!p(v[g],g))return!1;return!0}},function(h,d,f){d.a=function(v,p){for(var g=0;g<v.length;g++)if(p(v[g],g))return!0;return!1}},function(h,d,f){var v=f(23);d.a=function(p,g){if(!g)return[p];var y=Object(v.a)(p,g),m=[];for(var b in y)m.push(y[b]);return m}},function(h,d,f){d.a=function(v,p){return v["_wrap_"+p]}},function(h,d,f){d.a=function(v,p){if(v["_wrap_"+p])return v["_wrap_"+p];var g=function(y){v[p](y)};return v["_wrap_"+p]=g,g}},function(h,d,f){var v={};d.a=function(p){var g=v[p];if(!g){for(var y=p.toString(16),m=y.length;m<6;m++)y="0"+y;g="#"+y,v[p]=g}return g}},function(h,d,f){var v=f(0);d.a=function(p){var g=0,y=0,m=0,b=0;return Object(v.a)(p)?p.length===1?g=y=m=b=p[0]:p.length===2?(g=m=p[0],y=b=p[1]):p.length===3?(g=p[0],y=b=p[1],m=p[2]):(g=p[0],y=p[1],m=p[2],b=p[3]):g=y=m=b=p,{r1:g,r2:y,r3:m,r4:b}}},function(h,d,f){d.a=function(v,p,g){return v<p?p:v>g?g:v}},function(h,d,f){d.a=function(v,p){var g=p.toString(),y=g.indexOf(".");if(y===-1)return Math.round(v);var m=g.substr(y+1).length;return m>20&&(m=20),parseFloat(v.toFixed(m))}},function(h,d,f){var v=f(5);d.a=function(p){return Object(v.a)(p)&&p%1!=0}},function(h,d,f){var v=f(5);d.a=function(p){return Object(v.a)(p)&&p%2==0}},function(h,d,f){var v=f(5),p=Number.isInteger?Number.isInteger:function(g){return Object(v.a)(g)&&g%1==0};d.a=p},function(h,d,f){var v=f(5);d.a=function(p){return Object(v.a)(p)&&p<0}},function(h,d,f){d.a=function(v,p,g){return g===void 0&&(g=1e-5),Math.abs(v-p)<g}},function(h,d,f){var v=f(5);d.a=function(p){return Object(v.a)(p)&&p%2!=0}},function(h,d,f){var v=f(5);d.a=function(p){return Object(v.a)(p)&&p>0}},function(h,d,f){var v=f(2),p=f(0),g=f(3);d.a=function(y,m){if(Object(p.a)(y)){var b,x,S=y[0];return b=Object(g.a)(m)?m(y[0]):y[0][m],Object(v.a)(y,(function(C){(x=Object(g.a)(m)?m(C):C[m])>b&&(S=C,b=x)})),S}}},function(h,d,f){var v=f(2),p=f(0),g=f(3);d.a=function(y,m){if(Object(p.a)(y)){var b,x,S=y[0];return b=Object(g.a)(m)?m(y[0]):y[0][m],Object(v.a)(y,(function(C){(x=Object(g.a)(m)?m(C):C[m])<b&&(S=C,b=x)})),S}}},function(h,d,f){d.a=function(v,p){return(v%p+p)%p}},function(h,d,f){var v=180/Math.PI;d.a=function(p){return v*p}},function(h,d,f){d.a=parseInt},function(h,d,f){var v=Math.PI/180;d.a=function(p){return v*p}},function(h,d,f){var v=f(2);d.a=v.a},function(h,d,f){var v=f(25);d.a=v.a},function(h,d,f){var v=f(12),p=f(26);d.a=function(g,y){return Object(v.a)(Object(p.a)(g),y)}},function(h,d,f){var v=f(10);d.a=function(p){return Object(v.a)(p).toLowerCase()}},function(h,d,f){var v=f(10);d.a=function(p){var g=Object(v.a)(p);return g.charAt(0).toLowerCase()+g.substring(1)}},function(h,d,f){d.a=function(v,p){return v&&p?v.replace(/\\?\{([^{}]+)\}/g,(function(g,y){return g.charAt(0)==="\\"?g.slice(1):p[y]===void 0?"":p[y]})):v}},function(h,d,f){var v=f(10);d.a=function(p){return Object(v.a)(p).toUpperCase()}},function(h,d,f){var v=f(10);d.a=function(p){var g=Object(v.a)(p);return g.charAt(0).toUpperCase()+g.substring(1)}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"Arguments")}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"Boolean")}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"Date")}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"Error")}},function(h,d,f){var v=f(5);d.a=function(p){return Object(v.a)(p)&&isFinite(p)}},function(h,d,f){d.a=function(v){return v===null}},function(h,d,f){var v=f(4);d.a=function(p){return Object(v.a)(p,"RegExp")}},function(h,d,f){d.a=function(v){return v===void 0}},function(h,d,f){d.a=function(v){return v instanceof Element||v instanceof HTMLDocument}},function(h,d,f){d.a=function(v){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(p){return setTimeout(p,16)})(v)}},function(h,d,f){d.a=function(v){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(v)}},function(h,d,f){var v=f(16),p=f(3);d.a=function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];for(var m=g[0],b=1;b<g.length;b++){var x=g[b];Object(p.a)(x)&&(x=x.prototype),Object(v.a)(m.prototype,x)}}},function(h,d,f){var v=f(0);d.a=function p(g){if(c(g)!=="object"||g===null)return g;var y;if(Object(v.a)(g)){y=[];for(var m=0,b=g.length;m<b;m++)c(g[m])==="object"&&g[m]!=null?y[m]=p(g[m]):y[m]=g[m]}else for(var x in y={},g)c(g[x])==="object"&&g[x]!=null?y[x]=p(g[x]):y[x]=g[x];return y}},function(h,d,f){d.a=function(v,p,g){var y;return function(){var m=this,b=arguments,x=function(){y=null,g||v.apply(m,b)},S=g&&!y;clearTimeout(y),y=setTimeout(x,p),S&&v.apply(m,b)}}},function(h,d,f){var v=f(3);d.a=function(p,g){if(!Object(v.a)(p))throw new TypeError("Expected a function");var y=function m(){for(var b=[],x=0;x<arguments.length;x++)b[x]=arguments[x];var S=g?g.apply(this,b):b[0],C=m.cache;if(C.has(S))return C.get(S);var w=p.apply(this,b);return C.set(S,w),w};return y.cache=new Map,y}},function(h,d,f){var v=f(0),p=f(9);function g(y,m,b,x){for(var S in b=b||0,x=x||5,m)if(m.hasOwnProperty(S)){var C=m[S];C!==null&&Object(p.a)(C)?(Object(p.a)(y[S])||(y[S]={}),b<x?g(y[S],C,b+1,x):y[S]=m[S]):Object(v.a)(C)?(y[S]=[],y[S]=y[S].concat(C)):C!==void 0&&(y[S]=C)}}d.a=function(y){for(var m=[],b=1;b<arguments.length;b++)m[b-1]=arguments[b];for(var x=0;x<m.length;x+=1)g(y,m[x]);return y}},function(h,d,f){var v=f(16),p=f(3);d.a=function(g,y,m,b){Object(p.a)(y)||(m=y,y=g,g=function(){});var x=Object.create?function(C,w){return Object.create(C,{constructor:{value:w}})}:function(C,w){function I(){}I.prototype=C;var T=new I;return T.constructor=w,T},S=x(y.prototype,g);return g.prototype=Object(v.a)(S,g.prototype),g.superclass=x(y.prototype,y),Object(v.a)(S,m),Object(v.a)(g,b),g}},function(h,d,f){var v=f(1);d.a=function(p,g){if(!Object(v.a)(p))return-1;var y=Array.prototype.indexOf;if(y)return y.call(p,g);for(var m=-1,b=0;b<p.length;b++)if(p[b]===g){m=b;break}return m}},function(h,d,f){var v=f(6),p=f(1),g=f(27),y=f(28),m=Object.prototype.hasOwnProperty;d.a=function(b){if(Object(v.a)(b))return!0;if(Object(p.a)(b))return!b.length;var x=Object(g.a)(b);if(x==="Map"||x==="Set")return!b.size;if(Object(y.a)(b))return!Object.keys(b).length;for(var S in b)if(m.call(b,S))return!1;return!0}},function(h,d,f){var v=f(3),p=f(29);d.a=function(g,y,m){return Object(v.a)(m)?!!m(g,y):Object(p.a)(g,y)}},function(h,d,f){var v=f(2),p=f(1);d.a=function(g,y){if(!Object(p.a)(g))return g;var m=[];return Object(v.a)(g,(function(b,x){m.push(y(b,x))})),m}},function(h,d,f){var v=f(6),p=f(13),g=function(y){return y};d.a=function(y,m){m===void 0&&(m=g);var b={};return Object(p.a)(y)&&!Object(v.a)(y)&&Object.keys(y).forEach((function(x){b[x]=m(y[x],x)})),b}},function(h,d,f){var v=f(8);d.a=function(p,g,y){for(var m=0,b=Object(v.a)(g)?g.split("."):g;p&&m<b.length;)p=p[b[m++]];return p===void 0||m<b.length?y:p}},function(h,d,f){var v=f(13),p=f(8),g=f(5);d.a=function(y,m,b){var x=y,S=Object(p.a)(m)?m.split("."):m;return S.forEach((function(C,w){w<S.length-1?(Object(v.a)(x[C])||(x[C]=Object(g.a)(S[w+1])?[]:{}),x=x[C]):x[C]=b})),y}},function(h,d,f){var v=f(2),p=f(9),g=Object.prototype.hasOwnProperty;d.a=function(y,m){if(y===null||!Object(p.a)(y))return{};var b={};return Object(v.a)(m,(function(x){g.call(y,x)&&(b[x]=y[x])})),b}},function(h,d,f){d.a=function(v,p,g){var y,m,b,x,S=0;g||(g={});var C=function(){S=g.leading===!1?0:Date.now(),y=null,x=v.apply(m,b),y||(m=b=null)},w=function(){var I=Date.now();S||g.leading!==!1||(S=I);var T=p-(I-S);return m=this,b=arguments,T<=0||T>p?(y&&(clearTimeout(y),y=null),S=I,x=v.apply(m,b),y||(m=b=null)):y||g.trailing===!1||(y=setTimeout(C,T)),x};return w.cancel=function(){clearTimeout(y),S=0,y=m=b=null},w}},function(h,d,f){var v=f(1);d.a=function(p){return Object(v.a)(p)?Array.prototype.slice.call(p):[]}},function(h,d,f){var v={};d.a=function(p){return v[p=p||"g"]?v[p]+=1:v[p]=1,p+v[p]}},function(h,d,f){d.a=function(){}},function(h,d,f){d.a=function(v){return v}},function(h,d,f){d.a=function(g){return Object(v.a)(g)?0:Object(p.a)(g)?g.length:Object.keys(g).length};var v=f(6),p=f(1)},function(h,d,f){var v=(function(){function p(){this.map={}}return p.prototype.has=function(g){return this.map[g]!==void 0},p.prototype.get=function(g,y){var m=this.map[g];return m===void 0?y:m},p.prototype.set=function(g,y){this.map[g]=y},p.prototype.clear=function(){this.map={}},p.prototype.delete=function(g){delete this.map[g]},p.prototype.size=function(){return Object.keys(this.map).length},p})();d.a=v},function(h,d){function f(p,g,y,m){m===void 0&&(m=[]);var b=this;b.w=p||0,b.h=g||0,b.y=y||0,b.x=0,b.c=m||[],b.cs=m.length,b.prelim=0,b.mod=0,b.shift=0,b.change=0,b.tl=null,b.tr=null,b.el=null,b.er=null,b.msel=0,b.mser=0}function v(p,g){var y=(function m(b,x){var S=x?b.y:b.x;return b.children.forEach((function(C){S=Math.min(m(C,x),S)})),S})(p,g);(function m(b,x,S){S?b.y+=x:b.x+=x,b.children.forEach((function(C){m(C,x,S)}))})(p,-y,g)}f.fromNode=function(p,g){if(!p)return null;var y=[];return p.children.forEach((function(m){y.push(f.fromNode(m,g))})),g?new f(p.height,p.width,p.x,y):new f(p.width,p.height,p.y,y)},h.exports=function(p,g){g===void 0&&(g={});var y=g.isHorizontal;function m(O){O.cs===0?(O.el=O,O.er=O,O.msel=O.mser=0):(O.el=O.c[0].el,O.msel=O.c[0].msel,O.er=O.c[O.cs-1].er,O.mser=O.c[O.cs-1].mser)}function b(O,_,B){for(var z=O.c[_-1],Y=z.mod,X=O.c[_],K=X.mod;z!==null&&X!==null;){w(z)>B.low&&(B=B.nxt);var G=Y+z.prelim+z.w-(K+X.prelim);G>0&&(K+=G,x(O,_,B.index,G));var tt=w(z),H=w(X);tt<=H&&(z=C(z))!==null&&(Y+=z.mod),tt>=H&&(X=S(X))!==null&&(K+=X.mod)}!z&&X?(function(q,J,rt,ft){var wt=q.c[0].el;wt.tl=rt;var mt=ft-rt.mod-q.c[0].msel;wt.mod+=mt,wt.prelim-=mt,q.c[0].el=q.c[J].el,q.c[0].msel=q.c[J].msel})(O,_,X,K):z&&!X&&(function(q,J,rt,ft){var wt=q.c[J].er;wt.tr=rt;var mt=ft-rt.mod-q.c[J].mser;wt.mod+=mt,wt.prelim-=mt,q.c[J].er=q.c[J-1].er,q.c[J].mser=q.c[J-1].mser})(O,_,z,Y)}function x(O,_,B,z){O.c[_].mod+=z,O.c[_].msel+=z,O.c[_].mser+=z,(function(Y,X,K,G){if(K!==X-1){var tt=X-K;Y.c[K+1].shift+=G/tt,Y.c[X].shift-=G/tt,Y.c[X].change-=G-G/tt}})(O,_,B,z)}function S(O){return O.cs===0?O.tl:O.c[0]}function C(O){return O.cs===0?O.tr:O.c[O.cs-1]}function w(O){return O.y+O.h}function I(O,_,B){for(;B!==null&&O>=B.low;)B=B.nxt;return{low:O,index:_,nxt:B}}(function O(_,B,z){z===void 0&&(z=0),B?(_.x=z,z+=_.width):(_.y=z,z+=_.height),_.children.forEach((function(Y){O(Y,B,z)}))})(p,y);var T=f.fromNode(p,y);return(function O(_){if(_.cs!==0){O(_.c[0]);for(var B=I(w(_.c[0].el),0,null),z=1;z<_.cs;++z){O(_.c[z]);var Y=w(_.c[z].er);b(_,z,B),B=I(Y,z,B)}(function(X){X.prelim=(X.c[0].prelim+X.c[0].mod+X.c[X.cs-1].mod+X.c[X.cs-1].prelim+X.c[X.cs-1].w)/2-X.w/2})(_),m(_)}else m(_)})(T),(function O(_,B){B+=_.mod,_.x=_.prelim+B,(function(Y){for(var X=0,K=0,G=0;G<Y.cs;G++)X+=Y.c[G].shift,K+=X+Y.c[G].change,Y.c[G].mod+=K})(_);for(var z=0;z<_.cs;z++)O(_.c[z],B)})(T,0),(function O(_,B,z){z?B.y=_.x:B.x=_.x,_.c.forEach((function(Y,X){O(Y,B.children[X],z)}))})(T,p,y),v(p,y),p}},function(h,d,f){var v=f(11),p=f(115),g=f(17),y=f(7),m=(function(x){var S,C;function w(){return x.apply(this,arguments)||this}return C=x,(S=w).prototype=Object.create(C.prototype),S.prototype.constructor=S,S.__proto__=C,w.prototype.execute=function(){return this.rootNode.width=0,g(this.rootNode,this.options,p)},w})(v),b={};h.exports=function(x,S){return S=y.assign({},b,S),new m(x,S).execute()}},function(h,d,f){var v=f(7);function p(y,m){m===void 0&&(m=[]);var b=this;b.x=b.y=0,b.leftChild=b.rightChild=null,b.height=0,b.children=m}var g={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};h.exports=function(y,m){m===void 0&&(m={}),m=v.assign({},g,m);var b,x=0,S=(function C(w){if(!w)return null;w.width=0,w.depth&&w.depth>x&&(x=w.depth);var I=w.children,T=I.length,O=new p(w.height,[]);return I.forEach((function(_,B){var z=C(_);O.children.push(z),B===0&&(O.leftChild=z),B===T-1&&(O.rightChild=z)})),O.originNode=w,O.isLeaf=w.isLeaf(),O})(y);return(function C(w){if(w.isLeaf||w.children.length===0)w.drawingDepth=x;else{var I=w.children.map((function(O){return C(O)})),T=Math.min.apply(null,I);w.drawingDepth=T-1}return w.drawingDepth})(S),(function C(w){w.x=w.drawingDepth*m.rankSep,w.isLeaf?(w.y=0,b&&(w.y=b.y+b.height+m.nodeSep,w.originNode.parent!==b.originNode.parent&&(w.y+=m.subTreeSep)),b=w):(w.children.forEach((function(I){C(I)})),w.y=(w.leftChild.y+w.rightChild.y)/2)})(S),(function C(w,I,T){T?(I.x=w.x,I.y=w.y):(I.x=w.y,I.y=w.x),w.children.forEach((function(O,_){C(O,I.children[_],T)}))})(S,y,m.isHorizontal),y}},function(h,d,f){var v=f(11),p=f(117),g=f(30),y=f(7),m=["LR","RL","H"],b=m[0],x=(function(C){var w,I;function T(){return C.apply(this,arguments)||this}return I=C,(w=T).prototype=Object.create(I.prototype),w.prototype.constructor=w,w.__proto__=I,T.prototype.execute=function(){var O=this.options,_=this.rootNode;O.isHorizontal=!0;var B=O.indent,z=B===void 0?20:B,Y=O.dropCap,X=Y===void 0||Y,K=O.direction||b;if(m.indexOf(K)===-1)throw new TypeError("Invalid direction: "+K);if(K===m[0])p(_,z,X);else if(K===m[1])p(_,z,X),_.right2left();else if(K===m[2]){var G=g(_,O),tt=G.left,H=G.right;p(tt,z,X),tt.right2left(),p(H,z,X);var q=tt.getBoundingBox();H.translate(q.width,0),_.x=H.x-_.width/2}return _},T})(v),S={};h.exports=function(C,w){return w=y.assign({},S,w),new x(C,w).execute()}},function(h,d){h.exports=function(f,v,p){var g=null;f.eachNode((function(y){(function(m,b,x,S){var C=typeof x=="function"?x(m):x*m.depth;if(!S)try{if(m.id===m.parent.children[0].id)return m.x+=C,void(m.y=b?b.y:0)}catch{}m.x+=C,m.y=b?b.y+b.height:0})(y,g,v,p),g=y}))}},function(h,d,f){var v=f(11),p=f(119),g=f(17),y=f(7),m=(function(x){var S,C;function w(){return x.apply(this,arguments)||this}return C=x,(S=w).prototype=Object.create(C.prototype),S.prototype.constructor=S,S.__proto__=C,w.prototype.execute=function(){return g(this.rootNode,this.options,p)},w})(v),b={};h.exports=function(x,S){return S=y.assign({},b,S),new m(x,S).execute()}},function(h,d,f){var v=f(7),p={getSubTreeSep:function(){return 0}};h.exports=function(g,y){y===void 0&&(y={}),y=v.assign({},p,y),g.parent={x:0,width:0,height:0,y:0},g.BFTraverse((function(m){m.x=m.parent.x+m.parent.width})),g.parent=null,(function m(b,x){var S=0;return b.children.length?b.children.forEach((function(C){S+=m(C,x)})):S=b.height,b._subTreeSep=x.getSubTreeSep(b.data),b.totalHeight=Math.max(b.height,S)+2*b._subTreeSep,b.totalHeight})(g,y),g.startY=0,g.y=g.totalHeight/2-g.height/2,g.eachNode((function(m){var b=m.children,x=b.length;if(x){var S=b[0];if(S.startY=m.startY+m._subTreeSep,x===1)S.y=m.y+m.height/2-S.height/2;else{S.y=S.startY+S.totalHeight/2-S.height/2;for(var C=1;C<x;C++){var w=b[C];w.startY=b[C-1].startY+b[C-1].totalHeight,w.y=w.startY+w.totalHeight/2-w.height/2}}}})),(function m(b){var x=b.children,S=x.length;if(S){x.forEach((function(_){m(_)}));var C=x[0],w=x[S-1],I=w.y-C.y+w.height,T=0;if(x.forEach((function(_){T+=_.totalHeight})),I>b.height)b.y=C.y+I/2-b.height/2;else if(x.length!==1||b.height>T){var O=b.y+(b.height-I)/2-C.y;x.forEach((function(_){_.translate(0,O)}))}else b.y=(C.y+C.height/2+w.y+w.height/2)/2-b.height/2}})(g)}}])},c(n)==="object"&&c(a)==="object"?a.exports=l():(s=[],(u=typeof(o=l)=="function"?o.apply(n,s):o)===void 0||(a.exports=u))}).call(this,i(56)(e))},224:function(e,n,i){i.r(n);var a=i(1),o=i(121),s=i.n(o),u=i(0);n.default=function(l){var c=l.Graph,h=l.Util,d=h.radialLayout,f=h.traverseTree;return(function(v){function p(g){var y=v.call(this,g)||this;return y.layoutAnimating=!1,y.set("removeList",[]),y.set("layoutMethod",y.getLayout()),y}return Object(a.c)(p,v),p.prototype.getLayout=function(){var g=this.get("layout");return g?typeof g=="function"?g:(g.type||(g.type="dendrogram"),g.direction||(g.direction="TB"),g.radial?function(y){var m=s.a[g.type](y,g);return d(m),m}:function(y){return s.a[g.type](y,g)}):null},p.indexOfChild=function(g,y){var m=-1;return Object(u.each)(g,(function(b,x){if(y===b.id)return m=x,!1})),m},p.prototype.getDefaultCfg=function(){var g=v.prototype.getDefaultCfg.call(this);return g.animate=!0,g},p.prototype.innerAddChild=function(g,y,m){var b=this,x=g.data;x&&(x.x=g.x,x.y=g.y,x.depth=g.depth);var S=b.addItem("node",x,!1);if(y){if(S.set("parent",y),m){var C=y.get("originAttrs");if(C)S.set("originAttrs",C);else{var w=y.getModel();S.set("originAttrs",{x:w.x,y:w.y})}}var I=y.get("children");I?I.push(S):y.set("children",[S]),b.addItem("edge",{source:y,target:S,id:y.get("id")+":"+S.get("id")},!1)}return Object(u.each)(g.children||[],(function(T){b.innerAddChild(T,S,m)})),b.emit("afteraddchild",{item:S,parent:y}),S},p.prototype.innerUpdateChild=function(g,y,m){var b=this,x=b.findById(g.id);if(x){Object(u.each)(g.children||[],(function(_){b.innerUpdateChild(_,x,m)}));var S,C,w=x.get("children");if(w&&w.length>0)for(var I=w.length-1;I>=0;I--){var T=w[I].getModel();p.indexOfChild(g.children||[],T.id)===-1&&(b.innerRemoveChild(T.id,{x:g.x,y:g.y},m),w.splice(I,1))}x.get("originAttrs")&&(S=x.get("originAttrs").x,C=x.get("originAttrs").y);var O=x.getModel();m&&x.set("originAttrs",{x:O.x,y:O.y}),x.set("model",g.data),S===g.x&&C===g.y||x.updatePosition({x:g.x,y:g.y})}else b.innerAddChild(g,y,m)},p.prototype.innerRemoveChild=function(g,y,m){var b=this,x=b.findById(g);if(x)if(Object(u.each)(x.get("children"),(function(C){b.innerRemoveChild(C.getModel().id,y,m)})),m){var S=x.getModel();x.set("to",y),x.set("originAttrs",{x:S.x,y:S.y}),b.get("removeList").push(x)}else b.removeItem(x)},p.prototype.changeData=function(g){var y=this;this.getNodes().map((function(m){return y.clearItemStates(m)})),this.getEdges().map((function(m){return y.clearItemStates(m)})),g?(y.data(g),y.render()):y.layout(this.get("fitView"))},p.prototype.changeLayout=function(g){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(g)},p.prototype.updateLayout=function(g){g?(this.set("layout",g),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},p.prototype.refreshLayout=function(g){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(g)},p.prototype.layout=function(g){var y=this.get("data"),m=this.get("layoutMethod")(y,this.get("layout")),b=this.get("animate");this.emit("beforerefreshlayout",{data:y,layoutData:m}),this.emit("beforelayout"),this.innerUpdateChild(m,void 0,b),g&&this.get("viewController").fitView(),b?this.layoutAnimate(m):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:y,layoutData:m}),this.emit("afterlayout")},p.prototype.addChild=function(g,y){this.emit("beforeaddchild",{model:g,parent:y}),Object(u.isString)(y)||(y=y.get("id"));var m=this.findDataById(y);m&&(m.children||(m.children=[]),m.children.push(g),this.changeData())},p.prototype.updateChildren=function(g,y){y&&this.findById(y)?(this.findDataById(y).children=g,this.changeData()):console.warn("Update children failed! There is no node with id '"+y+"'")},p.prototype.updateChild=function(g,y){if(y&&this.findById(y)){var m=this.findDataById(y),b=this.findById(g.id);if(m.children||(m.children=[]),b){var x=p.indexOfChild(m.children,g.id);m.children[x]=g}else m.children.push(g);this.changeData()}else this.changeData(g)},p.prototype.removeChild=function(g){var y=this.findById(g);if(y){var m=y.get("parent");if(m&&!m.destroyed){var b=this.findDataById(m.get("id")),x=b&&b.children||[],S=y.getModel(),C=p.indexOfChild(x,S.id);x.splice(C,1)}this.changeData()}},p.prototype.findDataById=function(g,y){var m=this;if(y||(y=m.get("data")),g===y.id)return y;var b=null;return Object(u.each)(y.children||[],(function(x){return x.id===g?(b=x,!1):!(b=m.findDataById(g,x))&&void 0})),b},p.prototype.layoutAnimate=function(g,y){var m=this,b=this.get("animateCfg");m.emit("beforeanimate",{data:g}),m.getEdges().forEach((function(x){var S=x.get("model");S.sourceAnchor||(S.sourceAnchor=x.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(x){f(g,(function(S){var C=m.findById(S.id);if(C){var w=C.get("originAttrs"),I=C.get("model");if(w||(w={x:I.x,y:I.y},C.set("originAttrs",w)),y){var T=y(C,x,w,g);C.set("model",Object.assign(I,T))}else I.x=w.x+(S.x-w.x)*x,I.y=w.y+(S.y-w.y)*x}return!0})),Object(u.each)(m.get("removeList"),(function(S){var C=S.getModel(),w=S.get("originAttrs"),I=S.get("to");C.x=w.x+(I.x-w.x)*x,C.y=w.y+(I.y-w.y)*x})),m.refreshPositions()}),{duration:b.duration,easing:b.ease,callback:function(){Object(u.each)(m.getNodes(),(function(x){x.set("originAttrs",null)})),Object(u.each)(m.get("removeList"),(function(x){m.removeItem(x)})),m.set("removeList",[]),b.callback&&b.callback(),m.emit("afteranimate",{data:g})},delay:b.delay})},p.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},p.prototype.isLayoutAnimating=function(){return this.layoutAnimating},p.prototype.render=function(){if(!this.get("data"))throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},p.prototype.save=function(){return this.get("data")},p})(c)}},56:function(e,n){e.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}}}).default}))})(Do)),Do.exports}var Qk=Zk();const Jk=uy(Qk),t5=(r,t)=>{const e=r.__vccOpts||r;for(const[n,i]of t)e[n]=i;return e},e5={key:0,class:"error-overlay"},r5={key:1,class:"modal-overlay"},n5={class:"modal"},i5={class:"form-group"},a5={class:"form-group"},o5={class:"form-group"},s5={class:"modal-actions"},u5={__name:"FamilyTree",setup(r){$r.registerGraph("TreeGraph",Jk);const t=Ii(null);let e=null;const n=Ii(null),i=Ii(""),a={id:"root",label:"",type:"root-node",children:[{id:"c1",label:"",tag:"",desc:". ",children:[{id:"c1-1",label:"",tag:"",desc:" ",children:[{id:"c1-1-1",label:"",tag:"",desc:" "}]},{id:"c1-2",label:"",tag:"",desc:" "}]},{id:"c2",label:"",tag:"",desc:"  "}]};$r.registerNode("family-node",{draw(h,d){const p=d.addShape("rect",{attrs:{x:-70,y:0,width:140,height:160,fill:"#fffbf0",stroke:"#e6d5b8",radius:8,lineWidth:2},name:"main-box",isKeyShape:!0});if(d.addShape("path",{attrs:{path:[["M",-140/2+10,20],["Q",-140/4,10,0,20],["Q",140/4,30,140/2-10,20]],stroke:"#cba26c",lineWidth:1,opacity:.6},name:"deco-top"}),d.addShape("text",{attrs:{text:h.label,x:0,y:50,textAlign:"center",textBaseline:"middle",fill:"#333",fontSize:16,fontWeight:"bold"},name:"title"}),h.tag&&(d.addShape("rect",{attrs:{x:-30,y:65,width:60,height:20,radius:10,fill:"#c29056"},name:"badge-bg"}),d.addShape("text",{attrs:{text:h.tag,x:0,y:75,textAlign:"center",textBaseline:"middle",fill:"#fff",fontSize:10},name:"badge-text"})),d.addShape("path",{attrs:{path:[["M",-140/2+10,140],["Q",0,130,140/2-10,140]],stroke:"#cba26c",lineWidth:1,opacity:.6},name:"deco-bottom"}),h.children&&h.children.length>0&&(d.addShape("path",{attrs:{path:[["M",0,160],["L",0,175]],stroke:"#999",lineWidth:1,lineDash:[2,2]},name:"collapse-line"}),d.addShape("circle",{attrs:{x:0,y:175,r:20,fill:"transparent",cursor:"pointer"},name:"collapse-bg-hit"}),d.addShape("circle",{attrs:{x:0,y:175,r:8,fill:"#f4ecd8",stroke:"#999",lineWidth:1,cursor:"pointer"},name:"collapse-bg"}),d.addShape("text",{attrs:{x:0,y:175,text:h.collapsed?"+":"-",textAlign:"center",textBaseline:"middle",fill:"#666",fontSize:12,cursor:"pointer"},name:"collapse-text"})),h.desc){const g=h.children&&h.children.length>0,y=g?195:175;d.addShape("text",{attrs:{text:h.desc,x:0,y,textAlign:"center",textBaseline:"top",fill:"#555",fontSize:12},name:"desc"})}return p}}),$r.registerNode("root-node",{draw(h,d){const p=d.addShape("rect",{attrs:{x:-60,y:0,width:120,height:50,fill:"#f4ecd8",stroke:"#8b6b43",radius:25,lineWidth:2},name:"root-box",isKeyShape:!0});return d.addShape("text",{attrs:{text:h.label,x:0,y:50/2,textAlign:"center",textBaseline:"middle",fill:"#3b2e2a",fontSize:18,fontWeight:"bold"},name:"root-text"}),p}}),$r.registerEdge("flow-line",{draw(h,d){const f=h.startPoint,v=h.endPoint,{style:p}=h,g=[["M",f.x,f.y],["L",f.x,(f.y+v.y)/2],["L",v.x,(f.y+v.y)/2],["L",v.x,v.y]];return d.addShape("path",{attrs:{stroke:"#999",lineWidth:1,lineDash:[2,2],path:g,...p},name:"path-shape"})}}),sp(()=>{try{if(console.log("F6 Version:",$r.version),!t.value)return;const h=t.value.scrollWidth||window.innerWidth,d=t.value.scrollHeight||window.innerHeight;e=new $r.TreeGraph({container:t.value,width:h,height:d,pixelRatio:window.devicePixelRatio,linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas","drag-node"]},defaultNode:{type:"family-node"},defaultEdge:{type:"flow-line",style:{stroke:"#999"}},layout:{type:"compactBox",direction:"TB",getId:p=>p.id,getHeight:()=>160,getWidth:()=>140,getVGap:()=>60,getHGap:()=>20},nodeStateStyles:{selected:{stroke:"#d45d37",lineWidth:3,shadowBlur:10,shadowColor:"#d45d37"}}}),e.data(a),e.render(),e.fitView(),e.on("collapse-bg:click",o),e.on("collapse-bg:tap",o),e.on("collapse-bg-hit:click",o),e.on("collapse-bg-hit:tap",o),e.on("collapse-text:click",o),e.on("collapse-text:tap",o);const f=p=>{const{item:g}=p;!g||g.getType()!=="node"||(n.value&&n.value!==g&&e.setItemState(n.value,"selected",!1),n.value=g,e.setItemState(n.value,"selected",!0))};e.on("node:click",f),e.on("node:tap",f);const v=p=>{n.value&&(e.setItemState(n.value,"selected",!1),n.value=null)};e.on("canvas:click",v),e.on("canvas:tap",v)}catch(h){console.error(h),i.value=h.toString()+"\\n"+h.stack}});const o=h=>{const d=h.item;if(d.getType&&d.getType()==="node"){const v=d.getModel().collapsed;e.updateItem(d,{collapsed:!v}),e.layout()}},s=Ii(!1),u=Ii({label:"",tag:"",desc:""}),l=()=>{if(!n.value){alert(" (Please select a parent node first)");return}u.value={label:"",tag:"",desc:""},s.value=!0},c=()=>{if(!u.value.label){alert("");return}const h={id:`n-${Date.now()}`,label:u.value.label,tag:u.value.tag,desc:u.value.desc||" ",children:[]};e.addChild(h,n.value),e.refreshItem(n.value),s.value=!1};return(h,d)=>(na(),eu(sr,null,[Ht("div",{class:"tree-container",ref_key:"container",ref:t},null,512),i.value?(na(),eu("div",e5,Dv(i.value),1)):xc("",!0),Ht("div",{class:"controls"},[Ht("button",{class:"btn-add",onClick:l},[...d[4]||(d[4]=[Ht("div",{class:"btn-bubble"},[Ht("span",null,[ji(""),Ht("br"),ji("")])],-1)])]),d[5]||(d[5]=Ht("button",{class:"btn-add"},[Ht("div",{class:"btn-bubble red"},[Ht("span",null,[ji(""),Ht("br"),ji("")])])],-1))]),s.value?(na(),eu("div",r5,[Ht("div",n5,[d[9]||(d[9]=Ht("h3",null,"",-1)),Ht("div",i5,[d[6]||(d[6]=Ht("label",null," (: )",-1)),Ks(Ht("input",{"onUpdate:modelValue":d[0]||(d[0]=f=>u.value.label=f),placeholder:""},null,512),[[au,u.value.label]])]),Ht("div",a5,[d[7]||(d[7]=Ht("label",null," (: )",-1)),Ks(Ht("input",{"onUpdate:modelValue":d[1]||(d[1]=f=>u.value.tag=f),placeholder:""},null,512),[[au,u.value.tag]])]),Ht("div",o5,[d[8]||(d[8]=Ht("label",null," (:  )",-1)),Ks(Ht("input",{"onUpdate:modelValue":d[2]||(d[2]=f=>u.value.desc=f),placeholder:""},null,512),[[au,u.value.desc]])]),Ht("div",s5,[Ht("button",{onClick:d[3]||(d[3]=f=>s.value=!1),class:"btn-cancel"},""),Ht("button",{onClick:c,class:"btn-confirm"},"")])])])):xc("",!0)],64))}},l5=t5(u5,[["__scopeId","data-v-7072c4fa"]]),f5={__name:"App",setup(r){return(t,e)=>(na(),kp(l5))}};Q1(f5).mount("#app");
